âœ… Available Models:
1. alias-reasoning
2. alias-ha
3. meta-llama/Llama-3.3-70B-Instruct
4. meta-llama/Llama-3.1-8B-Instruct
5. Qwen/Qwen2-VL-7B-Instruct
6. alias-vision
7. openGPT-X/Teuken-7B-instruct-research-v0.4
8. deepseek-ai/DeepSeek-Coder-V2-Lite-Instruct
9. Qwen/Qwen3-Coder-30B-A3B-Instruct
10. alias-code
11. Qwen/Qwen3-Embedding-4B
12. BAAI/bge-reranker-v2-m3
13. stabilityai/stable-diffusion-3.5-large-turbo
14. alias-image-generation
15. black-forest-labs/FLUX.1-dev
16. openai/whisper-large-v3
17. Kokoro-82M
18. tts-1-hd
19. deepseek-ai/DeepSeek-R1
20. openai/gpt-oss-120b
21. meta-llama/Llama-4-Scout-17B-16E-Instruct

ðŸ‘‰ Select a model number (default = 1): 
âœ… Using model: openGPT-X/Teuken-7B-instruct-research-v0.4

ðŸ” Enter a scientific query or topic: 
ðŸ”Ž Citation Function Classification:
{
  "citation_functions": [
    "Background",
    "Motivation"
  ],
  "justification": "The query seeks to understand current limitations in understanding supernova explosions and their interactions with the circumstellar medium, and asks about potential future research directions."
}

âœ… Saved to classified_outputs.jsonl
ðŸ”§ Ready for retrieval module (handled in a separate file).
âš¡ SKIP_REINDEX=1 â€” using existing FAISS index + meta; not scanning raw JSONL shards.
âœ… Top-k candidates (FAISS): /data/horse/ws/anpa439f-Function_Retrieval_Citation/Research_Project/RetrievalAugmentedGeneration/outputs/topk_candidates_query.jsonl
[12:40:17] main | args: Namespace(max_check=10, debug=True)
[12:40:17] read_last_jsonl | path= classified_outputs.jsonl
[12:40:17] read_last_jsonl | total_lines= 1
[12:40:17] main | query='What limitations in current understanding of supernova explosions and their interactions with the circumstellar medium motivate further research and potential future work in this area?' | funcs=['Background', 'Motivation']
[12:40:19] main | core_terms= ['supernova', 'circumstellar medium', 'explosion', 'interaction']
[12:40:19] load_topk_jsonl | path= /data/horse/ws/anpa439f-Function_Retrieval_Citation/Research_Project/outputs/topk_candidates_query.jsonl
[12:40:19] load_topk_jsonl | rows= 20
[12:40:19] load_topk_jsonl | first: rank= 0 paper_id= astro-ph/0103015 title_snip='Supernova Explosions and Neutron Star Formation' abs_len= 1135
[12:40:19] main | running function= Background
[12:40:19] select | function= Background | candidates_in= 20
[12:40:19] select | core_terms= ['supernova', 'circumstellar medium', 'explosion', 'interaction']
[12:40:19] select | no cosine prune; kept=20/20
[12:40:19] select | pool_size= 10 | ranks= [0, 1, 2, 3, 4, 5, 6, 7, 8, 9] | pids= ['astro-ph/0103015', 'astro-ph/0102212', 'hep-ph/0104094', 'astro-ph/0101018', 'astro-ph/0104156', 'astro-ph/0101043', 'astro-ph/0102087', 'astro-ph/0103075', 'astro-ph/0103412', 'astro-ph/0103461']
[12:40:19] select | verify relaxed 1/10
[12:40:19] verify | func= Background | rank= 0 | pid= astro-ph/0103015 | title_snip='Supernova Explosions and Neutron Star Formation' | abs_len= 1135
[12:40:22] verify | result supports= True fit= 0.80 top= 0.90 invalid= â€” cue_hint= False
[12:40:22] select | verify relaxed 2/10
[12:40:22] verify | func= Background | rank= 1 | pid= astro-ph/0102212 | title_snip='Theoretical Implications of the Gamma-Ray Burst - Supernova Connection' | abs_len= 721
[12:40:25] verify | result supports= True fit= 0.80 top= 0.90 invalid= â€” cue_hint= False
[12:40:25] select | verify relaxed 3/10
[12:40:25] verify | func= Background | rank= 2 | pid= hep-ph/0104094 | title_snip='Supernova Constraints on Neutrino Mass and Mixing' | abs_len= 396
[12:40:29] verify | result supports= False fit= 0.00 top= 0.20 invalid= â€” cue_hint= False
[12:40:29] select | verify relaxed 4/10
[12:40:29] verify | func= Background | rank= 3 | pid= astro-ph/0101018 | title_snip='Science Prospects for SPI' | abs_len= 1822
[12:40:32] verify | result supports= False fit= 0.00 top= 0.50 invalid= â€” cue_hint= False
[12:40:32] select | verify relaxed 5/10
[12:40:32] verify | func= Background | rank= 4 | pid= astro-ph/0104156 | title_snip='SN1993J VLBI (I): The Center of the Explosion and a Limit on Anisotropâ€¦' | abs_len= 1795
[12:40:36] verify | result supports= True fit= 0.80 top= 0.90 invalid= â€” cue_hint= False
[12:40:36] select | verify relaxed 6/10
[12:40:36] verify | func= Background | rank= 5 | pid= astro-ph/0101043 | title_snip='Young Supernova Remnants: Issues and Prospects' | abs_len= 386
[12:40:39] verify | result supports= True fit= 0.80 top= 0.90 invalid= â€” cue_hint= False
[12:40:39] select | verify relaxed 7/10
[12:40:39] verify | func= Background | rank= 6 | pid= astro-ph/0102087 | title_snip='The X-ray nebula of the filled center supernova remnant 3C58 and its
 â€¦' | abs_len= 1417
[12:40:43] verify | result supports= False fit= 0.00 top= 0.50 invalid= â€” cue_hint= False
[12:40:43] select | verify relaxed 8/10
[12:40:43] verify | func= Background | rank= 7 | pid= astro-ph/0103075 | title_snip='Supernova constraints on spatial variations of the vacuum energy densiâ€¦' | abs_len= 810
[12:40:46] verify | result supports= False fit= 0.00 top= 0.20 invalid= â€” cue_hint= False
[12:40:46] select | verify relaxed 9/10
[12:40:46] verify | func= Background | rank= 8 | pid= astro-ph/0103412 | title_snip='Thermal X-ray emission of the remnants of ashperical Supernova
  exploâ€¦' | abs_len= 518
[12:40:49] verify | result supports= False fit= 0.00 top= 0.80 invalid= â€” cue_hint= False
[12:40:49] select | verify relaxed 10/10
[12:40:49] verify | func= Background | rank= 9 | pid= astro-ph/0103461 | title_snip='Observations of Circumstellar Disks' | abs_len= 1289
[12:40:52] verify | result supports= False fit= 0.00 top= 0.00 invalid= no_quote cue_hint= False

================================================================================
FUNCTION: Background
QUERY   : What limitations in current understanding of supernova explosions and their interactions with the circumstellar medium motivate further research and potential future work in this area?
- WINNER: astro-ph/0103015 | Supernova Explosions and Neutron Star Formation
- QUOTE : state-of-the-art spherical models do not yield explosions
- WHY   : sufficient
[12:40:53] main | running function= Motivation
[12:40:53] select | function= Motivation | candidates_in= 20
[12:40:53] select | core_terms= ['supernova', 'circumstellar medium', 'explosion', 'interaction']
[12:40:53] select | no cosine prune; kept=20/20
[12:40:53] select | pool_size= 10 | ranks= [0, 1, 2, 3, 4, 5, 6, 7, 8, 9] | pids= ['astro-ph/0103015', 'astro-ph/0102212', 'hep-ph/0104094', 'astro-ph/0101018', 'astro-ph/0104156', 'astro-ph/0101043', 'astro-ph/0102087', 'astro-ph/0103075', 'astro-ph/0103412', 'astro-ph/0103461']
[12:40:53] select | verify relaxed 1/10
[12:40:53] verify | func= Motivation | rank= 0 | pid= astro-ph/0103015 | title_snip='Supernova Explosions and Neutron Star Formation' | abs_len= 1135
[12:40:56] verify | result supports= True fit= 0.80 top= 0.90 invalid= â€” cue_hint= False
[12:40:56] select | verify relaxed 2/10
[12:40:56] verify | func= Motivation | rank= 1 | pid= astro-ph/0102212 | title_snip='Theoretical Implications of the Gamma-Ray Burst - Supernova Connection' | abs_len= 721
[12:40:59] verify | result supports= True fit= 0.80 top= 0.90 invalid= â€” cue_hint= False
[12:40:59] select | verify relaxed 3/10
[12:40:59] verify | func= Motivation | rank= 2 | pid= hep-ph/0104094 | title_snip='Supernova Constraints on Neutrino Mass and Mixing' | abs_len= 396
[12:41:03] verify | result supports= False fit= 0.00 top= 0.20 invalid= â€” cue_hint= False
[12:41:03] select | verify relaxed 4/10
[12:41:03] verify | func= Motivation | rank= 3 | pid= astro-ph/0101018 | title_snip='Science Prospects for SPI' | abs_len= 1822
[12:41:06] verify | result supports= False fit= 0.00 top= 0.50 invalid= no_quote cue_hint= False
[12:41:06] select | verify relaxed 5/10
[12:41:06] verify | func= Motivation | rank= 4 | pid= astro-ph/0104156 | title_snip='SN1993J VLBI (I): The Center of the Explosion and a Limit on Anisotropâ€¦' | abs_len= 1795
[12:41:09] verify | result supports= True fit= 0.80 top= 0.90 invalid= â€” cue_hint= False
[12:41:09] select | verify relaxed 6/10
[12:41:09] verify | func= Motivation | rank= 5 | pid= astro-ph/0101043 | title_snip='Young Supernova Remnants: Issues and Prospects' | abs_len= 386
[12:41:12] verify | result supports= True fit= 0.80 top= 0.90 invalid= â€” cue_hint= True
[12:41:12] select | verify relaxed 7/10
[12:41:12] verify | func= Motivation | rank= 6 | pid= astro-ph/0102087 | title_snip='The X-ray nebula of the filled center supernova remnant 3C58 and its
 â€¦' | abs_len= 1417
[12:41:15] verify | result supports= False fit= 0.00 top= 0.50 invalid= no_quote cue_hint= False
[12:41:15] select | verify relaxed 8/10
[12:41:15] verify | func= Motivation | rank= 7 | pid= astro-ph/0103075 | title_snip='Supernova constraints on spatial variations of the vacuum energy densiâ€¦' | abs_len= 810
[12:41:18] verify | result supports= False fit= 0.00 top= 0.50 invalid= â€” cue_hint= False
[12:41:18] select | verify relaxed 9/10
[12:41:18] verify | func= Motivation | rank= 8 | pid= astro-ph/0103412 | title_snip='Thermal X-ray emission of the remnants of ashperical Supernova
  exploâ€¦' | abs_len= 518
[12:41:21] verify | result supports= False fit= 0.00 top= 0.50 invalid= no_quote cue_hint= False
[12:41:21] select | verify relaxed 10/10
[12:41:21] verify | func= Motivation | rank= 9 | pid= astro-ph/0103461 | title_snip='Observations of Circumstellar Disks' | abs_len= 1289
[12:41:24] verify | result supports= False fit= 0.00 top= 0.00 invalid= no_quote cue_hint= False

================================================================================
FUNCTION: Motivation
QUERY   : What limitations in current understanding of supernova explosions and their interactions with the circumstellar medium motivate further research and potential future work in this area?
- WINNER: astro-ph/0101043 | Young Supernova Remnants: Issues and Prospects
- QUOTE : several challenges
- WHY   : sufficient

================================================================================
UNIFIED ANSWER (1â€“2 sentences, tagged):
Current understanding of supernova explosions is limited by the lack of a proven scenario for the collapse and explosion of massive stars, with uncertainties in neutrino interactions and energy transport [Background] (astro-ph/0103015). Further research is motivated by the need to address challenges such as understanding the dynamics of young supernova remnants and inferring the nature of the supernova and its progenitor star from observations [Motivation] (astro-ph/0101043).

ðŸ“„ Saved: outputs/function_selection_results.json
ðŸ“„ Saved: outputs/function_selection_results.jsonl
ðŸ“ Unified answer: outputs/function_answer_unified.txt
-> /home/anpa439f/anaconda3/envs/myenv/bin/python3 /data/horse/ws/anpa439f-Function_Retrieval_Citation/Research_Project/RetrievalAugmentedGeneration/classifying_question.py  (cwd=/data/horse/ws/anpa439f-Function_Retrieval_Citation/Research_Project/RetrievalAugmentedGeneration)
âœ… Saved to classified_outputs.jsonl
ðŸ”§ Ready for retrieval module (.py).
-> /home/anpa439f/anaconda3/envs/myenv/bin/python3 /data/horse/ws/anpa439f-Function_Retrieval_Citation/Research_Project/RetrievalAugmentedGeneration/Retreival_query_based.py --skip-reindex --index /data/horse/ws/anpa439f-Function_Retrieval_Citation/Research_Project/e5_index_subset_1/index.faiss --meta /data/horse/ws/anpa439f-Function_Retrieval_Citation/Research_Project/e5_index_subset_1/meta.parquet --topk 20  (cwd=/data/horse/ws/anpa439f-Function_Retrieval_Citation/Research_Project/RetrievalAugmentedGeneration)
âœ… Top-k candidates: /data/horse/ws/anpa439f-Function_Retrieval_Citation/Research_Project/RetrievalAugmentedGeneration/outputs/topk_candidates_query.jsonl
ðŸ”— Symlinked: /data/horse/ws/anpa439f-Function_Retrieval_Citation/Research_Project/outputs/topk_candidates_query.jsonl -> /data/horse/ws/anpa439f-Function_Retrieval_Citation/Research_Project/RetrievalAugmentedGeneration/outputs/topk_candidates_query.jsonl
-> /home/anpa439f/anaconda3/envs/myenv/bin/python3 /data/horse/ws/anpa439f-Function_Retrieval_Citation/Research_Project/RetrievalAugmentedGeneration/function_based_answer-2_copy.py --debug --max-check 10  (cwd=/data/horse/ws/anpa439f-Function_Retrieval_Citation/Research_Project/RetrievalAugmentedGeneration)

ðŸŽ‰ Pipeline complete.
  â€¢ Classified file : /data/horse/ws/anpa439f-Function_Retrieval_Citation/Research_Project/RetrievalAugmentedGeneration/classified_outputs.jsonl
  â€¢ TopK (canonical): /data/horse/ws/anpa439f-Function_Retrieval_Citation/Research_Project/RetrievalAugmentedGeneration/outputs/topk_candidates_query.jsonl
  â€¢ Final outputs   : /data/horse/ws/anpa439f-Function_Retrieval_Citation/Research_Project/RetrievalAugmentedGeneration/outputs
