âœ… Available Models:
1. alias-reasoning
2. alias-ha
3. meta-llama/Llama-3.3-70B-Instruct
4. meta-llama/Llama-3.1-8B-Instruct
5. Qwen/Qwen2-VL-7B-Instruct
6. alias-vision
7. openGPT-X/Teuken-7B-instruct-research-v0.4
8. deepseek-ai/DeepSeek-Coder-V2-Lite-Instruct
9. Qwen/Qwen3-Coder-30B-A3B-Instruct
10. alias-code
11. Qwen/Qwen3-Embedding-4B
12. BAAI/bge-reranker-v2-m3
13. stabilityai/stable-diffusion-3.5-large-turbo
14. alias-image-generation
15. black-forest-labs/FLUX.1-dev
16. openai/whisper-large-v3
17. Kokoro-82M
18. tts-1-hd
19. deepseek-ai/DeepSeek-R1
20. openai/gpt-oss-120b
21. meta-llama/Llama-4-Scout-17B-16E-Instruct

ðŸ‘‰ Select a model number (default = 1): 
âœ… Using model: openGPT-X/Teuken-7B-instruct-research-v0.4

ðŸ” Enter a scientific query or topic: 
ðŸ”Ž Citation Function Classification:
{
  "citation_functions": [
    "Background",
    "Motivation"
  ],
  "justification": "The query seeks to understand how the spectral analysis of the Vela pulsar compares to and extends existing models of neutron star cooling and emission. It introduces background knowledge and highlights a motivation for further study."
}

âœ… Saved to classified_outputs.jsonl
ðŸ”§ Ready for retrieval module (handled in a separate file).
âš¡ SKIP_REINDEX=1 â€” using existing FAISS index + meta; not scanning raw JSONL shards.
âœ… Top-k candidates (FAISS): /data/horse/ws/anpa439f-Function_Retrieval_Citation/Research_Project/RetrievalAugmentedGeneration/outputs/topk_candidates_query.jsonl
[15:02:01] main | args: Namespace(max_check=10, debug=True)
[15:02:01] read_last_jsonl | path= classified_outputs.jsonl
[15:02:01] read_last_jsonl | total_lines= 1
[15:02:01] main | query='How does the spectral analysis of the Vela pulsar compare to and extend existing models of neutron star cooling and emission?' | funcs=['Background', 'Motivation']
[15:02:03] main | core_terms= ['Vela pulsar', 'neutron star', 'spectral analysis', 'cooling', 'emission']
[15:02:03] load_topk_jsonl | path= /data/horse/ws/anpa439f-Function_Retrieval_Citation/Research_Project/outputs/topk_candidates_query.jsonl
[15:02:03] load_topk_jsonl | rows= 20
[15:02:03] load_topk_jsonl | first: rank= 0 paper_id= astro-ph/0103171 title_snip='The X-ray Spectrum of the Vela Pulsar Resolved with Chandra' abs_len= 1771
[15:02:03] main | running function= Background
[15:02:03] select | function= Background | candidates_in= 20
[15:02:03] select | core_terms= ['Vela pulsar', 'neutron star', 'spectral analysis', 'cooling', 'emission']
[15:02:03] select | no cosine prune; kept=20/20
[15:02:03] select | pool_size= 10 | ranks= [0, 1, 2, 3, 4, 5, 6, 7, 8, 9] | pids= ['astro-ph/0103171', 'astro-ph/0103273', 'astro-ph/0101339', 'astro-ph/0103140', 'astro-ph/0101044', 'astro-ph/0101246', 'astro-ph/0102047', 'astro-ph/0103227', 'astro-ph/0103316', 'astro-ph/0101257']
[15:02:03] select | verify relaxed 1/10
[15:02:03] verify | func= Background | rank= 0 | pid= astro-ph/0103171 | title_snip='The X-ray Spectrum of the Vela Pulsar Resolved with Chandra' | abs_len= 1771
[15:02:07] verify | result supports= True fit= 0.80 top= 0.90 invalid= â€” cue_hint= False
[15:02:07] select | verify relaxed 2/10
[15:02:07] verify | func= Background | rank= 1 | pid= astro-ph/0103273 | title_snip='Anomalous X-ray Pulsars and Soft gamma-ray Repeaters: Spectral Fits anâ€¦' | abs_len= 1419
[15:02:10] verify | result supports= False fit= 0.00 top= 0.20 invalid= â€” cue_hint= False
[15:02:10] select | verify relaxed 3/10
[15:02:10] verify | func= Background | rank= 2 | pid= astro-ph/0101339 | title_snip='A Ray-Tracing Model of the Vela Pulsar' | abs_len= 463
[15:02:13] verify | result supports= True fit= 0.80 top= 0.90 invalid= â€” cue_hint= False
[15:02:13] select | verify relaxed 4/10
[15:02:13] verify | func= Background | rank= 3 | pid= astro-ph/0103140 | title_snip='Phase Dependent Spectral Variability of 4U1907+09' | abs_len= 939
[15:02:15] verify | result supports= False fit= 0.00 top= 0.00 invalid= no_quote cue_hint= False
[15:02:15] select | verify relaxed 5/10
[15:02:15] verify | func= Background | rank= 4 | pid= astro-ph/0101044 | title_snip='A Doppler Shift model to explain the Cyclotron Line Variability in X-Râ€¦' | abs_len= 683
[15:02:19] verify | result supports= False fit= 0.00 top= 0.20 invalid= â€” cue_hint= False
[15:02:19] select | verify relaxed 6/10
[15:02:19] verify | func= Background | rank= 5 | pid= astro-ph/0101246 | title_snip='Particle Spectra Of Ultra-Relativistic Shock Waves' | abs_len= 768
[15:02:21] verify | result supports= False fit= 0.00 top= 0.00 invalid= no_quote cue_hint= False
[15:02:21] select | verify relaxed 7/10
[15:02:21] verify | func= Background | rank= 6 | pid= astro-ph/0102047 | title_snip='Neutron star cooling in transiently accreting low mass binaries: a newâ€¦' | abs_len= 768
[15:02:24] verify | result supports= False fit= 0.00 top= 0.20 invalid= â€” cue_hint= False
[15:02:24] select | verify relaxed 8/10
[15:02:24] verify | func= Background | rank= 7 | pid= astro-ph/0103227 | title_snip='Surface Emission Properties of Strongly Magnetic Neutron Stars' | abs_len= 1514
[15:02:27] verify | result supports= False fit= 0.00 top= 0.50 invalid= â€” cue_hint= False
[15:02:27] select | verify relaxed 9/10
[15:02:27] verify | func= Background | rank= 8 | pid= astro-ph/0103316 | title_snip='Proton Cyclotron Features in Thermal Spectra of Ultra-magnetized Neutrâ€¦' | abs_len= 1010
[15:02:30] verify | result supports= False fit= 0.00 top= 0.20 invalid= â€” cue_hint= False
[15:02:30] select | verify relaxed 10/10
[15:02:30] verify | func= Background | rank= 9 | pid= astro-ph/0101257 | title_snip='Relativistic superfluid models for rotating neutron stars' | abs_len= 849
[15:02:34] verify | result supports= True fit= 0.80 top= 0.90 invalid= â€” cue_hint= False

================================================================================
FUNCTION: Background
QUERY   : How does the spectral analysis of the Vela pulsar compare to and extend existing models of neutron star cooling and emission?
- WINNER: astro-ph/0103171 | The X-ray Spectrum of the Vela Pulsar Resolved with Chandra
- QUOTE : The effective temperature is lower than that predicted by standard neutron star cooling models
- WHY   : sufficient
[15:02:36] main | running function= Motivation
[15:02:36] select | function= Motivation | candidates_in= 20
[15:02:36] select | core_terms= ['Vela pulsar', 'neutron star', 'spectral analysis', 'cooling', 'emission']
[15:02:36] select | no cosine prune; kept=20/20
[15:02:36] select | pool_size= 10 | ranks= [0, 1, 2, 3, 4, 5, 6, 7, 8, 9] | pids= ['astro-ph/0103171', 'astro-ph/0103273', 'astro-ph/0101339', 'astro-ph/0103140', 'astro-ph/0101044', 'astro-ph/0101246', 'astro-ph/0102047', 'astro-ph/0103227', 'astro-ph/0103316', 'astro-ph/0101257']
[15:02:36] select | verify relaxed 1/10
[15:02:36] verify | func= Motivation | rank= 0 | pid= astro-ph/0103171 | title_snip='The X-ray Spectrum of the Vela Pulsar Resolved with Chandra' | abs_len= 1771
[15:02:40] verify | result supports= True fit= 0.80 top= 0.90 invalid= â€” cue_hint= False
[15:02:40] select | verify relaxed 2/10
[15:02:40] verify | func= Motivation | rank= 1 | pid= astro-ph/0103273 | title_snip='Anomalous X-ray Pulsars and Soft gamma-ray Repeaters: Spectral Fits anâ€¦' | abs_len= 1419
[15:02:43] verify | result supports= False fit= 0.00 top= 0.20 invalid= â€” cue_hint= False
[15:02:43] select | verify relaxed 3/10
[15:02:43] verify | func= Motivation | rank= 2 | pid= astro-ph/0101339 | title_snip='A Ray-Tracing Model of the Vela Pulsar' | abs_len= 463
[15:02:46] verify | result supports= False fit= 0.00 top= 0.80 invalid= â€” cue_hint= False
[15:02:46] select | verify relaxed 4/10
[15:02:46] verify | func= Motivation | rank= 3 | pid= astro-ph/0103140 | title_snip='Phase Dependent Spectral Variability of 4U1907+09' | abs_len= 939
[15:02:49] verify | result supports= False fit= 0.00 top= 0.00 invalid= no_quote cue_hint= False
[15:02:49] select | verify relaxed 5/10
[15:02:49] verify | func= Motivation | rank= 4 | pid= astro-ph/0101044 | title_snip='A Doppler Shift model to explain the Cyclotron Line Variability in X-Râ€¦' | abs_len= 683
[15:02:52] verify | result supports= False fit= 0.00 top= 0.20 invalid= â€” cue_hint= False
[15:02:52] select | verify relaxed 6/10
[15:02:52] verify | func= Motivation | rank= 5 | pid= astro-ph/0101246 | title_snip='Particle Spectra Of Ultra-Relativistic Shock Waves' | abs_len= 768
[15:02:55] verify | result supports= False fit= 0.00 top= 0.00 invalid= no_quote cue_hint= False
[15:02:55] select | verify relaxed 7/10
[15:02:55] verify | func= Motivation | rank= 6 | pid= astro-ph/0102047 | title_snip='Neutron star cooling in transiently accreting low mass binaries: a newâ€¦' | abs_len= 768
[15:02:58] verify | result supports= False fit= 0.00 top= 0.20 invalid= â€” cue_hint= False
[15:02:58] select | verify relaxed 8/10
[15:02:58] verify | func= Motivation | rank= 7 | pid= astro-ph/0103227 | title_snip='Surface Emission Properties of Strongly Magnetic Neutron Stars' | abs_len= 1514
[15:03:01] verify | result supports= False fit= 0.00 top= 0.50 invalid= no_quote cue_hint= False
[15:03:01] select | verify relaxed 9/10
[15:03:01] verify | func= Motivation | rank= 8 | pid= astro-ph/0103316 | title_snip='Proton Cyclotron Features in Thermal Spectra of Ultra-magnetized Neutrâ€¦' | abs_len= 1010
[15:03:04] verify | result supports= False fit= 0.00 top= 0.20 invalid= â€” cue_hint= False
[15:03:04] select | verify relaxed 10/10
[15:03:04] verify | func= Motivation | rank= 9 | pid= astro-ph/0101257 | title_snip='Relativistic superfluid models for rotating neutron stars' | abs_len= 849
[15:03:07] verify | result supports= True fit= 0.80 top= 0.90 invalid= â€” cue_hint= False

================================================================================
FUNCTION: Motivation
QUERY   : How does the spectral analysis of the Vela pulsar compare to and extend existing models of neutron star cooling and emission?
- WINNER: astro-ph/0103171 | The X-ray Spectrum of the Vela Pulsar Resolved with Chandra
- QUOTE : The effective temperature is lower than that predicted by standard neutron star cooling models
- WHY   : sufficient

================================================================================
UNIFIED ANSWER (1â€“2 sentences, tagged):
The spectral analysis of the Vela pulsar provides background information on its thermal emission and power-law spectrum [Background] (astro-ph/0103171), and the lower-than-predicted effective temperature of the pulsar motivates further investigation into neutron star cooling models [Motivation] (astro-ph/0103171).

ðŸ“„ Saved: outputs/function_selection_results.json
ðŸ“„ Saved: outputs/function_selection_results.jsonl
ðŸ“ Unified answer: outputs/function_answer_unified.txt
-> /home/anpa439f/anaconda3/envs/myenv/bin/python3 /data/horse/ws/anpa439f-Function_Retrieval_Citation/Research_Project/RetrievalAugmentedGeneration/classifying_question.py  (cwd=/data/horse/ws/anpa439f-Function_Retrieval_Citation/Research_Project/RetrievalAugmentedGeneration)
âœ… Saved to classified_outputs.jsonl
ðŸ”§ Ready for retrieval module (.py).
-> /home/anpa439f/anaconda3/envs/myenv/bin/python3 /data/horse/ws/anpa439f-Function_Retrieval_Citation/Research_Project/RetrievalAugmentedGeneration/Retreival_query_based.py --skip-reindex --index /data/horse/ws/anpa439f-Function_Retrieval_Citation/Research_Project/e5_index_subset_1/index.faiss --meta /data/horse/ws/anpa439f-Function_Retrieval_Citation/Research_Project/e5_index_subset_1/meta.parquet --topk 20  (cwd=/data/horse/ws/anpa439f-Function_Retrieval_Citation/Research_Project/RetrievalAugmentedGeneration)
âœ… Top-k candidates: /data/horse/ws/anpa439f-Function_Retrieval_Citation/Research_Project/RetrievalAugmentedGeneration/outputs/topk_candidates_query.jsonl
ðŸ”— Symlinked: /data/horse/ws/anpa439f-Function_Retrieval_Citation/Research_Project/outputs/topk_candidates_query.jsonl -> /data/horse/ws/anpa439f-Function_Retrieval_Citation/Research_Project/RetrievalAugmentedGeneration/outputs/topk_candidates_query.jsonl
-> /home/anpa439f/anaconda3/envs/myenv/bin/python3 /data/horse/ws/anpa439f-Function_Retrieval_Citation/Research_Project/RetrievalAugmentedGeneration/function_based_answer-2_copy.py --debug --max-check 10  (cwd=/data/horse/ws/anpa439f-Function_Retrieval_Citation/Research_Project/RetrievalAugmentedGeneration)

ðŸŽ‰ Pipeline complete.
  â€¢ Classified file : /data/horse/ws/anpa439f-Function_Retrieval_Citation/Research_Project/RetrievalAugmentedGeneration/classified_outputs.jsonl
  â€¢ TopK (canonical): /data/horse/ws/anpa439f-Function_Retrieval_Citation/Research_Project/RetrievalAugmentedGeneration/outputs/topk_candidates_query.jsonl
  â€¢ Final outputs   : /data/horse/ws/anpa439f-Function_Retrieval_Citation/Research_Project/RetrievalAugmentedGeneration/outputs
