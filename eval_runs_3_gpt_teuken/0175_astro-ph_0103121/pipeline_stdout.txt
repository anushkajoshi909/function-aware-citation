âœ… Available Models:
1. alias-reasoning
2. alias-ha
3. meta-llama/Llama-3.3-70B-Instruct
4. meta-llama/Llama-3.1-8B-Instruct
5. Qwen/Qwen2-VL-7B-Instruct
6. alias-vision
7. openGPT-X/Teuken-7B-instruct-research-v0.4
8. deepseek-ai/DeepSeek-Coder-V2-Lite-Instruct
9. Qwen/Qwen3-Coder-30B-A3B-Instruct
10. alias-code
11. Qwen/Qwen3-Embedding-4B
12. BAAI/bge-reranker-v2-m3
13. stabilityai/stable-diffusion-3.5-large-turbo
14. alias-image-generation
15. black-forest-labs/FLUX.1-dev
16. openai/whisper-large-v3
17. Kokoro-82M
18. tts-1-hd
19. deepseek-ai/DeepSeek-R1
20. openai/gpt-oss-120b
21. meta-llama/Llama-4-Scout-17B-16E-Instruct

ðŸ‘‰ Select a model number (default = 1): 
âœ… Using model: openGPT-X/Teuken-7B-instruct-research-v0.4

ðŸ” Enter a scientific query or topic: 
ðŸ”Ž Citation Function Classification:
{
  "citation_functions": [
    "Background",
    "Motivation"
  ],
  "justification": "The query seeks to understand how the detection of upper main sequence stars and red giant branch stars in the halo of an amorphous galaxy relates to previous work on galaxy interactions and distance measurements. This requires understanding the background and motivation behind these fields of study."
}

âœ… Saved to classified_outputs.jsonl
ðŸ”§ Ready for retrieval module (handled in a separate file).
âš¡ SKIP_REINDEX=1 â€” using existing FAISS index + meta; not scanning raw JSONL shards.
âœ… Top-k candidates (FAISS): /data/horse/ws/anpa439f-Function_Retrieval_Citation/Research_Project/RetrievalAugmentedGeneration/outputs/topk_candidates_query.jsonl
[14:54:51] main | args: Namespace(max_check=10, debug=True)
[14:54:51] read_last_jsonl | path= classified_outputs.jsonl
[14:54:51] read_last_jsonl | total_lines= 1
[14:54:51] main | query='How does the detection of upper main sequence stars and red giant branch stars in the halo of an amorphous galaxy relate to previous work on galaxy interactions and distance measurements?' | funcs=['Background', 'Motivation']
[14:54:53] main | core_terms= ['upper main sequence stars', 'red giant branch stars', 'galaxy halo', 'galaxy interactions', 'distance measurements']
[14:54:53] load_topk_jsonl | path= /data/horse/ws/anpa439f-Function_Retrieval_Citation/Research_Project/outputs/topk_candidates_query.jsonl
[14:54:53] load_topk_jsonl | rows= 20
[14:54:53] load_topk_jsonl | first: rank= 0 paper_id= astro-ph/0103121 title_snip='Observation of the Halo of NGC 3077 Near the "Garland" Region Using thâ€¦' abs_len= 1197
[14:54:53] main | running function= Background
[14:54:53] select | function= Background | candidates_in= 20
[14:54:53] select | core_terms= ['upper main sequence stars', 'red giant branch stars', 'galaxy halo', 'galaxy interactions', 'distance measurements']
[14:54:53] select | no cosine prune; kept=20/20
[14:54:53] select | pool_size= 10 | ranks= [0, 1, 2, 3, 4, 5, 6, 7, 8, 9] | pids= ['astro-ph/0103121', 'astro-ph/0102397', 'astro-ph/0101338', 'astro-ph/0103502', 'astro-ph/0101271', 'astro-ph/0103518', 'astro-ph/0101436', 'astro-ph/0104037', 'astro-ph/0102436', 'astro-ph/0101323']
[14:54:53] select | verify relaxed 1/10
[14:54:53] verify | func= Background | rank= 0 | pid= astro-ph/0103121 | title_snip='Observation of the Halo of NGC 3077 Near the "Garland" Region Using thâ€¦' | abs_len= 1197
[14:54:57] verify | result supports= True fit= 0.80 top= 0.90 invalid= â€” cue_hint= False
[14:54:57] select | verify relaxed 2/10
[14:54:57] verify | func= Background | rank= 1 | pid= astro-ph/0102397 | title_snip='A Near-Infrared Stellar Census of Blue Compact Dwarf Galaxies: The
  Wâ€¦' | abs_len= 1230
[14:55:00] verify | result supports= False fit= 0.00 top= 0.20 invalid= â€” cue_hint= False
[14:55:00] select | verify relaxed 3/10
[14:55:00] verify | func= Background | rank= 2 | pid= astro-ph/0101338 | title_snip='Observational Signatures of the First Stars' | abs_len= 569
[14:55:03] verify | result supports= False fit= 0.00 top= 0.00 invalid= no_quote cue_hint= False
[14:55:03] select | verify relaxed 4/10
[14:55:03] verify | func= Background | rank= 3 | pid= astro-ph/0103502 | title_snip='Abundances in Stars from the Red Giant Branch Tip to the Near the Mainâ€¦' | abs_len= 546
[14:55:07] verify | result supports= False fit= 0.00 top= 0.90 invalid= off_topic_no_core_in_abstract cue_hint= False
[14:55:07] select | verify relaxed 5/10
[14:55:07] verify | func= Background | rank= 4 | pid= astro-ph/0101271 | title_snip='The X-ray Emission in Post-Merger Ellipticals' | abs_len= 909
[14:55:09] verify | result supports= False fit= 0.00 top= 0.00 invalid= no_quote cue_hint= False
[14:55:09] select | verify relaxed 6/10
[14:55:09] verify | func= Background | rank= 5 | pid= astro-ph/0103518 | title_snip='Background galaxies as reddening probes throughout the Magellanic Clouâ€¦' | abs_len= 1323
[14:55:12] verify | result supports= False fit= 0.00 top= 0.00 invalid= no_quote cue_hint= False
[14:55:12] select | verify relaxed 7/10
[14:55:12] verify | func= Background | rank= 6 | pid= astro-ph/0101436 | title_snip='Photometry and the Metallicity Distribution of the Outer Halo of M31' | abs_len= 1815
[14:55:16] verify | result supports= False fit= 0.00 top= 0.90 invalid= off_topic_no_core_in_abstract cue_hint= False
[14:55:16] select | verify relaxed 8/10
[14:55:16] verify | func= Background | rank= 7 | pid= astro-ph/0104037 | title_snip='Faint End of the Galaxy Luminosity Function: A Chronometer for Structuâ€¦' | abs_len= 1418
[14:55:18] verify | result supports= False fit= 0.00 top= 0.00 invalid= no_quote cue_hint= False
[14:55:18] select | verify relaxed 9/10
[14:55:18] verify | func= Background | rank= 8 | pid= astro-ph/0102436 | title_snip='The Host Haloes of Lyman Break Galaxies and Sub-millimeter Sources' | abs_len= 1580
[14:55:21] verify | result supports= False fit= 0.00 top= 0.00 invalid= no_quote cue_hint= False
[14:55:21] select | verify relaxed 10/10
[14:55:21] verify | func= Background | rank= 9 | pid= astro-ph/0101323 | title_snip='Lithium-Beryllium-Boron Evolution: From Meneguzzi, Audouze and Reeves
â€¦' | abs_len= 595
[14:55:24] verify | result supports= False fit= 0.00 top= 0.00 invalid= no_quote cue_hint= False

================================================================================
FUNCTION: Background
QUERY   : How does the detection of upper main sequence stars and red giant branch stars in the halo of an amorphous galaxy relate to previous work on galaxy interactions and distance measurements?
- WINNER: astro-ph/0103121 | Observation of the Halo of NGC 3077 Near the "Garland" Region Using the
  Hubble Space Telescope
- QUOTE : using Wide Field Planetary Camera~2 on board the Hubble Space Telescope
- WHY   : sufficient
[14:55:25] main | running function= Motivation
[14:55:25] select | function= Motivation | candidates_in= 20
[14:55:25] select | core_terms= ['upper main sequence stars', 'red giant branch stars', 'galaxy halo', 'galaxy interactions', 'distance measurements']
[14:55:25] select | no cosine prune; kept=20/20
[14:55:25] select | pool_size= 10 | ranks= [0, 1, 2, 3, 4, 5, 6, 7, 8, 9] | pids= ['astro-ph/0103121', 'astro-ph/0102397', 'astro-ph/0101338', 'astro-ph/0103502', 'astro-ph/0101271', 'astro-ph/0103518', 'astro-ph/0101436', 'astro-ph/0104037', 'astro-ph/0102436', 'astro-ph/0101323']
[14:55:25] select | verify relaxed 1/10
[14:55:25] verify | func= Motivation | rank= 0 | pid= astro-ph/0103121 | title_snip='Observation of the Halo of NGC 3077 Near the "Garland" Region Using thâ€¦' | abs_len= 1197
[14:55:28] verify | result supports= True fit= 0.80 top= 0.90 invalid= â€” cue_hint= False
[14:55:28] select | verify relaxed 2/10
[14:55:28] verify | func= Motivation | rank= 1 | pid= astro-ph/0102397 | title_snip='A Near-Infrared Stellar Census of Blue Compact Dwarf Galaxies: The
  Wâ€¦' | abs_len= 1230
[14:55:32] verify | result supports= False fit= 0.00 top= 0.20 invalid= â€” cue_hint= False
[14:55:32] select | verify relaxed 3/10
[14:55:32] verify | func= Motivation | rank= 2 | pid= astro-ph/0101338 | title_snip='Observational Signatures of the First Stars' | abs_len= 569
[14:55:34] verify | result supports= False fit= 0.00 top= 0.00 invalid= no_quote cue_hint= False
[14:55:34] select | verify relaxed 4/10
[14:55:34] verify | func= Motivation | rank= 3 | pid= astro-ph/0103502 | title_snip='Abundances in Stars from the Red Giant Branch Tip to the Near the Mainâ€¦' | abs_len= 546
[14:55:38] verify | result supports= False fit= 0.00 top= 0.20 invalid= â€” cue_hint= False
[14:55:38] select | verify relaxed 5/10
[14:55:38] verify | func= Motivation | rank= 4 | pid= astro-ph/0101271 | title_snip='The X-ray Emission in Post-Merger Ellipticals' | abs_len= 909
[14:55:41] verify | result supports= False fit= 0.00 top= 0.00 invalid= no_quote cue_hint= False
[14:55:41] select | verify relaxed 6/10
[14:55:41] verify | func= Motivation | rank= 5 | pid= astro-ph/0103518 | title_snip='Background galaxies as reddening probes throughout the Magellanic Clouâ€¦' | abs_len= 1323
[14:55:43] verify | result supports= False fit= 0.00 top= 0.00 invalid= no_quote cue_hint= False
[14:55:43] select | verify relaxed 7/10
[14:55:43] verify | func= Motivation | rank= 6 | pid= astro-ph/0101436 | title_snip='Photometry and the Metallicity Distribution of the Outer Halo of M31' | abs_len= 1815
[14:55:47] verify | result supports= False fit= 0.00 top= 0.90 invalid= off_topic_no_core_in_abstract cue_hint= False
[14:55:47] select | verify relaxed 8/10
[14:55:47] verify | func= Motivation | rank= 7 | pid= astro-ph/0104037 | title_snip='Faint End of the Galaxy Luminosity Function: A Chronometer for Structuâ€¦' | abs_len= 1418
[14:55:50] verify | result supports= False fit= 0.00 top= 0.20 invalid= â€” cue_hint= False
[14:55:50] select | verify relaxed 9/10
[14:55:50] verify | func= Motivation | rank= 8 | pid= astro-ph/0102436 | title_snip='The Host Haloes of Lyman Break Galaxies and Sub-millimeter Sources' | abs_len= 1580
[14:55:53] verify | result supports= False fit= 0.00 top= 0.00 invalid= no_quote cue_hint= False
[14:55:53] select | verify relaxed 10/10
[14:55:53] verify | func= Motivation | rank= 9 | pid= astro-ph/0101323 | title_snip='Lithium-Beryllium-Boron Evolution: From Meneguzzi, Audouze and Reeves
â€¦' | abs_len= 595
[14:55:55] verify | result supports= False fit= 0.00 top= 0.00 invalid= no_quote cue_hint= False

================================================================================
FUNCTION: Motivation
QUERY   : How does the detection of upper main sequence stars and red giant branch stars in the halo of an amorphous galaxy relate to previous work on galaxy interactions and distance measurements?
- WINNER: astro-ph/0103121 | Observation of the Halo of NGC 3077 Near the "Garland" Region Using the
  Hubble Space Telescope
- QUOTE : triggered by the M81-NGC3077 tidal interaction
- WHY   : sufficient

================================================================================
UNIFIED ANSWER (1â€“2 sentences, tagged):
The detection of upper main sequence stars and red giant branch stars in the halo of an amorphous galaxy provides insight into the galaxy's history [Background] (astro-ph/0103121). This discovery is motivated by the desire to understand the relationship between galaxy interactions and distance measurements, as the observed stars are likely the result of star formation triggered by a tidal interaction [Motivation] (astro-ph/0103121).

ðŸ“„ Saved: outputs/function_selection_results.json
ðŸ“„ Saved: outputs/function_selection_results.jsonl
ðŸ“ Unified answer: outputs/function_answer_unified.txt
-> /home/anpa439f/anaconda3/envs/myenv/bin/python3 /data/horse/ws/anpa439f-Function_Retrieval_Citation/Research_Project/RetrievalAugmentedGeneration/classifying_question.py  (cwd=/data/horse/ws/anpa439f-Function_Retrieval_Citation/Research_Project/RetrievalAugmentedGeneration)
âœ… Saved to classified_outputs.jsonl
ðŸ”§ Ready for retrieval module (.py).
-> /home/anpa439f/anaconda3/envs/myenv/bin/python3 /data/horse/ws/anpa439f-Function_Retrieval_Citation/Research_Project/RetrievalAugmentedGeneration/Retreival_query_based.py --skip-reindex --index /data/horse/ws/anpa439f-Function_Retrieval_Citation/Research_Project/e5_index_subset_1/index.faiss --meta /data/horse/ws/anpa439f-Function_Retrieval_Citation/Research_Project/e5_index_subset_1/meta.parquet --topk 20  (cwd=/data/horse/ws/anpa439f-Function_Retrieval_Citation/Research_Project/RetrievalAugmentedGeneration)
âœ… Top-k candidates: /data/horse/ws/anpa439f-Function_Retrieval_Citation/Research_Project/RetrievalAugmentedGeneration/outputs/topk_candidates_query.jsonl
ðŸ”— Symlinked: /data/horse/ws/anpa439f-Function_Retrieval_Citation/Research_Project/outputs/topk_candidates_query.jsonl -> /data/horse/ws/anpa439f-Function_Retrieval_Citation/Research_Project/RetrievalAugmentedGeneration/outputs/topk_candidates_query.jsonl
-> /home/anpa439f/anaconda3/envs/myenv/bin/python3 /data/horse/ws/anpa439f-Function_Retrieval_Citation/Research_Project/RetrievalAugmentedGeneration/function_based_answer-2_copy.py --debug --max-check 10  (cwd=/data/horse/ws/anpa439f-Function_Retrieval_Citation/Research_Project/RetrievalAugmentedGeneration)

ðŸŽ‰ Pipeline complete.
  â€¢ Classified file : /data/horse/ws/anpa439f-Function_Retrieval_Citation/Research_Project/RetrievalAugmentedGeneration/classified_outputs.jsonl
  â€¢ TopK (canonical): /data/horse/ws/anpa439f-Function_Retrieval_Citation/Research_Project/RetrievalAugmentedGeneration/outputs/topk_candidates_query.jsonl
  â€¢ Final outputs   : /data/horse/ws/anpa439f-Function_Retrieval_Citation/Research_Project/RetrievalAugmentedGeneration/outputs
