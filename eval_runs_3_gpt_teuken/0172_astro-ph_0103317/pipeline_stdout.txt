âœ… Available Models:
1. alias-reasoning
2. alias-ha
3. meta-llama/Llama-3.3-70B-Instruct
4. meta-llama/Llama-3.1-8B-Instruct
5. Qwen/Qwen2-VL-7B-Instruct
6. alias-vision
7. openGPT-X/Teuken-7B-instruct-research-v0.4
8. deepseek-ai/DeepSeek-Coder-V2-Lite-Instruct
9. Qwen/Qwen3-Coder-30B-A3B-Instruct
10. alias-code
11. Qwen/Qwen3-Embedding-4B
12. BAAI/bge-reranker-v2-m3
13. stabilityai/stable-diffusion-3.5-large-turbo
14. alias-image-generation
15. black-forest-labs/FLUX.1-dev
16. openai/whisper-large-v3
17. Kokoro-82M
18. tts-1-hd
19. deepseek-ai/DeepSeek-R1
20. openai/gpt-oss-120b
21. meta-llama/Llama-4-Scout-17B-16E-Instruct

ðŸ‘‰ Select a model number (default = 1): 
âœ… Using model: openGPT-X/Teuken-7B-instruct-research-v0.4

ðŸ” Enter a scientific query or topic: 
ðŸ”Ž Citation Function Classification:
{
  "citation_functions": [
    "Background",
    "Motivation"
  ],
  "justification": "The query seeks to understand the comparison between the current approach and previous work in the field, requiring background information to understand the context of the comparison."
}

âœ… Saved to classified_outputs.jsonl
ðŸ”§ Ready for retrieval module (handled in a separate file).
âš¡ SKIP_REINDEX=1 â€” using existing FAISS index + meta; not scanning raw JSONL shards.
âœ… Top-k candidates (FAISS): /data/horse/ws/anpa439f-Function_Retrieval_Citation/Research_Project/RetrievalAugmentedGeneration/outputs/topk_candidates_query.jsonl
[14:50:45] main | args: Namespace(max_check=10, debug=True)
[14:50:45] read_last_jsonl | path= classified_outputs.jsonl
[14:50:45] read_last_jsonl | total_lines= 1
[14:50:45] main | query='How does the current code's approach to solving the transfer of continuum and lines compare to previous work in the field, and what background information is necessary to understand this comparison?' | funcs=['Background', 'Motivation']
[14:50:47] main | core_terms= ['continuum', 'lines', 'transfer']
[14:50:47] load_topk_jsonl | path= /data/horse/ws/anpa439f-Function_Retrieval_Citation/Research_Project/outputs/topk_candidates_query.jsonl
[14:50:47] load_topk_jsonl | rows= 20
[14:50:47] load_topk_jsonl | first: rank= 0 paper_id= astro-ph/0103317 title_snip='Codes for optically thick and hot photoionized media - Radiative
  traâ€¦' abs_len= 1213
[14:50:47] main | running function= Background
[14:50:47] select | function= Background | candidates_in= 20
[14:50:47] select | core_terms= ['continuum', 'lines', 'transfer']
[14:50:47] select | no cosine prune; kept=20/20
[14:50:47] select | pool_size= 10 | ranks= [0, 1, 2, 3, 4, 5, 6, 7, 8, 9] | pids= ['astro-ph/0103317', 'astro-ph/0103503', 'astro-ph/0102269', 'astro-ph/0102270', 'hep-th/0103228', 'hep-ph/0104049', 'hep-ph/0104065', 'hep-ph/0102005', 'gr-qc/0103017', 'hep-ph/0104097']
[14:50:47] select | verify relaxed 1/10
[14:50:47] verify | func= Background | rank= 0 | pid= astro-ph/0103317 | title_snip='Codes for optically thick and hot photoionized media - Radiative
  traâ€¦' | abs_len= 1213
[14:50:50] verify | result supports= True fit= 0.80 top= 0.90 invalid= â€” cue_hint= False
[14:50:50] select | verify relaxed 2/10
[14:50:50] verify | func= Background | rank= 1 | pid= astro-ph/0103503 | title_snip='MLAPM - a C code for cosmological simulations' | abs_len= 1536
[14:50:53] verify | result supports= False fit= 0.00 top= 0.00 invalid= no_quote cue_hint= False
[14:50:53] select | verify relaxed 3/10
[14:50:53] verify | func= Background | rank= 2 | pid= astro-ph/0102269 | title_snip='Radiative transfer for the FIRST era' | abs_len= 236
[14:50:56] verify | result supports= True fit= 0.80 top= 0.90 invalid= â€” cue_hint= False
[14:50:56] select | verify relaxed 4/10
[14:50:56] verify | func= Background | rank= 3 | pid= astro-ph/0102270 | title_snip='Radiative transfer in molecular lines' | abs_len= 548
[14:50:59] verify | result supports= True fit= 0.80 top= 0.90 invalid= â€” cue_hint= False
[14:50:59] select | verify relaxed 5/10
[14:50:59] verify | func= Background | rank= 4 | pid= hep-th/0103228 | title_snip='New Approach to Quantum Field Theory for Arbitrary Observers in
  Elecâ€¦' | abs_len= 1692
[14:51:02] verify | result supports= False fit= 0.00 top= 0.00 invalid= no_quote cue_hint= False
[14:51:02] select | verify relaxed 6/10
[14:51:02] verify | func= Background | rank= 5 | pid= hep-ph/0104049 | title_snip='The Monte Carlo Program KoralW version 1.51 and The Concurrent Monte
 â€¦' | abs_len= 1446
[14:51:05] verify | result supports= False fit= 0.00 top= 0.90 invalid= off_topic_no_core_in_abstract cue_hint= False
[14:51:05] select | verify relaxed 7/10
[14:51:05] verify | func= Background | rank= 6 | pid= hep-ph/0104065 | title_snip='Rescattering corrections in elastic scattering' | abs_len= 773
[14:51:09] verify | result supports= False fit= 0.00 top= 0.90 invalid= quote_not_in_abstract cue_hint= False
[14:51:09] select | verify relaxed 8/10
[14:51:09] verify | func= Background | rank= 7 | pid= hep-ph/0102005 | title_snip='The Algebraic Method' | abs_len= 820
[14:51:12] verify | result supports= False fit= 0.00 top= 0.00 invalid= no_quote cue_hint= False
[14:51:12] select | verify relaxed 9/10
[14:51:12] verify | func= Background | rank= 8 | pid= gr-qc/0103017 | title_snip='Conserved currents for general teleparallel models' | abs_len= 1393
[14:51:15] verify | result supports= False fit= 0.00 top= 0.00 invalid= no_quote cue_hint= False
[14:51:15] select | verify relaxed 10/10
[14:51:15] verify | func= Background | rank= 9 | pid= hep-ph/0104097 | title_snip='Freezing of QCD coupling affects the short distance static potential' | abs_len= 857
[14:51:18] verify | result supports= False fit= 0.00 top= 0.00 invalid= no_quote cue_hint= False

================================================================================
FUNCTION: Background
QUERY   : How does the current code's approach to solving the transfer of continuum and lines compare to previous work in the field, and what background information is necessary to understand this comparison?
- WINNER: astro-ph/0103317 | Codes for optically thick and hot photoionized media - Radiative
  transfer and new developments
- QUOTE : transfer of the continuum with the Accelerated Lambda Iteration method
- WHY   : sufficient
[14:51:19] main | running function= Motivation
[14:51:19] select | function= Motivation | candidates_in= 20
[14:51:19] select | core_terms= ['continuum', 'lines', 'transfer']
[14:51:19] select | no cosine prune; kept=20/20
[14:51:19] select | pool_size= 10 | ranks= [0, 1, 2, 3, 4, 5, 6, 7, 8, 9] | pids= ['astro-ph/0103317', 'astro-ph/0103503', 'astro-ph/0102269', 'astro-ph/0102270', 'hep-th/0103228', 'hep-ph/0104049', 'hep-ph/0104065', 'hep-ph/0102005', 'gr-qc/0103017', 'hep-ph/0104097']
[14:51:19] select | verify relaxed 1/10
[14:51:19] verify | func= Motivation | rank= 0 | pid= astro-ph/0103317 | title_snip='Codes for optically thick and hot photoionized media - Radiative
  traâ€¦' | abs_len= 1213
[14:51:22] verify | result supports= False fit= 0.00 top= 0.90 invalid= quote_not_in_abstract cue_hint= False
[14:51:22] select | verify relaxed 2/10
[14:51:22] verify | func= Motivation | rank= 1 | pid= astro-ph/0103503 | title_snip='MLAPM - a C code for cosmological simulations' | abs_len= 1536
[14:51:25] verify | result supports= False fit= 0.00 top= 0.00 invalid= no_quote cue_hint= False
[14:51:25] select | verify relaxed 3/10
[14:51:25] verify | func= Motivation | rank= 2 | pid= astro-ph/0102269 | title_snip='Radiative transfer for the FIRST era' | abs_len= 236
[14:51:28] verify | result supports= True fit= 0.80 top= 0.90 invalid= â€” cue_hint= False
[14:51:28] select | verify relaxed 4/10
[14:51:28] verify | func= Motivation | rank= 3 | pid= astro-ph/0102270 | title_snip='Radiative transfer in molecular lines' | abs_len= 548
[14:51:31] verify | result supports= True fit= 0.80 top= 0.90 invalid= â€” cue_hint= False
[14:51:31] select | verify relaxed 5/10
[14:51:31] verify | func= Motivation | rank= 4 | pid= hep-th/0103228 | title_snip='New Approach to Quantum Field Theory for Arbitrary Observers in
  Elecâ€¦' | abs_len= 1692
[14:51:34] verify | result supports= False fit= 0.00 top= 0.00 invalid= no_quote cue_hint= False
[14:51:34] select | verify relaxed 6/10
[14:51:34] verify | func= Motivation | rank= 5 | pid= hep-ph/0104049 | title_snip='The Monte Carlo Program KoralW version 1.51 and The Concurrent Monte
 â€¦' | abs_len= 1446
[14:51:37] verify | result supports= False fit= 0.00 top= 0.00 invalid= no_quote cue_hint= False
[14:51:37] select | verify relaxed 7/10
[14:51:37] verify | func= Motivation | rank= 6 | pid= hep-ph/0104065 | title_snip='Rescattering corrections in elastic scattering' | abs_len= 773
[14:51:41] verify | result supports= False fit= 0.00 top= 0.90 invalid= quote_not_in_abstract cue_hint= False
[14:51:41] select | verify relaxed 8/10
[14:51:41] verify | func= Motivation | rank= 7 | pid= hep-ph/0102005 | title_snip='The Algebraic Method' | abs_len= 820
[14:51:44] verify | result supports= False fit= 0.00 top= 0.00 invalid= no_quote cue_hint= False
[14:51:44] select | verify relaxed 9/10
[14:51:44] verify | func= Motivation | rank= 8 | pid= gr-qc/0103017 | title_snip='Conserved currents for general teleparallel models' | abs_len= 1393
[14:51:46] verify | result supports= False fit= 0.00 top= 0.00 invalid= no_quote cue_hint= False
[14:51:46] select | verify relaxed 10/10
[14:51:46] verify | func= Motivation | rank= 9 | pid= hep-ph/0104097 | title_snip='Freezing of QCD coupling affects the short distance static potential' | abs_len= 857
[14:51:49] verify | result supports= False fit= 0.00 top= 0.00 invalid= no_quote cue_hint= False

================================================================================
FUNCTION: Motivation
QUERY   : How does the current code's approach to solving the transfer of continuum and lines compare to previous work in the field, and what background information is necessary to understand this comparison?
- WINNER: astro-ph/0102269 | Radiative transfer for the FIRST era
- QUOTE : radiative transfer
- WHY   : sufficient

================================================================================
UNIFIED ANSWER (1â€“2 sentences, tagged):
The current code's approach to solving the transfer of continuum and lines is based on a background of previous work, including the development of codes for optically thick and hot photoionized media [Background] (astro-ph/0103317). The motivation for this comparison comes from recent advances in numerical radiative transfer, which aim to help the molecular astrophysics community achieve new breakthroughs in interpreting spectroscopic observations [Motivation] (astro-ph/0102269).

ðŸ“„ Saved: outputs/function_selection_results.json
ðŸ“„ Saved: outputs/function_selection_results.jsonl
ðŸ“ Unified answer: outputs/function_answer_unified.txt
-> /home/anpa439f/anaconda3/envs/myenv/bin/python3 /data/horse/ws/anpa439f-Function_Retrieval_Citation/Research_Project/RetrievalAugmentedGeneration/classifying_question.py  (cwd=/data/horse/ws/anpa439f-Function_Retrieval_Citation/Research_Project/RetrievalAugmentedGeneration)
âœ… Saved to classified_outputs.jsonl
ðŸ”§ Ready for retrieval module (.py).
-> /home/anpa439f/anaconda3/envs/myenv/bin/python3 /data/horse/ws/anpa439f-Function_Retrieval_Citation/Research_Project/RetrievalAugmentedGeneration/Retreival_query_based.py --skip-reindex --index /data/horse/ws/anpa439f-Function_Retrieval_Citation/Research_Project/e5_index_subset_1/index.faiss --meta /data/horse/ws/anpa439f-Function_Retrieval_Citation/Research_Project/e5_index_subset_1/meta.parquet --topk 20  (cwd=/data/horse/ws/anpa439f-Function_Retrieval_Citation/Research_Project/RetrievalAugmentedGeneration)
âœ… Top-k candidates: /data/horse/ws/anpa439f-Function_Retrieval_Citation/Research_Project/RetrievalAugmentedGeneration/outputs/topk_candidates_query.jsonl
ðŸ”— Symlinked: /data/horse/ws/anpa439f-Function_Retrieval_Citation/Research_Project/outputs/topk_candidates_query.jsonl -> /data/horse/ws/anpa439f-Function_Retrieval_Citation/Research_Project/RetrievalAugmentedGeneration/outputs/topk_candidates_query.jsonl
-> /home/anpa439f/anaconda3/envs/myenv/bin/python3 /data/horse/ws/anpa439f-Function_Retrieval_Citation/Research_Project/RetrievalAugmentedGeneration/function_based_answer-2_copy.py --debug --max-check 10  (cwd=/data/horse/ws/anpa439f-Function_Retrieval_Citation/Research_Project/RetrievalAugmentedGeneration)

ðŸŽ‰ Pipeline complete.
  â€¢ Classified file : /data/horse/ws/anpa439f-Function_Retrieval_Citation/Research_Project/RetrievalAugmentedGeneration/classified_outputs.jsonl
  â€¢ TopK (canonical): /data/horse/ws/anpa439f-Function_Retrieval_Citation/Research_Project/RetrievalAugmentedGeneration/outputs/topk_candidates_query.jsonl
  â€¢ Final outputs   : /data/horse/ws/anpa439f-Function_Retrieval_Citation/Research_Project/RetrievalAugmentedGeneration/outputs
