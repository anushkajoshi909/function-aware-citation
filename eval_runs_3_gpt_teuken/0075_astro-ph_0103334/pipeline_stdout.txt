âœ… Available Models:
1. alias-reasoning
2. alias-ha
3. meta-llama/Llama-3.3-70B-Instruct
4. meta-llama/Llama-3.1-8B-Instruct
5. Qwen/Qwen2-VL-7B-Instruct
6. alias-vision
7. openGPT-X/Teuken-7B-instruct-research-v0.4
8. deepseek-ai/DeepSeek-Coder-V2-Lite-Instruct
9. Qwen/Qwen3-Coder-30B-A3B-Instruct
10. alias-code
11. Qwen/Qwen3-Embedding-4B
12. BAAI/bge-reranker-v2-m3
13. stabilityai/stable-diffusion-3.5-large-turbo
14. alias-image-generation
15. black-forest-labs/FLUX.1-dev
16. openai/whisper-large-v3
17. Kokoro-82M
18. tts-1-hd
19. deepseek-ai/DeepSeek-R1
20. openai/gpt-oss-120b
21. meta-llama/Llama-4-Scout-17B-16E-Instruct

ðŸ‘‰ Select a model number (default = 1): 
âœ… Using model: openGPT-X/Teuken-7B-instruct-research-v0.4

ðŸ” Enter a scientific query or topic: 
ðŸ”Ž Citation Function Classification:
{
  "citation_functions": [
    "Background",
    "Motivation"
  ],
  "justification": "The query seeks to understand the motivation behind investigating magnetic field fluctuations in the NGC 7538 region and how observations of polarization are used to study these fluctuations. It introduces the background and the reason for further study."
}

âœ… Saved to classified_outputs.jsonl
ðŸ”§ Ready for retrieval module (handled in a separate file).
âš¡ SKIP_REINDEX=1 â€” using existing FAISS index + meta; not scanning raw JSONL shards.
âœ… Top-k candidates (FAISS): /data/horse/ws/anpa439f-Function_Retrieval_Citation/Research_Project/RetrievalAugmentedGeneration/outputs/topk_candidates_query.jsonl
[12:53:45] main | args: Namespace(max_check=10, debug=True)
[12:53:45] read_last_jsonl | path= classified_outputs.jsonl
[12:53:45] read_last_jsonl | total_lines= 1
[12:53:45] main | query='What motivates the investigation of magnetic field fluctuations in the NGC 7538 region and how are the observations of polarization used to understand these fluctuations?' | funcs=['Background', 'Motivation']
[12:53:47] main | core_terms= ['NGC 7538', 'magnetic field', 'polarization', 'fluctuations', 'NGC']
[12:53:47] load_topk_jsonl | path= /data/horse/ws/anpa439f-Function_Retrieval_Citation/Research_Project/outputs/topk_candidates_query.jsonl
[12:53:47] load_topk_jsonl | rows= 20
[12:53:47] load_topk_jsonl | first: rank= 0 paper_id= astro-ph/0103334 title_snip='Submillimeter Imaging Polarimetry of the NGC 7538 Region' abs_len= 1603
[12:53:47] main | running function= Background
[12:53:47] select | function= Background | candidates_in= 20
[12:53:47] select | core_terms= ['NGC 7538', 'magnetic field', 'polarization', 'fluctuations', 'NGC']
[12:53:47] select | no cosine prune; kept=20/20
[12:53:47] select | pool_size= 10 | ranks= [0, 1, 2, 3, 4, 5, 6, 7, 8, 9] | pids= ['astro-ph/0103334', 'astro-ph/0103048', 'astro-ph/0104360', 'cond-mat/0102414', 'physics/0103029', 'astro-ph/0101001', 'astro-ph/0102445', 'nucl-th/0102026', 'astro-ph/0101368', 'hep-ex/0101010']
[12:53:47] select | verify relaxed 1/10
[12:53:47] verify | func= Background | rank= 0 | pid= astro-ph/0103334 | title_snip='Submillimeter Imaging Polarimetry of the NGC 7538 Region' | abs_len= 1603
[12:53:50] verify | result supports= True fit= 0.80 top= 0.90 invalid= â€” cue_hint= False
[12:53:50] select | verify relaxed 2/10
[12:53:50] verify | func= Background | rank= 1 | pid= astro-ph/0103048 | title_snip='Polarization Insights for Active Galactic Nuclei' | abs_len= 1223
[12:53:53] verify | result supports= False fit= 0.00 top= 0.00 invalid= no_quote cue_hint= False
[12:53:53] select | verify relaxed 3/10
[12:53:53] verify | func= Background | rank= 2 | pid= astro-ph/0104360 | title_snip='Spectra of Maser Radiation from a Turbulent, Circumnuclear Accretion
 â€¦' | abs_len= 1208
[12:53:56] verify | result supports= False fit= 0.00 top= 0.00 invalid= no_quote cue_hint= False
[12:53:56] select | verify relaxed 4/10
[12:53:56] verify | func= Background | rank= 3 | pid= cond-mat/0102414 | title_snip='Spin fluctuations in a magnetically frustrated metal, LiV2O4' | abs_len= 735
[12:53:58] verify | result supports= False fit= 0.00 top= 0.00 invalid= no_quote cue_hint= False
[12:53:58] select | verify relaxed 5/10
[12:53:58] verify | func= Background | rank= 4 | pid= physics/0103029 | title_snip='The Inertial Polarization Principle: The Mechanism Underlying
  Sonoluâ€¦' | abs_len= 1263
[12:54:01] verify | result supports= False fit= 0.00 top= 0.00 invalid= no_quote cue_hint= False
[12:54:01] select | verify relaxed 6/10
[12:54:01] verify | func= Background | rank= 5 | pid= astro-ph/0101001 | title_snip='Polarized Microwave Radiation from Dust' | abs_len= 1125
[12:54:04] verify | result supports= False fit= 0.00 top= 0.00 invalid= no_quote cue_hint= False
[12:54:04] select | verify relaxed 7/10
[12:54:04] verify | func= Background | rank= 6 | pid= astro-ph/0102445 | title_snip='Optical Structure and Physics of the M87 Jet' | abs_len= 1065
[12:54:07] verify | result supports= False fit= 0.00 top= 0.00 invalid= no_quote cue_hint= False
[12:54:07] select | verify relaxed 8/10
[12:54:07] verify | func= Background | rank= 7 | pid= nucl-th/0102026 | title_snip='Polarization observables in the reaction $p n \to d \phi$' | abs_len= 195
[12:54:09] verify | result supports= False fit= 0.00 top= 0.00 invalid= no_quote cue_hint= False
[12:54:09] select | verify relaxed 9/10
[12:54:09] verify | func= Background | rank= 8 | pid= astro-ph/0101368 | title_snip='Polarization of the Cosmic Microwave Background from Non-Uniform
  Reiâ€¦' | abs_len= 1537
[12:54:12] verify | result supports= False fit= 0.00 top= 0.00 invalid= no_quote cue_hint= False
[12:54:12] select | verify relaxed 10/10
[12:54:12] verify | func= Background | rank= 9 | pid= hep-ex/0101010 | title_snip='Constraining CP-Violating TGCs and Measuring W-Polarization at OPAL' | abs_len= 430
[12:54:15] verify | result supports= False fit= 0.00 top= 0.00 invalid= no_quote cue_hint= False

================================================================================
FUNCTION: Background
QUERY   : What motivates the investigation of magnetic field fluctuations in the NGC 7538 region and how are the observations of polarization used to understand these fluctuations?
- WINNER: astro-ph/0103334 | Submillimeter Imaging Polarimetry of the NGC 7538 Region
- QUOTE : magnetically aligned dust grains
- WHY   : sufficient
[12:54:16] main | running function= Motivation
[12:54:16] select | function= Motivation | candidates_in= 20
[12:54:16] select | core_terms= ['NGC 7538', 'magnetic field', 'polarization', 'fluctuations', 'NGC']
[12:54:16] select | no cosine prune; kept=20/20
[12:54:16] select | pool_size= 10 | ranks= [0, 1, 2, 3, 4, 5, 6, 7, 8, 9] | pids= ['astro-ph/0103334', 'astro-ph/0103048', 'astro-ph/0104360', 'cond-mat/0102414', 'physics/0103029', 'astro-ph/0101001', 'astro-ph/0102445', 'nucl-th/0102026', 'astro-ph/0101368', 'hep-ex/0101010']
[12:54:16] select | verify relaxed 1/10
[12:54:16] verify | func= Motivation | rank= 0 | pid= astro-ph/0103334 | title_snip='Submillimeter Imaging Polarimetry of the NGC 7538 Region' | abs_len= 1603
[12:54:19] verify | result supports= True fit= 0.80 top= 0.90 invalid= â€” cue_hint= False
[12:54:19] select | verify relaxed 2/10
[12:54:19] verify | func= Motivation | rank= 1 | pid= astro-ph/0103048 | title_snip='Polarization Insights for Active Galactic Nuclei' | abs_len= 1223
[12:54:22] verify | result supports= False fit= 0.00 top= 0.00 invalid= no_quote cue_hint= False
[12:54:22] select | verify relaxed 3/10
[12:54:22] verify | func= Motivation | rank= 2 | pid= astro-ph/0104360 | title_snip='Spectra of Maser Radiation from a Turbulent, Circumnuclear Accretion
 â€¦' | abs_len= 1208
[12:54:25] verify | result supports= False fit= 0.00 top= 0.00 invalid= no_quote cue_hint= False
[12:54:25] select | verify relaxed 4/10
[12:54:25] verify | func= Motivation | rank= 3 | pid= cond-mat/0102414 | title_snip='Spin fluctuations in a magnetically frustrated metal, LiV2O4' | abs_len= 735
[12:54:27] verify | result supports= False fit= 0.00 top= 0.00 invalid= no_quote cue_hint= False
[12:54:27] select | verify relaxed 5/10
[12:54:27] verify | func= Motivation | rank= 4 | pid= physics/0103029 | title_snip='The Inertial Polarization Principle: The Mechanism Underlying
  Sonoluâ€¦' | abs_len= 1263
[12:54:30] verify | result supports= False fit= 0.00 top= 0.00 invalid= no_quote cue_hint= False
[12:54:30] select | verify relaxed 6/10
[12:54:30] verify | func= Motivation | rank= 5 | pid= astro-ph/0101001 | title_snip='Polarized Microwave Radiation from Dust' | abs_len= 1125
[12:54:33] verify | result supports= False fit= 0.00 top= 0.00 invalid= no_quote cue_hint= False
[12:54:33] select | verify relaxed 7/10
[12:54:33] verify | func= Motivation | rank= 6 | pid= astro-ph/0102445 | title_snip='Optical Structure and Physics of the M87 Jet' | abs_len= 1065
[12:54:36] verify | result supports= False fit= 0.00 top= 0.00 invalid= no_quote cue_hint= False
[12:54:36] select | verify relaxed 8/10
[12:54:36] verify | func= Motivation | rank= 7 | pid= nucl-th/0102026 | title_snip='Polarization observables in the reaction $p n \to d \phi$' | abs_len= 195
[12:54:38] verify | result supports= False fit= 0.00 top= 0.00 invalid= no_quote cue_hint= False
[12:54:38] select | verify relaxed 9/10
[12:54:38] verify | func= Motivation | rank= 8 | pid= astro-ph/0101368 | title_snip='Polarization of the Cosmic Microwave Background from Non-Uniform
  Reiâ€¦' | abs_len= 1537
[12:54:41] verify | result supports= False fit= 0.00 top= 0.00 invalid= no_quote cue_hint= False
[12:54:41] select | verify relaxed 10/10
[12:54:41] verify | func= Motivation | rank= 9 | pid= hep-ex/0101010 | title_snip='Constraining CP-Violating TGCs and Measuring W-Polarization at OPAL' | abs_len= 430
[12:54:44] verify | result supports= False fit= 0.00 top= 0.00 invalid= no_quote cue_hint= False

================================================================================
FUNCTION: Motivation
QUERY   : What motivates the investigation of magnetic field fluctuations in the NGC 7538 region and how are the observations of polarization used to understand these fluctuations?
- WINNER: astro-ph/0103334 | Submillimeter Imaging Polarimetry of the NGC 7538 Region
- QUOTE : small scale fluctuations of the magnetic field
- WHY   : sufficient

================================================================================
UNIFIED ANSWER (1â€“2 sentences, tagged):
The investigation of magnetic field fluctuations in the NGC 7538 region is motivated by the desire to understand the role of magnetic fields in guiding molecular outflows and the differences in evolutionary stages of cores [Motivation] (astro-ph/0103334). The observations of polarization are used to understand these fluctuations, providing insight into the magnetic field structure and its impact on core evolution, with the background being the distinct polarization patterns and degrees of polarization in the IRS 1(SMM) and IRS 11(SMM) cores [Background] (astro-ph/0103334).

ðŸ“„ Saved: outputs/function_selection_results.json
ðŸ“„ Saved: outputs/function_selection_results.jsonl
ðŸ“ Unified answer: outputs/function_answer_unified.txt
-> /home/anpa439f/anaconda3/envs/myenv/bin/python3 /data/horse/ws/anpa439f-Function_Retrieval_Citation/Research_Project/RetrievalAugmentedGeneration/classifying_question.py  (cwd=/data/horse/ws/anpa439f-Function_Retrieval_Citation/Research_Project/RetrievalAugmentedGeneration)
âœ… Saved to classified_outputs.jsonl
ðŸ”§ Ready for retrieval module (.py).
-> /home/anpa439f/anaconda3/envs/myenv/bin/python3 /data/horse/ws/anpa439f-Function_Retrieval_Citation/Research_Project/RetrievalAugmentedGeneration/Retreival_query_based.py --skip-reindex --index /data/horse/ws/anpa439f-Function_Retrieval_Citation/Research_Project/e5_index_subset_1/index.faiss --meta /data/horse/ws/anpa439f-Function_Retrieval_Citation/Research_Project/e5_index_subset_1/meta.parquet --topk 20  (cwd=/data/horse/ws/anpa439f-Function_Retrieval_Citation/Research_Project/RetrievalAugmentedGeneration)
âœ… Top-k candidates: /data/horse/ws/anpa439f-Function_Retrieval_Citation/Research_Project/RetrievalAugmentedGeneration/outputs/topk_candidates_query.jsonl
ðŸ”— Symlinked: /data/horse/ws/anpa439f-Function_Retrieval_Citation/Research_Project/outputs/topk_candidates_query.jsonl -> /data/horse/ws/anpa439f-Function_Retrieval_Citation/Research_Project/RetrievalAugmentedGeneration/outputs/topk_candidates_query.jsonl
-> /home/anpa439f/anaconda3/envs/myenv/bin/python3 /data/horse/ws/anpa439f-Function_Retrieval_Citation/Research_Project/RetrievalAugmentedGeneration/function_based_answer-2_copy.py --debug --max-check 10  (cwd=/data/horse/ws/anpa439f-Function_Retrieval_Citation/Research_Project/RetrievalAugmentedGeneration)

ðŸŽ‰ Pipeline complete.
  â€¢ Classified file : /data/horse/ws/anpa439f-Function_Retrieval_Citation/Research_Project/RetrievalAugmentedGeneration/classified_outputs.jsonl
  â€¢ TopK (canonical): /data/horse/ws/anpa439f-Function_Retrieval_Citation/Research_Project/RetrievalAugmentedGeneration/outputs/topk_candidates_query.jsonl
  â€¢ Final outputs   : /data/horse/ws/anpa439f-Function_Retrieval_Citation/Research_Project/RetrievalAugmentedGeneration/outputs
