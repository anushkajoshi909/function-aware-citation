âœ… Available Models:
1. alias-reasoning
2. alias-ha
3. meta-llama/Llama-3.3-70B-Instruct
4. meta-llama/Llama-3.1-8B-Instruct
5. Qwen/Qwen2-VL-7B-Instruct
6. alias-vision
7. openGPT-X/Teuken-7B-instruct-research-v0.4
8. deepseek-ai/DeepSeek-Coder-V2-Lite-Instruct
9. Qwen/Qwen3-Coder-30B-A3B-Instruct
10. alias-code
11. Qwen/Qwen3-Embedding-4B
12. BAAI/bge-reranker-v2-m3
13. stabilityai/stable-diffusion-3.5-large-turbo
14. alias-image-generation
15. black-forest-labs/FLUX.1-dev
16. openai/whisper-large-v3
17. Kokoro-82M
18. tts-1-hd
19. deepseek-ai/DeepSeek-R1
20. openai/gpt-oss-120b
21. meta-llama/Llama-4-Scout-17B-16E-Instruct

ðŸ‘‰ Select a model number (default = 1): 
âœ… Using model: openai/gpt-oss-120b

ðŸ” Enter a scientific query or topic: 
ðŸ”Ž Citation Function Classification:
{
  "citation_functions": [
    "Motivation",
    "Compares"
  ],
  "justification": "The query seeks reasons (limitations) that drove the new study (Motivation) and asks how the findings compare to earlier expectations (Compares)."
}

âœ… Saved to classified_outputs.jsonl
ðŸ”§ Ready for retrieval module (handled in a separate file).
âš¡ SKIP_REINDEX=1 â€” using existing FAISS index + meta; not scanning raw JSONL shards.
âœ… Top-k candidates (FAISS): /data/horse/ws/anpa439f-Function_Retrieval_Citation/Research_Project/RetrievalAugmentedGeneration/outputs/topk_candidates_query.jsonl
[00:51:02] main | args: Namespace(max_check=10, debug=True)
[00:51:02] read_last_jsonl | path= classified_outputs.jsonl
[00:51:02] read_last_jsonl | total_lines= 1
[00:51:02] main | query='What limitations in previous studies of star formation rates in Lyman break galaxies motivated the current work and how does it compare to previous expectations?' | funcs=['Motivation', 'Compares']
[00:51:03] main | core_terms= ['Lyman break galaxies', 'star formation rates']
[00:51:03] load_topk_jsonl | path= /data/horse/ws/anpa439f-Function_Retrieval_Citation/Research_Project/outputs/topk_candidates_query.jsonl
[00:51:03] load_topk_jsonl | rows= 20
[00:51:03] load_topk_jsonl | first: rank= 0 paper_id= astro-ph/0101254 title_snip='Deep Observations of Lyman Break Galaxies' abs_len= 480
[00:51:03] main | running function= Motivation
[00:51:03] select | function= Motivation | candidates_in= 20
[00:51:03] select | core_terms= ['Lyman break galaxies', 'star formation rates']
[00:51:03] select | no cosine prune; kept=20/20
[00:51:03] select | pool_size= 10 | ranks= [0, 1, 2, 3, 4, 5, 6, 7, 8, 9] | pids= ['astro-ph/0101254', 'astro-ph/0102456', 'astro-ph/0101386', 'astro-ph/0103305', 'astro-ph/0101174', 'astro-ph/0104442', 'astro-ph/0101544', 'astro-ph/0101472', 'hep-ph/0102163', 'hep-ph/0103299']
[00:51:03] select | verify relaxed 1/10
[00:51:03] verify | func= Motivation | rank= 0 | pid= astro-ph/0101254 | title_snip='Deep Observations of Lyman Break Galaxies' | abs_len= 480
[00:51:06] verify | result supports= False fit= 0.00 top= 0.80 invalid= â€” cue_hint= False
[00:51:06] select | verify relaxed 2/10
[00:51:06] verify | func= Motivation | rank= 1 | pid= astro-ph/0102456 | title_snip='The Rest Frame Optical Spectra of Lyman Break Galaxies: Star Formationâ€¦' | abs_len= 1726
[00:51:09] verify | result supports= True fit= 0.80 top= 0.90 invalid= â€” cue_hint= False
[00:51:09] select | verify relaxed 3/10
[00:51:09] verify | func= Motivation | rank= 2 | pid= astro-ph/0101386 | title_snip='How Does CMB + BBN Constrain New Physics?' | abs_len= 1035
[00:51:12] verify | result supports= False fit= 0.00 top= 0.00 invalid= no_quote cue_hint= False
[00:51:12] select | verify relaxed 4/10
[00:51:12] verify | func= Motivation | rank= 3 | pid= astro-ph/0103305 | title_snip='New HST spectra indicate the QSO PG1718+4807 will not give the
  primoâ€¦' | abs_len= 987
[00:51:14] verify | result supports= False fit= 0.00 top= 0.00 invalid= no_quote cue_hint= False
[00:51:14] select | verify relaxed 5/10
[00:51:14] verify | func= Motivation | rank= 4 | pid= astro-ph/0101174 | title_snip='Extended Lyman Alpha Emission Around Young Quasars: a Constraint on
  â€¦' | abs_len= 1134
[00:51:17] verify | result supports= False fit= 0.00 top= 0.20 invalid= no_quote cue_hint= False
[00:51:17] select | verify relaxed 6/10
[00:51:17] verify | func= Motivation | rank= 5 | pid= astro-ph/0104442 | title_snip='The Cosmic Baryon Fraction and the Extragalactic Ionizing Background' | abs_len= 1674
[00:51:21] verify | result supports= False fit= 0.00 top= 0.90 invalid= off_topic_no_core_in_abstract cue_hint= False
[00:51:21] select | verify relaxed 7/10
[00:51:21] verify | func= Motivation | rank= 6 | pid= astro-ph/0101544 | title_snip='Dark energy and the epoch of galaxy formation' | abs_len= 971
[00:51:23] verify | result supports= False fit= 0.00 top= 0.00 invalid= no_quote cue_hint= False
[00:51:23] select | verify relaxed 8/10
[00:51:23] verify | func= Motivation | rank= 7 | pid= astro-ph/0101472 | title_snip='Cosmological History of Stars and Metals' | abs_len= 1543
[00:51:26] verify | result supports= False fit= 0.00 top= 0.50 invalid= â€” cue_hint= False
[00:51:26] select | verify relaxed 9/10
[00:51:26] verify | func= Motivation | rank= 8 | pid= hep-ph/0102163 | title_snip='The b->sgamma rate and Higgs boson limits in the Constrained Minimal
 â€¦' | abs_len= 1026
[00:51:29] verify | result supports= False fit= 0.00 top= 0.00 invalid= no_quote cue_hint= False
[00:51:29] select | verify relaxed 10/10
[00:51:29] verify | func= Motivation | rank= 9 | pid= hep-ph/0103299 | title_snip='Constraining Models of New Physics in Light of Recent Experimental
  Râ€¦' | abs_len= 780
[00:51:32] verify | result supports= False fit= 0.00 top= 0.00 invalid= no_quote cue_hint= False

================================================================================
FUNCTION: Motivation
QUERY   : What limitations in previous studies of star formation rates in Lyman break galaxies motivated the current work and how does it compare to previous expectations?
- WINNER: astro-ph/0102456 | The Rest Frame Optical Spectra of Lyman Break Galaxies: Star Formation,
  Extinction, Abundances, and Kinematics
- QUOTE : Contrary to expectations, the star formation rates
- WHY   : sufficient
[00:51:33] main | running function= Compares
[00:51:33] select | function= Compares | candidates_in= 20
[00:51:33] select | core_terms= ['Lyman break galaxies', 'star formation rates']
[00:51:33] select | no cosine prune; kept=20/20
[00:51:33] select | pool_size= 10 | ranks= [0, 1, 2, 3, 4, 5, 6, 7, 8, 9] | pids= ['astro-ph/0101254', 'astro-ph/0102456', 'astro-ph/0101386', 'astro-ph/0103305', 'astro-ph/0101174', 'astro-ph/0104442', 'astro-ph/0101544', 'astro-ph/0101472', 'hep-ph/0102163', 'hep-ph/0103299']
[00:51:33] select | verify relaxed 1/10
[00:51:33] verify | func= Compares | rank= 0 | pid= astro-ph/0101254 | title_snip='Deep Observations of Lyman Break Galaxies' | abs_len= 480
[00:51:36] verify | result supports= False fit= 0.00 top= 0.80 invalid= â€” cue_hint= False
[00:51:36] select | verify relaxed 2/10
[00:51:36] verify | func= Compares | rank= 1 | pid= astro-ph/0102456 | title_snip='The Rest Frame Optical Spectra of Lyman Break Galaxies: Star Formationâ€¦' | abs_len= 1726
[00:51:39] verify | result supports= True fit= 0.80 top= 0.90 invalid= â€” cue_hint= False
[00:51:39] select | verify relaxed 3/10
[00:51:39] verify | func= Compares | rank= 2 | pid= astro-ph/0101386 | title_snip='How Does CMB + BBN Constrain New Physics?' | abs_len= 1035
[00:51:42] verify | result supports= False fit= 0.00 top= 0.00 invalid= no_quote cue_hint= False
[00:51:42] select | verify relaxed 4/10
[00:51:42] verify | func= Compares | rank= 3 | pid= astro-ph/0103305 | title_snip='New HST spectra indicate the QSO PG1718+4807 will not give the
  primoâ€¦' | abs_len= 987
[00:51:44] verify | result supports= False fit= 0.00 top= 0.00 invalid= no_quote cue_hint= False
[00:51:44] select | verify relaxed 5/10
[00:51:44] verify | func= Compares | rank= 4 | pid= astro-ph/0101174 | title_snip='Extended Lyman Alpha Emission Around Young Quasars: a Constraint on
  â€¦' | abs_len= 1134
[00:51:47] verify | result supports= False fit= 0.00 top= 0.20 invalid= no_quote cue_hint= False
[00:51:47] select | verify relaxed 6/10
[00:51:47] verify | func= Compares | rank= 5 | pid= astro-ph/0104442 | title_snip='The Cosmic Baryon Fraction and the Extragalactic Ionizing Background' | abs_len= 1674
[00:51:50] verify | result supports= False fit= 0.00 top= 0.90 invalid= off_topic_no_core_in_abstract cue_hint= False
[00:51:50] select | verify relaxed 7/10
[00:51:50] verify | func= Compares | rank= 6 | pid= astro-ph/0101544 | title_snip='Dark energy and the epoch of galaxy formation' | abs_len= 971
[00:51:53] verify | result supports= False fit= 0.00 top= 0.00 invalid= no_quote cue_hint= False
[00:51:53] select | verify relaxed 8/10
[00:51:53] verify | func= Compares | rank= 7 | pid= astro-ph/0101472 | title_snip='Cosmological History of Stars and Metals' | abs_len= 1543
[00:51:56] verify | result supports= False fit= 0.00 top= 0.50 invalid= â€” cue_hint= False
[00:51:56] select | verify relaxed 9/10
[00:51:56] verify | func= Compares | rank= 8 | pid= hep-ph/0102163 | title_snip='The b->sgamma rate and Higgs boson limits in the Constrained Minimal
 â€¦' | abs_len= 1026
[00:51:58] verify | result supports= False fit= 0.00 top= 0.00 invalid= no_quote cue_hint= False
[00:51:58] select | verify relaxed 10/10
[00:51:58] verify | func= Compares | rank= 9 | pid= hep-ph/0103299 | title_snip='Constraining Models of New Physics in Light of Recent Experimental
  Râ€¦' | abs_len= 780
[00:52:01] verify | result supports= False fit= 0.00 top= 0.00 invalid= no_quote cue_hint= False

================================================================================
FUNCTION: Compares
QUERY   : What limitations in previous studies of star formation rates in Lyman break galaxies motivated the current work and how does it compare to previous expectations?
- WINNER: astro-ph/0102456 | The Rest Frame Optical Spectra of Lyman Break Galaxies: Star Formation,
  Extinction, Abundances, and Kinematics
- QUOTE : Contrary to expectations, the star formation rates
- WHY   : sufficient

================================================================================
UNIFIED ANSWER (1â€“2 sentences, tagged):
The limitations in previous studies of star formation rates in Lyman break galaxies, which motivated the current work [Motivation], were the uncertainties in calibrations of star formation tracers and the potential for differential extinction between rest-frame optical and UV [Compares] (astro-ph/0102456). The current work compares to previous expectations by finding that the star formation rates deduced from Hbeta luminosity are on average no larger than those implied by the stellar continuum at 1500 A [Compares] (astro-ph/0102456).

ðŸ“„ Saved: outputs/function_selection_results.json
ðŸ“„ Saved: outputs/function_selection_results.jsonl
ðŸ“ Unified answer: outputs/function_answer_unified.txt
-> /home/anpa439f/anaconda3/envs/myenv/bin/python3 /data/horse/ws/anpa439f-Function_Retrieval_Citation/Research_Project/RetrievalAugmentedGeneration/classifying_question.py  (cwd=/data/horse/ws/anpa439f-Function_Retrieval_Citation/Research_Project/RetrievalAugmentedGeneration)
âœ… Saved to classified_outputs.jsonl
ðŸ”§ Ready for retrieval module (.py).
-> /home/anpa439f/anaconda3/envs/myenv/bin/python3 /data/horse/ws/anpa439f-Function_Retrieval_Citation/Research_Project/RetrievalAugmentedGeneration/Retreival_query_based.py --skip-reindex --index /data/horse/ws/anpa439f-Function_Retrieval_Citation/Research_Project/e5_index_subset_1/index.faiss --meta /data/horse/ws/anpa439f-Function_Retrieval_Citation/Research_Project/e5_index_subset_1/meta.parquet --topk 20  (cwd=/data/horse/ws/anpa439f-Function_Retrieval_Citation/Research_Project/RetrievalAugmentedGeneration)
âœ… Top-k candidates: /data/horse/ws/anpa439f-Function_Retrieval_Citation/Research_Project/RetrievalAugmentedGeneration/outputs/topk_candidates_query.jsonl
ðŸ”— Symlinked: /data/horse/ws/anpa439f-Function_Retrieval_Citation/Research_Project/outputs/topk_candidates_query.jsonl -> /data/horse/ws/anpa439f-Function_Retrieval_Citation/Research_Project/RetrievalAugmentedGeneration/outputs/topk_candidates_query.jsonl
-> /home/anpa439f/anaconda3/envs/myenv/bin/python3 /data/horse/ws/anpa439f-Function_Retrieval_Citation/Research_Project/RetrievalAugmentedGeneration/function_based_answer-2_copy.py --debug --max-check 10  (cwd=/data/horse/ws/anpa439f-Function_Retrieval_Citation/Research_Project/RetrievalAugmentedGeneration)

ðŸŽ‰ Pipeline complete.
  â€¢ Classified file : /data/horse/ws/anpa439f-Function_Retrieval_Citation/Research_Project/RetrievalAugmentedGeneration/classified_outputs.jsonl
  â€¢ TopK (canonical): /data/horse/ws/anpa439f-Function_Retrieval_Citation/Research_Project/RetrievalAugmentedGeneration/outputs/topk_candidates_query.jsonl
  â€¢ Final outputs   : /data/horse/ws/anpa439f-Function_Retrieval_Citation/Research_Project/RetrievalAugmentedGeneration/outputs
