âœ… Available Models:
1. alias-reasoning
2. alias-ha
3. meta-llama/Llama-3.3-70B-Instruct
4. meta-llama/Llama-3.1-8B-Instruct
5. Qwen/Qwen2-VL-7B-Instruct
6. alias-vision
7. openGPT-X/Teuken-7B-instruct-research-v0.4
8. deepseek-ai/DeepSeek-Coder-V2-Lite-Instruct
9. Qwen/Qwen3-Coder-30B-A3B-Instruct
10. alias-code
11. Qwen/Qwen3-Embedding-4B
12. BAAI/bge-reranker-v2-m3
13. stabilityai/stable-diffusion-3.5-large-turbo
14. alias-image-generation
15. black-forest-labs/FLUX.1-dev
16. openai/whisper-large-v3
17. Kokoro-82M
18. tts-1-hd
19. deepseek-ai/DeepSeek-R1
20. openai/gpt-oss-120b
21. meta-llama/Llama-4-Scout-17B-16E-Instruct

ðŸ‘‰ Select a model number (default = 1): 
âœ… Using model: openai/gpt-oss-120b

ðŸ” Enter a scientific query or topic: 
ðŸ”Ž Citation Function Classification:
{
  "citation_functions": [
    "Compares",
    "Background"
  ],
  "justification": "The query asks how the new detection relates to earlier studies, requiring contextual background and a comparison with prior work on galaxy interactions and distance measurements."
}

âœ… Saved to classified_outputs.jsonl
ðŸ”§ Ready for retrieval module (handled in a separate file).
âš¡ SKIP_REINDEX=1 â€” using existing FAISS index + meta; not scanning raw JSONL shards.
âœ… Top-k candidates (FAISS): /data/horse/ws/anpa439f-Function_Retrieval_Citation/Research_Project/RetrievalAugmentedGeneration/outputs/topk_candidates_query.jsonl
[00:52:21] main | args: Namespace(max_check=10, debug=True)
[00:52:21] read_last_jsonl | path= classified_outputs.jsonl
[00:52:21] read_last_jsonl | total_lines= 1
[00:52:21] main | query='How does the detection of upper main sequence stars and red giant branch stars in the halo of an amorphous galaxy relate to previous work on galaxy interactions and distance measurements?' | funcs=['Compares', 'Background']
[00:52:23] main | core_terms= ['upper main sequence stars', 'red giant branch stars', 'galaxy halo', 'galaxy interactions', 'distance measurements']
[00:52:23] load_topk_jsonl | path= /data/horse/ws/anpa439f-Function_Retrieval_Citation/Research_Project/outputs/topk_candidates_query.jsonl
[00:52:23] load_topk_jsonl | rows= 20
[00:52:23] load_topk_jsonl | first: rank= 0 paper_id= astro-ph/0103121 title_snip='Observation of the Halo of NGC 3077 Near the "Garland" Region Using thâ€¦' abs_len= 1197
[00:52:23] main | running function= Compares
[00:52:23] select | function= Compares | candidates_in= 20
[00:52:23] select | core_terms= ['upper main sequence stars', 'red giant branch stars', 'galaxy halo', 'galaxy interactions', 'distance measurements']
[00:52:23] select | no cosine prune; kept=20/20
[00:52:23] select | pool_size= 10 | ranks= [0, 1, 2, 3, 4, 5, 6, 7, 8, 9] | pids= ['astro-ph/0103121', 'astro-ph/0102397', 'astro-ph/0101338', 'astro-ph/0103502', 'astro-ph/0101271', 'astro-ph/0103518', 'astro-ph/0101436', 'astro-ph/0104037', 'astro-ph/0102436', 'astro-ph/0101323']
[00:52:23] select | verify relaxed 1/10
[00:52:23] verify | func= Compares | rank= 0 | pid= astro-ph/0103121 | title_snip='Observation of the Halo of NGC 3077 Near the "Garland" Region Using thâ€¦' | abs_len= 1197
[00:52:27] verify | result supports= True fit= 0.80 top= 0.90 invalid= â€” cue_hint= False
[00:52:27] select | verify relaxed 2/10
[00:52:27] verify | func= Compares | rank= 1 | pid= astro-ph/0102397 | title_snip='A Near-Infrared Stellar Census of Blue Compact Dwarf Galaxies: The
  Wâ€¦' | abs_len= 1230
[00:52:30] verify | result supports= False fit= 0.00 top= 0.20 invalid= â€” cue_hint= False
[00:52:30] select | verify relaxed 3/10
[00:52:30] verify | func= Compares | rank= 2 | pid= astro-ph/0101338 | title_snip='Observational Signatures of the First Stars' | abs_len= 569
[00:52:33] verify | result supports= False fit= 0.00 top= 0.00 invalid= no_quote cue_hint= False
[00:52:33] select | verify relaxed 4/10
[00:52:33] verify | func= Compares | rank= 3 | pid= astro-ph/0103502 | title_snip='Abundances in Stars from the Red Giant Branch Tip to the Near the Mainâ€¦' | abs_len= 546
[00:52:36] verify | result supports= False fit= 0.00 top= 0.20 invalid= â€” cue_hint= False
[00:52:36] select | verify relaxed 5/10
[00:52:36] verify | func= Compares | rank= 4 | pid= astro-ph/0101271 | title_snip='The X-ray Emission in Post-Merger Ellipticals' | abs_len= 909
[00:52:39] verify | result supports= False fit= 0.00 top= 0.00 invalid= no_quote cue_hint= False
[00:52:39] select | verify relaxed 6/10
[00:52:39] verify | func= Compares | rank= 5 | pid= astro-ph/0103518 | title_snip='Background galaxies as reddening probes throughout the Magellanic Clouâ€¦' | abs_len= 1323
[00:52:41] verify | result supports= False fit= 0.00 top= 0.00 invalid= no_quote cue_hint= False
[00:52:41] select | verify relaxed 7/10
[00:52:41] verify | func= Compares | rank= 6 | pid= astro-ph/0101436 | title_snip='Photometry and the Metallicity Distribution of the Outer Halo of M31' | abs_len= 1815
[00:52:45] verify | result supports= False fit= 0.00 top= 0.90 invalid= off_topic_no_core_in_abstract cue_hint= False
[00:52:45] select | verify relaxed 8/10
[00:52:45] verify | func= Compares | rank= 7 | pid= astro-ph/0104037 | title_snip='Faint End of the Galaxy Luminosity Function: A Chronometer for Structuâ€¦' | abs_len= 1418
[00:52:48] verify | result supports= False fit= 0.00 top= 0.20 invalid= â€” cue_hint= False
[00:52:48] select | verify relaxed 9/10
[00:52:48] verify | func= Compares | rank= 8 | pid= astro-ph/0102436 | title_snip='The Host Haloes of Lyman Break Galaxies and Sub-millimeter Sources' | abs_len= 1580
[00:52:51] verify | result supports= False fit= 0.00 top= 0.00 invalid= no_quote cue_hint= False
[00:52:51] select | verify relaxed 10/10
[00:52:51] verify | func= Compares | rank= 9 | pid= astro-ph/0101323 | title_snip='Lithium-Beryllium-Boron Evolution: From Meneguzzi, Audouze and Reeves
â€¦' | abs_len= 595
[00:52:53] verify | result supports= False fit= 0.00 top= 0.00 invalid= no_quote cue_hint= False

================================================================================
FUNCTION: Compares
QUERY   : How does the detection of upper main sequence stars and red giant branch stars in the halo of an amorphous galaxy relate to previous work on galaxy interactions and distance measurements?
- WINNER: astro-ph/0103121 | Observation of the Halo of NGC 3077 Near the "Garland" Region Using the
  Hubble Space Telescope
- QUOTE : the observed upper main sequence stars are likely the results of the star formation triggered by the M81-NGC3077 tidal interaction
- WHY   : sufficient
[00:52:55] main | running function= Background
[00:52:55] select | function= Background | candidates_in= 20
[00:52:55] select | core_terms= ['upper main sequence stars', 'red giant branch stars', 'galaxy halo', 'galaxy interactions', 'distance measurements']
[00:52:55] select | no cosine prune; kept=20/20
[00:52:55] select | pool_size= 10 | ranks= [0, 1, 2, 3, 4, 5, 6, 7, 8, 9] | pids= ['astro-ph/0103121', 'astro-ph/0102397', 'astro-ph/0101338', 'astro-ph/0103502', 'astro-ph/0101271', 'astro-ph/0103518', 'astro-ph/0101436', 'astro-ph/0104037', 'astro-ph/0102436', 'astro-ph/0101323']
[00:52:55] select | verify relaxed 1/10
[00:52:55] verify | func= Background | rank= 0 | pid= astro-ph/0103121 | title_snip='Observation of the Halo of NGC 3077 Near the "Garland" Region Using thâ€¦' | abs_len= 1197
[00:52:58] verify | result supports= True fit= 0.80 top= 0.90 invalid= â€” cue_hint= False
[00:52:58] select | verify relaxed 2/10
[00:52:58] verify | func= Background | rank= 1 | pid= astro-ph/0102397 | title_snip='A Near-Infrared Stellar Census of Blue Compact Dwarf Galaxies: The
  Wâ€¦' | abs_len= 1230
[00:53:01] verify | result supports= False fit= 0.00 top= 0.20 invalid= â€” cue_hint= False
[00:53:01] select | verify relaxed 3/10
[00:53:01] verify | func= Background | rank= 2 | pid= astro-ph/0101338 | title_snip='Observational Signatures of the First Stars' | abs_len= 569
[00:53:04] verify | result supports= False fit= 0.00 top= 0.00 invalid= no_quote cue_hint= False
[00:53:04] select | verify relaxed 4/10
[00:53:04] verify | func= Background | rank= 3 | pid= astro-ph/0103502 | title_snip='Abundances in Stars from the Red Giant Branch Tip to the Near the Mainâ€¦' | abs_len= 546
[00:53:07] verify | result supports= False fit= 0.00 top= 0.90 invalid= off_topic_no_core_in_abstract cue_hint= False
[00:53:07] select | verify relaxed 5/10
[00:53:07] verify | func= Background | rank= 4 | pid= astro-ph/0101271 | title_snip='The X-ray Emission in Post-Merger Ellipticals' | abs_len= 909
[00:53:10] verify | result supports= False fit= 0.00 top= 0.00 invalid= no_quote cue_hint= False
[00:53:10] select | verify relaxed 6/10
[00:53:10] verify | func= Background | rank= 5 | pid= astro-ph/0103518 | title_snip='Background galaxies as reddening probes throughout the Magellanic Clouâ€¦' | abs_len= 1323
[00:53:12] verify | result supports= False fit= 0.00 top= 0.00 invalid= no_quote cue_hint= False
[00:53:12] select | verify relaxed 7/10
[00:53:12] verify | func= Background | rank= 6 | pid= astro-ph/0101436 | title_snip='Photometry and the Metallicity Distribution of the Outer Halo of M31' | abs_len= 1815
[00:53:16] verify | result supports= False fit= 0.00 top= 0.90 invalid= off_topic_no_core_in_abstract cue_hint= False
[00:53:16] select | verify relaxed 8/10
[00:53:16] verify | func= Background | rank= 7 | pid= astro-ph/0104037 | title_snip='Faint End of the Galaxy Luminosity Function: A Chronometer for Structuâ€¦' | abs_len= 1418
[00:53:18] verify | result supports= False fit= 0.00 top= 0.00 invalid= no_quote cue_hint= False
[00:53:18] select | verify relaxed 9/10
[00:53:18] verify | func= Background | rank= 8 | pid= astro-ph/0102436 | title_snip='The Host Haloes of Lyman Break Galaxies and Sub-millimeter Sources' | abs_len= 1580
[00:53:21] verify | result supports= False fit= 0.00 top= 0.00 invalid= no_quote cue_hint= False
[00:53:21] select | verify relaxed 10/10
[00:53:21] verify | func= Background | rank= 9 | pid= astro-ph/0101323 | title_snip='Lithium-Beryllium-Boron Evolution: From Meneguzzi, Audouze and Reeves
â€¦' | abs_len= 595
[00:53:23] verify | result supports= False fit= 0.00 top= 0.00 invalid= no_quote cue_hint= False

================================================================================
FUNCTION: Background
QUERY   : How does the detection of upper main sequence stars and red giant branch stars in the halo of an amorphous galaxy relate to previous work on galaxy interactions and distance measurements?
- WINNER: astro-ph/0103121 | Observation of the Halo of NGC 3077 Near the "Garland" Region Using the
  Hubble Space Telescope
- QUOTE : using Wide Field Planetary Camera~2 on board the Hubble Space Telescope
- WHY   : sufficient

================================================================================
UNIFIED ANSWER (1â€“2 sentences, tagged):
The detection of upper main sequence stars and red giant branch stars in the halo of an amorphous galaxy [Compares] previous work on galaxy interactions, as the observed stars are likely the result of star formation triggered by tidal interaction (astro-ph/0103121). This study is set against the [Background] of galaxy distance measurements, where the detected red giant branch luminosity function is used to estimate a distance modulus that agrees with other galaxies in the M81 Group (astro-ph/0103121).

ðŸ“„ Saved: outputs/function_selection_results.json
ðŸ“„ Saved: outputs/function_selection_results.jsonl
ðŸ“ Unified answer: outputs/function_answer_unified.txt
-> /home/anpa439f/anaconda3/envs/myenv/bin/python3 /data/horse/ws/anpa439f-Function_Retrieval_Citation/Research_Project/RetrievalAugmentedGeneration/classifying_question.py  (cwd=/data/horse/ws/anpa439f-Function_Retrieval_Citation/Research_Project/RetrievalAugmentedGeneration)
âœ… Saved to classified_outputs.jsonl
ðŸ”§ Ready for retrieval module (.py).
-> /home/anpa439f/anaconda3/envs/myenv/bin/python3 /data/horse/ws/anpa439f-Function_Retrieval_Citation/Research_Project/RetrievalAugmentedGeneration/Retreival_query_based.py --skip-reindex --index /data/horse/ws/anpa439f-Function_Retrieval_Citation/Research_Project/e5_index_subset_1/index.faiss --meta /data/horse/ws/anpa439f-Function_Retrieval_Citation/Research_Project/e5_index_subset_1/meta.parquet --topk 20  (cwd=/data/horse/ws/anpa439f-Function_Retrieval_Citation/Research_Project/RetrievalAugmentedGeneration)
âœ… Top-k candidates: /data/horse/ws/anpa439f-Function_Retrieval_Citation/Research_Project/RetrievalAugmentedGeneration/outputs/topk_candidates_query.jsonl
ðŸ”— Symlinked: /data/horse/ws/anpa439f-Function_Retrieval_Citation/Research_Project/outputs/topk_candidates_query.jsonl -> /data/horse/ws/anpa439f-Function_Retrieval_Citation/Research_Project/RetrievalAugmentedGeneration/outputs/topk_candidates_query.jsonl
-> /home/anpa439f/anaconda3/envs/myenv/bin/python3 /data/horse/ws/anpa439f-Function_Retrieval_Citation/Research_Project/RetrievalAugmentedGeneration/function_based_answer-2_copy.py --debug --max-check 10  (cwd=/data/horse/ws/anpa439f-Function_Retrieval_Citation/Research_Project/RetrievalAugmentedGeneration)

ðŸŽ‰ Pipeline complete.
  â€¢ Classified file : /data/horse/ws/anpa439f-Function_Retrieval_Citation/Research_Project/RetrievalAugmentedGeneration/classified_outputs.jsonl
  â€¢ TopK (canonical): /data/horse/ws/anpa439f-Function_Retrieval_Citation/Research_Project/RetrievalAugmentedGeneration/outputs/topk_candidates_query.jsonl
  â€¢ Final outputs   : /data/horse/ws/anpa439f-Function_Retrieval_Citation/Research_Project/RetrievalAugmentedGeneration/outputs
