âœ… Available Models:
1. alias-reasoning
2. alias-ha
3. meta-llama/Llama-3.3-70B-Instruct
4. meta-llama/Llama-3.1-8B-Instruct
5. Qwen/Qwen2-VL-7B-Instruct
6. alias-vision
7. openGPT-X/Teuken-7B-instruct-research-v0.4
8. deepseek-ai/DeepSeek-Coder-V2-Lite-Instruct
9. Qwen/Qwen3-Coder-30B-A3B-Instruct
10. alias-code
11. Qwen/Qwen3-Embedding-4B
12. BAAI/bge-reranker-v2-m3
13. stabilityai/stable-diffusion-3.5-large-turbo
14. alias-image-generation
15. black-forest-labs/FLUX.1-dev
16. openai/whisper-large-v3
17. Kokoro-82M
18. tts-1-hd
19. deepseek-ai/DeepSeek-R1
20. openai/gpt-oss-120b
21. meta-llama/Llama-4-Scout-17B-16E-Instruct

ðŸ‘‰ Select a model number (default = 1): 
âœ… Using model: openGPT-X/Teuken-7B-instruct-research-v0.4

ðŸ” Enter a scientific query or topic: 
ðŸ”Ž Citation Function Classification:
{
  "citation_functions": [
    "Background",
    "Motivation"
  ],
  "justification": "The query seeks to understand the comparison between the results of a study and previous models of the Milky Way, and to identify future research directions based on the findings on dark matter halo shapes and Galactic constants. It introduces background information and motivation for the study."
}

âœ… Saved to classified_outputs.jsonl
ðŸ”§ Ready for retrieval module (handled in a separate file).
âš¡ SKIP_REINDEX=1 â€” using existing FAISS index + meta; not scanning raw JSONL shards.
âœ… Top-k candidates (FAISS): /data/horse/ws/anpa439f-Function_Retrieval_Citation/Research_Project/RetrievalAugmentedGeneration/outputs/topk_candidates_query.jsonl
[14:18:03] main | args: Namespace(max_check=10, debug=True)
[14:18:03] read_last_jsonl | path= classified_outputs.jsonl
[14:18:03] read_last_jsonl | total_lines= 1
[14:18:03] main | query='How do the results of this study compare to previous models of the Milky Way, and what future research directions are suggested by the findings on dark matter halo shapes and Galactic constants?' | funcs=['Background', 'Motivation']
[14:18:04] main | core_terms= ['Milky Way', 'dark matter halo', 'Galactic constants']
[14:18:04] load_topk_jsonl | path= /data/horse/ws/anpa439f-Function_Retrieval_Citation/Research_Project/outputs/topk_candidates_query.jsonl
[14:18:04] load_topk_jsonl | rows= 20
[14:18:04] load_topk_jsonl | first: rank= 0 paper_id= astro-ph/0104465 title_snip='Luminous and Dark Matter in the Milky Way' abs_len= 1523
[14:18:04] main | running function= Background
[14:18:04] select | function= Background | candidates_in= 20
[14:18:04] select | core_terms= ['Milky Way', 'dark matter halo', 'Galactic constants']
[14:18:04] select | no cosine prune; kept=20/20
[14:18:04] select | pool_size= 10 | ranks= [0, 1, 2, 3, 4, 5, 6, 7, 8, 9] | pids= ['astro-ph/0104465', 'astro-ph/0102436', 'astro-ph/0104293', 'astro-ph/0104242', 'astro-ph/0103430', 'astro-ph/0101528', 'astro-ph/0101210', 'astro-ph/0103386', 'astro-ph/0104069', 'astro-ph/0104404']
[14:18:04] select | verify relaxed 1/10
[14:18:04] verify | func= Background | rank= 0 | pid= astro-ph/0104465 | title_snip='Luminous and Dark Matter in the Milky Way' | abs_len= 1523
[14:18:07] verify | result supports= True fit= 0.80 top= 0.90 invalid= â€” cue_hint= False
[14:18:07] select | verify relaxed 2/10
[14:18:07] verify | func= Background | rank= 1 | pid= astro-ph/0102436 | title_snip='The Host Haloes of Lyman Break Galaxies and Sub-millimeter Sources' | abs_len= 1580
[14:18:10] verify | result supports= False fit= 0.00 top= 0.20 invalid= â€” cue_hint= False
[14:18:10] select | verify relaxed 3/10
[14:18:10] verify | func= Background | rank= 2 | pid= astro-ph/0104293 | title_snip='Direct Detection of Galactic Halo Dark Matter' | abs_len= 831
[14:18:13] verify | result supports= True fit= 0.80 top= 0.90 invalid= â€” cue_hint= False
[14:18:13] select | verify relaxed 4/10
[14:18:13] verify | func= Background | rank= 3 | pid= astro-ph/0104242 | title_snip='The Thick Disk-Halo Interface' | abs_len= 940
[14:18:17] verify | result supports= True fit= 0.80 top= 0.90 invalid= â€” cue_hint= False
[14:18:17] select | verify relaxed 5/10
[14:18:17] verify | func= Background | rank= 4 | pid= astro-ph/0103430 | title_snip='The Metamorphosis of Tidally Stirred Dwarf Galaxies' | abs_len= 1825
[14:18:20] verify | result supports= True fit= 0.80 top= 0.90 invalid= â€” cue_hint= False
[14:18:20] select | verify relaxed 6/10
[14:18:20] verify | func= Background | rank= 5 | pid= astro-ph/0101528 | title_snip='Constraints on the warm dark matter model from gravitational lensing' | abs_len= 1068
[14:18:23] verify | result supports= False fit= 0.00 top= 0.90 invalid= off_topic_no_core_in_abstract cue_hint= False
[14:18:23] select | verify relaxed 7/10
[14:18:23] verify | func= Background | rank= 6 | pid= astro-ph/0101210 | title_snip='A new test for the stable clustering hypothesis' | abs_len= 1194
[14:18:25] verify | result supports= False fit= 0.00 top= 0.00 invalid= no_quote cue_hint= False
[14:18:25] select | verify relaxed 8/10
[14:18:25] verify | func= Background | rank= 7 | pid= astro-ph/0103386 | title_snip='Dark Halos: The Flattening of the Density Cusp by Dynamical Friction' | abs_len= 1598
[14:18:28] verify | result supports= False fit= 0.00 top= 0.80 invalid= â€” cue_hint= False
[14:18:28] select | verify relaxed 9/10
[14:18:28] verify | func= Background | rank= 8 | pid= astro-ph/0104069 | title_snip='The Equilibrium Structure of Cosmological Halos' | abs_len= 1238
[14:18:32] verify | result supports= False fit= 0.00 top= 0.90 invalid= off_topic_no_core_in_abstract cue_hint= False
[14:18:32] select | verify relaxed 10/10
[14:18:32] verify | func= Background | rank= 9 | pid= astro-ph/0104404 | title_snip='The Formation Timescales of Giant Spheroids' | abs_len= 553
[14:18:34] verify | result supports= False fit= 0.00 top= 0.00 invalid= no_quote cue_hint= False

================================================================================
FUNCTION: Background
QUERY   : How do the results of this study compare to previous models of the Milky Way, and what future research directions are suggested by the findings on dark matter halo shapes and Galactic constants?
- WINNER: astro-ph/0104465 | Luminous and Dark Matter in the Milky Way
- QUOTE : Axisymmetric models of the Milky Way
- WHY   : sufficient
[14:18:35] main | running function= Motivation
[14:18:35] select | function= Motivation | candidates_in= 20
[14:18:35] select | core_terms= ['Milky Way', 'dark matter halo', 'Galactic constants']
[14:18:35] select | no cosine prune; kept=20/20
[14:18:35] select | pool_size= 10 | ranks= [0, 1, 2, 3, 4, 5, 6, 7, 8, 9] | pids= ['astro-ph/0104465', 'astro-ph/0102436', 'astro-ph/0104293', 'astro-ph/0104242', 'astro-ph/0103430', 'astro-ph/0101528', 'astro-ph/0101210', 'astro-ph/0103386', 'astro-ph/0104069', 'astro-ph/0104404']
[14:18:35] select | verify relaxed 1/10
[14:18:35] verify | func= Motivation | rank= 0 | pid= astro-ph/0104465 | title_snip='Luminous and Dark Matter in the Milky Way' | abs_len= 1523
[14:18:38] verify | result supports= False fit= 0.00 top= 0.80 invalid= â€” cue_hint= False
[14:18:38] select | verify relaxed 2/10
[14:18:38] verify | func= Motivation | rank= 1 | pid= astro-ph/0102436 | title_snip='The Host Haloes of Lyman Break Galaxies and Sub-millimeter Sources' | abs_len= 1580
[14:18:41] verify | result supports= False fit= 0.00 top= 0.20 invalid= no_quote cue_hint= False
[14:18:41] select | verify relaxed 3/10
[14:18:41] verify | func= Motivation | rank= 2 | pid= astro-ph/0104293 | title_snip='Direct Detection of Galactic Halo Dark Matter' | abs_len= 831
[14:18:44] verify | result supports= False fit= 0.20 top= 0.80 invalid= â€” cue_hint= False
[14:18:44] select | verify relaxed 4/10
[14:18:44] verify | func= Motivation | rank= 3 | pid= astro-ph/0104242 | title_snip='The Thick Disk-Halo Interface' | abs_len= 940
[14:18:47] verify | result supports= True fit= 0.80 top= 0.90 invalid= â€” cue_hint= True
[14:18:47] select | verify relaxed 5/10
[14:18:47] verify | func= Motivation | rank= 4 | pid= astro-ph/0103430 | title_snip='The Metamorphosis of Tidally Stirred Dwarf Galaxies' | abs_len= 1825
[14:18:50] verify | result supports= False fit= 0.00 top= 0.80 invalid= â€” cue_hint= False
[14:18:50] select | verify relaxed 6/10
[14:18:50] verify | func= Motivation | rank= 5 | pid= astro-ph/0101528 | title_snip='Constraints on the warm dark matter model from gravitational lensing' | abs_len= 1068
[14:18:53] verify | result supports= False fit= 0.00 top= 0.90 invalid= off_topic_no_core_in_abstract cue_hint= False
[14:18:53] select | verify relaxed 7/10
[14:18:53] verify | func= Motivation | rank= 6 | pid= astro-ph/0101210 | title_snip='A new test for the stable clustering hypothesis' | abs_len= 1194
[14:18:56] verify | result supports= False fit= 0.00 top= 0.20 invalid= â€” cue_hint= False
[14:18:56] select | verify relaxed 8/10
[14:18:56] verify | func= Motivation | rank= 7 | pid= astro-ph/0103386 | title_snip='Dark Halos: The Flattening of the Density Cusp by Dynamical Friction' | abs_len= 1598
[14:19:00] verify | result supports= False fit= 0.00 top= 0.90 invalid= off_topic_no_core_in_abstract cue_hint= False
[14:19:00] select | verify relaxed 9/10
[14:19:00] verify | func= Motivation | rank= 8 | pid= astro-ph/0104069 | title_snip='The Equilibrium Structure of Cosmological Halos' | abs_len= 1238
[14:19:03] verify | result supports= False fit= 0.00 top= 0.80 invalid= â€” cue_hint= False
[14:19:03] select | verify relaxed 10/10
[14:19:03] verify | func= Motivation | rank= 9 | pid= astro-ph/0104404 | title_snip='The Formation Timescales of Giant Spheroids' | abs_len= 553
[14:19:05] verify | result supports= False fit= 0.00 top= 0.00 invalid= no_quote cue_hint= False

================================================================================
FUNCTION: Motivation
QUERY   : How do the results of this study compare to previous models of the Milky Way, and what future research directions are suggested by the findings on dark matter halo shapes and Galactic constants?
- WINNER: astro-ph/0104242 | The Thick Disk-Halo Interface
- QUOTE : But is this recent accretion significant?
- WHY   : sufficient

================================================================================
UNIFIED ANSWER (1â€“2 sentences, tagged):
The study's results on dark matter halo shapes and Galactic constants provide new insights compared to previous models of the Milky Way, suggesting that a significantly flattened dark matter halo is only possible if certain conditions are met [Background] (astro-ph/0104465). The findings motivate future research directions, such as investigating the assembly of stars into the Galactic potential well and the significance of recent accretion events [Motivation] (astro-ph/0104242).

ðŸ“„ Saved: outputs/function_selection_results.json
ðŸ“„ Saved: outputs/function_selection_results.jsonl
ðŸ“ Unified answer: outputs/function_answer_unified.txt
-> /home/anpa439f/anaconda3/envs/myenv/bin/python3 /data/horse/ws/anpa439f-Function_Retrieval_Citation/Research_Project/RetrievalAugmentedGeneration/classifying_question.py  (cwd=/data/horse/ws/anpa439f-Function_Retrieval_Citation/Research_Project/RetrievalAugmentedGeneration)
âœ… Saved to classified_outputs.jsonl
ðŸ”§ Ready for retrieval module (.py).
-> /home/anpa439f/anaconda3/envs/myenv/bin/python3 /data/horse/ws/anpa439f-Function_Retrieval_Citation/Research_Project/RetrievalAugmentedGeneration/Retreival_query_based.py --skip-reindex --index /data/horse/ws/anpa439f-Function_Retrieval_Citation/Research_Project/e5_index_subset_1/index.faiss --meta /data/horse/ws/anpa439f-Function_Retrieval_Citation/Research_Project/e5_index_subset_1/meta.parquet --topk 20  (cwd=/data/horse/ws/anpa439f-Function_Retrieval_Citation/Research_Project/RetrievalAugmentedGeneration)
âœ… Top-k candidates: /data/horse/ws/anpa439f-Function_Retrieval_Citation/Research_Project/RetrievalAugmentedGeneration/outputs/topk_candidates_query.jsonl
ðŸ”— Symlinked: /data/horse/ws/anpa439f-Function_Retrieval_Citation/Research_Project/outputs/topk_candidates_query.jsonl -> /data/horse/ws/anpa439f-Function_Retrieval_Citation/Research_Project/RetrievalAugmentedGeneration/outputs/topk_candidates_query.jsonl
-> /home/anpa439f/anaconda3/envs/myenv/bin/python3 /data/horse/ws/anpa439f-Function_Retrieval_Citation/Research_Project/RetrievalAugmentedGeneration/function_based_answer-2_copy.py --debug --max-check 10  (cwd=/data/horse/ws/anpa439f-Function_Retrieval_Citation/Research_Project/RetrievalAugmentedGeneration)

ðŸŽ‰ Pipeline complete.
  â€¢ Classified file : /data/horse/ws/anpa439f-Function_Retrieval_Citation/Research_Project/RetrievalAugmentedGeneration/classified_outputs.jsonl
  â€¢ TopK (canonical): /data/horse/ws/anpa439f-Function_Retrieval_Citation/Research_Project/RetrievalAugmentedGeneration/outputs/topk_candidates_query.jsonl
  â€¢ Final outputs   : /data/horse/ws/anpa439f-Function_Retrieval_Citation/Research_Project/RetrievalAugmentedGeneration/outputs
