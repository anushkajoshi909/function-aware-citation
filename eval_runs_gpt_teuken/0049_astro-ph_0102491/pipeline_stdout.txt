âœ… Available Models:
1. alias-reasoning
2. alias-ha
3. meta-llama/Llama-3.3-70B-Instruct
4. meta-llama/Llama-3.1-8B-Instruct
5. Qwen/Qwen2-VL-7B-Instruct
6. alias-vision
7. openGPT-X/Teuken-7B-instruct-research-v0.4
8. deepseek-ai/DeepSeek-Coder-V2-Lite-Instruct
9. Qwen/Qwen3-Coder-30B-A3B-Instruct
10. alias-code
11. Qwen/Qwen3-Embedding-4B
12. BAAI/bge-reranker-v2-m3
13. stabilityai/stable-diffusion-3.5-large-turbo
14. alias-image-generation
15. black-forest-labs/FLUX.1-dev
16. openai/whisper-large-v3
17. Kokoro-82M
18. tts-1-hd
19. deepseek-ai/DeepSeek-R1
20. openai/gpt-oss-120b
21. meta-llama/Llama-4-Scout-17B-16E-Instruct

ðŸ‘‰ Select a model number (default = 1): 
âœ… Using model: openGPT-X/Teuken-7B-instruct-research-v0.4

ðŸ” Enter a scientific query or topic: 
ðŸ”Ž Citation Function Classification:
{
  "citation_functions": [
    "Background"
  ],
  "justification": "The query seeks to understand the current state of knowledge about metal absorption systems and to explore future research directions based on the analysis of the HDF-South quasar J2233-606."
}

âœ… Saved to classified_outputs.jsonl
ðŸ”§ Ready for retrieval module (handled in a separate file).
âš¡ SKIP_REINDEX=1 â€” using existing FAISS index + meta; not scanning raw JSONL shards.
âœ… Top-k candidates (FAISS): /data/horse/ws/anpa439f-Function_Retrieval_Citation/Research_Project/RetrievalAugmentedGeneration/outputs/topk_candidates_query.jsonl
[12:23:15] main | args: Namespace(max_check=10, debug=True)
[12:23:15] read_last_jsonl | path= classified_outputs.jsonl
[12:23:15] read_last_jsonl | total_lines= 1
[12:23:15] main | query='How can the current understanding of metal absorption systems be improved and what future research directions can be explored based on the analysis of the HDF-South quasar J2233-606?' | funcs=['Background']
[12:23:17] main | core_terms= ['metal absorption systems', 'quasar', 'absorption lines', 'HDF-South', 'J2233-606']
[12:23:17] load_topk_jsonl | path= /data/horse/ws/anpa439f-Function_Retrieval_Citation/Research_Project/outputs/topk_candidates_query.jsonl
[12:23:17] load_topk_jsonl | rows= 20
[12:23:17] load_topk_jsonl | first: rank= 0 paper_id= astro-ph/0102491 title_snip='Inhomogeneous metal enrichment at z \sim 1.9: the Lyman limit systems â€¦' abs_len= 1611
[12:23:17] main | running function= Background
[12:23:17] select | function= Background | candidates_in= 20
[12:23:17] select | core_terms= ['metal absorption systems', 'quasar', 'absorption lines', 'HDF-South', 'J2233-606']
[12:23:17] select | no cosine prune; kept=20/20
[12:23:17] select | pool_size= 10 | ranks= [0, 1, 2, 3, 4, 5, 6, 7, 8, 9] | pids= ['astro-ph/0102491', 'astro-ph/0102230', 'astro-ph/0104457', 'astro-ph/0104474', 'astro-ph/0101340', 'astro-ph/0103048', 'astro-ph/0103305', 'astro-ph/0101472', 'astro-ph/0104479', 'cond-mat/0101106']
[12:23:17] select | verify relaxed 1/10
[12:23:17] verify | func= Background | rank= 0 | pid= astro-ph/0102491 | title_snip='Inhomogeneous metal enrichment at z \sim 1.9: the Lyman limit systems â€¦' | abs_len= 1611
[12:23:21] verify | result supports= True fit= 0.80 top= 0.90 invalid= â€” cue_hint= True
[12:23:21] select | verify relaxed 2/10
[12:23:21] verify | func= Background | rank= 1 | pid= astro-ph/0102230 | title_snip='UVES observations of a damped Ly-alpha system at z_abs = 4.466 towardsâ€¦' | abs_len= 1334
[12:23:24] verify | result supports= False fit= 0.00 top= 0.20 invalid= â€” cue_hint= False
[12:23:24] select | verify relaxed 3/10
[12:23:24] verify | func= Background | rank= 2 | pid= astro-ph/0104457 | title_snip='Cold Gas Kinematics in an L* Spiral Galaxy at z=0.437: The Nature of
 â€¦' | abs_len= 1588
[12:23:27] verify | result supports= False fit= 0.00 top= 0.00 invalid= no_quote cue_hint= False
[12:23:27] select | verify relaxed 4/10
[12:23:27] verify | func= Background | rank= 3 | pid= astro-ph/0104474 | title_snip='A New Measurement of the Primordial Abundance of Deuterium: Toward
  Câ€¦' | abs_len= 1559
[12:23:30] verify | result supports= False fit= 0.00 top= 0.00 invalid= no_quote cue_hint= False
[12:23:30] select | verify relaxed 5/10
[12:23:30] verify | func= Background | rank= 4 | pid= astro-ph/0101340 | title_snip='Dust-penetrated morphology in the high-redshift universe: clues from Nâ€¦' | abs_len= 1560
[12:23:32] verify | result supports= False fit= 0.00 top= 0.00 invalid= no_quote cue_hint= False
[12:23:32] select | verify relaxed 6/10
[12:23:32] verify | func= Background | rank= 5 | pid= astro-ph/0103048 | title_snip='Polarization Insights for Active Galactic Nuclei' | abs_len= 1223
[12:23:35] verify | result supports= False fit= 0.00 top= 0.00 invalid= no_quote cue_hint= False
[12:23:35] select | verify relaxed 7/10
[12:23:35] verify | func= Background | rank= 6 | pid= astro-ph/0103305 | title_snip='New HST spectra indicate the QSO PG1718+4807 will not give the
  primoâ€¦' | abs_len= 987
[12:23:38] verify | result supports= False fit= 0.00 top= 0.00 invalid= no_quote cue_hint= False
[12:23:38] select | verify relaxed 8/10
[12:23:38] verify | func= Background | rank= 7 | pid= astro-ph/0101472 | title_snip='Cosmological History of Stars and Metals' | abs_len= 1543
[12:23:40] verify | result supports= False fit= 0.00 top= 0.00 invalid= no_quote cue_hint= False
[12:23:40] select | verify relaxed 9/10
[12:23:40] verify | func= Background | rank= 8 | pid= astro-ph/0104479 | title_snip='H2 Formation in Low Metallicity Galaxies' | abs_len= 1514
[12:23:43] verify | result supports= False fit= 0.00 top= 0.00 invalid= no_quote cue_hint= False
[12:23:43] select | verify relaxed 10/10
[12:23:43] verify | func= Background | rank= 9 | pid= cond-mat/0101106 | title_snip='Relaxation and screening in Auger emission: an explanation for the
  câ€¦' | abs_len= 889
[12:23:46] verify | result supports= False fit= 0.00 top= 0.00 invalid= no_quote cue_hint= False

================================================================================
FUNCTION: Background
QUERY   : How can the current understanding of metal absorption systems be improved and what future research directions can be explored based on the analysis of the HDF-South quasar J2233-606?
- WINNER: astro-ph/0102491 | Inhomogeneous metal enrichment at z \sim 1.9: the Lyman limit systems in
  the spectrum of the HDF-S quasar
- QUOTE : We present a detailed analysis of three metal absorption systems
- WHY   : sufficient

================================================================================
UNIFIED ANSWER (1â€“2 sentences, tagged):
The current understanding of metal absorption systems can be improved by analyzing high-resolution data of quasar spectra, such as the HDF-South quasar J2233-606, which reveals variations in metallicities and ionization states [Background] (astro-ph/0102491). Future research directions can explore the correlation between velocity position and ionization state, as well as the origin of high column density systems, which may be influenced by local ionizing sources [Background] (astro-ph/0102491).

ðŸ“„ Saved: outputs/function_selection_results.json
ðŸ“„ Saved: outputs/function_selection_results.jsonl
ðŸ“ Unified answer: outputs/function_answer_unified.txt
-> /home/anpa439f/anaconda3/envs/myenv/bin/python3 /data/horse/ws/anpa439f-Function_Retrieval_Citation/Research_Project/RetrievalAugmentedGeneration/classifying_question.py  (cwd=/data/horse/ws/anpa439f-Function_Retrieval_Citation/Research_Project/RetrievalAugmentedGeneration)
âœ… Saved to classified_outputs.jsonl
ðŸ”§ Ready for retrieval module (.py).
-> /home/anpa439f/anaconda3/envs/myenv/bin/python3 /data/horse/ws/anpa439f-Function_Retrieval_Citation/Research_Project/RetrievalAugmentedGeneration/Retreival_query_based.py --skip-reindex --index /data/horse/ws/anpa439f-Function_Retrieval_Citation/Research_Project/e5_index_subset_1/index.faiss --meta /data/horse/ws/anpa439f-Function_Retrieval_Citation/Research_Project/e5_index_subset_1/meta.parquet --topk 20  (cwd=/data/horse/ws/anpa439f-Function_Retrieval_Citation/Research_Project/RetrievalAugmentedGeneration)
âœ… Top-k candidates: /data/horse/ws/anpa439f-Function_Retrieval_Citation/Research_Project/RetrievalAugmentedGeneration/outputs/topk_candidates_query.jsonl
ðŸ”— Symlinked: /data/horse/ws/anpa439f-Function_Retrieval_Citation/Research_Project/outputs/topk_candidates_query.jsonl -> /data/horse/ws/anpa439f-Function_Retrieval_Citation/Research_Project/RetrievalAugmentedGeneration/outputs/topk_candidates_query.jsonl
-> /home/anpa439f/anaconda3/envs/myenv/bin/python3 /data/horse/ws/anpa439f-Function_Retrieval_Citation/Research_Project/RetrievalAugmentedGeneration/function_based_answer-2_copy.py --debug --max-check 10  (cwd=/data/horse/ws/anpa439f-Function_Retrieval_Citation/Research_Project/RetrievalAugmentedGeneration)

ðŸŽ‰ Pipeline complete.
  â€¢ Classified file : /data/horse/ws/anpa439f-Function_Retrieval_Citation/Research_Project/RetrievalAugmentedGeneration/classified_outputs.jsonl
  â€¢ TopK (canonical): /data/horse/ws/anpa439f-Function_Retrieval_Citation/Research_Project/RetrievalAugmentedGeneration/outputs/topk_candidates_query.jsonl
  â€¢ Final outputs   : /data/horse/ws/anpa439f-Function_Retrieval_Citation/Research_Project/RetrievalAugmentedGeneration/outputs
