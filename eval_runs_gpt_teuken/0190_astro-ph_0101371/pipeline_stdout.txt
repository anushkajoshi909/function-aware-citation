âœ… Available Models:
1. alias-reasoning
2. alias-ha
3. meta-llama/Llama-3.3-70B-Instruct
4. meta-llama/Llama-3.1-8B-Instruct
5. Qwen/Qwen2-VL-7B-Instruct
6. alias-vision
7. openGPT-X/Teuken-7B-instruct-research-v0.4
8. deepseek-ai/DeepSeek-Coder-V2-Lite-Instruct
9. Qwen/Qwen3-Coder-30B-A3B-Instruct
10. alias-code
11. Qwen/Qwen3-Embedding-4B
12. BAAI/bge-reranker-v2-m3
13. stabilityai/stable-diffusion-3.5-large-turbo
14. alias-image-generation
15. black-forest-labs/FLUX.1-dev
16. openai/whisper-large-v3
17. Kokoro-82M
18. tts-1-hd
19. deepseek-ai/DeepSeek-R1
20. openai/gpt-oss-120b
21. meta-llama/Llama-4-Scout-17B-16E-Instruct

ðŸ‘‰ Select a model number (default = 1): 
âœ… Using model: openGPT-X/Teuken-7B-instruct-research-v0.4

ðŸ” Enter a scientific query or topic: 
ðŸ”Ž Citation Function Classification:
{
  "citation_functions": [
    "Background",
    "Motivation"
  ],
  "justification": "The query seeks to understand the limitations in understanding the mass function of open clusters and asks for background information to motivate further study."
}

âœ… Saved to classified_outputs.jsonl
ðŸ”§ Ready for retrieval module (handled in a separate file).
âš¡ SKIP_REINDEX=1 â€” using existing FAISS index + meta; not scanning raw JSONL shards.
âœ… Top-k candidates (FAISS): /data/horse/ws/anpa439f-Function_Retrieval_Citation/Research_Project/RetrievalAugmentedGeneration/outputs/topk_candidates_query.jsonl
[15:11:22] main | args: Namespace(max_check=10, debug=True)
[15:11:22] read_last_jsonl | path= classified_outputs.jsonl
[15:11:22] read_last_jsonl | total_lines= 1
[15:11:22] main | query='What limitations in understanding the mass function of open clusters motivate further study and provide background for the current research?' | funcs=['Background', 'Motivation']
[15:11:24] main | core_terms= ['open clusters', 'mass function']
[15:11:24] load_topk_jsonl | path= /data/horse/ws/anpa439f-Function_Retrieval_Citation/Research_Project/outputs/topk_candidates_query.jsonl
[15:11:24] load_topk_jsonl | rows= 20
[15:11:24] load_topk_jsonl | first: rank= 0 paper_id= astro-ph/0101371 title_snip='Luminosity and mass function of galactic open clusters: I. NGC 4815' abs_len= 1423
[15:11:24] main | running function= Background
[15:11:24] select | function= Background | candidates_in= 20
[15:11:24] select | core_terms= ['open clusters', 'mass function']
[15:11:24] select | no cosine prune; kept=20/20
[15:11:24] select | pool_size= 10 | ranks= [0, 1, 2, 3, 4, 5, 6, 7, 8, 9] | pids= ['astro-ph/0101371', 'astro-ph/0102010', 'astro-ph/0102430', 'astro-ph/0101431', 'astro-ph/0104313', 'astro-ph/0103082', 'astro-ph/0101564', 'astro-ph/0104163', 'astro-ph/0101139', 'astro-ph/0102363']
[15:11:24] select | verify relaxed 1/10
[15:11:24] verify | func= Background | rank= 0 | pid= astro-ph/0101371 | title_snip='Luminosity and mass function of galactic open clusters: I. NGC 4815' | abs_len= 1423
[15:11:27] verify | result supports= True fit= 0.80 top= 0.90 invalid= â€” cue_hint= False
[15:11:27] select | verify relaxed 2/10
[15:11:27] verify | func= Background | rank= 1 | pid= astro-ph/0102010 | title_snip='New Light on the Baryon Fraction in Galaxy Clusters' | abs_len= 1661
[15:11:30] verify | result supports= False fit= 0.00 top= 0.00 invalid= no_quote cue_hint= False
[15:11:30] select | verify relaxed 3/10
[15:11:30] verify | func= Background | rank= 2 | pid= astro-ph/0102430 | title_snip='Probing the Evolution of Gas Mass Fraction with Sunyaev-Zel'dovich
  Eâ€¦' | abs_len= 1039
[15:11:33] verify | result supports= False fit= 0.00 top= 0.00 invalid= no_quote cue_hint= False
[15:11:33] select | verify relaxed 4/10
[15:11:33] verify | func= Background | rank= 3 | pid= astro-ph/0101431 | title_snip='Infrared constraints on the dark mass concentration observed in the
  â€¦' | abs_len= 964
[15:11:35] verify | result supports= False fit= 0.00 top= 0.00 invalid= no_quote cue_hint= False
[15:11:35] select | verify relaxed 5/10
[15:11:35] verify | func= Background | rank= 4 | pid= astro-ph/0104313 | title_snip='Cluster correlations in redshift space' | abs_len= 1713
[15:11:38] verify | result supports= False fit= 0.00 top= 0.00 invalid= no_quote cue_hint= False
[15:11:38] select | verify relaxed 6/10
[15:11:38] verify | func= Background | rank= 5 | pid= astro-ph/0103082 | title_snip='Bumpy Power Spectra and Galaxy Clusters' | abs_len= 1826
[15:11:41] verify | result supports= False fit= 0.00 top= 0.00 invalid= no_quote cue_hint= False
[15:11:41] select | verify relaxed 7/10
[15:11:41] verify | func= Background | rank= 6 | pid= astro-ph/0101564 | title_snip='The Mass-Temperature Relation of 22 Nearby Clusters' | abs_len= 1302
[15:11:43] verify | result supports= False fit= 0.00 top= 0.20 invalid= no_quote cue_hint= False
[15:11:43] select | verify relaxed 8/10
[15:11:43] verify | func= Background | rank= 7 | pid= astro-ph/0104163 | title_snip='The CFHT Open Star Cluster Survey I -- Cluster Selection and Data
  Reâ€¦' | abs_len= 1677
[15:11:47] verify | result supports= True fit= 0.80 top= 0.90 invalid= â€” cue_hint= False
[15:11:47] select | verify relaxed 9/10
[15:11:47] verify | func= Background | rank= 8 | pid= astro-ph/0101139 | title_snip='The Mass and Structure of the Pleiades Star Cluster from 2MASS' | abs_len= 1672
[15:11:51] verify | result supports= True fit= 0.80 top= 0.90 invalid= â€” cue_hint= False
[15:11:51] select | verify relaxed 10/10
[15:11:51] verify | func= Background | rank= 9 | pid= astro-ph/0102363 | title_snip='INTEGRAL observations of Galaxy Clusters' | abs_len= 1523
[15:11:53] verify | result supports= False fit= 0.00 top= 0.00 invalid= no_quote cue_hint= False

================================================================================
FUNCTION: Background
QUERY   : What limitations in understanding the mass function of open clusters motivate further study and provide background for the current research?
- WINNER: astro-ph/0101371 | Luminosity and mass function of galactic open clusters: I. NGC 4815
- QUOTE : Below this mass, the MF cannot be considered as representative
- WHY   : sufficient
[15:11:54] main | running function= Motivation
[15:11:54] select | function= Motivation | candidates_in= 20
[15:11:54] select | core_terms= ['open clusters', 'mass function']
[15:11:54] select | no cosine prune; kept=20/20
[15:11:54] select | pool_size= 10 | ranks= [0, 1, 2, 3, 4, 5, 6, 7, 8, 9] | pids= ['astro-ph/0101371', 'astro-ph/0102010', 'astro-ph/0102430', 'astro-ph/0101431', 'astro-ph/0104313', 'astro-ph/0103082', 'astro-ph/0101564', 'astro-ph/0104163', 'astro-ph/0101139', 'astro-ph/0102363']
[15:11:54] select | verify relaxed 1/10
[15:11:54] verify | func= Motivation | rank= 0 | pid= astro-ph/0101371 | title_snip='Luminosity and mass function of galactic open clusters: I. NGC 4815' | abs_len= 1423
[15:11:58] verify | result supports= True fit= 0.80 top= 0.90 invalid= â€” cue_hint= False
[15:11:58] select | verify relaxed 2/10
[15:11:58] verify | func= Motivation | rank= 1 | pid= astro-ph/0102010 | title_snip='New Light on the Baryon Fraction in Galaxy Clusters' | abs_len= 1661
[15:12:00] verify | result supports= False fit= 0.00 top= 0.00 invalid= no_quote cue_hint= False
[15:12:00] select | verify relaxed 3/10
[15:12:00] verify | func= Motivation | rank= 2 | pid= astro-ph/0102430 | title_snip='Probing the Evolution of Gas Mass Fraction with Sunyaev-Zel'dovich
  Eâ€¦' | abs_len= 1039
[15:12:03] verify | result supports= False fit= 0.00 top= 0.00 invalid= no_quote cue_hint= False
[15:12:03] select | verify relaxed 4/10
[15:12:03] verify | func= Motivation | rank= 3 | pid= astro-ph/0101431 | title_snip='Infrared constraints on the dark mass concentration observed in the
  â€¦' | abs_len= 964
[15:12:05] verify | result supports= False fit= 0.00 top= 0.00 invalid= no_quote cue_hint= False
[15:12:05] select | verify relaxed 5/10
[15:12:05] verify | func= Motivation | rank= 4 | pid= astro-ph/0104313 | title_snip='Cluster correlations in redshift space' | abs_len= 1713
[15:12:08] verify | result supports= False fit= 0.00 top= 0.00 invalid= no_quote cue_hint= False
[15:12:08] select | verify relaxed 6/10
[15:12:08] verify | func= Motivation | rank= 5 | pid= astro-ph/0103082 | title_snip='Bumpy Power Spectra and Galaxy Clusters' | abs_len= 1826
[15:12:11] verify | result supports= False fit= 0.00 top= 0.00 invalid= no_quote cue_hint= False
[15:12:11] select | verify relaxed 7/10
[15:12:11] verify | func= Motivation | rank= 6 | pid= astro-ph/0101564 | title_snip='The Mass-Temperature Relation of 22 Nearby Clusters' | abs_len= 1302
[15:12:14] verify | result supports= False fit= 0.00 top= 0.20 invalid= no_quote cue_hint= False
[15:12:14] select | verify relaxed 8/10
[15:12:14] verify | func= Motivation | rank= 7 | pid= astro-ph/0104163 | title_snip='The CFHT Open Star Cluster Survey I -- Cluster Selection and Data
  Reâ€¦' | abs_len= 1677
[15:12:17] verify | result supports= True fit= 0.80 top= 0.90 invalid= â€” cue_hint= False
[15:12:17] select | verify relaxed 9/10
[15:12:17] verify | func= Motivation | rank= 8 | pid= astro-ph/0101139 | title_snip='The Mass and Structure of the Pleiades Star Cluster from 2MASS' | abs_len= 1672
[15:12:21] verify | result supports= True fit= 0.80 top= 0.90 invalid= â€” cue_hint= False
[15:12:21] select | verify relaxed 10/10
[15:12:21] verify | func= Motivation | rank= 9 | pid= astro-ph/0102363 | title_snip='INTEGRAL observations of Galaxy Clusters' | abs_len= 1523
[15:12:24] verify | result supports= False fit= 0.00 top= 0.00 invalid= no_quote cue_hint= False

================================================================================
FUNCTION: Motivation
QUERY   : What limitations in understanding the mass function of open clusters motivate further study and provide background for the current research?
- WINNER: astro-ph/0101371 | Luminosity and mass function of galactic open clusters: I. NGC 4815
- QUOTE : Below this mass, the MF cannot be considered as representative
- WHY   : sufficient

================================================================================
UNIFIED ANSWER (1â€“2 sentences, tagged):
The current understanding of the mass function of open clusters is limited by factors such as strong irregularities in the stellar background, internal dynamical evolution, and interaction with the Galactic field [Background] (astro-ph/0101371), which motivates further study to accurately determine the initial mass function [Motivation] (astro-ph/0101371).

ðŸ“„ Saved: outputs/function_selection_results.json
ðŸ“„ Saved: outputs/function_selection_results.jsonl
ðŸ“ Unified answer: outputs/function_answer_unified.txt
-> /home/anpa439f/anaconda3/envs/myenv/bin/python3 /data/horse/ws/anpa439f-Function_Retrieval_Citation/Research_Project/RetrievalAugmentedGeneration/classifying_question.py  (cwd=/data/horse/ws/anpa439f-Function_Retrieval_Citation/Research_Project/RetrievalAugmentedGeneration)
âœ… Saved to classified_outputs.jsonl
ðŸ”§ Ready for retrieval module (.py).
-> /home/anpa439f/anaconda3/envs/myenv/bin/python3 /data/horse/ws/anpa439f-Function_Retrieval_Citation/Research_Project/RetrievalAugmentedGeneration/Retreival_query_based.py --skip-reindex --index /data/horse/ws/anpa439f-Function_Retrieval_Citation/Research_Project/e5_index_subset_1/index.faiss --meta /data/horse/ws/anpa439f-Function_Retrieval_Citation/Research_Project/e5_index_subset_1/meta.parquet --topk 20  (cwd=/data/horse/ws/anpa439f-Function_Retrieval_Citation/Research_Project/RetrievalAugmentedGeneration)
âœ… Top-k candidates: /data/horse/ws/anpa439f-Function_Retrieval_Citation/Research_Project/RetrievalAugmentedGeneration/outputs/topk_candidates_query.jsonl
ðŸ”— Symlinked: /data/horse/ws/anpa439f-Function_Retrieval_Citation/Research_Project/outputs/topk_candidates_query.jsonl -> /data/horse/ws/anpa439f-Function_Retrieval_Citation/Research_Project/RetrievalAugmentedGeneration/outputs/topk_candidates_query.jsonl
-> /home/anpa439f/anaconda3/envs/myenv/bin/python3 /data/horse/ws/anpa439f-Function_Retrieval_Citation/Research_Project/RetrievalAugmentedGeneration/function_based_answer-2_copy.py --debug --max-check 10  (cwd=/data/horse/ws/anpa439f-Function_Retrieval_Citation/Research_Project/RetrievalAugmentedGeneration)

ðŸŽ‰ Pipeline complete.
  â€¢ Classified file : /data/horse/ws/anpa439f-Function_Retrieval_Citation/Research_Project/RetrievalAugmentedGeneration/classified_outputs.jsonl
  â€¢ TopK (canonical): /data/horse/ws/anpa439f-Function_Retrieval_Citation/Research_Project/RetrievalAugmentedGeneration/outputs/topk_candidates_query.jsonl
  â€¢ Final outputs   : /data/horse/ws/anpa439f-Function_Retrieval_Citation/Research_Project/RetrievalAugmentedGeneration/outputs
