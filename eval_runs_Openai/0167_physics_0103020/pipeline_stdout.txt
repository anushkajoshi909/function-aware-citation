âœ… Available Models:
1. alias-reasoning
2. alias-ha
3. meta-llama/Llama-3.3-70B-Instruct
4. meta-llama/Llama-3.1-8B-Instruct
5. Qwen/Qwen2-VL-7B-Instruct
6. alias-vision
7. openGPT-X/Teuken-7B-instruct-research-v0.4
8. deepseek-ai/DeepSeek-Coder-V2-Lite-Instruct
9. Qwen/Qwen3-Coder-30B-A3B-Instruct
10. alias-code
11. Qwen/Qwen3-Embedding-4B
12. BAAI/bge-reranker-v2-m3
13. stabilityai/stable-diffusion-3.5-large-turbo
14. alias-image-generation
15. black-forest-labs/FLUX.1-dev
16. openai/whisper-large-v3
17. Kokoro-82M
18. tts-1-hd
19. deepseek-ai/DeepSeek-R1
20. openai/gpt-oss-120b
21. meta-llama/Llama-4-Scout-17B-16E-Instruct

ðŸ‘‰ Select a model number (default = 1): 
âœ… Using model: openai/gpt-oss-120b

ðŸ” Enter a scientific query or topic: 
ðŸ”Ž Citation Function Classification:
{
  "citation_functions": [
    "Background"
  ],
  "justification": "Fallback: classifier did not return a valid object."
}

âœ… Saved to classified_outputs.jsonl
ðŸ”§ Ready for retrieval module (handled in a separate file).
âš¡ SKIP_REINDEX=1 â€” using existing FAISS index + meta; not scanning raw JSONL shards.
âœ… Top-k candidates (FAISS): /data/horse/ws/anpa439f-Function_Retrieval_Citation/Research_Project/RetrievalAugmentedGeneration/outputs/topk_candidates_query.jsonl
[00:44:03] main | args: Namespace(max_check=10, debug=True)
[00:44:03] read_last_jsonl | path= classified_outputs.jsonl
[00:44:03] read_last_jsonl | total_lines= 1
[00:44:03] main | query='How does the current work's understanding of electron Bernstein-Greene-Kruskal solitary waves compare to previous thoughts, and what problem or limitation in previous work motivated this reexamination?' | funcs=['Background']
[00:44:05] main | core_terms= ['electron', 'Bernstein-Greene-Kruskal solitary waves', 'Bernstein-Greene-Kruskal']
[00:44:05] load_topk_jsonl | path= /data/horse/ws/anpa439f-Function_Retrieval_Citation/Research_Project/outputs/topk_candidates_query.jsonl
[00:44:05] load_topk_jsonl | rows= 20
[00:44:05] load_topk_jsonl | first: rank= 0 paper_id= physics/0103020 title_snip='BGK Electron Solitary Waves Reexamined' abs_len= 1466
[00:44:05] main | running function= Background
[00:44:05] select | function= Background | candidates_in= 20
[00:44:05] select | core_terms= ['electron', 'Bernstein-Greene-Kruskal solitary waves', 'Bernstein-Greene-Kruskal']
[00:44:05] select | no cosine prune; kept=20/20
[00:44:05] select | pool_size= 10 | ranks= [0, 1, 2, 3, 4, 5, 6, 7, 8, 9] | pids= ['physics/0103020', 'nucl-th/0101024', 'hep-th/0104167', 'nucl-th/0101008', 'hep-ph/0103323', 'hep-ph/0104065', 'nucl-th/0104050', 'cond-mat/0102189', 'hep-th/0103034', 'hep-ph/0101078']
[00:44:05] select | verify relaxed 1/10
[00:44:05] verify | func= Background | rank= 0 | pid= physics/0103020 | title_snip='BGK Electron Solitary Waves Reexamined' | abs_len= 1466
[00:44:09] verify | result supports= True fit= 0.80 top= 0.90 invalid= â€” cue_hint= False
[00:44:09] select | verify relaxed 2/10
[00:44:09] verify | func= Background | rank= 1 | pid= nucl-th/0101024 | title_snip='Coulomb corrections to $e^+ e^-$ production in ultra-relativistic
  nuâ€¦' | abs_len= 1023
[00:44:12] verify | result supports= False fit= 0.00 top= 0.00 invalid= no_quote cue_hint= False
[00:44:12] select | verify relaxed 3/10
[00:44:12] verify | func= Background | rank= 2 | pid= hep-th/0104167 | title_snip='A Note on Unitarity of Non-Relativistic Non-Commutative Theories' | abs_len= 423
[00:44:14] verify | result supports= False fit= 0.00 top= 0.00 invalid= no_quote cue_hint= False
[00:44:14] select | verify relaxed 4/10
[00:44:14] verify | func= Background | rank= 3 | pid= nucl-th/0101008 | title_snip='Relativistic and non-relativistic studies of nuclear matter' | abs_len= 1254
[00:44:17] verify | result supports= False fit= 0.00 top= 0.00 invalid= no_quote cue_hint= False
[00:44:17] select | verify relaxed 5/10
[00:44:17] verify | func= Background | rank= 4 | pid= hep-ph/0103323 | title_snip='Nonlinear and spin effects in two-photon annihilation of a fermion paiâ€¦' | abs_len= 1471
[00:44:19] verify | result supports= False fit= 0.00 top= 0.00 invalid= no_quote cue_hint= False
[00:44:19] select | verify relaxed 6/10
[00:44:19] verify | func= Background | rank= 5 | pid= hep-ph/0104065 | title_snip='Rescattering corrections in elastic scattering' | abs_len= 773
[00:44:22] verify | result supports= False fit= 0.00 top= 0.00 invalid= no_quote cue_hint= False
[00:44:22] select | verify relaxed 7/10
[00:44:22] verify | func= Background | rank= 6 | pid= nucl-th/0104050 | title_snip='The Local Potential Approximation for the Brueckner G-matrix' | abs_len= 878
[00:44:25] verify | result supports= False fit= 0.00 top= 0.00 invalid= no_quote cue_hint= False
[00:44:25] select | verify relaxed 8/10
[00:44:25] verify | func= Background | rank= 7 | pid= cond-mat/0102189 | title_snip='Breakdown of the Migdal-Eliashberg theory in the strong-coupling
  adiâ€¦' | abs_len= 903
[00:44:27] verify | result supports= False fit= 0.00 top= 0.00 invalid= no_quote cue_hint= False
[00:44:27] select | verify relaxed 9/10
[00:44:27] verify | func= Background | rank= 8 | pid= hep-th/0103034 | title_snip='Gravity as the Spin-2 Quantum Gauge Theory' | abs_len= 1603
[00:44:30] verify | result supports= False fit= 0.00 top= 0.00 invalid= no_quote cue_hint= False
[00:44:30] select | verify relaxed 10/10
[00:44:30] verify | func= Background | rank= 9 | pid= hep-ph/0101078 | title_snip='Relativistic Many-Body Hamiltonian Approach to Mesons' | abs_len= 1658
[00:44:32] verify | result supports= False fit= 0.00 top= 0.00 invalid= no_quote cue_hint= False

================================================================================
FUNCTION: Background
QUERY   : How does the current work's understanding of electron Bernstein-Greene-Kruskal solitary waves compare to previous thoughts, and what problem or limitation in previous work motivated this reexamination?
- WINNER: physics/0103020 | BGK Electron Solitary Waves Reexamined
- QUOTE : A BGK EH consists of electron density enhancements as well as a density depletion, instead of only the density depletion as previously thought
- WHY   : sufficient

================================================================================
UNIFIED ANSWER (1â€“2 sentences, tagged):
The current work reexamines the understanding of electron Bernstein-Greene-Kruskal solitary waves, revealing a more complex structure with both density enhancements and depletions, and a net zero total charge [Background] (physics/0103020). This reexamination was motivated by limitations in previous thoughts, which incorrectly assumed only density depletions and required thermal screening, restricting the size of these waves to be greater than the Debye length [Background] (physics/0103020).

ðŸ“„ Saved: outputs/function_selection_results.json
ðŸ“„ Saved: outputs/function_selection_results.jsonl
ðŸ“ Unified answer: outputs/function_answer_unified.txt
-> /home/anpa439f/anaconda3/envs/myenv/bin/python3 /data/horse/ws/anpa439f-Function_Retrieval_Citation/Research_Project/RetrievalAugmentedGeneration/classifying_question.py  (cwd=/data/horse/ws/anpa439f-Function_Retrieval_Citation/Research_Project/RetrievalAugmentedGeneration)
âœ… Saved to classified_outputs.jsonl
ðŸ”§ Ready for retrieval module (.py).
-> /home/anpa439f/anaconda3/envs/myenv/bin/python3 /data/horse/ws/anpa439f-Function_Retrieval_Citation/Research_Project/RetrievalAugmentedGeneration/Retreival_query_based.py --skip-reindex --index /data/horse/ws/anpa439f-Function_Retrieval_Citation/Research_Project/e5_index_subset_1/index.faiss --meta /data/horse/ws/anpa439f-Function_Retrieval_Citation/Research_Project/e5_index_subset_1/meta.parquet --topk 20  (cwd=/data/horse/ws/anpa439f-Function_Retrieval_Citation/Research_Project/RetrievalAugmentedGeneration)
âœ… Top-k candidates: /data/horse/ws/anpa439f-Function_Retrieval_Citation/Research_Project/RetrievalAugmentedGeneration/outputs/topk_candidates_query.jsonl
ðŸ”— Symlinked: /data/horse/ws/anpa439f-Function_Retrieval_Citation/Research_Project/outputs/topk_candidates_query.jsonl -> /data/horse/ws/anpa439f-Function_Retrieval_Citation/Research_Project/RetrievalAugmentedGeneration/outputs/topk_candidates_query.jsonl
-> /home/anpa439f/anaconda3/envs/myenv/bin/python3 /data/horse/ws/anpa439f-Function_Retrieval_Citation/Research_Project/RetrievalAugmentedGeneration/function_based_answer-2_copy.py --debug --max-check 10  (cwd=/data/horse/ws/anpa439f-Function_Retrieval_Citation/Research_Project/RetrievalAugmentedGeneration)

ðŸŽ‰ Pipeline complete.
  â€¢ Classified file : /data/horse/ws/anpa439f-Function_Retrieval_Citation/Research_Project/RetrievalAugmentedGeneration/classified_outputs.jsonl
  â€¢ TopK (canonical): /data/horse/ws/anpa439f-Function_Retrieval_Citation/Research_Project/RetrievalAugmentedGeneration/outputs/topk_candidates_query.jsonl
  â€¢ Final outputs   : /data/horse/ws/anpa439f-Function_Retrieval_Citation/Research_Project/RetrievalAugmentedGeneration/outputs
