âœ… Available Models:
1. alias-reasoning
2. alias-ha
3. meta-llama/Llama-3.3-70B-Instruct
4. meta-llama/Llama-3.1-8B-Instruct
5. Qwen/Qwen2-VL-7B-Instruct
6. alias-vision
7. openGPT-X/Teuken-7B-instruct-research-v0.4
8. deepseek-ai/DeepSeek-Coder-V2-Lite-Instruct
9. Qwen/Qwen3-Coder-30B-A3B-Instruct
10. alias-code
11. Qwen/Qwen3-Embedding-4B
12. BAAI/bge-reranker-v2-m3
13. stabilityai/stable-diffusion-3.5-large-turbo
14. alias-image-generation
15. black-forest-labs/FLUX.1-dev
16. openai/whisper-large-v3
17. Kokoro-82M
18. tts-1-hd
19. deepseek-ai/DeepSeek-R1
20. openai/gpt-oss-120b
21. meta-llama/Llama-4-Scout-17B-16E-Instruct

ðŸ‘‰ Select a model number (default = 1): 
âœ… Using model: openai/gpt-oss-120b

ðŸ” Enter a scientific query or topic: 
ðŸ”Ž Citation Function Classification:
{
  "citation_functions": [
    "Background",
    "Motivation"
  ],
  "justification": "The query seeks foundational information about black-hole candidates (Background) and asks what gaps or problems drive the current study (Motivation)."
}

âœ… Saved to classified_outputs.jsonl
ðŸ”§ Ready for retrieval module (handled in a separate file).
âš¡ SKIP_REINDEX=1 â€” using existing FAISS index + meta; not scanning raw JSONL shards.
âœ… Top-k candidates (FAISS): /data/horse/ws/anpa439f-Function_Retrieval_Citation/Research_Project/RetrievalAugmentedGeneration/outputs/topk_candidates_query.jsonl
[00:05:57] main | args: Namespace(max_check=10, debug=True)
[00:05:57] read_last_jsonl | path= classified_outputs.jsonl
[00:05:57] read_last_jsonl | total_lines= 1
[00:05:57] main | query='What problem or gap in understanding black-hole candidates like GRO J1655-40 motivates the current work, and what background information is necessary to understand this research?' | funcs=['Background', 'Motivation']
[00:05:59] main | core_terms= ['black hole', 'GRO J1655-40', 'accretion', 'event horizon', 'black-hole', 'GRO', 'J1655-40']
[00:05:59] load_topk_jsonl | path= /data/horse/ws/anpa439f-Function_Retrieval_Citation/Research_Project/outputs/topk_candidates_query.jsonl
[00:05:59] load_topk_jsonl | rows= 20
[00:05:59] load_topk_jsonl | first: rank= 0 paper_id= gr-qc/0103075 title_snip='Space missions to detect the cosmic gravitational-wave background' abs_len= 968
[00:05:59] main | running function= Background
[00:05:59] select | function= Background | candidates_in= 20
[00:05:59] select | core_terms= ['black hole', 'GRO J1655-40', 'accretion', 'event horizon', 'black-hole', 'GRO', 'J1655-40']
[00:05:59] select | no cosine prune; kept=20/20
[00:05:59] select | pool_size= 10 | ranks= [0, 1, 2, 3, 4, 5, 6, 7, 8, 9] | pids= ['gr-qc/0103075', 'astro-ph/0101305', 'hep-ph/0101210', 'astro-ph/0101337', 'astro-ph/0103304', 'astro-ph/0101352', 'gr-qc/0102009', 'astro-ph/0102390', 'astro-ph/0101022', 'astro-ph/0104073']
[00:05:59] select | verify relaxed 1/10
[00:05:59] verify | func= Background | rank= 0 | pid= gr-qc/0103075 | title_snip='Space missions to detect the cosmic gravitational-wave background' | abs_len= 968
[00:06:01] verify | result supports= False fit= 0.00 top= 0.00 invalid= no_quote cue_hint= False
[00:06:01] select | verify relaxed 2/10
[00:06:01] verify | func= Background | rank= 1 | pid= astro-ph/0101305 | title_snip='The optical emission lines as a probe of state transitions in black-hoâ€¦' | abs_len= 423
[00:06:05] verify | result supports= True fit= 0.80 top= 0.90 invalid= â€” cue_hint= False
[00:06:05] select | verify relaxed 3/10
[00:06:05] verify | func= Background | rank= 2 | pid= hep-ph/0101210 | title_snip='Relic Dark energy from Trans-Planckian Regime' | abs_len= 1104
[00:06:08] verify | result supports= False fit= 0.00 top= 0.20 invalid= â€” cue_hint= False
[00:06:08] select | verify relaxed 4/10
[00:06:08] verify | func= Background | rank= 3 | pid= astro-ph/0101337 | title_snip='Optical and Infrared Photometry of the Micro-Quasar GRO J1655-40 in
  â€¦' | abs_len= 902
[00:06:11] verify | result supports= True fit= 0.80 top= 0.90 invalid= â€” cue_hint= False
[00:06:11] select | verify relaxed 5/10
[00:06:11] verify | func= Background | rank= 4 | pid= astro-ph/0103304 | title_snip='Two Different Long-term Behaviors in Black-Hole Candidates: Evidence fâ€¦' | abs_len= 1487
[00:06:14] verify | result supports= True fit= 0.80 top= 0.90 invalid= â€” cue_hint= False
[00:06:14] select | verify relaxed 6/10
[00:06:14] verify | func= Background | rank= 5 | pid= astro-ph/0101352 | title_snip='The Hubble Constant from (CLASS) Gravitational Lenses' | abs_len= 959
[00:06:17] verify | result supports= False fit= 0.00 top= 0.00 invalid= no_quote cue_hint= False
[00:06:17] select | verify relaxed 7/10
[00:06:17] verify | func= Background | rank= 6 | pid= gr-qc/0102009 | title_snip='Subtle is the Gravity' | abs_len= 382
[00:06:20] verify | result supports= False fit= 0.00 top= 0.00 invalid= no_quote cue_hint= False
[00:06:20] select | verify relaxed 8/10
[00:06:20] verify | func= Background | rank= 7 | pid= astro-ph/0102390 | title_snip='Primordial black holes as a probe of the early universe and a varying
â€¦' | abs_len= 803
[00:06:22] verify | result supports= False fit= 0.00 top= 0.00 invalid= no_quote cue_hint= False
[00:06:22] select | verify relaxed 9/10
[00:06:22] verify | func= Background | rank= 8 | pid= astro-ph/0101022 | title_snip='Possible Strong Gravitational Wave Sources for the LISA Antenna' | abs_len= 971
[00:06:25] verify | result supports= False fit= 0.00 top= 0.00 invalid= no_quote cue_hint= False
[00:06:25] select | verify relaxed 10/10
[00:06:25] verify | func= Background | rank= 9 | pid= astro-ph/0104073 | title_snip='A BeppoSAX view of transient black hole candidates in quiescence' | abs_len= 720
[00:06:28] verify | result supports= True fit= 0.80 top= 0.90 invalid= â€” cue_hint= False

================================================================================
FUNCTION: Background
QUERY   : What problem or gap in understanding black-hole candidates like GRO J1655-40 motivates the current work, and what background information is necessary to understand this research?
- WINNER: astro-ph/0101305 | The optical emission lines as a probe of state transitions in black-hole
  candidates
- QUOTE : black-hole candidates can help us investigate state transitions
- WHY   : sufficient
[00:06:29] main | running function= Motivation
[00:06:29] select | function= Motivation | candidates_in= 20
[00:06:29] select | core_terms= ['black hole', 'GRO J1655-40', 'accretion', 'event horizon', 'black-hole', 'GRO', 'J1655-40']
[00:06:29] select | no cosine prune; kept=20/20
[00:06:29] select | pool_size= 10 | ranks= [0, 1, 2, 3, 4, 5, 6, 7, 8, 9] | pids= ['gr-qc/0103075', 'astro-ph/0101305', 'hep-ph/0101210', 'astro-ph/0101337', 'astro-ph/0103304', 'astro-ph/0101352', 'gr-qc/0102009', 'astro-ph/0102390', 'astro-ph/0101022', 'astro-ph/0104073']
[00:06:29] select | verify relaxed 1/10
[00:06:29] verify | func= Motivation | rank= 0 | pid= gr-qc/0103075 | title_snip='Space missions to detect the cosmic gravitational-wave background' | abs_len= 968
[00:06:32] verify | result supports= False fit= 0.00 top= 0.00 invalid= no_quote cue_hint= False
[00:06:32] select | verify relaxed 2/10
[00:06:32] verify | func= Motivation | rank= 1 | pid= astro-ph/0101305 | title_snip='The optical emission lines as a probe of state transitions in black-hoâ€¦' | abs_len= 423
[00:06:35] verify | result supports= True fit= 0.80 top= 0.90 invalid= â€” cue_hint= False
[00:06:35] select | verify relaxed 3/10
[00:06:35] verify | func= Motivation | rank= 2 | pid= hep-ph/0101210 | title_snip='Relic Dark energy from Trans-Planckian Regime' | abs_len= 1104
[00:06:38] verify | result supports= False fit= 0.00 top= 0.20 invalid= â€” cue_hint= False
[00:06:38] select | verify relaxed 4/10
[00:06:38] verify | func= Motivation | rank= 3 | pid= astro-ph/0101337 | title_snip='Optical and Infrared Photometry of the Micro-Quasar GRO J1655-40 in
  â€¦' | abs_len= 902
[00:06:42] verify | result supports= False fit= 0.00 top= 0.80 invalid= â€” cue_hint= False
[00:06:42] select | verify relaxed 5/10
[00:06:42] verify | func= Motivation | rank= 4 | pid= astro-ph/0103304 | title_snip='Two Different Long-term Behaviors in Black-Hole Candidates: Evidence fâ€¦' | abs_len= 1487
[00:06:45] verify | result supports= True fit= 0.80 top= 0.90 invalid= â€” cue_hint= False
[00:06:45] select | verify relaxed 6/10
[00:06:45] verify | func= Motivation | rank= 5 | pid= astro-ph/0101352 | title_snip='The Hubble Constant from (CLASS) Gravitational Lenses' | abs_len= 959
[00:06:48] verify | result supports= False fit= 0.00 top= 0.00 invalid= no_quote cue_hint= False
[00:06:48] select | verify relaxed 7/10
[00:06:48] verify | func= Motivation | rank= 6 | pid= gr-qc/0102009 | title_snip='Subtle is the Gravity' | abs_len= 382
[00:06:51] verify | result supports= False fit= 0.00 top= 0.00 invalid= no_quote cue_hint= False
[00:06:51] select | verify relaxed 8/10
[00:06:51] verify | func= Motivation | rank= 7 | pid= astro-ph/0102390 | title_snip='Primordial black holes as a probe of the early universe and a varying
â€¦' | abs_len= 803
[00:06:53] verify | result supports= False fit= 0.00 top= 0.00 invalid= no_quote cue_hint= False
[00:06:53] select | verify relaxed 9/10
[00:06:53] verify | func= Motivation | rank= 8 | pid= astro-ph/0101022 | title_snip='Possible Strong Gravitational Wave Sources for the LISA Antenna' | abs_len= 971
[00:06:56] verify | result supports= False fit= 0.00 top= 0.00 invalid= no_quote cue_hint= False
[00:06:56] select | verify relaxed 10/10
[00:06:56] verify | func= Motivation | rank= 9 | pid= astro-ph/0104073 | title_snip='A BeppoSAX view of transient black hole candidates in quiescence' | abs_len= 720
[00:06:59] verify | result supports= False fit= 0.00 top= 0.50 invalid= â€” cue_hint= False

================================================================================
FUNCTION: Motivation
QUERY   : What problem or gap in understanding black-hole candidates like GRO J1655-40 motivates the current work, and what background information is necessary to understand this research?
- WINNER: astro-ph/0101305 | The optical emission lines as a probe of state transitions in black-hole
  candidates
- QUOTE : black-hole candidates can help us investigate state transitions
- WHY   : sufficient

================================================================================
UNIFIED ANSWER (1â€“2 sentences, tagged):
Understanding state transitions in black-hole candidates like GRO J1655-40 requires background knowledge of optical spectroscopic studies and their relation to X-ray state transitions [Background] (astro-ph/0101305). The current work is motivated by the need to investigate these state transitions, which is driven by the changes in optical line profiles that reflect alterations in the accretion flow geometry [Motivation] (astro-ph/0101305).

ðŸ“„ Saved: outputs/function_selection_results.json
ðŸ“„ Saved: outputs/function_selection_results.jsonl
ðŸ“ Unified answer: outputs/function_answer_unified.txt
-> /home/anpa439f/anaconda3/envs/myenv/bin/python3 /data/horse/ws/anpa439f-Function_Retrieval_Citation/Research_Project/RetrievalAugmentedGeneration/classifying_question.py  (cwd=/data/horse/ws/anpa439f-Function_Retrieval_Citation/Research_Project/RetrievalAugmentedGeneration)
âœ… Saved to classified_outputs.jsonl
ðŸ”§ Ready for retrieval module (.py).
-> /home/anpa439f/anaconda3/envs/myenv/bin/python3 /data/horse/ws/anpa439f-Function_Retrieval_Citation/Research_Project/RetrievalAugmentedGeneration/Retreival_query_based.py --skip-reindex --index /data/horse/ws/anpa439f-Function_Retrieval_Citation/Research_Project/e5_index_subset_1/index.faiss --meta /data/horse/ws/anpa439f-Function_Retrieval_Citation/Research_Project/e5_index_subset_1/meta.parquet --topk 20  (cwd=/data/horse/ws/anpa439f-Function_Retrieval_Citation/Research_Project/RetrievalAugmentedGeneration)
âœ… Top-k candidates: /data/horse/ws/anpa439f-Function_Retrieval_Citation/Research_Project/RetrievalAugmentedGeneration/outputs/topk_candidates_query.jsonl
ðŸ”— Symlinked: /data/horse/ws/anpa439f-Function_Retrieval_Citation/Research_Project/outputs/topk_candidates_query.jsonl -> /data/horse/ws/anpa439f-Function_Retrieval_Citation/Research_Project/RetrievalAugmentedGeneration/outputs/topk_candidates_query.jsonl
-> /home/anpa439f/anaconda3/envs/myenv/bin/python3 /data/horse/ws/anpa439f-Function_Retrieval_Citation/Research_Project/RetrievalAugmentedGeneration/function_based_answer-2_copy.py --debug --max-check 10  (cwd=/data/horse/ws/anpa439f-Function_Retrieval_Citation/Research_Project/RetrievalAugmentedGeneration)

ðŸŽ‰ Pipeline complete.
  â€¢ Classified file : /data/horse/ws/anpa439f-Function_Retrieval_Citation/Research_Project/RetrievalAugmentedGeneration/classified_outputs.jsonl
  â€¢ TopK (canonical): /data/horse/ws/anpa439f-Function_Retrieval_Citation/Research_Project/RetrievalAugmentedGeneration/outputs/topk_candidates_query.jsonl
  â€¢ Final outputs   : /data/horse/ws/anpa439f-Function_Retrieval_Citation/Research_Project/RetrievalAugmentedGeneration/outputs
