âœ… Available Models:
1. alias-reasoning
2. alias-ha
3. meta-llama/Llama-3.3-70B-Instruct
4. meta-llama/Llama-3.1-8B-Instruct
5. Qwen/Qwen2-VL-7B-Instruct
6. alias-vision
7. openGPT-X/Teuken-7B-instruct-research-v0.4
8. deepseek-ai/DeepSeek-Coder-V2-Lite-Instruct
9. Qwen/Qwen3-Coder-30B-A3B-Instruct
10. alias-code
11. Qwen/Qwen3-Embedding-4B
12. BAAI/bge-reranker-v2-m3
13. stabilityai/stable-diffusion-3.5-large-turbo
14. alias-image-generation
15. black-forest-labs/FLUX.1-dev
16. openai/whisper-large-v3
17. Kokoro-82M
18. tts-1-hd
19. deepseek-ai/DeepSeek-R1
20. openai/gpt-oss-120b
21. meta-llama/Llama-4-Scout-17B-16E-Instruct

ðŸ‘‰ Select a model number (default = 1): 
âœ… Using model: meta-llama/Llama-4-Scout-17B-16E-Instruct

ðŸ” Enter a scientific query or topic: 
ðŸ”Ž Citation Function Classification:
{
  "citation_functions": [
    "Motivation",
    "Extends"
  ],
  "justification": "The query highlights a driving limitation from prior work and inquires about how a new approach builds upon previous methods and results."
}

âœ… Saved to classified_outputs.jsonl
ðŸ”§ Ready for retrieval module (handled in a separate file).
âš¡ SKIP_REINDEX=1 â€” using existing FAISS index + meta; not scanning raw JSONL shards.
âœ… Top-k candidates (FAISS): /data/horse/ws/anpa439f-Function_Retrieval_Citation/Research_Project/RetrievalAugmentedGeneration/outputs/topk_candidates_query.jsonl
[14:47:53] main | args: Namespace(max_check=10, debug=True)
[14:47:53] read_last_jsonl | path= classified_outputs.jsonl
[14:47:53] read_last_jsonl | total_lines= 1
[14:47:53] main | query='What problem or limitation in previous work motivated the extension of the semiclassical model of the collective atomic recoil laser, and what methods or results from previous work are used in this extension?' | funcs=['Motivation', 'Extends']
[14:47:55] main | core_terms= ['collective atomic recoil laser', 'semiclassical model']
[14:47:55] load_topk_jsonl | path= /data/horse/ws/anpa439f-Function_Retrieval_Citation/Research_Project/outputs/topk_candidates_query.jsonl
[14:47:55] load_topk_jsonl | rows= 20
[14:47:55] load_topk_jsonl | first: rank= 0 paper_id= cond-mat/0102360 title_snip='Quantum effects in the collective light scattering by coherent atomic
â€¦' abs_len= 1269
[14:47:55] main | running function= Motivation
[14:47:55] select | function= Motivation | candidates_in= 20
[14:47:55] select | core_terms= ['collective atomic recoil laser', 'semiclassical model']
[14:47:55] select | no cosine prune; kept=20/20
[14:47:55] select | pool_size= 10 | ranks= [0, 1, 2, 3, 4, 5, 6, 7, 8, 9] | pids= ['cond-mat/0102360', 'nlin/0104041', 'hep-ph/0101297', 'hep-th/0103228', 'hep-ph/0102144', 'hep-ph/0103129', 'nlin/0101055', 'astro-ph/0101222', 'hep-ph/0101318', 'nlin/0101007']
[14:47:55] select | verify relaxed 1/10
[14:47:55] verify | func= Motivation | rank= 0 | pid= cond-mat/0102360 | title_snip='Quantum effects in the collective light scattering by coherent atomic
â€¦' | abs_len= 1269
[14:47:59] verify | result supports= True fit= 0.80 top= 0.90 invalid= â€” cue_hint= False
[14:47:59] select | verify relaxed 2/10
[14:47:59] verify | func= Motivation | rank= 1 | pid= nlin/0104041 | title_snip='Semiclassical description of shell effects in finite fermion systems' | abs_len= 745
[14:48:01] verify | result supports= False fit= 0.00 top= 0.00 invalid= no_quote cue_hint= False
[14:48:01] select | verify relaxed 3/10
[14:48:01] verify | func= Motivation | rank= 2 | pid= hep-ph/0101297 | title_snip='Bilocal expansion of the Borel amplitude and the hadronic tau decay
  â€¦' | abs_len= 1398
[14:48:04] verify | result supports= False fit= 0.00 top= 0.00 invalid= no_quote cue_hint= False
[14:48:04] select | verify relaxed 4/10
[14:48:04] verify | func= Motivation | rank= 3 | pid= hep-th/0103228 | title_snip='New Approach to Quantum Field Theory for Arbitrary Observers in
  Elecâ€¦' | abs_len= 1692
[14:48:06] verify | result supports= False fit= 0.00 top= 0.00 invalid= no_quote cue_hint= False
[14:48:06] select | verify relaxed 5/10
[14:48:06] verify | func= Motivation | rank= 4 | pid= hep-ph/0102144 | title_snip='Extra Families, Higgs Spectrum and Oblique Corrections' | abs_len= 1305
[14:48:09] verify | result supports= False fit= 0.00 top= 0.00 invalid= no_quote cue_hint= False
[14:48:09] select | verify relaxed 6/10
[14:48:09] verify | func= Motivation | rank= 5 | pid= hep-ph/0103129 | title_snip='The Meson Mass Spectrum from a Systematically Renormalized Light-Frontâ€¦' | abs_len= 1448
[14:48:11] verify | result supports= False fit= 0.00 top= 0.00 invalid= no_quote cue_hint= False
[14:48:11] select | verify relaxed 7/10
[14:48:11] verify | func= Motivation | rank= 6 | pid= nlin/0101055 | title_snip='A new class of semiclassical wave function uniformizations' | abs_len= 425
[14:48:14] verify | result supports= False fit= 0.00 top= 0.00 invalid= no_quote cue_hint= False
[14:48:14] select | verify relaxed 8/10
[14:48:14] verify | func= Motivation | rank= 7 | pid= astro-ph/0101222 | title_snip='Damping time and stability of density fermion perturbations in the
  eâ€¦' | abs_len= 1202
[14:48:16] verify | result supports= False fit= 0.00 top= 0.00 invalid= no_quote cue_hint= False
[14:48:16] select | verify relaxed 9/10
[14:48:16] verify | func= Motivation | rank= 8 | pid= hep-ph/0101318 | title_snip='Mesons on a transverse lattice' | abs_len= 1033
[14:48:19] verify | result supports= False fit= 0.00 top= 0.00 invalid= no_quote cue_hint= False
[14:48:19] select | verify relaxed 10/10
[14:48:19] verify | func= Motivation | rank= 9 | pid= nlin/0101007 | title_snip='Periodic Orbit Quantization: How to Make Semiclassical Trace Formulae
â€¦' | abs_len= 1057
[14:48:21] verify | result supports= False fit= 0.00 top= 0.00 invalid= no_quote cue_hint= False

================================================================================
FUNCTION: Motivation
QUERY   : What problem or limitation in previous work motivated the extension of the semiclassical model of the collective atomic recoil laser, and what methods or results from previous work are used in this extension?
- WINNER: cond-mat/0102360 | Quantum effects in the collective light scattering by coherent atomic
  recoil in a Bose-Einstein condensate
- QUOTE : We extend the semiclassical model of the collective atomic recoil laser
- WHY   : sufficient
[14:48:22] main | running function= Extends
[14:48:22] select | function= Extends | candidates_in= 20
[14:48:22] select | core_terms= ['collective atomic recoil laser', 'semiclassical model']
[14:48:22] select | no cosine prune; kept=20/20
[14:48:22] select | pool_size= 10 | ranks= [0, 1, 2, 3, 4, 5, 6, 7, 8, 9] | pids= ['cond-mat/0102360', 'nlin/0104041', 'hep-ph/0101297', 'hep-th/0103228', 'hep-ph/0102144', 'hep-ph/0103129', 'nlin/0101055', 'astro-ph/0101222', 'hep-ph/0101318', 'nlin/0101007']
[14:48:22] select | verify relaxed 1/10
[14:48:22] verify | func= Extends | rank= 0 | pid= cond-mat/0102360 | title_snip='Quantum effects in the collective light scattering by coherent atomic
â€¦' | abs_len= 1269
[14:48:26] verify | result supports= True fit= 0.80 top= 0.90 invalid= â€” cue_hint= True
[14:48:26] select | verify relaxed 2/10
[14:48:26] verify | func= Extends | rank= 1 | pid= nlin/0104041 | title_snip='Semiclassical description of shell effects in finite fermion systems' | abs_len= 745
[14:48:28] verify | result supports= False fit= 0.00 top= 0.00 invalid= no_quote cue_hint= False
[14:48:28] select | verify relaxed 3/10
[14:48:28] verify | func= Extends | rank= 2 | pid= hep-ph/0101297 | title_snip='Bilocal expansion of the Borel amplitude and the hadronic tau decay
  â€¦' | abs_len= 1398
[14:48:31] verify | result supports= False fit= 0.00 top= 0.00 invalid= no_quote cue_hint= False
[14:48:31] select | verify relaxed 4/10
[14:48:31] verify | func= Extends | rank= 3 | pid= hep-th/0103228 | title_snip='New Approach to Quantum Field Theory for Arbitrary Observers in
  Elecâ€¦' | abs_len= 1692
[14:48:33] verify | result supports= False fit= 0.00 top= 0.00 invalid= no_quote cue_hint= False
[14:48:33] select | verify relaxed 5/10
[14:48:33] verify | func= Extends | rank= 4 | pid= hep-ph/0102144 | title_snip='Extra Families, Higgs Spectrum and Oblique Corrections' | abs_len= 1305
[14:48:36] verify | result supports= False fit= 0.00 top= 0.00 invalid= no_quote cue_hint= False
[14:48:36] select | verify relaxed 6/10
[14:48:36] verify | func= Extends | rank= 5 | pid= hep-ph/0103129 | title_snip='The Meson Mass Spectrum from a Systematically Renormalized Light-Frontâ€¦' | abs_len= 1448
[14:48:38] verify | result supports= False fit= 0.00 top= 0.00 invalid= no_quote cue_hint= False
[14:48:38] select | verify relaxed 7/10
[14:48:38] verify | func= Extends | rank= 6 | pid= nlin/0101055 | title_snip='A new class of semiclassical wave function uniformizations' | abs_len= 425
[14:48:41] verify | result supports= False fit= 0.00 top= 0.00 invalid= no_quote cue_hint= False
[14:48:41] select | verify relaxed 8/10
[14:48:41] verify | func= Extends | rank= 7 | pid= astro-ph/0101222 | title_snip='Damping time and stability of density fermion perturbations in the
  eâ€¦' | abs_len= 1202
[14:48:43] verify | result supports= False fit= 0.00 top= 0.00 invalid= no_quote cue_hint= False
[14:48:43] select | verify relaxed 9/10
[14:48:43] verify | func= Extends | rank= 8 | pid= hep-ph/0101318 | title_snip='Mesons on a transverse lattice' | abs_len= 1033
[14:48:46] verify | result supports= False fit= 0.00 top= 0.00 invalid= no_quote cue_hint= False
[14:48:46] select | verify relaxed 10/10
[14:48:46] verify | func= Extends | rank= 9 | pid= nlin/0101007 | title_snip='Periodic Orbit Quantization: How to Make Semiclassical Trace Formulae
â€¦' | abs_len= 1057
[14:48:48] verify | result supports= False fit= 0.00 top= 0.00 invalid= no_quote cue_hint= False

================================================================================
FUNCTION: Extends
QUERY   : What problem or limitation in previous work motivated the extension of the semiclassical model of the collective atomic recoil laser, and what methods or results from previous work are used in this extension?
- WINNER: cond-mat/0102360 | Quantum effects in the collective light scattering by coherent atomic
  recoil in a Bose-Einstein condensate
- QUOTE : We extend the semiclassical model of the collective atomic recoil laser
- WHY   : sufficient

================================================================================
UNIFIED ANSWER (1â€“2 sentences, tagged):
The limitation of the semiclassical model of the collective atomic recoil laser in describing quantum effects motivated its extension to include the quantum mechanical description of the center-of-mass motion of atoms in a Bose-Einstein condensate [Motivation] (cond-mat/0102360). This extension builds upon previous work by incorporating the Maxwell-Bloch equations for two momentum levels and introducing a collective parameter to describe the average number of photons scattered per atom [Extends] (cond-mat/0102360).

ðŸ“„ Saved: outputs/function_selection_results.json
ðŸ“„ Saved: outputs/function_selection_results.jsonl
ðŸ“ Unified answer: outputs/function_answer_unified.txt
-> /home/anpa439f/anaconda3/envs/myenv/bin/python3 /data/horse/ws/anpa439f-Function_Retrieval_Citation/Research_Project/RetrievalAugmentedGeneration/classifying_question.py  (cwd=/data/horse/ws/anpa439f-Function_Retrieval_Citation/Research_Project/RetrievalAugmentedGeneration)
âœ… Saved to classified_outputs.jsonl
ðŸ”§ Ready for retrieval module (.py).
-> /home/anpa439f/anaconda3/envs/myenv/bin/python3 /data/horse/ws/anpa439f-Function_Retrieval_Citation/Research_Project/RetrievalAugmentedGeneration/Retreival_query_based.py --skip-reindex --index /data/horse/ws/anpa439f-Function_Retrieval_Citation/Research_Project/e5_index_subset_1/index.faiss --meta /data/horse/ws/anpa439f-Function_Retrieval_Citation/Research_Project/e5_index_subset_1/meta.parquet --topk 20  (cwd=/data/horse/ws/anpa439f-Function_Retrieval_Citation/Research_Project/RetrievalAugmentedGeneration)
âœ… Top-k candidates: /data/horse/ws/anpa439f-Function_Retrieval_Citation/Research_Project/RetrievalAugmentedGeneration/outputs/topk_candidates_query.jsonl
ðŸ”— Symlinked: /data/horse/ws/anpa439f-Function_Retrieval_Citation/Research_Project/outputs/topk_candidates_query.jsonl -> /data/horse/ws/anpa439f-Function_Retrieval_Citation/Research_Project/RetrievalAugmentedGeneration/outputs/topk_candidates_query.jsonl
-> /home/anpa439f/anaconda3/envs/myenv/bin/python3 /data/horse/ws/anpa439f-Function_Retrieval_Citation/Research_Project/RetrievalAugmentedGeneration/function_based_answer-2_copy.py --debug --max-check 10  (cwd=/data/horse/ws/anpa439f-Function_Retrieval_Citation/Research_Project/RetrievalAugmentedGeneration)

ðŸŽ‰ Pipeline complete.
  â€¢ Classified file : /data/horse/ws/anpa439f-Function_Retrieval_Citation/Research_Project/RetrievalAugmentedGeneration/classified_outputs.jsonl
  â€¢ TopK (canonical): /data/horse/ws/anpa439f-Function_Retrieval_Citation/Research_Project/RetrievalAugmentedGeneration/outputs/topk_candidates_query.jsonl
  â€¢ Final outputs   : /data/horse/ws/anpa439f-Function_Retrieval_Citation/Research_Project/RetrievalAugmentedGeneration/outputs
