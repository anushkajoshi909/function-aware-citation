âœ… Available Models:
1. alias-reasoning
2. alias-ha
3. meta-llama/Llama-3.3-70B-Instruct
4. meta-llama/Llama-3.1-8B-Instruct
5. Qwen/Qwen2-VL-7B-Instruct
6. alias-vision
7. openGPT-X/Teuken-7B-instruct-research-v0.4
8. deepseek-ai/DeepSeek-Coder-V2-Lite-Instruct
9. Qwen/Qwen3-Coder-30B-A3B-Instruct
10. alias-code
11. Qwen/Qwen3-Embedding-4B
12. BAAI/bge-reranker-v2-m3
13. stabilityai/stable-diffusion-3.5-large-turbo
14. alias-image-generation
15. black-forest-labs/FLUX.1-dev
16. openai/whisper-large-v3
17. Kokoro-82M
18. tts-1-hd
19. deepseek-ai/DeepSeek-R1
20. openai/gpt-oss-120b
21. meta-llama/Llama-4-Scout-17B-16E-Instruct

ðŸ‘‰ Select a model number (default = 1): 
âœ… Using model: meta-llama/Llama-4-Scout-17B-16E-Instruct

ðŸ” Enter a scientific query or topic: 
ðŸ”Ž Citation Function Classification:
{
  "citation_functions": [
    "Compares",
    "Background"
  ],
  "justification": "The query compares previous studies with the current work and seeks background information on observational approaches and spectral characteristics."
}

âœ… Saved to classified_outputs.jsonl
ðŸ”§ Ready for retrieval module (handled in a separate file).
âš¡ SKIP_REINDEX=1 â€” using existing FAISS index + meta; not scanning raw JSONL shards.
âœ… Top-k candidates (FAISS): /data/horse/ws/anpa439f-Function_Retrieval_Citation/Research_Project/RetrievalAugmentedGeneration/outputs/topk_candidates_query.jsonl
[12:37:42] main | args: Namespace(max_check=10, debug=True)
[12:37:42] read_last_jsonl | path= classified_outputs.jsonl
[12:37:42] read_last_jsonl | total_lines= 1
[12:37:42] main | query='How do the template spectra of normal galaxies along the Hubble sequence, as defined in this work, relate to previous studies in terms of observational approach and spectral characteristics?' | funcs=['Compares', 'Background']
[12:37:45] main | core_terms= ['galaxies', 'Hubble sequence', 'template spectra', 'spectral characteristics', 'observational approach']
[12:37:45] load_topk_jsonl | path= /data/horse/ws/anpa439f-Function_Retrieval_Citation/Research_Project/outputs/topk_candidates_query.jsonl
[12:37:45] load_topk_jsonl | rows= 20
[12:37:45] load_topk_jsonl | first: rank= 0 paper_id= astro-ph/0104427 title_snip='Near-infrared template spectra of normal galaxies: k-corrections, galaâ€¦' abs_len= 1499
[12:37:45] main | running function= Compares
[12:37:45] select | function= Compares | candidates_in= 20
[12:37:45] select | core_terms= ['galaxies', 'Hubble sequence', 'template spectra', 'spectral characteristics', 'observational approach']
[12:37:45] select | no cosine prune; kept=20/20
[12:37:45] select | pool_size= 10 | ranks= [0, 1, 2, 3, 4, 5, 6, 7, 8, 9] | pids= ['astro-ph/0104427', 'astro-ph/0101416', 'astro-ph/0101445', 'astro-ph/0103017', 'astro-ph/0101367', 'astro-ph/0104311', 'astro-ph/0101248', 'astro-ph/0101143', 'astro-ph/0104084', 'astro-ph/0104313']
[12:37:45] select | verify relaxed 1/10
[12:37:45] verify | func= Compares | rank= 0 | pid= astro-ph/0104427 | title_snip='Near-infrared template spectra of normal galaxies: k-corrections, galaâ€¦' | abs_len= 1499
[12:37:50] verify | result supports= False fit= 0.00 top= 0.90 invalid= quote_not_in_abstract cue_hint= False
[12:37:50] select | verify relaxed 2/10
[12:37:50] verify | func= Compares | rank= 1 | pid= astro-ph/0101416 | title_snip='A study of the core of the Shapley Concentration: VI. Spectral
  propeâ€¦' | abs_len= 1702
[12:37:53] verify | result supports= True fit= 0.80 top= 0.90 invalid= â€” cue_hint= False
[12:37:53] select | verify relaxed 3/10
[12:37:53] verify | func= Compares | rank= 2 | pid= astro-ph/0101445 | title_snip='A critical appraisal of the SED fitting method to estimate photometricâ€¦' | abs_len= 708
[12:37:57] verify | result supports= True fit= 0.80 top= 0.90 invalid= â€” cue_hint= False
[12:37:57] select | verify relaxed 4/10
[12:37:57] verify | func= Compares | rank= 3 | pid= astro-ph/0103017 | title_snip='Large-Scale Structure, Theory and Statistics' | abs_len= 1145
[12:38:00] verify | result supports= False fit= 0.00 top= 0.00 invalid= no_quote cue_hint= False
[12:38:00] select | verify relaxed 5/10
[12:38:00] verify | func= Compares | rank= 4 | pid= astro-ph/0101367 | title_snip='Radio Galaxy Spectra' | abs_len= 479
[12:38:02] verify | result supports= False fit= 0.00 top= 0.00 invalid= no_quote cue_hint= False
[12:38:02] select | verify relaxed 6/10
[12:38:02] verify | func= Compares | rank= 5 | pid= astro-ph/0104311 | title_snip='Quantitative Morphology of the Intermediate-Redshift Galaxy Cluster
  â€¦' | abs_len= 1042
[12:38:05] verify | result supports= False fit= 0.00 top= 0.20 invalid= â€” cue_hint= False
[12:38:05] select | verify relaxed 7/10
[12:38:05] verify | func= Compares | rank= 6 | pid= astro-ph/0101248 | title_snip='The Duality of Spiral Structure, and a Quantitative Dust Penetrated
  â€¦' | abs_len= 850
[12:38:09] verify | result supports= False fit= 0.00 top= 0.50 invalid= â€” cue_hint= False
[12:38:09] select | verify relaxed 8/10
[12:38:09] verify | func= Compares | rank= 7 | pid= astro-ph/0101143 | title_snip='On the trispectrum as a gaussian test for cosmology' | abs_len= 1444
[12:38:12] verify | result supports= False fit= 0.00 top= 0.00 invalid= no_quote cue_hint= False
[12:38:12] select | verify relaxed 9/10
[12:38:12] verify | func= Compares | rank= 8 | pid= astro-ph/0104084 | title_snip='On the Origin of the Colour-Magnitude Relation in the Virgo Cluster' | abs_len= 1278
[12:38:15] verify | result supports= False fit= 0.00 top= 0.20 invalid= â€” cue_hint= False
[12:38:15] select | verify relaxed 10/10
[12:38:15] verify | func= Compares | rank= 9 | pid= astro-ph/0104313 | title_snip='Cluster correlations in redshift space' | abs_len= 1713
[12:38:18] verify | result supports= False fit= 0.00 top= 0.00 invalid= no_quote cue_hint= False

================================================================================
FUNCTION: Compares
QUERY   : How do the template spectra of normal galaxies along the Hubble sequence, as defined in this work, relate to previous studies in terms of observational approach and spectral characteristics?
- WINNER: astro-ph/0101416 | A study of the core of the Shapley Concentration: VI. Spectral
  properties of galaxies
- QUOTE : Our analysis is consistent with the claim of Balogh et al. (1998)
- WHY   : sufficient
[12:38:19] main | running function= Background
[12:38:19] select | function= Background | candidates_in= 20
[12:38:19] select | core_terms= ['galaxies', 'Hubble sequence', 'template spectra', 'spectral characteristics', 'observational approach']
[12:38:19] select | no cosine prune; kept=20/20
[12:38:19] select | pool_size= 10 | ranks= [0, 1, 2, 3, 4, 5, 6, 7, 8, 9] | pids= ['astro-ph/0104427', 'astro-ph/0101416', 'astro-ph/0101445', 'astro-ph/0103017', 'astro-ph/0101367', 'astro-ph/0104311', 'astro-ph/0101248', 'astro-ph/0101143', 'astro-ph/0104084', 'astro-ph/0104313']
[12:38:19] select | verify relaxed 1/10
[12:38:19] verify | func= Background | rank= 0 | pid= astro-ph/0104427 | title_snip='Near-infrared template spectra of normal galaxies: k-corrections, galaâ€¦' | abs_len= 1499
[12:38:23] verify | result supports= True fit= 0.80 top= 0.90 invalid= â€” cue_hint= False
[12:38:23] select | verify relaxed 2/10
[12:38:23] verify | func= Background | rank= 1 | pid= astro-ph/0101416 | title_snip='A study of the core of the Shapley Concentration: VI. Spectral
  propeâ€¦' | abs_len= 1702
[12:38:26] verify | result supports= True fit= 0.80 top= 0.90 invalid= â€” cue_hint= False
[12:38:26] select | verify relaxed 3/10
[12:38:26] verify | func= Background | rank= 2 | pid= astro-ph/0101445 | title_snip='A critical appraisal of the SED fitting method to estimate photometricâ€¦' | abs_len= 708
[12:38:29] verify | result supports= True fit= 0.80 top= 0.90 invalid= â€” cue_hint= False
[12:38:29] select | verify relaxed 4/10
[12:38:29] verify | func= Background | rank= 3 | pid= astro-ph/0103017 | title_snip='Large-Scale Structure, Theory and Statistics' | abs_len= 1145
[12:38:32] verify | result supports= False fit= 0.00 top= 0.00 invalid= no_quote cue_hint= False
[12:38:32] select | verify relaxed 5/10
[12:38:32] verify | func= Background | rank= 4 | pid= astro-ph/0101367 | title_snip='Radio Galaxy Spectra' | abs_len= 479
[12:38:35] verify | result supports= False fit= 0.00 top= 0.00 invalid= no_quote cue_hint= False
[12:38:35] select | verify relaxed 6/10
[12:38:35] verify | func= Background | rank= 5 | pid= astro-ph/0104311 | title_snip='Quantitative Morphology of the Intermediate-Redshift Galaxy Cluster
  â€¦' | abs_len= 1042
[12:38:38] verify | result supports= False fit= 0.00 top= 0.20 invalid= â€” cue_hint= False
[12:38:38] select | verify relaxed 7/10
[12:38:38] verify | func= Background | rank= 6 | pid= astro-ph/0101248 | title_snip='The Duality of Spiral Structure, and a Quantitative Dust Penetrated
  â€¦' | abs_len= 850
[12:38:42] verify | result supports= False fit= 0.00 top= 0.20 invalid= â€” cue_hint= False
[12:38:42] select | verify relaxed 8/10
[12:38:42] verify | func= Background | rank= 7 | pid= astro-ph/0101143 | title_snip='On the trispectrum as a gaussian test for cosmology' | abs_len= 1444
[12:38:45] verify | result supports= False fit= 0.00 top= 0.00 invalid= no_quote cue_hint= False
[12:38:45] select | verify relaxed 9/10
[12:38:45] verify | func= Background | rank= 8 | pid= astro-ph/0104084 | title_snip='On the Origin of the Colour-Magnitude Relation in the Virgo Cluster' | abs_len= 1278
[12:38:47] verify | result supports= False fit= 0.00 top= 0.20 invalid= no_quote cue_hint= False
[12:38:47] select | verify relaxed 10/10
[12:38:47] verify | func= Background | rank= 9 | pid= astro-ph/0104313 | title_snip='Cluster correlations in redshift space' | abs_len= 1713
[12:38:50] verify | result supports= False fit= 0.00 top= 0.00 invalid= no_quote cue_hint= False

================================================================================
FUNCTION: Background
QUERY   : How do the template spectra of normal galaxies along the Hubble sequence, as defined in this work, relate to previous studies in terms of observational approach and spectral characteristics?
- WINNER: astro-ph/0104427 | Near-infrared template spectra of normal galaxies: k-corrections, galaxy
  models and stellar populations
- QUOTE : define template spectra of the normal galaxies along the Hubble sequence
- WHY   : sufficient

================================================================================
UNIFIED ANSWER (1â€“2 sentences, tagged):
The template spectra of normal galaxies along the Hubble sequence, as defined in this work, are comparable to previous studies in terms of observational approach, such as the use of homogeneous samples and accurate spectral classification [Compares] (astro-ph/0101416). The definition of these template spectra is based on observations of 28 local galaxies and is intended to provide a background for understanding the spectral properties of normal galaxies [Background] (astro-ph/0104427).

ðŸ“„ Saved: outputs/function_selection_results.json
ðŸ“„ Saved: outputs/function_selection_results.jsonl
ðŸ“ Unified answer: outputs/function_answer_unified.txt
-> /home/anpa439f/anaconda3/envs/myenv/bin/python3 /data/horse/ws/anpa439f-Function_Retrieval_Citation/Research_Project/RetrievalAugmentedGeneration/classifying_question.py  (cwd=/data/horse/ws/anpa439f-Function_Retrieval_Citation/Research_Project/RetrievalAugmentedGeneration)
âœ… Saved to classified_outputs.jsonl
ðŸ”§ Ready for retrieval module (.py).
-> /home/anpa439f/anaconda3/envs/myenv/bin/python3 /data/horse/ws/anpa439f-Function_Retrieval_Citation/Research_Project/RetrievalAugmentedGeneration/Retreival_query_based.py --skip-reindex --index /data/horse/ws/anpa439f-Function_Retrieval_Citation/Research_Project/e5_index_subset_1/index.faiss --meta /data/horse/ws/anpa439f-Function_Retrieval_Citation/Research_Project/e5_index_subset_1/meta.parquet --topk 20  (cwd=/data/horse/ws/anpa439f-Function_Retrieval_Citation/Research_Project/RetrievalAugmentedGeneration)
âœ… Top-k candidates: /data/horse/ws/anpa439f-Function_Retrieval_Citation/Research_Project/RetrievalAugmentedGeneration/outputs/topk_candidates_query.jsonl
ðŸ”— Symlinked: /data/horse/ws/anpa439f-Function_Retrieval_Citation/Research_Project/outputs/topk_candidates_query.jsonl -> /data/horse/ws/anpa439f-Function_Retrieval_Citation/Research_Project/RetrievalAugmentedGeneration/outputs/topk_candidates_query.jsonl
-> /home/anpa439f/anaconda3/envs/myenv/bin/python3 /data/horse/ws/anpa439f-Function_Retrieval_Citation/Research_Project/RetrievalAugmentedGeneration/function_based_answer-2_copy.py --debug --max-check 10  (cwd=/data/horse/ws/anpa439f-Function_Retrieval_Citation/Research_Project/RetrievalAugmentedGeneration)

ðŸŽ‰ Pipeline complete.
  â€¢ Classified file : /data/horse/ws/anpa439f-Function_Retrieval_Citation/Research_Project/RetrievalAugmentedGeneration/classified_outputs.jsonl
  â€¢ TopK (canonical): /data/horse/ws/anpa439f-Function_Retrieval_Citation/Research_Project/RetrievalAugmentedGeneration/outputs/topk_candidates_query.jsonl
  â€¢ Final outputs   : /data/horse/ws/anpa439f-Function_Retrieval_Citation/Research_Project/RetrievalAugmentedGeneration/outputs
