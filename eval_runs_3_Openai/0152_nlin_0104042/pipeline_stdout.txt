âœ… Available Models:
1. alias-reasoning
2. alias-ha
3. meta-llama/Llama-3.3-70B-Instruct
4. meta-llama/Llama-3.1-8B-Instruct
5. Qwen/Qwen2-VL-7B-Instruct
6. alias-vision
7. openGPT-X/Teuken-7B-instruct-research-v0.4
8. deepseek-ai/DeepSeek-Coder-V2-Lite-Instruct
9. Qwen/Qwen3-Coder-30B-A3B-Instruct
10. alias-code
11. Qwen/Qwen3-Embedding-4B
12. BAAI/bge-reranker-v2-m3
13. stabilityai/stable-diffusion-3.5-large-turbo
14. alias-image-generation
15. black-forest-labs/FLUX.1-dev
16. openai/whisper-large-v3
17. Kokoro-82M
18. tts-1-hd
19. deepseek-ai/DeepSeek-R1
20. openai/gpt-oss-120b
21. meta-llama/Llama-4-Scout-17B-16E-Instruct

ðŸ‘‰ Select a model number (default = 1): 
âœ… Using model: openai/gpt-oss-120b

ðŸ” Enter a scientific query or topic: 
ðŸ”Ž Citation Function Classification:
{
  "citation_functions": [
    "Compares",
    "FutureWork"
  ],
  "justification": "The query asks how the study's findings compare with prior work (comparison) and what future research it suggests (future work)."
}

âœ… Saved to classified_outputs.jsonl
ðŸ”§ Ready for retrieval module (handled in a separate file).
âš¡ SKIP_REINDEX=1 â€” using existing FAISS index + meta; not scanning raw JSONL shards.
âœ… Top-k candidates (FAISS): /data/horse/ws/anpa439f-Function_Retrieval_Citation/Research_Project/RetrievalAugmentedGeneration/outputs/topk_candidates_query.jsonl
[18:53:42] main | args: Namespace(max_check=10, debug=True)
[18:53:42] read_last_jsonl | path= classified_outputs.jsonl
[18:53:42] read_last_jsonl | total_lines= 1
[18:53:42] main | query='How do the findings of this study on the coexistence of two scaling regimes in shear dominated flows compare to previous work and what future research directions does it suggest?' | funcs=['Compares', 'FutureWork']
[18:53:44] main | core_terms= ['shear dominated flows', 'scaling regimes', 'coexistence']
[18:53:44] load_topk_jsonl | path= /data/horse/ws/anpa439f-Function_Retrieval_Citation/Research_Project/outputs/topk_candidates_query.jsonl
[18:53:44] load_topk_jsonl | rows= 20
[18:53:44] load_topk_jsonl | first: rank= 0 paper_id= nlin/0104042 title_snip='Double scaling and intermittency in shear dominated flows' abs_len= 1305
[18:53:44] main | running function= Compares
[18:53:44] select | function= Compares | candidates_in= 20
[18:53:44] select | core_terms= ['shear dominated flows', 'scaling regimes', 'coexistence']
[18:53:44] select | no cosine prune; kept=20/20
[18:53:44] select | pool_size= 10 | ranks= [0, 1, 2, 3, 4, 5, 6, 7, 8, 9] | pids= ['nlin/0104042', 'nlin/0102015', 'nlin/0101050', 'nlin/0104056', 'astro-ph/0101397', 'physics/0101037', 'nlin/0102023', 'nlin/0103017', 'cond-mat/0101474', 'cond-mat/0102302']
[18:53:44] select | verify relaxed 1/10
[18:53:44] verify | func= Compares | rank= 0 | pid= nlin/0104042 | title_snip='Double scaling and intermittency in shear dominated flows' | abs_len= 1305
[18:53:48] verify | result supports= True fit= 0.80 top= 0.90 invalid= â€” cue_hint= False
[18:53:48] select | verify relaxed 2/10
[18:53:48] verify | func= Compares | rank= 1 | pid= nlin/0102015 | title_snip='Experimental assessment of a new form of scaling law for near-wall
  tâ€¦' | abs_len= 1624
[18:53:52] verify | result supports= False fit= 0.00 top= 0.90 invalid= off_topic_no_core_in_abstract cue_hint= False
[18:53:52] select | verify relaxed 3/10
[18:53:52] verify | func= Compares | rank= 2 | pid= nlin/0101050 | title_snip='Stability of scaling regimes in $d\geq 2$ developed turbulence with weâ€¦' | abs_len= 787
[18:53:55] verify | result supports= False fit= 0.00 top= 0.90 invalid= off_topic_no_core_in_abstract cue_hint= False
[18:53:55] select | verify relaxed 4/10
[18:53:55] verify | func= Compares | rank= 3 | pid= nlin/0104056 | title_snip='Weak Wave Turbulence Scaling Theory for Diffusion and Relative Diffusiâ€¦' | abs_len= 476
[18:53:58] verify | result supports= False fit= 0.00 top= 0.00 invalid= no_quote cue_hint= False
[18:53:58] select | verify relaxed 5/10
[18:53:58] verify | func= Compares | rank= 4 | pid= astro-ph/0101397 | title_snip='Turbulent dissipation in the ISM: the coexistence of forced and decayiâ€¦' | abs_len= 1787
[18:54:01] verify | result supports= True fit= 0.80 top= 0.90 invalid= â€” cue_hint= False
[18:54:01] select | verify relaxed 6/10
[18:54:01] verify | func= Compares | rank= 5 | pid= physics/0101037 | title_snip='Fast Numerical simulations of 2D turbulence using a dynamic model for
â€¦' | abs_len= 770
[18:54:05] verify | result supports= False fit= 0.00 top= 0.60 invalid= off_topic_no_core_in_abstract cue_hint= True
[18:54:05] select | verify relaxed 7/10
[18:54:05] verify | func= Compares | rank= 6 | pid= nlin/0102023 | title_snip='Pair dispersion in turbulence' | abs_len= 450
[18:54:08] verify | result supports= False fit= 0.00 top= 0.00 invalid= no_quote cue_hint= False
[18:54:08] select | verify relaxed 8/10
[18:54:08] verify | func= Compares | rank= 7 | pid= nlin/0103017 | title_snip='Experimental evidence of chaotic advection in a convective flow' | abs_len= 472
[18:54:11] verify | result supports= False fit= 0.00 top= 0.00 invalid= no_quote cue_hint= False
[18:54:11] select | verify relaxed 9/10
[18:54:11] verify | func= Compares | rank= 8 | pid= cond-mat/0101474 | title_snip='Numerical analysis of the Minimal and Two-Liquid models of the Market
â€¦' | abs_len= 1428
[18:54:14] verify | result supports= False fit= 0.00 top= 0.00 invalid= no_quote cue_hint= False
[18:54:14] select | verify relaxed 10/10
[18:54:14] verify | func= Compares | rank= 9 | pid= cond-mat/0102302 | title_snip='A new relation between pressure and fractional flow in two-phase flow â€¦' | abs_len= 793
[18:54:17] verify | result supports= False fit= 0.00 top= 0.00 invalid= no_quote cue_hint= False

================================================================================
FUNCTION: Compares
QUERY   : How do the findings of this study on the coexistence of two scaling regimes in shear dominated flows compare to previous work and what future research directions does it suggest?
- WINNER: nlin/0104042 | Double scaling and intermittency in shear dominated flows
- QUOTE : coexistence of the two regimes
- WHY   : sufficient
[18:54:18] main | running function= FutureWork
[18:54:18] select | function= FutureWork | candidates_in= 20
[18:54:18] select | core_terms= ['shear dominated flows', 'scaling regimes', 'coexistence']
[18:54:18] select | no cosine prune; kept=20/20
[18:54:18] select | pool_size= 10 | ranks= [0, 1, 2, 3, 4, 5, 6, 7, 8, 9] | pids= ['nlin/0104042', 'nlin/0102015', 'nlin/0101050', 'nlin/0104056', 'astro-ph/0101397', 'physics/0101037', 'nlin/0102023', 'nlin/0103017', 'cond-mat/0101474', 'cond-mat/0102302']
[18:54:18] select | verify relaxed 1/10
[18:54:18] verify | func= FutureWork | rank= 0 | pid= nlin/0104042 | title_snip='Double scaling and intermittency in shear dominated flows' | abs_len= 1305
[18:54:21] verify | result supports= False fit= 0.00 top= 0.80 invalid= no_quote cue_hint= False
[18:54:21] select | verify relaxed 2/10
[18:54:21] verify | func= FutureWork | rank= 1 | pid= nlin/0102015 | title_snip='Experimental assessment of a new form of scaling law for near-wall
  tâ€¦' | abs_len= 1624
[18:54:25] verify | result supports= False fit= 0.00 top= 0.80 invalid= â€” cue_hint= False
[18:54:25] select | verify relaxed 3/10
[18:54:25] verify | func= FutureWork | rank= 2 | pid= nlin/0101050 | title_snip='Stability of scaling regimes in $d\geq 2$ developed turbulence with weâ€¦' | abs_len= 787
[18:54:29] verify | result supports= False fit= 0.00 top= 0.80 invalid= â€” cue_hint= False
[18:54:29] select | verify relaxed 4/10
[18:54:29] verify | func= FutureWork | rank= 3 | pid= nlin/0104056 | title_snip='Weak Wave Turbulence Scaling Theory for Diffusion and Relative Diffusiâ€¦' | abs_len= 476
[18:54:31] verify | result supports= False fit= 0.00 top= 0.00 invalid= no_quote cue_hint= False
[18:54:31] select | verify relaxed 5/10
[18:54:31] verify | func= FutureWork | rank= 4 | pid= astro-ph/0101397 | title_snip='Turbulent dissipation in the ISM: the coexistence of forced and decayiâ€¦' | abs_len= 1787
[18:54:35] verify | result supports= True fit= 0.80 top= 0.90 invalid= â€” cue_hint= False
[18:54:35] select | verify relaxed 6/10
[18:54:35] verify | func= FutureWork | rank= 5 | pid= physics/0101037 | title_snip='Fast Numerical simulations of 2D turbulence using a dynamic model for
â€¦' | abs_len= 770
[18:54:37] verify | result supports= False fit= 0.00 top= 0.00 invalid= no_quote cue_hint= False
[18:54:37] select | verify relaxed 7/10
[18:54:37] verify | func= FutureWork | rank= 6 | pid= nlin/0102023 | title_snip='Pair dispersion in turbulence' | abs_len= 450
[18:54:41] verify | result supports= False fit= 0.00 top= 0.00 invalid= no_quote cue_hint= False
[18:54:41] select | verify relaxed 8/10
[18:54:41] verify | func= FutureWork | rank= 7 | pid= nlin/0103017 | title_snip='Experimental evidence of chaotic advection in a convective flow' | abs_len= 472
[18:54:45] verify | result supports= False fit= 0.00 top= 0.20 invalid= â€” cue_hint= False
[18:54:45] select | verify relaxed 9/10
[18:54:45] verify | func= FutureWork | rank= 8 | pid= cond-mat/0101474 | title_snip='Numerical analysis of the Minimal and Two-Liquid models of the Market
â€¦' | abs_len= 1428
[18:54:48] verify | result supports= False fit= 0.00 top= 0.00 invalid= no_quote cue_hint= False
[18:54:48] select | verify relaxed 10/10
[18:54:48] verify | func= FutureWork | rank= 9 | pid= cond-mat/0102302 | title_snip='A new relation between pressure and fractional flow in two-phase flow â€¦' | abs_len= 793
[18:54:51] verify | result supports= False fit= 0.00 top= 0.00 invalid= no_quote cue_hint= False

================================================================================
FUNCTION: FutureWork
QUERY   : How do the findings of this study on the coexistence of two scaling regimes in shear dominated flows compare to previous work and what future research directions does it suggest?
- WINNER: astro-ph/0101397 | Turbulent dissipation in the ISM: the coexistence of forced and decaying
  regimes and implications for galaxy formation and evolution
- QUOTE : support models of galaxy evolution
- WHY   : sufficient

================================================================================
UNIFIED ANSWER (1â€“2 sentences, tagged):
The findings of this study on the coexistence of two scaling regimes in shear dominated flows [Compares] (nlin/0104042) differ from previous work in that they provide evidence of the coexistence of the two regimes, whereas previous data only showed individual regimes. This study suggests future research directions, such as investigating the implications of turbulent dissipation for galaxy formation and evolution [FutureWork] (astro-ph/0101397).

ðŸ“„ Saved: outputs/function_selection_results.json
ðŸ“„ Saved: outputs/function_selection_results.jsonl
ðŸ“ Unified answer: outputs/function_answer_unified.txt
-> /home/anpa439f/anaconda3/envs/myenv/bin/python3 /data/horse/ws/anpa439f-Function_Retrieval_Citation/Research_Project/RetrievalAugmentedGeneration/classifying_question.py  (cwd=/data/horse/ws/anpa439f-Function_Retrieval_Citation/Research_Project/RetrievalAugmentedGeneration)
âœ… Saved to classified_outputs.jsonl
ðŸ”§ Ready for retrieval module (.py).
-> /home/anpa439f/anaconda3/envs/myenv/bin/python3 /data/horse/ws/anpa439f-Function_Retrieval_Citation/Research_Project/RetrievalAugmentedGeneration/Retreival_query_based.py --skip-reindex --index /data/horse/ws/anpa439f-Function_Retrieval_Citation/Research_Project/e5_index_subset_1/index.faiss --meta /data/horse/ws/anpa439f-Function_Retrieval_Citation/Research_Project/e5_index_subset_1/meta.parquet --topk 20  (cwd=/data/horse/ws/anpa439f-Function_Retrieval_Citation/Research_Project/RetrievalAugmentedGeneration)
âœ… Top-k candidates: /data/horse/ws/anpa439f-Function_Retrieval_Citation/Research_Project/RetrievalAugmentedGeneration/outputs/topk_candidates_query.jsonl
ðŸ”— Symlinked: /data/horse/ws/anpa439f-Function_Retrieval_Citation/Research_Project/outputs/topk_candidates_query.jsonl -> /data/horse/ws/anpa439f-Function_Retrieval_Citation/Research_Project/RetrievalAugmentedGeneration/outputs/topk_candidates_query.jsonl
-> /home/anpa439f/anaconda3/envs/myenv/bin/python3 /data/horse/ws/anpa439f-Function_Retrieval_Citation/Research_Project/RetrievalAugmentedGeneration/function_based_answer-2_copy.py --debug --max-check 10  (cwd=/data/horse/ws/anpa439f-Function_Retrieval_Citation/Research_Project/RetrievalAugmentedGeneration)

ðŸŽ‰ Pipeline complete.
  â€¢ Classified file : /data/horse/ws/anpa439f-Function_Retrieval_Citation/Research_Project/RetrievalAugmentedGeneration/classified_outputs.jsonl
  â€¢ TopK (canonical): /data/horse/ws/anpa439f-Function_Retrieval_Citation/Research_Project/RetrievalAugmentedGeneration/outputs/topk_candidates_query.jsonl
  â€¢ Final outputs   : /data/horse/ws/anpa439f-Function_Retrieval_Citation/Research_Project/RetrievalAugmentedGeneration/outputs
