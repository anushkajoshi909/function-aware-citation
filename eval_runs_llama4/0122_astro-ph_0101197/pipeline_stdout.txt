âœ… Available Models:
1. alias-reasoning
2. alias-ha
3. meta-llama/Llama-3.3-70B-Instruct
4. meta-llama/Llama-3.1-8B-Instruct
5. Qwen/Qwen2-VL-7B-Instruct
6. alias-vision
7. openGPT-X/Teuken-7B-instruct-research-v0.4
8. deepseek-ai/DeepSeek-Coder-V2-Lite-Instruct
9. Qwen/Qwen3-Coder-30B-A3B-Instruct
10. alias-code
11. Qwen/Qwen3-Embedding-4B
12. BAAI/bge-reranker-v2-m3
13. stabilityai/stable-diffusion-3.5-large-turbo
14. alias-image-generation
15. black-forest-labs/FLUX.1-dev
16. openai/whisper-large-v3
17. Kokoro-82M
18. tts-1-hd
19. deepseek-ai/DeepSeek-R1
20. openai/gpt-oss-120b
21. meta-llama/Llama-4-Scout-17B-16E-Instruct

ðŸ‘‰ Select a model number (default = 1): 
âœ… Using model: meta-llama/Llama-4-Scout-17B-16E-Instruct

ðŸ” Enter a scientific query or topic: 
ðŸ”Ž Citation Function Classification:
{
  "citation_functions": [
    "Compares",
    "FutureWork"
  ],
  "justification": "The query makes a comparative inquiry with existing observations and explicitly asks for directions in future research."
}

âœ… Saved to classified_outputs.jsonl
ðŸ”§ Ready for retrieval module (handled in a separate file).
âš¡ SKIP_REINDEX=1 â€” using existing FAISS index + meta; not scanning raw JSONL shards.
âœ… Top-k candidates (FAISS): /data/horse/ws/anpa439f-Function_Retrieval_Citation/Research_Project/RetrievalAugmentedGeneration/outputs/topk_candidates_query.jsonl
[14:01:16] main | args: Namespace(max_check=10, debug=True)
[14:01:16] read_last_jsonl | path= classified_outputs.jsonl
[14:01:16] read_last_jsonl | total_lines= 1
[14:01:16] main | query='How does the proposed model of stellar system formation compare to existing observations of halo globular clusters, and what future research could be done to further validate this comparison?' | funcs=['Compares', 'FutureWork']
[14:01:18] main | core_terms= ['halo globular clusters', 'stellar system', 'stellar system formation']
[14:01:18] load_topk_jsonl | path= /data/horse/ws/anpa439f-Function_Retrieval_Citation/Research_Project/outputs/topk_candidates_query.jsonl
[14:01:18] load_topk_jsonl | rows= 20
[14:01:18] load_topk_jsonl | first: rank= 0 paper_id= astro-ph/0101197 title_snip='Synchronized Formation of Sub-Galactic Systems at Cosmological
  Reionâ€¦' abs_len= 1806
[14:01:18] main | running function= Compares
[14:01:18] select | function= Compares | candidates_in= 20
[14:01:18] select | core_terms= ['halo globular clusters', 'stellar system', 'stellar system formation']
[14:01:18] select | no cosine prune; kept=20/20
[14:01:18] select | pool_size= 10 | ranks= [0, 1, 2, 3, 4, 5, 6, 7, 8, 9] | pids= ['astro-ph/0101197', 'astro-ph/0103256', 'astro-ph/0101535', 'astro-ph/0103021', 'astro-ph/0101081', 'astro-ph/0101210', 'astro-ph/0104139', 'astro-ph/0104069', 'astro-ph/0102039', 'astro-ph/0102165']
[14:01:18] select | verify relaxed 1/10
[14:01:18] verify | func= Compares | rank= 0 | pid= astro-ph/0101197 | title_snip='Synchronized Formation of Sub-Galactic Systems at Cosmological
  Reionâ€¦' | abs_len= 1806
[14:01:21] verify | result supports= True fit= 0.80 top= 0.90 invalid= â€” cue_hint= False
[14:01:21] select | verify relaxed 2/10
[14:01:21] verify | func= Compares | rank= 1 | pid= astro-ph/0103256 | title_snip='Cosmological Evolution of Supergiant Star-Forming Clouds' | abs_len= 1393
[14:01:25] verify | result supports= False fit= 0.00 top= 0.90 invalid= off_topic_no_core_in_abstract cue_hint= False
[14:01:25] select | verify relaxed 3/10
[14:01:25] verify | func= Compares | rank= 2 | pid= astro-ph/0101535 | title_snip='Formation of Compact Binaries in Globular Clusters' | abs_len= 1069
[14:01:28] verify | result supports= False fit= 0.00 top= 0.90 invalid= off_topic_no_core_in_abstract cue_hint= True
[14:01:28] select | verify relaxed 4/10
[14:01:28] verify | func= Compares | rank= 3 | pid= astro-ph/0103021 | title_snip='New Insights from HST Studies of Globular Cluster Systems I: Colors,
 â€¦' | abs_len= 1689
[14:01:31] verify | result supports= False fit= 0.00 top= 0.90 invalid= off_topic_no_core_in_abstract cue_hint= False
[14:01:31] select | verify relaxed 5/10
[14:01:31] verify | func= Compares | rank= 4 | pid= astro-ph/0101081 | title_snip='Galactic nuclear activity induced by globular cluster merging' | abs_len= 503
[14:01:34] verify | result supports= False fit= 0.00 top= 0.90 invalid= off_topic_no_core_in_abstract cue_hint= False
[14:01:34] select | verify relaxed 6/10
[14:01:34] verify | func= Compares | rank= 5 | pid= astro-ph/0101210 | title_snip='A new test for the stable clustering hypothesis' | abs_len= 1194
[14:01:37] verify | result supports= False fit= 0.00 top= 0.00 invalid= no_quote cue_hint= False
[14:01:37] select | verify relaxed 7/10
[14:01:37] verify | func= Compares | rank= 6 | pid= astro-ph/0104139 | title_snip='Observational tests of the delta_c-M_vir relation in hierarchical
  clâ€¦' | abs_len= 995
[14:01:40] verify | result supports= False fit= 0.00 top= 0.20 invalid= â€” cue_hint= False
[14:01:40] select | verify relaxed 8/10
[14:01:40] verify | func= Compares | rank= 7 | pid= astro-ph/0104069 | title_snip='The Equilibrium Structure of Cosmological Halos' | abs_len= 1238
[14:01:43] verify | result supports= False fit= 0.00 top= 0.20 invalid= â€” cue_hint= False
[14:01:43] select | verify relaxed 9/10
[14:01:43] verify | func= Compares | rank= 8 | pid= astro-ph/0102039 | title_snip='Modes of Multiple Star Formation' | abs_len= 1560
[14:01:45] verify | result supports= False fit= 0.00 top= 0.00 invalid= no_quote cue_hint= False
[14:01:45] select | verify relaxed 10/10
[14:01:45] verify | func= Compares | rank= 9 | pid= astro-ph/0102165 | title_snip='Cluster physics from joint weak gravitational lensing and
  Sunyaev-Zeâ€¦' | abs_len= 1276
[14:01:48] verify | result supports= False fit= 0.00 top= 0.00 invalid= no_quote cue_hint= False

================================================================================
FUNCTION: Compares
QUERY   : How does the proposed model of stellar system formation compare to existing observations of halo globular clusters, and what future research could be done to further validate this comparison?
- WINNER: astro-ph/0101197 | Synchronized Formation of Sub-Galactic Systems at Cosmological
  Reionization: Origin of Halo Globular Clusters
- QUOTE : The characteristics of these proposed systems seem to match the observed properties of halo globular clusters
- WHY   : sufficient
[14:01:49] main | running function= FutureWork
[14:01:49] select | function= FutureWork | candidates_in= 20
[14:01:49] select | core_terms= ['halo globular clusters', 'stellar system', 'stellar system formation']
[14:01:49] select | no cosine prune; kept=20/20
[14:01:49] select | pool_size= 10 | ranks= [0, 1, 2, 3, 4, 5, 6, 7, 8, 9] | pids= ['astro-ph/0101197', 'astro-ph/0103256', 'astro-ph/0101535', 'astro-ph/0103021', 'astro-ph/0101081', 'astro-ph/0101210', 'astro-ph/0104139', 'astro-ph/0104069', 'astro-ph/0102039', 'astro-ph/0102165']
[14:01:49] select | verify relaxed 1/10
[14:01:49] verify | func= FutureWork | rank= 0 | pid= astro-ph/0101197 | title_snip='Synchronized Formation of Sub-Galactic Systems at Cosmological
  Reionâ€¦' | abs_len= 1806
[14:01:52] verify | result supports= False fit= 0.00 top= 0.80 invalid= no_quote cue_hint= False
[14:01:52] select | verify relaxed 2/10
[14:01:52] verify | func= FutureWork | rank= 1 | pid= astro-ph/0103256 | title_snip='Cosmological Evolution of Supergiant Star-Forming Clouds' | abs_len= 1393
[14:01:55] verify | result supports= False fit= 0.00 top= 0.90 invalid= quote_not_in_abstract cue_hint= False
[14:01:55] select | verify relaxed 3/10
[14:01:55] verify | func= FutureWork | rank= 2 | pid= astro-ph/0101535 | title_snip='Formation of Compact Binaries in Globular Clusters' | abs_len= 1069
[14:01:58] verify | result supports= False fit= 0.00 top= 0.60 invalid= â€” cue_hint= False
[14:01:58] select | verify relaxed 4/10
[14:01:58] verify | func= FutureWork | rank= 3 | pid= astro-ph/0103021 | title_snip='New Insights from HST Studies of Globular Cluster Systems I: Colors,
 â€¦' | abs_len= 1689
[14:02:02] verify | result supports= False fit= 0.00 top= 0.90 invalid= off_topic_no_core_in_abstract cue_hint= False
[14:02:02] select | verify relaxed 5/10
[14:02:02] verify | func= FutureWork | rank= 4 | pid= astro-ph/0101081 | title_snip='Galactic nuclear activity induced by globular cluster merging' | abs_len= 503
[14:02:05] verify | result supports= False fit= 0.00 top= 0.50 invalid= â€” cue_hint= False
[14:02:05] select | verify relaxed 6/10
[14:02:05] verify | func= FutureWork | rank= 5 | pid= astro-ph/0101210 | title_snip='A new test for the stable clustering hypothesis' | abs_len= 1194
[14:02:07] verify | result supports= False fit= 0.00 top= 0.00 invalid= no_quote cue_hint= False
[14:02:07] select | verify relaxed 7/10
[14:02:07] verify | func= FutureWork | rank= 6 | pid= astro-ph/0104139 | title_snip='Observational tests of the delta_c-M_vir relation in hierarchical
  clâ€¦' | abs_len= 995
[14:02:10] verify | result supports= False fit= 0.00 top= 0.20 invalid= no_quote cue_hint= False
[14:02:10] select | verify relaxed 8/10
[14:02:10] verify | func= FutureWork | rank= 7 | pid= astro-ph/0104069 | title_snip='The Equilibrium Structure of Cosmological Halos' | abs_len= 1238
[14:02:12] verify | result supports= False fit= 0.00 top= 0.20 invalid= no_quote cue_hint= False
[14:02:12] select | verify relaxed 9/10
[14:02:12] verify | func= FutureWork | rank= 8 | pid= astro-ph/0102039 | title_snip='Modes of Multiple Star Formation' | abs_len= 1560
[14:02:15] verify | result supports= False fit= 0.00 top= 0.20 invalid= no_quote cue_hint= False
[14:02:15] select | verify relaxed 10/10
[14:02:15] verify | func= FutureWork | rank= 9 | pid= astro-ph/0102165 | title_snip='Cluster physics from joint weak gravitational lensing and
  Sunyaev-Zeâ€¦' | abs_len= 1276
[14:02:17] verify | result supports= False fit= 0.00 top= 0.00 invalid= no_quote cue_hint= False

================================================================================
FUNCTION: FutureWork
QUERY   : How does the proposed model of stellar system formation compare to existing observations of halo globular clusters, and what future research could be done to further validate this comparison?
- No supporting candidate with sufficient evidence.

================================================================================
UNIFIED ANSWER (1â€“2 sentences, tagged):
The proposed model of stellar system formation compares favorably to existing observations of halo globular clusters, as the predicted characteristics of the formed stellar systems, such as size, velocity dispersion, and total stellar mass, match the observed properties of halo globular clusters [Compares] (astro-ph/0101197). Further research could validate this comparison by testing the model's predictions on the correlation between metallicity and galaxy type, as well as the expected trend of specific frequency with galaxy type [Compares] (astro-ph/0101197).

ðŸ“„ Saved: outputs/function_selection_results.json
ðŸ“„ Saved: outputs/function_selection_results.jsonl
ðŸ“ Unified answer: outputs/function_answer_unified.txt
-> /home/anpa439f/anaconda3/envs/myenv/bin/python3 /data/horse/ws/anpa439f-Function_Retrieval_Citation/Research_Project/RetrievalAugmentedGeneration/classifying_question.py  (cwd=/data/horse/ws/anpa439f-Function_Retrieval_Citation/Research_Project/RetrievalAugmentedGeneration)
âœ… Saved to classified_outputs.jsonl
ðŸ”§ Ready for retrieval module (.py).
-> /home/anpa439f/anaconda3/envs/myenv/bin/python3 /data/horse/ws/anpa439f-Function_Retrieval_Citation/Research_Project/RetrievalAugmentedGeneration/Retreival_query_based.py --skip-reindex --index /data/horse/ws/anpa439f-Function_Retrieval_Citation/Research_Project/e5_index_subset_1/index.faiss --meta /data/horse/ws/anpa439f-Function_Retrieval_Citation/Research_Project/e5_index_subset_1/meta.parquet --topk 20  (cwd=/data/horse/ws/anpa439f-Function_Retrieval_Citation/Research_Project/RetrievalAugmentedGeneration)
âœ… Top-k candidates: /data/horse/ws/anpa439f-Function_Retrieval_Citation/Research_Project/RetrievalAugmentedGeneration/outputs/topk_candidates_query.jsonl
ðŸ”— Symlinked: /data/horse/ws/anpa439f-Function_Retrieval_Citation/Research_Project/outputs/topk_candidates_query.jsonl -> /data/horse/ws/anpa439f-Function_Retrieval_Citation/Research_Project/RetrievalAugmentedGeneration/outputs/topk_candidates_query.jsonl
-> /home/anpa439f/anaconda3/envs/myenv/bin/python3 /data/horse/ws/anpa439f-Function_Retrieval_Citation/Research_Project/RetrievalAugmentedGeneration/function_based_answer-2_copy.py --debug --max-check 10  (cwd=/data/horse/ws/anpa439f-Function_Retrieval_Citation/Research_Project/RetrievalAugmentedGeneration)

ðŸŽ‰ Pipeline complete.
  â€¢ Classified file : /data/horse/ws/anpa439f-Function_Retrieval_Citation/Research_Project/RetrievalAugmentedGeneration/classified_outputs.jsonl
  â€¢ TopK (canonical): /data/horse/ws/anpa439f-Function_Retrieval_Citation/Research_Project/RetrievalAugmentedGeneration/outputs/topk_candidates_query.jsonl
  â€¢ Final outputs   : /data/horse/ws/anpa439f-Function_Retrieval_Citation/Research_Project/RetrievalAugmentedGeneration/outputs
