âœ… Available Models:
1. alias-code
2. alias-reasoning
3. alias-image-generation
4. alias-vision
5. alias-ha
6. meta-llama/Llama-3.3-70B-Instruct
7. meta-llama/Llama-3.1-8B-Instruct
8. Qwen/Qwen2-VL-7B-Instruct
9. openGPT-X/Teuken-7B-instruct-research-v0.4
10. deepseek-ai/DeepSeek-Coder-V2-Lite-Instruct
11. Qwen/Qwen3-Coder-30B-A3B-Instruct
12. Qwen/Qwen3-Embedding-4B
13. stabilityai/stable-diffusion-3.5-large-turbo
14. black-forest-labs/FLUX.1-dev
15. openai/whisper-large-v3
16. Kokoro-82M
17. tts-1-hd
18. deepseek-ai/DeepSeek-R1
19. openai/gpt-oss-120b
20. meta-llama/Llama-4-Scout-17B-16E-Instruct

ðŸ‘‰ Select a model number (default = 1): 
âœ… Using model: openai/gpt-oss-120b

ðŸ” Enter a scientific query or topic: 
ðŸ”Ž Citation Function Classification:
{
  "citation_functions": [
    "Background"
  ],
  "justification": "The query explicitly asks for foundational details about the PHOBOS detector experiment, focusing on background information rather than motivation or other functions."
}

âœ… Saved to classified_outputs.jsonl
ðŸ”§ Ready for retrieval module (handled in a separate file).
[NbConvertApp] Converting notebook /data/horse/ws/anpa439f-Function_Retrieval_Citation/Research_Project/RetrievalAugmentedGeneration/Retreival_query_based.ipynb to script
[NbConvertApp] Writing 24671 bytes to /data/horse/ws/anpa439f-Function_Retrieval_Citation/Research_Project/RetrievalAugmentedGeneration/Retreival_query_based.py
Loaded model in 1.88 s
Warmup ok

Reading arXiv_src_0101_001.jsonl: 0it [00:00, ?it/s]
Reading arXiv_src_0101_001.jsonl: 1it [00:00,  2.94it/s]
Reading arXiv_src_0101_001.jsonl: 116it [00:00, 342.08it/s]
Reading arXiv_src_0101_001.jsonl: 257it [00:00, 655.33it/s]
Reading arXiv_src_0101_001.jsonl: 370it [00:00, 794.60it/s]
Reading arXiv_src_0101_001.jsonl: 475it [00:00, 628.24it/s]
Reading arXiv_src_0101_001.jsonl: 559it [00:01, 568.38it/s]
Reading arXiv_src_0101_001.jsonl: 664it [00:01, 670.42it/s]
Reading arXiv_src_0101_001.jsonl: 772it [00:01, 754.47it/s]
Reading arXiv_src_0101_001.jsonl: 884it [00:01, 845.32it/s]
Reading arXiv_src_0101_001.jsonl: 999it [00:01, 925.02it/s]
Reading arXiv_src_0101_001.jsonl: 1104it [00:01, 957.95it/s]
Reading arXiv_src_0101_001.jsonl: 1237it [00:01, 1061.93it/s]
Reading arXiv_src_0101_001.jsonl: 1349it [00:01, 1062.08it/s]
Reading arXiv_src_0101_001.jsonl: 1486it [00:01, 1146.86it/s]
Reading arXiv_src_0101_001.jsonl: 1624it [00:01, 1211.59it/s]
Reading arXiv_src_0101_001.jsonl: 1752it [00:02, 1203.12it/s]
Reading arXiv_src_0101_001.jsonl: 1878it [00:02, 1219.35it/s]
Reading arXiv_src_0101_001.jsonl: 2065it [00:02, 1409.46it/s]
Reading arXiv_src_0101_001.jsonl: 2218it [00:02, 1444.32it/s]
Reading arXiv_src_0101_001.jsonl: 2319it [00:02, 947.10it/s] 

Reading arXiv_src_0102_001.jsonl: 0it [00:00, ?it/s]
Reading arXiv_src_0102_001.jsonl: 134it [00:00, 1319.87it/s]
Reading arXiv_src_0102_001.jsonl: 274it [00:00, 1363.58it/s]
Reading arXiv_src_0102_001.jsonl: 411it [00:00, 829.42it/s] 
Reading arXiv_src_0102_001.jsonl: 511it [00:00, 510.11it/s]
Reading arXiv_src_0102_001.jsonl: 592it [00:00, 547.63it/s]
Reading arXiv_src_0102_001.jsonl: 675it [00:01, 605.60it/s]
Reading arXiv_src_0102_001.jsonl: 782it [00:01, 711.29it/s]
Reading arXiv_src_0102_001.jsonl: 909it [00:01, 845.59it/s]
Reading arXiv_src_0102_001.jsonl: 1024it [00:01, 924.26it/s]
Reading arXiv_src_0102_001.jsonl: 1145it [00:01, 999.41it/s]
Reading arXiv_src_0102_001.jsonl: 1254it [00:01, 1023.12it/s]
Reading arXiv_src_0102_001.jsonl: 1401it [00:01, 1149.02it/s]
Reading arXiv_src_0102_001.jsonl: 1534it [00:01, 1200.93it/s]
Reading arXiv_src_0102_001.jsonl: 1661it [00:01, 1221.07it/s]
Reading arXiv_src_0102_001.jsonl: 1810it [00:01, 1298.68it/s]
Reading arXiv_src_0102_001.jsonl: 1963it [00:02, 1365.73it/s]
Reading arXiv_src_0102_001.jsonl: 2118it [00:02, 1412.60it/s]
Reading arXiv_src_0102_001.jsonl: 2192it [00:02, 1007.82it/s]

Reading arXiv_src_0103_001.jsonl: 0it [00:00, ?it/s]
Reading arXiv_src_0103_001.jsonl: 138it [00:00, 1373.95it/s]
Reading arXiv_src_0103_001.jsonl: 299it [00:00, 1511.18it/s]
Reading arXiv_src_0103_001.jsonl: 451it [00:00, 1145.83it/s]
Reading arXiv_src_0103_001.jsonl: 574it [00:00, 744.27it/s] 
Reading arXiv_src_0103_001.jsonl: 666it [00:00, 776.42it/s]
Reading arXiv_src_0103_001.jsonl: 757it [00:00, 793.50it/s]
Reading arXiv_src_0103_001.jsonl: 875it [00:00, 888.77it/s]
Reading arXiv_src_0103_001.jsonl: 978it [00:01, 924.56it/s]
Reading arXiv_src_0103_001.jsonl: 1082it [00:01, 955.24it/s]
Reading arXiv_src_0103_001.jsonl: 1209it [00:01, 1040.69it/s]
Reading arXiv_src_0103_001.jsonl: 1318it [00:01, 1047.02it/s]
Reading arXiv_src_0103_001.jsonl: 1452it [00:01, 1129.76it/s]
Reading arXiv_src_0103_001.jsonl: 1587it [00:01, 1193.52it/s]
Reading arXiv_src_0103_001.jsonl: 1743it [00:01, 1301.03it/s]
Reading arXiv_src_0103_001.jsonl: 1879it [00:01, 1316.42it/s]
Reading arXiv_src_0103_001.jsonl: 2020it [00:01, 1344.05it/s]
Reading arXiv_src_0103_001.jsonl: 2162it [00:01, 1366.65it/s]
Reading arXiv_src_0103_001.jsonl: 2309it [00:02, 1394.76it/s]
Reading arXiv_src_0103_001.jsonl: 2441it [00:02, 1138.55it/s]

Reading arXiv_src_0104_001.jsonl: 0it [00:00, ?it/s]
Reading arXiv_src_0104_001.jsonl: 1it [00:00,  5.97it/s]
Reading arXiv_src_0104_001.jsonl: 55it [00:00, 250.64it/s]
Reading arXiv_src_0104_001.jsonl: 208it [00:00, 755.24it/s]
Reading arXiv_src_0104_001.jsonl: 356it [00:00, 1012.23it/s]
Reading arXiv_src_0104_001.jsonl: 467it [00:00, 802.89it/s] 
Reading arXiv_src_0104_001.jsonl: 559it [00:00, 592.78it/s]
Reading arXiv_src_0104_001.jsonl: 632it [00:01, 521.91it/s]
Reading arXiv_src_0104_001.jsonl: 727it [00:01, 608.77it/s]
Reading arXiv_src_0104_001.jsonl: 812it [00:01, 662.43it/s]
Reading arXiv_src_0104_001.jsonl: 921it [00:01, 766.75it/s]
Reading arXiv_src_0104_001.jsonl: 1044it [00:01, 885.74it/s]
Reading arXiv_src_0104_001.jsonl: 1156it [00:01, 932.09it/s]
Reading arXiv_src_0104_001.jsonl: 1285it [00:01, 1026.31it/s]
Reading arXiv_src_0104_001.jsonl: 1393it [00:01, 1021.69it/s]
Reading arXiv_src_0104_001.jsonl: 1532it [00:01, 1125.67it/s]
Reading arXiv_src_0104_001.jsonl: 1665it [00:02, 1182.58it/s]
Reading arXiv_src_0104_001.jsonl: 1797it [00:02, 1221.01it/s]
Reading arXiv_src_0104_001.jsonl: 1947it [00:02, 1302.71it/s]
Reading arXiv_src_0104_001.jsonl: 2106it [00:02, 1383.58it/s]
Reading arXiv_src_0104_001.jsonl: 2246it [00:02, 946.39it/s] 
Reading arXiv_src_0104_001.jsonl: 2310it [00:02, 883.52it/s]
Loaded 9262 unique papers
           paper_id  ...  year
0  quant-ph/0101147  ...  2001
1  quant-ph/0101145  ...  2001
2  quant-ph/0101144  ...  2001

[3 rows x 4 columns]
[debug] query: What background information is provided about the experiment that uses the PHOBOS detector to study Au-Au interactions?
[debug] classifier labels: ['Background']
[debug] got 20 candidates
rows written: 20
- outputs/topk_candidates_query.jsonl
- outputs/topk_candidates_query.csv
   rank     score  ...                retrieved_at classifier_functions
0     0  1.000000  ...  2025-09-21T19:22:27.054259           Background
1     1  0.371444  ...  2025-09-21T19:22:27.054259           Background
2     2  0.359500  ...  2025-09-21T19:22:27.054259           Background
3     3  0.231584  ...  2025-09-21T19:22:27.054259           Background
4     4  0.231161  ...  2025-09-21T19:22:27.054259           Background
5     5  0.227286  ...  2025-09-21T19:22:27.054259           Background
6     6  0.224000  ...  2025-09-21T19:22:27.054259           Background
7     7  0.205071  ...  2025-09-21T19:22:27.054259           Background
8     8  0.198286  ...  2025-09-21T19:22:27.054259           Background
9     9  0.183859  ...  2025-09-21T19:22:27.054259           Background

[10 rows x 12 columns]
[21:22:31] main | args: Namespace(max_check=20, debug=True)
[21:22:31] read_last_jsonl | path= classified_outputs.jsonl
[21:22:31] read_last_jsonl | total_lines= 1
[21:22:31] main | query='What background information is provided about the experiment that uses the PHOBOS detector to study Au-Au interactions?' | funcs=['Background']
[21:22:33] main | core_terms= ['PHOBOS detector', 'Au-Au interactions', 'heavy-ion collisions', 'PHOBOS', 'Au-Au']
[21:22:33] load_topk_jsonl | path= /data/horse/ws/anpa439f-Function_Retrieval_Citation/Research_Project/outputs/topk_candidates_query.jsonl
[21:22:33] load_topk_jsonl | rows= 20
[21:22:33] load_topk_jsonl | first: rank= 0 paper_id= hep-ex/0102012 title_snip='Results from the PHOBOS Experiment on Au+Au Collisions at RHIC' abs_len= 1126
[21:22:33] main | running function= Background
[21:22:33] select | function= Background | candidates_in= 20
[21:22:33] select | core_terms= ['PHOBOS detector', 'Au-Au interactions', 'heavy-ion collisions', 'PHOBOS', 'Au-Au']
[21:22:33] select | no cosine prune; kept=20/20
[21:22:33] select | pool_size= 20 | ranks= [0, 2, 3, 5, 7, 13, 16, 19, 1, 4, 6, 8, 9, 10, 11, 12, 14, 15, 17, 18] | pids= ['hep-ex/0102012', 'nucl-ex/0103015', 'nucl-th/0101035', 'nucl-ex/0104016', 'astro-ph/0101171', 'astro-ph/0103332', 'astro-ph/0101559', 'astro-ph/0103513', 'nucl-ex/0104012', 'astro-ph/0102443', 'astro-ph/0103508', 'hep-ex/0102047', 'astro-ph/0104401', 'astro-ph/0101454', 'hep-ex/0101026', 'hep-ph/0103155', 'nucl-th/0103014', 'nucl-ex/0102013', 'nucl-ex/0104025', 'astro-ph/0102152']
[21:22:33] select | verify strict 1/20
[21:22:33] verify | func= Background | rank= 0 | pid= hep-ex/0102012 | title_snip='Results from the PHOBOS Experiment on Au+Au Collisions at RHIC' | abs_len= 1126
[21:22:37] verify | result supports= True fit= 0.80 top= 0.90 invalid= â€” cue_hint= False
[21:22:37] select | verify strict 2/20
[21:22:37] verify | func= Background | rank= 2 | pid= nucl-ex/0103015 | title_snip='Systematic Study of Au-Au Collisions with AGS Experiment E917' | abs_len= 350
[21:22:39] verify | result supports= False fit= 0.00 top= 0.00 invalid= no_quote cue_hint= False
[21:22:39] select | verify strict 3/20
[21:22:39] verify | func= Background | rank= 3 | pid= nucl-th/0101035 | title_snip='Mutual heavy ion dissociation in peripheral collisions at
  ultrarelatâ€¦' | abs_len= 1049
[21:22:42] verify | result supports= False fit= 0.00 top= 0.00 invalid= no_quote cue_hint= False
[21:22:42] select | verify strict 4/20
[21:22:42] verify | func= Background | rank= 5 | pid= nucl-ex/0104016 | title_snip='Observation of $Au + Au \to Au + Au + \rho^0$ and $Au + Au \to Au^* +
â€¦' | abs_len= 426
[21:22:44] verify | result supports= False fit= 0.00 top= 0.00 invalid= no_quote cue_hint= False
[21:22:44] select | verify strict 5/20
[21:22:44] verify | func= Background | rank= 7 | pid= astro-ph/0101171 | title_snip='Preliminary Results from the Cosmic Background Imager' | abs_len= 513
[21:22:47] verify | result supports= False fit= 0.00 top= 0.00 invalid= no_quote cue_hint= False
[21:22:47] select | verify strict 6/20
[21:22:47] verify | func= Background | rank= 13 | pid= astro-ph/0103332 | title_snip='Quasi-Stellar Objects, Ultraluminous IR Galaxies, and Mergers' | abs_len= 1676
[21:22:49] verify | result supports= False fit= 0.00 top= 0.00 invalid= no_quote cue_hint= False
[21:22:49] select | verify strict 7/20
[21:22:49] verify | func= Background | rank= 16 | pid= astro-ph/0101559 | title_snip='The fluxes of sub--cutoff particles detected by AMS, the cosmic ray
  â€¦' | abs_len= 1174
[21:22:52] verify | result supports= False fit= 0.00 top= 0.00 invalid= no_quote cue_hint= False
[21:22:52] select | verify strict 8/20
[21:22:52] verify | func= Background | rank= 19 | pid= astro-ph/0103513 | title_snip='The Cosmic-Ray antiproton flux between 3 and 49 GeV' | abs_len= 1057
[21:22:54] verify | result supports= False fit= 0.00 top= 0.00 invalid= no_quote cue_hint= False
[21:22:54] select | verify strict 9/20
[21:22:54] verify | func= Background | rank= 1 | pid= nucl-ex/0104012 | title_snip='Laying the groundwork at the AGS: Recent results from experiment E895' | abs_len= 499
[21:22:57] verify | result supports= False fit= 0.00 top= 0.00 invalid= no_quote cue_hint= False
[21:22:57] select | verify strict 10/20
[21:22:57] verify | func= Background | rank= 4 | pid= astro-ph/0102443 | title_snip='A Non-Parametric Approach to Infer the Energy Spectrum and the Mass
  â€¦' | abs_len= 1120
[21:22:59] verify | result supports= False fit= 0.00 top= 0.00 invalid= no_quote cue_hint= False
[21:22:59] select | verify strict 11/20
[21:22:59] verify | func= Background | rank= 6 | pid= astro-ph/0103508 | title_snip='A Doppler-like strong light-matter interaction' | abs_len= 1588
[21:23:02] verify | result supports= False fit= 0.00 top= 0.00 invalid= no_quote cue_hint= False
[21:23:02] select | verify strict 12/20
[21:23:02] verify | func= Background | rank= 8 | pid= hep-ex/0102047 | title_snip='Investigation of Quark-Antiquark Interaction Properties using Leading
â€¦' | abs_len= 450
[21:23:04] verify | result supports= False fit= 0.00 top= 0.00 invalid= no_quote cue_hint= False
[21:23:04] select | verify strict 13/20
[21:23:04] verify | func= Background | rank= 9 | pid= astro-ph/0104401 | title_snip='The QSO - Ultraluminous Infrared Galaxies Connection' | abs_len= 1176
[21:23:07] verify | result supports= False fit= 0.00 top= 0.00 invalid= no_quote cue_hint= False
[21:23:07] select | verify strict 14/20
[21:23:07] verify | func= Background | rank= 10 | pid= astro-ph/0101454 | title_snip='The EDELWEISS Experiment : Status and Outlook' | abs_len= 344
[21:23:09] verify | result supports= False fit= 0.00 top= 0.00 invalid= no_quote cue_hint= False
[21:23:09] select | verify strict 15/20
[21:23:09] verify | func= Background | rank= 11 | pid= hep-ex/0101026 | title_snip='Colour Reconnection at LEP2' | abs_len= 358
[21:23:12] verify | result supports= False fit= 0.00 top= 0.00 invalid= no_quote cue_hint= False
[21:23:12] select | verify strict 16/20
[21:23:12] verify | func= Background | rank= 12 | pid= hep-ph/0103155 | title_snip='Radiative four-fermion processes at LEP2' | abs_len= 757
[21:23:15] verify | result supports= False fit= 0.00 top= 0.00 invalid= no_quote cue_hint= False
[21:23:15] select | verify strict 17/20
[21:23:15] verify | func= Background | rank= 14 | pid= nucl-th/0103014 | title_snip='Emission of single photons, hadrons, and dileptons in $Pb+Pb$ collisioâ€¦' | abs_len= 886
[21:23:17] verify | result supports= False fit= 0.00 top= 0.00 invalid= no_quote cue_hint= False
[21:23:17] select | verify strict 18/20
[21:23:17] verify | func= Background | rank= 15 | pid= nucl-ex/0102013 | title_snip='One and two dimensional analysis of 3pi correlations measured in Pb+Pbâ€¦' | abs_len= 379
[21:23:20] verify | result supports= False fit= 0.00 top= 0.00 invalid= no_quote cue_hint= False
[21:23:20] select | verify strict 19/20
[21:23:20] verify | func= Background | rank= 17 | pid= nucl-ex/0104025 | title_snip='Production and collective behavior of strange particles in Au + Au
  câ€¦' | abs_len= 407
[21:23:22] verify | result supports= False fit= 0.00 top= 0.00 invalid= no_quote cue_hint= False
[21:23:22] select | verify strict 20/20
[21:23:22] verify | func= Background | rank= 18 | pid= astro-ph/0102152 | title_snip='CMB (And Other) Challenges To BBN' | abs_len= 1154
[21:23:25] verify | result supports= False fit= 0.00 top= 0.00 invalid= no_quote cue_hint= False

================================================================================
FUNCTION: Background
QUERY   : What background information is provided about the experiment that uses the PHOBOS detector to study Au-Au interactions?
- WINNER: hep-ex/0102012 | Results from the PHOBOS Experiment on Au+Au Collisions at RHIC
- QUOTE : PHOBOS is one of four experiments studying the Au-Au interactions
- WHY   : sufficient
- ANSWER: The PHOBOS experiment is one of four experiments studying Au-Au interactions at RHIC, using the PHOBOS detector to collect data on collisions of Au nuclei at center of mass energies of 56 and 130 AGeV (hep-ex/0102012).

ðŸ“„ Saved: outputs/function_selection_results.json
ðŸ“„ Saved: outputs/function_selection_results.jsonl
ðŸ“ Answers-only: outputs/function_answers.txt
-> /home/anpa439f/anaconda3/envs/myenv/bin/python3 /data/horse/ws/anpa439f-Function_Retrieval_Citation/Research_Project/RetrievalAugmentedGeneration/classifying_question.py  (cwd=/data/horse/ws/anpa439f-Function_Retrieval_Citation/Research_Project/RetrievalAugmentedGeneration)
âœ… Saved to classified_outputs.jsonl
ðŸ”§ Ready for retrieval module (handled in a separate file).
-> jupyter nbconvert --to script /data/horse/ws/anpa439f-Function_Retrieval_Citation/Research_Project/RetrievalAugmentedGeneration/Retreival_query_based.ipynb  (cwd=/data/horse/ws/anpa439f-Function_Retrieval_Citation/Research_Project/RetrievalAugmentedGeneration)
ðŸ©¹ Hardened exported script: Retreival_query_based.py
-> /home/anpa439f/anaconda3/envs/myenv/bin/python3 /data/horse/ws/anpa439f-Function_Retrieval_Citation/Research_Project/RetrievalAugmentedGeneration/Retreival_query_based.py  (cwd=/data/horse/ws/anpa439f-Function_Retrieval_Citation/Research_Project/RetrievalAugmentedGeneration)
âœ… Top-k candidates: /data/horse/ws/anpa439f-Function_Retrieval_Citation/Research_Project/RetrievalAugmentedGeneration/outputs/topk_candidates_query.jsonl
ðŸ”— Symlinked: /data/horse/ws/anpa439f-Function_Retrieval_Citation/Research_Project/outputs/topk_candidates_query.jsonl -> /data/horse/ws/anpa439f-Function_Retrieval_Citation/Research_Project/RetrievalAugmentedGeneration/outputs/topk_candidates_query.jsonl
ðŸ§© Patched final-stage script written to: function_based_final_patched.py
-> /home/anpa439f/anaconda3/envs/myenv/bin/python3 /data/horse/ws/anpa439f-Function_Retrieval_Citation/Research_Project/RetrievalAugmentedGeneration/function_based_final_patched.py --debug --max-check 20  (cwd=/data/horse/ws/anpa439f-Function_Retrieval_Citation/Research_Project/RetrievalAugmentedGeneration)

ðŸŽ‰ Pipeline complete.
  â€¢ Classified file : /data/horse/ws/anpa439f-Function_Retrieval_Citation/Research_Project/RetrievalAugmentedGeneration/classified_outputs.jsonl
  â€¢ TopK (canonical): /data/horse/ws/anpa439f-Function_Retrieval_Citation/Research_Project/RetrievalAugmentedGeneration/outputs/topk_candidates_query.jsonl
  â€¢ Final outputs   : /data/horse/ws/anpa439f-Function_Retrieval_Citation/Research_Project/RetrievalAugmentedGeneration/outputs
