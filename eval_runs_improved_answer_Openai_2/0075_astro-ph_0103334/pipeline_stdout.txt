âœ… Available Models:
1. alias-reasoning
2. alias-ha
3. meta-llama/Llama-3.3-70B-Instruct
4. meta-llama/Llama-3.1-8B-Instruct
5. Qwen/Qwen2-VL-7B-Instruct
6. alias-vision
7. openGPT-X/Teuken-7B-instruct-research-v0.4
8. deepseek-ai/DeepSeek-Coder-V2-Lite-Instruct
9. Qwen/Qwen3-Coder-30B-A3B-Instruct
10. alias-code
11. Qwen/Qwen3-Embedding-4B
12. BAAI/bge-reranker-v2-m3
13. stabilityai/stable-diffusion-3.5-large-turbo
14. alias-image-generation
15. black-forest-labs/FLUX.1-dev
16. openai/whisper-large-v3
17. Kokoro-82M
18. tts-1-hd
19. deepseek-ai/DeepSeek-R1
20. openai/gpt-oss-120b
21. meta-llama/Llama-4-Scout-17B-16E-Instruct

ðŸ‘‰ Select a model number (default = 1): 
âœ… Using model: openai/gpt-oss-120b

ðŸ” Enter a scientific query or topic: 
ðŸ”Ž Citation Function Classification:
{
  "citation_functions": [
    "Motivation",
    "Uses"
  ],
  "justification": "The query asks why magnetic field fluctuations in NGC\u202f7538 are worth studying (Motivation) and how polarization observations are employed to interpret them (Uses)."
}

âœ… Saved to classified_outputs.jsonl
ðŸ”§ Ready for retrieval module (handled in a separate file).
âš¡ SKIP_REINDEX=1 â€” using existing FAISS index + meta; not scanning raw JSONL shards.
âœ… Top-k candidates (FAISS): /data/horse/ws/anpa439f-Function_Retrieval_Citation/Research_Project/RetrievalAugmentedGeneration/outputs/topk_candidates_query.jsonl
[17:07:49] main | args: Namespace(max_check=10, debug=True)
[17:07:49] read_last_jsonl | path= classified_outputs.jsonl
[17:07:49] read_last_jsonl | total_lines= 1
[17:07:49] main | query='What motivates the investigation of magnetic field fluctuations in the NGC 7538 region and how are the observations of polarization used to understand these fluctuations?' | funcs=['Motivation', 'Uses']
[17:07:52] main | core_terms= ['NGC 7538', 'magnetic field', 'polarization', 'fluctuations', 'NGC']
[17:07:52] load_topk_jsonl | path= /data/horse/ws/anpa439f-Function_Retrieval_Citation/Research_Project/outputs/topk_candidates_query.jsonl
[17:07:52] load_topk_jsonl | rows= 20
[17:07:52] load_topk_jsonl | first: rank= 0 paper_id= astro-ph/0103334 title_snip='Submillimeter Imaging Polarimetry of the NGC 7538 Region' abs_len= 1603
[17:07:52] main | running function= Motivation
[17:07:52] select | function= Motivation | candidates_in= 20
[17:07:52] select | core_terms= ['NGC 7538', 'magnetic field', 'polarization', 'fluctuations', 'NGC']
[17:07:52] select | no cosine prune; kept=20/20
[17:07:52] select | pool_size= 10 | ranks= [0, 1, 2, 3, 4, 5, 6, 7, 8, 9] | pids= ['astro-ph/0103334', 'astro-ph/0103048', 'astro-ph/0104360', 'cond-mat/0102414', 'physics/0103029', 'astro-ph/0101001', 'astro-ph/0102445', 'nucl-th/0102026', 'astro-ph/0101368', 'hep-ex/0101010']
[17:07:52] select | verify relaxed 1/10
[17:07:52] verify | func= Motivation | rank= 0 | pid= astro-ph/0103334 | title_snip='Submillimeter Imaging Polarimetry of the NGC 7538 Region' | abs_len= 1603
[17:07:56] verify | result supports= True fit= 0.80 top= 0.90 invalid= â€” cue_hint= False
[17:07:56] select | verify relaxed 2/10
[17:07:56] verify | func= Motivation | rank= 1 | pid= astro-ph/0103048 | title_snip='Polarization Insights for Active Galactic Nuclei' | abs_len= 1223
[17:07:58] verify | result supports= False fit= 0.00 top= 0.00 invalid= no_quote cue_hint= False
[17:07:58] select | verify relaxed 3/10
[17:07:58] verify | func= Motivation | rank= 2 | pid= astro-ph/0104360 | title_snip='Spectra of Maser Radiation from a Turbulent, Circumnuclear Accretion
 â€¦' | abs_len= 1208
[17:08:01] verify | result supports= False fit= 0.00 top= 0.00 invalid= no_quote cue_hint= False
[17:08:01] select | verify relaxed 4/10
[17:08:01] verify | func= Motivation | rank= 3 | pid= cond-mat/0102414 | title_snip='Spin fluctuations in a magnetically frustrated metal, LiV2O4' | abs_len= 735
[17:08:04] verify | result supports= False fit= 0.00 top= 0.00 invalid= no_quote cue_hint= False
[17:08:04] select | verify relaxed 5/10
[17:08:04] verify | func= Motivation | rank= 4 | pid= physics/0103029 | title_snip='The Inertial Polarization Principle: The Mechanism Underlying
  Sonoluâ€¦' | abs_len= 1263
[17:08:07] verify | result supports= False fit= 0.00 top= 0.00 invalid= no_quote cue_hint= False
[17:08:07] select | verify relaxed 6/10
[17:08:07] verify | func= Motivation | rank= 5 | pid= astro-ph/0101001 | title_snip='Polarized Microwave Radiation from Dust' | abs_len= 1125
[17:08:09] verify | result supports= False fit= 0.00 top= 0.00 invalid= no_quote cue_hint= False
[17:08:09] select | verify relaxed 7/10
[17:08:09] verify | func= Motivation | rank= 6 | pid= astro-ph/0102445 | title_snip='Optical Structure and Physics of the M87 Jet' | abs_len= 1065
[17:08:13] verify | result supports= False fit= 0.00 top= 0.00 invalid= no_quote cue_hint= False
[17:08:13] select | verify relaxed 8/10
[17:08:13] verify | func= Motivation | rank= 7 | pid= nucl-th/0102026 | title_snip='Polarization observables in the reaction $p n \to d \phi$' | abs_len= 195
[17:08:16] verify | result supports= False fit= 0.00 top= 0.00 invalid= no_quote cue_hint= False
[17:08:16] select | verify relaxed 9/10
[17:08:16] verify | func= Motivation | rank= 8 | pid= astro-ph/0101368 | title_snip='Polarization of the Cosmic Microwave Background from Non-Uniform
  Reiâ€¦' | abs_len= 1537
[17:08:19] verify | result supports= False fit= 0.00 top= 0.00 invalid= no_quote cue_hint= False
[17:08:19] select | verify relaxed 10/10
[17:08:19] verify | func= Motivation | rank= 9 | pid= hep-ex/0101010 | title_snip='Constraining CP-Violating TGCs and Measuring W-Polarization at OPAL' | abs_len= 430
[17:08:22] verify | result supports= False fit= 0.00 top= 0.00 invalid= no_quote cue_hint= False

================================================================================
FUNCTION: Motivation
QUERY   : What motivates the investigation of magnetic field fluctuations in the NGC 7538 region and how are the observations of polarization used to understand these fluctuations?
- WINNER: astro-ph/0103334 | Submillimeter Imaging Polarimetry of the NGC 7538 Region
- QUOTE : small scale fluctuations of the magnetic field
- WHY   : sufficient
[17:08:23] main | running function= Uses
[17:08:23] select | function= Uses | candidates_in= 20
[17:08:23] select | core_terms= ['NGC 7538', 'magnetic field', 'polarization', 'fluctuations', 'NGC']
[17:08:23] select | no cosine prune; kept=20/20
[17:08:23] select | pool_size= 10 | ranks= [0, 1, 2, 3, 4, 5, 6, 7, 8, 9] | pids= ['astro-ph/0103334', 'astro-ph/0103048', 'astro-ph/0104360', 'cond-mat/0102414', 'physics/0103029', 'astro-ph/0101001', 'astro-ph/0102445', 'nucl-th/0102026', 'astro-ph/0101368', 'hep-ex/0101010']
[17:08:23] select | verify relaxed 1/10
[17:08:23] verify | func= Uses | rank= 0 | pid= astro-ph/0103334 | title_snip='Submillimeter Imaging Polarimetry of the NGC 7538 Region' | abs_len= 1603
[17:08:27] verify | result supports= True fit= 0.80 top= 0.90 invalid= â€” cue_hint= False
[17:08:27] select | verify relaxed 2/10
[17:08:27] verify | func= Uses | rank= 1 | pid= astro-ph/0103048 | title_snip='Polarization Insights for Active Galactic Nuclei' | abs_len= 1223
[17:08:30] verify | result supports= False fit= 0.00 top= 0.00 invalid= no_quote cue_hint= False
[17:08:30] select | verify relaxed 3/10
[17:08:30] verify | func= Uses | rank= 2 | pid= astro-ph/0104360 | title_snip='Spectra of Maser Radiation from a Turbulent, Circumnuclear Accretion
 â€¦' | abs_len= 1208
[17:08:32] verify | result supports= False fit= 0.00 top= 0.00 invalid= no_quote cue_hint= False
[17:08:32] select | verify relaxed 4/10
[17:08:32] verify | func= Uses | rank= 3 | pid= cond-mat/0102414 | title_snip='Spin fluctuations in a magnetically frustrated metal, LiV2O4' | abs_len= 735
[17:08:35] verify | result supports= False fit= 0.00 top= 0.00 invalid= no_quote cue_hint= False
[17:08:35] select | verify relaxed 5/10
[17:08:35] verify | func= Uses | rank= 4 | pid= physics/0103029 | title_snip='The Inertial Polarization Principle: The Mechanism Underlying
  Sonoluâ€¦' | abs_len= 1263
[17:08:38] verify | result supports= False fit= 0.00 top= 0.00 invalid= no_quote cue_hint= False
[17:08:38] select | verify relaxed 6/10
[17:08:38] verify | func= Uses | rank= 5 | pid= astro-ph/0101001 | title_snip='Polarized Microwave Radiation from Dust' | abs_len= 1125
[17:08:41] verify | result supports= False fit= 0.00 top= 0.00 invalid= no_quote cue_hint= False
[17:08:41] select | verify relaxed 7/10
[17:08:41] verify | func= Uses | rank= 6 | pid= astro-ph/0102445 | title_snip='Optical Structure and Physics of the M87 Jet' | abs_len= 1065
[17:08:44] verify | result supports= False fit= 0.00 top= 0.00 invalid= no_quote cue_hint= False
[17:08:44] select | verify relaxed 8/10
[17:08:44] verify | func= Uses | rank= 7 | pid= nucl-th/0102026 | title_snip='Polarization observables in the reaction $p n \to d \phi$' | abs_len= 195
[17:08:46] verify | result supports= False fit= 0.00 top= 0.00 invalid= no_quote cue_hint= False
[17:08:46] select | verify relaxed 9/10
[17:08:46] verify | func= Uses | rank= 8 | pid= astro-ph/0101368 | title_snip='Polarization of the Cosmic Microwave Background from Non-Uniform
  Reiâ€¦' | abs_len= 1537
[17:08:49] verify | result supports= False fit= 0.00 top= 0.00 invalid= no_quote cue_hint= False
[17:08:49] select | verify relaxed 10/10
[17:08:49] verify | func= Uses | rank= 9 | pid= hep-ex/0101010 | title_snip='Constraining CP-Violating TGCs and Measuring W-Polarization at OPAL' | abs_len= 430
[17:08:52] verify | result supports= False fit= 0.00 top= 0.00 invalid= no_quote cue_hint= False

================================================================================
FUNCTION: Uses
QUERY   : What motivates the investigation of magnetic field fluctuations in the NGC 7538 region and how are the observations of polarization used to understand these fluctuations?
- WINNER: astro-ph/0103334 | Submillimeter Imaging Polarimetry of the NGC 7538 Region
- QUOTE : polarization map is interpreted in terms of thermal radiation by magnetically aligned dust grains
- WHY   : sufficient

================================================================================
UNIFIED ANSWER (1â€“2 sentences, tagged):
The investigation of magnetic field fluctuations in the NGC 7538 region is motivated by the differences in polarization between IRS 1(SMM) and IRS 11(SMM), suggesting small scale fluctuations are more prominent in IRS 1(SMM) [Motivation] (astro-ph/0103334). Observations of polarization are used to understand these fluctuations, as the distribution of magnetic field directions derived from the polarization map agrees with those of molecular outflows, indicating the magnetic field plays a role in guiding outflow directions [Uses] (astro-ph/0103334).

ðŸ“„ Saved: outputs/function_selection_results.json
ðŸ“„ Saved: outputs/function_selection_results.jsonl
ðŸ“ Unified answer: outputs/function_answer_unified.txt
-> /home/anpa439f/anaconda3/envs/myenv/bin/python3 /data/horse/ws/anpa439f-Function_Retrieval_Citation/Research_Project/RetrievalAugmentedGeneration/classifying_question.py  (cwd=/data/horse/ws/anpa439f-Function_Retrieval_Citation/Research_Project/RetrievalAugmentedGeneration)
âœ… Saved to classified_outputs.jsonl
ðŸ”§ Ready for retrieval module (.py).
-> /home/anpa439f/anaconda3/envs/myenv/bin/python3 /data/horse/ws/anpa439f-Function_Retrieval_Citation/Research_Project/RetrievalAugmentedGeneration/Retreival_query_based.py --skip-reindex --index /data/horse/ws/anpa439f-Function_Retrieval_Citation/Research_Project/e5_index_subset_1/index.faiss --meta /data/horse/ws/anpa439f-Function_Retrieval_Citation/Research_Project/e5_index_subset_1/meta.parquet --topk 20  (cwd=/data/horse/ws/anpa439f-Function_Retrieval_Citation/Research_Project/RetrievalAugmentedGeneration)
âœ… Top-k candidates: /data/horse/ws/anpa439f-Function_Retrieval_Citation/Research_Project/RetrievalAugmentedGeneration/outputs/topk_candidates_query.jsonl
ðŸ”— Symlinked: /data/horse/ws/anpa439f-Function_Retrieval_Citation/Research_Project/outputs/topk_candidates_query.jsonl -> /data/horse/ws/anpa439f-Function_Retrieval_Citation/Research_Project/RetrievalAugmentedGeneration/outputs/topk_candidates_query.jsonl
-> /home/anpa439f/anaconda3/envs/myenv/bin/python3 /data/horse/ws/anpa439f-Function_Retrieval_Citation/Research_Project/RetrievalAugmentedGeneration/function_based_answer-2_copy.py --debug --max-check 10  (cwd=/data/horse/ws/anpa439f-Function_Retrieval_Citation/Research_Project/RetrievalAugmentedGeneration)

ðŸŽ‰ Pipeline complete.
  â€¢ Classified file : /data/horse/ws/anpa439f-Function_Retrieval_Citation/Research_Project/RetrievalAugmentedGeneration/classified_outputs.jsonl
  â€¢ TopK (canonical): /data/horse/ws/anpa439f-Function_Retrieval_Citation/Research_Project/RetrievalAugmentedGeneration/outputs/topk_candidates_query.jsonl
  â€¢ Final outputs   : /data/horse/ws/anpa439f-Function_Retrieval_Citation/Research_Project/RetrievalAugmentedGeneration/outputs
