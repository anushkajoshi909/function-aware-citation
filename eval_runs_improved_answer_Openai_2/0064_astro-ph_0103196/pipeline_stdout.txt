âœ… Available Models:
1. alias-reasoning
2. alias-ha
3. meta-llama/Llama-3.3-70B-Instruct
4. meta-llama/Llama-3.1-8B-Instruct
5. Qwen/Qwen2-VL-7B-Instruct
6. alias-vision
7. openGPT-X/Teuken-7B-instruct-research-v0.4
8. deepseek-ai/DeepSeek-Coder-V2-Lite-Instruct
9. Qwen/Qwen3-Coder-30B-A3B-Instruct
10. alias-code
11. Qwen/Qwen3-Embedding-4B
12. BAAI/bge-reranker-v2-m3
13. stabilityai/stable-diffusion-3.5-large-turbo
14. alias-image-generation
15. black-forest-labs/FLUX.1-dev
16. openai/whisper-large-v3
17. Kokoro-82M
18. tts-1-hd
19. deepseek-ai/DeepSeek-R1
20. openai/gpt-oss-120b
21. meta-llama/Llama-4-Scout-17B-16E-Instruct

ðŸ‘‰ Select a model number (default = 1): 
âœ… Using model: openai/gpt-oss-120b

ðŸ” Enter a scientific query or topic: 
ðŸ”Ž Citation Function Classification:
{
  "citation_functions": [
    "Motivation",
    "FutureWork"
  ],
  "justification": "The query identifies gaps in current knowledge (motivating factor) and explicitly asks about how these gaps drive future research directions."
}

âœ… Saved to classified_outputs.jsonl
ðŸ”§ Ready for retrieval module (handled in a separate file).
âš¡ SKIP_REINDEX=1 â€” using existing FAISS index + meta; not scanning raw JSONL shards.
âœ… Top-k candidates (FAISS): /data/horse/ws/anpa439f-Function_Retrieval_Citation/Research_Project/RetrievalAugmentedGeneration/outputs/topk_candidates_query.jsonl
[16:51:33] main | args: Namespace(max_check=10, debug=True)
[16:51:33] read_last_jsonl | path= classified_outputs.jsonl
[16:51:33] read_last_jsonl | total_lines= 1
[16:51:33] main | query='What limitations in current understanding of supernova explosions and their interactions with the circumstellar medium motivate further research and potential future work in this area?' | funcs=['Motivation', 'FutureWork']
[16:51:35] main | core_terms= ['supernova', 'circumstellar medium', 'explosion', 'interaction']
[16:51:35] load_topk_jsonl | path= /data/horse/ws/anpa439f-Function_Retrieval_Citation/Research_Project/outputs/topk_candidates_query.jsonl
[16:51:35] load_topk_jsonl | rows= 20
[16:51:35] load_topk_jsonl | first: rank= 0 paper_id= astro-ph/0103015 title_snip='Supernova Explosions and Neutron Star Formation' abs_len= 1135
[16:51:35] main | running function= Motivation
[16:51:35] select | function= Motivation | candidates_in= 20
[16:51:35] select | core_terms= ['supernova', 'circumstellar medium', 'explosion', 'interaction']
[16:51:35] select | no cosine prune; kept=20/20
[16:51:35] select | pool_size= 10 | ranks= [0, 1, 2, 3, 4, 5, 6, 7, 8, 9] | pids= ['astro-ph/0103015', 'astro-ph/0102212', 'hep-ph/0104094', 'astro-ph/0101018', 'astro-ph/0104156', 'astro-ph/0101043', 'astro-ph/0102087', 'astro-ph/0103075', 'astro-ph/0103412', 'astro-ph/0103461']
[16:51:35] select | verify relaxed 1/10
[16:51:35] verify | func= Motivation | rank= 0 | pid= astro-ph/0103015 | title_snip='Supernova Explosions and Neutron Star Formation' | abs_len= 1135
[16:51:39] verify | result supports= True fit= 0.80 top= 0.90 invalid= â€” cue_hint= False
[16:51:39] select | verify relaxed 2/10
[16:51:39] verify | func= Motivation | rank= 1 | pid= astro-ph/0102212 | title_snip='Theoretical Implications of the Gamma-Ray Burst - Supernova Connection' | abs_len= 721
[16:51:42] verify | result supports= True fit= 0.80 top= 0.90 invalid= â€” cue_hint= False
[16:51:42] select | verify relaxed 3/10
[16:51:42] verify | func= Motivation | rank= 2 | pid= hep-ph/0104094 | title_snip='Supernova Constraints on Neutrino Mass and Mixing' | abs_len= 396
[16:51:46] verify | result supports= False fit= 0.00 top= 0.20 invalid= â€” cue_hint= False
[16:51:46] select | verify relaxed 4/10
[16:51:46] verify | func= Motivation | rank= 3 | pid= astro-ph/0101018 | title_snip='Science Prospects for SPI' | abs_len= 1822
[16:51:49] verify | result supports= False fit= 0.00 top= 0.50 invalid= no_quote cue_hint= False
[16:51:49] select | verify relaxed 5/10
[16:51:49] verify | func= Motivation | rank= 4 | pid= astro-ph/0104156 | title_snip='SN1993J VLBI (I): The Center of the Explosion and a Limit on Anisotropâ€¦' | abs_len= 1795
[16:51:53] verify | result supports= True fit= 0.80 top= 0.90 invalid= â€” cue_hint= False
[16:51:53] select | verify relaxed 6/10
[16:51:53] verify | func= Motivation | rank= 5 | pid= astro-ph/0101043 | title_snip='Young Supernova Remnants: Issues and Prospects' | abs_len= 386
[16:51:56] verify | result supports= True fit= 0.80 top= 0.90 invalid= â€” cue_hint= True
[16:51:56] select | verify relaxed 7/10
[16:51:56] verify | func= Motivation | rank= 6 | pid= astro-ph/0102087 | title_snip='The X-ray nebula of the filled center supernova remnant 3C58 and its
 â€¦' | abs_len= 1417
[16:51:59] verify | result supports= False fit= 0.00 top= 0.50 invalid= no_quote cue_hint= False
[16:51:59] select | verify relaxed 8/10
[16:51:59] verify | func= Motivation | rank= 7 | pid= astro-ph/0103075 | title_snip='Supernova constraints on spatial variations of the vacuum energy densiâ€¦' | abs_len= 810
[16:52:02] verify | result supports= False fit= 0.00 top= 0.20 invalid= â€” cue_hint= False
[16:52:02] select | verify relaxed 9/10
[16:52:02] verify | func= Motivation | rank= 8 | pid= astro-ph/0103412 | title_snip='Thermal X-ray emission of the remnants of ashperical Supernova
  exploâ€¦' | abs_len= 518
[16:52:05] verify | result supports= False fit= 0.00 top= 0.50 invalid= no_quote cue_hint= False
[16:52:05] select | verify relaxed 10/10
[16:52:05] verify | func= Motivation | rank= 9 | pid= astro-ph/0103461 | title_snip='Observations of Circumstellar Disks' | abs_len= 1289
[16:52:08] verify | result supports= False fit= 0.00 top= 0.00 invalid= no_quote cue_hint= False

================================================================================
FUNCTION: Motivation
QUERY   : What limitations in current understanding of supernova explosions and their interactions with the circumstellar medium motivate further research and potential future work in this area?
- WINNER: astro-ph/0101043 | Young Supernova Remnants: Issues and Prospects
- QUOTE : several challenges
- WHY   : sufficient
[16:52:10] main | running function= FutureWork
[16:52:10] select | function= FutureWork | candidates_in= 20
[16:52:10] select | core_terms= ['supernova', 'circumstellar medium', 'explosion', 'interaction']
[16:52:10] select | no cosine prune; kept=20/20
[16:52:10] select | pool_size= 10 | ranks= [0, 1, 2, 3, 4, 5, 6, 7, 8, 9] | pids= ['astro-ph/0103015', 'astro-ph/0102212', 'hep-ph/0104094', 'astro-ph/0101018', 'astro-ph/0104156', 'astro-ph/0101043', 'astro-ph/0102087', 'astro-ph/0103075', 'astro-ph/0103412', 'astro-ph/0103461']
[16:52:10] select | verify relaxed 1/10
[16:52:10] verify | func= FutureWork | rank= 0 | pid= astro-ph/0103015 | title_snip='Supernova Explosions and Neutron Star Formation' | abs_len= 1135
[16:52:13] verify | result supports= True fit= 0.80 top= 0.90 invalid= â€” cue_hint= False
[16:52:13] select | verify relaxed 2/10
[16:52:13] verify | func= FutureWork | rank= 1 | pid= astro-ph/0102212 | title_snip='Theoretical Implications of the Gamma-Ray Burst - Supernova Connection' | abs_len= 721
[16:52:17] verify | result supports= False fit= 0.00 top= 0.80 invalid= â€” cue_hint= False
[16:52:17] select | verify relaxed 3/10
[16:52:17] verify | func= FutureWork | rank= 2 | pid= hep-ph/0104094 | title_snip='Supernova Constraints on Neutrino Mass and Mixing' | abs_len= 396
[16:52:21] verify | result supports= False fit= 0.00 top= 0.20 invalid= â€” cue_hint= False
[16:52:21] select | verify relaxed 4/10
[16:52:21] verify | func= FutureWork | rank= 3 | pid= astro-ph/0101018 | title_snip='Science Prospects for SPI' | abs_len= 1822
[16:52:24] verify | result supports= False fit= 0.00 top= 0.60 invalid= â€” cue_hint= False
[16:52:24] select | verify relaxed 5/10
[16:52:24] verify | func= FutureWork | rank= 4 | pid= astro-ph/0104156 | title_snip='SN1993J VLBI (I): The Center of the Explosion and a Limit on Anisotropâ€¦' | abs_len= 1795
[16:52:28] verify | result supports= True fit= 0.80 top= 0.90 invalid= â€” cue_hint= False
[16:52:28] select | verify relaxed 6/10
[16:52:28] verify | func= FutureWork | rank= 5 | pid= astro-ph/0101043 | title_snip='Young Supernova Remnants: Issues and Prospects' | abs_len= 386
[16:52:31] verify | result supports= True fit= 0.80 top= 0.90 invalid= â€” cue_hint= False
[16:52:31] select | verify relaxed 7/10
[16:52:31] verify | func= FutureWork | rank= 6 | pid= astro-ph/0102087 | title_snip='The X-ray nebula of the filled center supernova remnant 3C58 and its
 â€¦' | abs_len= 1417
[16:52:35] verify | result supports= False fit= 0.00 top= 0.60 invalid= â€” cue_hint= False
[16:52:35] select | verify relaxed 8/10
[16:52:35] verify | func= FutureWork | rank= 7 | pid= astro-ph/0103075 | title_snip='Supernova constraints on spatial variations of the vacuum energy densiâ€¦' | abs_len= 810
[16:52:38] verify | result supports= False fit= 0.00 top= 0.20 invalid= â€” cue_hint= False
[16:52:38] select | verify relaxed 9/10
[16:52:38] verify | func= FutureWork | rank= 8 | pid= astro-ph/0103412 | title_snip='Thermal X-ray emission of the remnants of ashperical Supernova
  exploâ€¦' | abs_len= 518
[16:52:41] verify | result supports= False fit= 0.00 top= 0.80 invalid= no_quote cue_hint= False
[16:52:41] select | verify relaxed 10/10
[16:52:41] verify | func= FutureWork | rank= 9 | pid= astro-ph/0103461 | title_snip='Observations of Circumstellar Disks' | abs_len= 1289
[16:52:44] verify | result supports= False fit= 0.00 top= 0.00 invalid= no_quote cue_hint= False

================================================================================
FUNCTION: FutureWork
QUERY   : What limitations in current understanding of supernova explosions and their interactions with the circumstellar medium motivate further research and potential future work in this area?
- WINNER: astro-ph/0103015 | Supernova Explosions and Neutron Star Formation
- QUOTE : may be crucial to resolve the problem
- WHY   : sufficient

================================================================================
UNIFIED ANSWER (1â€“2 sentences, tagged):
The current understanding of supernova explosions and their interactions with the circumstellar medium is limited by several challenges, including the inability to infer the nature of the supernova and its progenitor star from observations [Motivation] (astro-ph/0101043). Further research is motivated to address these limitations, with potential future work focusing on multi-dimensional simulations and a better understanding of neutrino interactions to resolve the problem of spherical models not yielding explosions [FutureWork] (astro-ph/0103015).

ðŸ“„ Saved: outputs/function_selection_results.json
ðŸ“„ Saved: outputs/function_selection_results.jsonl
ðŸ“ Unified answer: outputs/function_answer_unified.txt
-> /home/anpa439f/anaconda3/envs/myenv/bin/python3 /data/horse/ws/anpa439f-Function_Retrieval_Citation/Research_Project/RetrievalAugmentedGeneration/classifying_question.py  (cwd=/data/horse/ws/anpa439f-Function_Retrieval_Citation/Research_Project/RetrievalAugmentedGeneration)
âœ… Saved to classified_outputs.jsonl
ðŸ”§ Ready for retrieval module (.py).
-> /home/anpa439f/anaconda3/envs/myenv/bin/python3 /data/horse/ws/anpa439f-Function_Retrieval_Citation/Research_Project/RetrievalAugmentedGeneration/Retreival_query_based.py --skip-reindex --index /data/horse/ws/anpa439f-Function_Retrieval_Citation/Research_Project/e5_index_subset_1/index.faiss --meta /data/horse/ws/anpa439f-Function_Retrieval_Citation/Research_Project/e5_index_subset_1/meta.parquet --topk 20  (cwd=/data/horse/ws/anpa439f-Function_Retrieval_Citation/Research_Project/RetrievalAugmentedGeneration)
âœ… Top-k candidates: /data/horse/ws/anpa439f-Function_Retrieval_Citation/Research_Project/RetrievalAugmentedGeneration/outputs/topk_candidates_query.jsonl
ðŸ”— Symlinked: /data/horse/ws/anpa439f-Function_Retrieval_Citation/Research_Project/outputs/topk_candidates_query.jsonl -> /data/horse/ws/anpa439f-Function_Retrieval_Citation/Research_Project/RetrievalAugmentedGeneration/outputs/topk_candidates_query.jsonl
-> /home/anpa439f/anaconda3/envs/myenv/bin/python3 /data/horse/ws/anpa439f-Function_Retrieval_Citation/Research_Project/RetrievalAugmentedGeneration/function_based_answer-2_copy.py --debug --max-check 10  (cwd=/data/horse/ws/anpa439f-Function_Retrieval_Citation/Research_Project/RetrievalAugmentedGeneration)

ðŸŽ‰ Pipeline complete.
  â€¢ Classified file : /data/horse/ws/anpa439f-Function_Retrieval_Citation/Research_Project/RetrievalAugmentedGeneration/classified_outputs.jsonl
  â€¢ TopK (canonical): /data/horse/ws/anpa439f-Function_Retrieval_Citation/Research_Project/RetrievalAugmentedGeneration/outputs/topk_candidates_query.jsonl
  â€¢ Final outputs   : /data/horse/ws/anpa439f-Function_Retrieval_Citation/Research_Project/RetrievalAugmentedGeneration/outputs
