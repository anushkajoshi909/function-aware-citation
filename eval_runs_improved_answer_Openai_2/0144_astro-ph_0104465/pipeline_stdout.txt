âœ… Available Models:
1. alias-reasoning
2. alias-ha
3. meta-llama/Llama-3.3-70B-Instruct
4. meta-llama/Llama-3.1-8B-Instruct
5. Qwen/Qwen2-VL-7B-Instruct
6. alias-vision
7. openGPT-X/Teuken-7B-instruct-research-v0.4
8. deepseek-ai/DeepSeek-Coder-V2-Lite-Instruct
9. Qwen/Qwen3-Coder-30B-A3B-Instruct
10. alias-code
11. Qwen/Qwen3-Embedding-4B
12. BAAI/bge-reranker-v2-m3
13. stabilityai/stable-diffusion-3.5-large-turbo
14. alias-image-generation
15. black-forest-labs/FLUX.1-dev
16. openai/whisper-large-v3
17. Kokoro-82M
18. tts-1-hd
19. deepseek-ai/DeepSeek-R1
20. openai/gpt-oss-120b
21. meta-llama/Llama-4-Scout-17B-16E-Instruct

ðŸ‘‰ Select a model number (default = 1): 
âœ… Using model: openai/gpt-oss-120b

ðŸ” Enter a scientific query or topic: 
ðŸ”Ž Citation Function Classification:
{
  "citation_functions": [
    "Compares",
    "FutureWork"
  ],
  "justification": "The query asks for a comparison with prior Milky Way models and seeks suggested directions for future research based on the study's findings."
}

âœ… Saved to classified_outputs.jsonl
ðŸ”§ Ready for retrieval module (handled in a separate file).
âš¡ SKIP_REINDEX=1 â€” using existing FAISS index + meta; not scanning raw JSONL shards.
âœ… Top-k candidates (FAISS): /data/horse/ws/anpa439f-Function_Retrieval_Citation/Research_Project/RetrievalAugmentedGeneration/outputs/topk_candidates_query.jsonl
[18:43:30] main | args: Namespace(max_check=10, debug=True)
[18:43:30] read_last_jsonl | path= classified_outputs.jsonl
[18:43:30] read_last_jsonl | total_lines= 1
[18:43:30] main | query='How do the results of this study compare to previous models of the Milky Way, and what future research directions are suggested by the findings on dark matter halo shapes and Galactic constants?' | funcs=['Compares', 'FutureWork']
[18:43:32] main | core_terms= ['Milky Way', 'dark matter halo', 'Galactic constants']
[18:43:32] load_topk_jsonl | path= /data/horse/ws/anpa439f-Function_Retrieval_Citation/Research_Project/outputs/topk_candidates_query.jsonl
[18:43:32] load_topk_jsonl | rows= 20
[18:43:32] load_topk_jsonl | first: rank= 0 paper_id= astro-ph/0104465 title_snip='Luminous and Dark Matter in the Milky Way' abs_len= 1523
[18:43:32] main | running function= Compares
[18:43:32] select | function= Compares | candidates_in= 20
[18:43:32] select | core_terms= ['Milky Way', 'dark matter halo', 'Galactic constants']
[18:43:32] select | no cosine prune; kept=20/20
[18:43:32] select | pool_size= 10 | ranks= [0, 1, 2, 3, 4, 5, 6, 7, 8, 9] | pids= ['astro-ph/0104465', 'astro-ph/0102436', 'astro-ph/0104293', 'astro-ph/0104242', 'astro-ph/0103430', 'astro-ph/0101528', 'astro-ph/0101210', 'astro-ph/0103386', 'astro-ph/0104069', 'astro-ph/0104404']
[18:43:32] select | verify relaxed 1/10
[18:43:32] verify | func= Compares | rank= 0 | pid= astro-ph/0104465 | title_snip='Luminous and Dark Matter in the Milky Way' | abs_len= 1523
[18:43:35] verify | result supports= True fit= 0.80 top= 0.90 invalid= â€” cue_hint= False
[18:43:35] select | verify relaxed 2/10
[18:43:35] verify | func= Compares | rank= 1 | pid= astro-ph/0102436 | title_snip='The Host Haloes of Lyman Break Galaxies and Sub-millimeter Sources' | abs_len= 1580
[18:43:38] verify | result supports= False fit= 0.00 top= 0.20 invalid= no_quote cue_hint= False
[18:43:38] select | verify relaxed 3/10
[18:43:38] verify | func= Compares | rank= 2 | pid= astro-ph/0104293 | title_snip='Direct Detection of Galactic Halo Dark Matter' | abs_len= 831
[18:43:42] verify | result supports= False fit= 0.00 top= 0.80 invalid= â€” cue_hint= False
[18:43:42] select | verify relaxed 4/10
[18:43:42] verify | func= Compares | rank= 3 | pid= astro-ph/0104242 | title_snip='The Thick Disk-Halo Interface' | abs_len= 940
[18:43:45] verify | result supports= False fit= 0.00 top= 0.50 invalid= â€” cue_hint= False
[18:43:45] select | verify relaxed 5/10
[18:43:45] verify | func= Compares | rank= 4 | pid= astro-ph/0103430 | title_snip='The Metamorphosis of Tidally Stirred Dwarf Galaxies' | abs_len= 1825
[18:43:48] verify | result supports= True fit= 0.80 top= 0.90 invalid= â€” cue_hint= False
[18:43:48] select | verify relaxed 6/10
[18:43:48] verify | func= Compares | rank= 5 | pid= astro-ph/0101528 | title_snip='Constraints on the warm dark matter model from gravitational lensing' | abs_len= 1068
[18:43:52] verify | result supports= False fit= 0.00 top= 0.90 invalid= off_topic_no_core_in_abstract cue_hint= False
[18:43:52] select | verify relaxed 7/10
[18:43:52] verify | func= Compares | rank= 6 | pid= astro-ph/0101210 | title_snip='A new test for the stable clustering hypothesis' | abs_len= 1194
[18:43:55] verify | result supports= False fit= 0.00 top= 0.20 invalid= â€” cue_hint= False
[18:43:55] select | verify relaxed 8/10
[18:43:55] verify | func= Compares | rank= 7 | pid= astro-ph/0103386 | title_snip='Dark Halos: The Flattening of the Density Cusp by Dynamical Friction' | abs_len= 1598
[18:43:59] verify | result supports= False fit= 0.00 top= 0.80 invalid= â€” cue_hint= False
[18:43:59] select | verify relaxed 9/10
[18:43:59] verify | func= Compares | rank= 8 | pid= astro-ph/0104069 | title_snip='The Equilibrium Structure of Cosmological Halos' | abs_len= 1238
[18:44:02] verify | result supports= False fit= 0.00 top= 0.90 invalid= off_topic_no_core_in_abstract cue_hint= False
[18:44:02] select | verify relaxed 10/10
[18:44:02] verify | func= Compares | rank= 9 | pid= astro-ph/0104404 | title_snip='The Formation Timescales of Giant Spheroids' | abs_len= 553
[18:44:05] verify | result supports= False fit= 0.00 top= 0.00 invalid= no_quote cue_hint= False

================================================================================
FUNCTION: Compares
QUERY   : How do the results of this study compare to previous models of the Milky Way, and what future research directions are suggested by the findings on dark matter halo shapes and Galactic constants?
- WINNER: astro-ph/0104465 | Luminous and Dark Matter in the Milky Way
- QUOTE : rule out two DM candidates that require a highly flattened DM halo
- WHY   : sufficient
[18:44:07] main | running function= FutureWork
[18:44:07] select | function= FutureWork | candidates_in= 20
[18:44:07] select | core_terms= ['Milky Way', 'dark matter halo', 'Galactic constants']
[18:44:07] select | no cosine prune; kept=20/20
[18:44:07] select | pool_size= 10 | ranks= [0, 1, 2, 3, 4, 5, 6, 7, 8, 9] | pids= ['astro-ph/0104465', 'astro-ph/0102436', 'astro-ph/0104293', 'astro-ph/0104242', 'astro-ph/0103430', 'astro-ph/0101528', 'astro-ph/0101210', 'astro-ph/0103386', 'astro-ph/0104069', 'astro-ph/0104404']
[18:44:07] select | verify relaxed 1/10
[18:44:07] verify | func= FutureWork | rank= 0 | pid= astro-ph/0104465 | title_snip='Luminous and Dark Matter in the Milky Way' | abs_len= 1523
[18:44:10] verify | result supports= False fit= 0.00 top= 0.80 invalid= no_quote cue_hint= False
[18:44:10] select | verify relaxed 2/10
[18:44:10] verify | func= FutureWork | rank= 1 | pid= astro-ph/0102436 | title_snip='The Host Haloes of Lyman Break Galaxies and Sub-millimeter Sources' | abs_len= 1580
[18:44:13] verify | result supports= False fit= 0.00 top= 0.20 invalid= no_quote cue_hint= False
[18:44:13] select | verify relaxed 3/10
[18:44:13] verify | func= FutureWork | rank= 2 | pid= astro-ph/0104293 | title_snip='Direct Detection of Galactic Halo Dark Matter' | abs_len= 831
[18:44:16] verify | result supports= False fit= 0.00 top= 0.80 invalid= â€” cue_hint= False
[18:44:16] select | verify relaxed 4/10
[18:44:16] verify | func= FutureWork | rank= 3 | pid= astro-ph/0104242 | title_snip='The Thick Disk-Halo Interface' | abs_len= 940
[18:44:19] verify | result supports= False fit= 0.00 top= 0.80 invalid= quote_not_in_abstract cue_hint= False
[18:44:19] select | verify relaxed 5/10
[18:44:19] verify | func= FutureWork | rank= 4 | pid= astro-ph/0103430 | title_snip='The Metamorphosis of Tidally Stirred Dwarf Galaxies' | abs_len= 1825
[18:44:22] verify | result supports= False fit= 0.00 top= 0.80 invalid= no_quote cue_hint= False
[18:44:22] select | verify relaxed 6/10
[18:44:22] verify | func= FutureWork | rank= 5 | pid= astro-ph/0101528 | title_snip='Constraints on the warm dark matter model from gravitational lensing' | abs_len= 1068
[18:44:26] verify | result supports= False fit= 0.00 top= 0.90 invalid= off_topic_no_core_in_abstract cue_hint= False
[18:44:26] select | verify relaxed 7/10
[18:44:26] verify | func= FutureWork | rank= 6 | pid= astro-ph/0101210 | title_snip='A new test for the stable clustering hypothesis' | abs_len= 1194
[18:44:30] verify | result supports= False fit= 0.00 top= 0.20 invalid= â€” cue_hint= False
[18:44:30] select | verify relaxed 8/10
[18:44:30] verify | func= FutureWork | rank= 7 | pid= astro-ph/0103386 | title_snip='Dark Halos: The Flattening of the Density Cusp by Dynamical Friction' | abs_len= 1598
[18:44:34] verify | result supports= False fit= 0.00 top= 0.90 invalid= off_topic_no_core_in_abstract cue_hint= False
[18:44:34] select | verify relaxed 9/10
[18:44:34] verify | func= FutureWork | rank= 8 | pid= astro-ph/0104069 | title_snip='The Equilibrium Structure of Cosmological Halos' | abs_len= 1238
[18:44:37] verify | result supports= False fit= 0.00 top= 0.80 invalid= no_quote cue_hint= False
[18:44:37] select | verify relaxed 10/10
[18:44:37] verify | func= FutureWork | rank= 9 | pid= astro-ph/0104404 | title_snip='The Formation Timescales of Giant Spheroids' | abs_len= 553
[18:44:39] verify | result supports= False fit= 0.00 top= 0.00 invalid= no_quote cue_hint= False

================================================================================
FUNCTION: FutureWork
QUERY   : How do the results of this study compare to previous models of the Milky Way, and what future research directions are suggested by the findings on dark matter halo shapes and Galactic constants?
- No supporting candidate with sufficient evidence.

================================================================================
UNIFIED ANSWER (1â€“2 sentences, tagged):
The results of this study compare to previous models of the Milky Way by ruling out highly flattened dark matter halos if certain Galactic constants are met [Compares] (astro-ph/0104465). The findings suggest future research directions, such as investigating the effects of gaseous velocity dispersion on HI flaring constraints and refining estimates of dark matter density in the Galactic centre [Compares] (astro-ph/0104465).

ðŸ“„ Saved: outputs/function_selection_results.json
ðŸ“„ Saved: outputs/function_selection_results.jsonl
ðŸ“ Unified answer: outputs/function_answer_unified.txt
-> /home/anpa439f/anaconda3/envs/myenv/bin/python3 /data/horse/ws/anpa439f-Function_Retrieval_Citation/Research_Project/RetrievalAugmentedGeneration/classifying_question.py  (cwd=/data/horse/ws/anpa439f-Function_Retrieval_Citation/Research_Project/RetrievalAugmentedGeneration)
âœ… Saved to classified_outputs.jsonl
ðŸ”§ Ready for retrieval module (.py).
-> /home/anpa439f/anaconda3/envs/myenv/bin/python3 /data/horse/ws/anpa439f-Function_Retrieval_Citation/Research_Project/RetrievalAugmentedGeneration/Retreival_query_based.py --skip-reindex --index /data/horse/ws/anpa439f-Function_Retrieval_Citation/Research_Project/e5_index_subset_1/index.faiss --meta /data/horse/ws/anpa439f-Function_Retrieval_Citation/Research_Project/e5_index_subset_1/meta.parquet --topk 20  (cwd=/data/horse/ws/anpa439f-Function_Retrieval_Citation/Research_Project/RetrievalAugmentedGeneration)
âœ… Top-k candidates: /data/horse/ws/anpa439f-Function_Retrieval_Citation/Research_Project/RetrievalAugmentedGeneration/outputs/topk_candidates_query.jsonl
ðŸ”— Symlinked: /data/horse/ws/anpa439f-Function_Retrieval_Citation/Research_Project/outputs/topk_candidates_query.jsonl -> /data/horse/ws/anpa439f-Function_Retrieval_Citation/Research_Project/RetrievalAugmentedGeneration/outputs/topk_candidates_query.jsonl
-> /home/anpa439f/anaconda3/envs/myenv/bin/python3 /data/horse/ws/anpa439f-Function_Retrieval_Citation/Research_Project/RetrievalAugmentedGeneration/function_based_answer-2_copy.py --debug --max-check 10  (cwd=/data/horse/ws/anpa439f-Function_Retrieval_Citation/Research_Project/RetrievalAugmentedGeneration)

ðŸŽ‰ Pipeline complete.
  â€¢ Classified file : /data/horse/ws/anpa439f-Function_Retrieval_Citation/Research_Project/RetrievalAugmentedGeneration/classified_outputs.jsonl
  â€¢ TopK (canonical): /data/horse/ws/anpa439f-Function_Retrieval_Citation/Research_Project/RetrievalAugmentedGeneration/outputs/topk_candidates_query.jsonl
  â€¢ Final outputs   : /data/horse/ws/anpa439f-Function_Retrieval_Citation/Research_Project/RetrievalAugmentedGeneration/outputs
