âœ… Available Models:
1. alias-reasoning
2. alias-ha
3. meta-llama/Llama-3.3-70B-Instruct
4. meta-llama/Llama-3.1-8B-Instruct
5. Qwen/Qwen2-VL-7B-Instruct
6. alias-vision
7. openGPT-X/Teuken-7B-instruct-research-v0.4
8. deepseek-ai/DeepSeek-Coder-V2-Lite-Instruct
9. Qwen/Qwen3-Coder-30B-A3B-Instruct
10. alias-code
11. Qwen/Qwen3-Embedding-4B
12. BAAI/bge-reranker-v2-m3
13. stabilityai/stable-diffusion-3.5-large-turbo
14. alias-image-generation
15. black-forest-labs/FLUX.1-dev
16. openai/whisper-large-v3
17. Kokoro-82M
18. tts-1-hd
19. deepseek-ai/DeepSeek-R1
20. openai/gpt-oss-120b
21. meta-llama/Llama-4-Scout-17B-16E-Instruct

ðŸ‘‰ Select a model number (default = 1): 
âœ… Using model: deepseek-ai/DeepSeek-R1

ðŸ” Enter a scientific query or topic: 
ðŸ”Ž Citation Function Classification:
{
  "citation_functions": [
    "Background",
    "Compares"
  ],
  "justification": "The query references background information and makes a comparison to other models or observations."
}

âœ… Saved to classified_outputs.jsonl
ðŸ”§ Ready for retrieval module (handled in a separate file).
âš¡ SKIP_REINDEX=1 â€” using existing FAISS index + meta; not scanning raw JSONL shards.
âœ… Top-k candidates (FAISS): /data/horse/ws/anpa439f-Function_Retrieval_Citation/Research_Project/RetrievalAugmentedGeneration/outputs/topk_candidates_query.jsonl
[12:48:09] main | args: Namespace(max_check=10, debug=True)
[12:48:09] read_last_jsonl | path= classified_outputs.jsonl
[12:48:09] read_last_jsonl | total_lines= 1
[12:48:09] main | query='How do the effects of irradiation on planetary atmospheres, as described in the background of this study, compare to other models or observations of similar phenomena?' | funcs=['Background', 'Compares']
[12:48:11] main | core_terms= ['planetary atmospheres', 'irradiation', 'atmospheric effects']
[12:48:11] load_topk_jsonl | path= /data/horse/ws/anpa439f-Function_Retrieval_Citation/Research_Project/outputs/topk_candidates_query.jsonl
[12:48:11] load_topk_jsonl | rows= 20
[12:48:11] load_topk_jsonl | first: rank= 0 paper_id= astro-ph/0104262 title_snip='Irradiated Planets' abs_len= 1273
[12:48:11] main | running function= Background
[12:48:11] select | function= Background | candidates_in= 20
[12:48:11] select | core_terms= ['planetary atmospheres', 'irradiation', 'atmospheric effects']
[12:48:11] select | no cosine prune; kept=20/20
[12:48:11] select | pool_size= 10 | ranks= [0, 1, 2, 3, 4, 5, 6, 7, 8, 9] | pids= ['astro-ph/0104262', 'astro-ph/0101407', 'astro-ph/0104199', 'astro-ph/0103383', 'astro-ph/0104209', 'astro-ph/0104305', 'astro-ph/0104413', 'astro-ph/0103083', 'astro-ph/0101024', 'astro-ph/0101375']
[12:48:11] select | verify relaxed 1/10
[12:48:11] verify | func= Background | rank= 0 | pid= astro-ph/0104262 | title_snip='Irradiated Planets' | abs_len= 1273
[12:48:15] verify | result supports= True fit= 0.80 top= 0.90 invalid= â€” cue_hint= False
[12:48:15] select | verify relaxed 2/10
[12:48:15] verify | func= Background | rank= 1 | pid= astro-ph/0101407 | title_snip='Chemical Evolution and Starbursts' | abs_len= 629
[12:48:17] verify | result supports= False fit= 0.00 top= 0.00 invalid= no_quote cue_hint= False
[12:48:17] select | verify relaxed 3/10
[12:48:17] verify | func= Background | rank= 2 | pid= astro-ph/0104199 | title_snip='Atmospheres and Spectra of Strongly Magnetized Neutron Stars' | abs_len= 1751
[12:48:20] verify | result supports= False fit= 0.00 top= 0.00 invalid= no_quote cue_hint= False
[12:48:20] select | verify relaxed 4/10
[12:48:20] verify | func= Background | rank= 3 | pid= astro-ph/0103383 | title_snip='The Theory of Brown Dwarfs and Extrasolar Giant Planets' | abs_len= 1260
[12:48:23] verify | result supports= False fit= 0.00 top= 0.90 invalid= off_topic_no_core_in_abstract cue_hint= False
[12:48:23] select | verify relaxed 5/10
[12:48:23] verify | func= Background | rank= 4 | pid= astro-ph/0104209 | title_snip='Intermittent Jolts of Galactic UV Radiation: Mutagenetic Effects' | abs_len= 1422
[12:48:26] verify | result supports= False fit= 0.00 top= 0.90 invalid= off_topic_no_core_in_abstract cue_hint= False
[12:48:26] select | verify relaxed 6/10
[12:48:26] verify | func= Background | rank= 5 | pid= astro-ph/0104305 | title_snip='Simulating Electron Transport and Synchrotron Emission in Radio
  Galaâ€¦' | abs_len= 1433
[12:48:29] verify | result supports= False fit= 0.00 top= 0.00 invalid= no_quote cue_hint= False
[12:48:29] select | verify relaxed 7/10
[12:48:29] verify | func= Background | rank= 6 | pid= astro-ph/0104413 | title_snip='Modelling X-ray variability in the structured atmospheres of hot stars' | abs_len= 676
[12:48:31] verify | result supports= False fit= 0.00 top= 0.00 invalid= no_quote cue_hint= False
[12:48:31] select | verify relaxed 8/10
[12:48:31] verify | func= Background | rank= 7 | pid= astro-ph/0103083 | title_snip='A Simple Model for r-Process Scatter and Halo Evolution' | abs_len= 1288
[12:48:34] verify | result supports= False fit= 0.00 top= 0.00 invalid= no_quote cue_hint= False
[12:48:34] select | verify relaxed 9/10
[12:48:34] verify | func= Background | rank= 8 | pid= astro-ph/0101024 | title_snip='Theory of Extrasolar Giant Planet Transits' | abs_len= 802
[12:48:37] verify | result supports= False fit= 0.00 top= 0.90 invalid= off_topic_no_core_in_abstract cue_hint= False
[12:48:37] select | verify relaxed 10/10
[12:48:37] verify | func= Background | rank= 9 | pid= astro-ph/0101375 | title_snip='Could We Detect Molecular Oxygen in the Atmosphere of a Transiting
  Eâ€¦' | abs_len= 1482
[12:48:40] verify | result supports= False fit= 0.00 top= 0.50 invalid= â€” cue_hint= False

================================================================================
FUNCTION: Background
QUERY   : How do the effects of irradiation on planetary atmospheres, as described in the background of this study, compare to other models or observations of similar phenomena?
- WINNER: astro-ph/0104262 | Irradiated Planets
- QUOTE : We find that large errors in both the thermal and reflected flux
- WHY   : sufficient
[12:48:41] main | running function= Compares
[12:48:41] select | function= Compares | candidates_in= 20
[12:48:41] select | core_terms= ['planetary atmospheres', 'irradiation', 'atmospheric effects']
[12:48:41] select | no cosine prune; kept=20/20
[12:48:41] select | pool_size= 10 | ranks= [0, 1, 2, 3, 4, 5, 6, 7, 8, 9] | pids= ['astro-ph/0104262', 'astro-ph/0101407', 'astro-ph/0104199', 'astro-ph/0103383', 'astro-ph/0104209', 'astro-ph/0104305', 'astro-ph/0104413', 'astro-ph/0103083', 'astro-ph/0101024', 'astro-ph/0101375']
[12:48:41] select | verify relaxed 1/10
[12:48:41] verify | func= Compares | rank= 0 | pid= astro-ph/0104262 | title_snip='Irradiated Planets' | abs_len= 1273
[12:48:45] verify | result supports= True fit= 0.80 top= 0.90 invalid= â€” cue_hint= True
[12:48:45] select | verify relaxed 2/10
[12:48:45] verify | func= Compares | rank= 1 | pid= astro-ph/0101407 | title_snip='Chemical Evolution and Starbursts' | abs_len= 629
[12:48:47] verify | result supports= False fit= 0.00 top= 0.00 invalid= no_quote cue_hint= False
[12:48:47] select | verify relaxed 3/10
[12:48:47] verify | func= Compares | rank= 2 | pid= astro-ph/0104199 | title_snip='Atmospheres and Spectra of Strongly Magnetized Neutron Stars' | abs_len= 1751
[12:48:50] verify | result supports= False fit= 0.00 top= 0.00 invalid= no_quote cue_hint= False
[12:48:50] select | verify relaxed 4/10
[12:48:50] verify | func= Compares | rank= 3 | pid= astro-ph/0103383 | title_snip='The Theory of Brown Dwarfs and Extrasolar Giant Planets' | abs_len= 1260
[12:48:53] verify | result supports= False fit= 0.00 top= 0.90 invalid= off_topic_no_core_in_abstract cue_hint= False
[12:48:53] select | verify relaxed 5/10
[12:48:53] verify | func= Compares | rank= 4 | pid= astro-ph/0104209 | title_snip='Intermittent Jolts of Galactic UV Radiation: Mutagenetic Effects' | abs_len= 1422
[12:48:56] verify | result supports= False fit= 0.00 top= 0.90 invalid= off_topic_no_core_in_abstract cue_hint= False
[12:48:56] select | verify relaxed 6/10
[12:48:56] verify | func= Compares | rank= 5 | pid= astro-ph/0104305 | title_snip='Simulating Electron Transport and Synchrotron Emission in Radio
  Galaâ€¦' | abs_len= 1433
[12:48:59] verify | result supports= False fit= 0.00 top= 0.00 invalid= no_quote cue_hint= False
[12:48:59] select | verify relaxed 7/10
[12:48:59] verify | func= Compares | rank= 6 | pid= astro-ph/0104413 | title_snip='Modelling X-ray variability in the structured atmospheres of hot stars' | abs_len= 676
[12:49:01] verify | result supports= False fit= 0.00 top= 0.00 invalid= no_quote cue_hint= False
[12:49:01] select | verify relaxed 8/10
[12:49:01] verify | func= Compares | rank= 7 | pid= astro-ph/0103083 | title_snip='A Simple Model for r-Process Scatter and Halo Evolution' | abs_len= 1288
[12:49:04] verify | result supports= False fit= 0.00 top= 0.00 invalid= no_quote cue_hint= False
[12:49:04] select | verify relaxed 9/10
[12:49:04] verify | func= Compares | rank= 8 | pid= astro-ph/0101024 | title_snip='Theory of Extrasolar Giant Planet Transits' | abs_len= 802
[12:49:07] verify | result supports= False fit= 0.00 top= 0.50 invalid= â€” cue_hint= False
[12:49:07] select | verify relaxed 10/10
[12:49:07] verify | func= Compares | rank= 9 | pid= astro-ph/0101375 | title_snip='Could We Detect Molecular Oxygen in the Atmosphere of a Transiting
  Eâ€¦' | abs_len= 1482
[12:49:10] verify | result supports= False fit= 0.00 top= 0.50 invalid= â€” cue_hint= False

================================================================================
FUNCTION: Compares
QUERY   : How do the effects of irradiation on planetary atmospheres, as described in the background of this study, compare to other models or observations of similar phenomena?
- WINNER: astro-ph/0104262 | Irradiated Planets
- QUOTE : We compared the effects of the irradiation in two extreme cases
- WHY   : sufficient

================================================================================
UNIFIED ANSWER (1â€“2 sentences, tagged):
The study models irradiated planets near different primary stars, finding that the atmospheric structure and emergent spectrum strongly depend on the presence or absence of dust clouds [Background] (astro-ph/0104262). The effects of irradiation in this study compare to other models by indicating that planets without dust opacity are brighter in the optical than dusty planets, with results consistent with recently reported upper limit values [Compares] (astro-ph/0104262).

ðŸ“„ Saved: outputs/function_selection_results.json
ðŸ“„ Saved: outputs/function_selection_results.jsonl
ðŸ“ Unified answer: outputs/function_answer_unified.txt
-> /home/anpa439f/anaconda3/envs/myenv/bin/python3 /data/horse/ws/anpa439f-Function_Retrieval_Citation/Research_Project/RetrievalAugmentedGeneration/classifying_question.py  (cwd=/data/horse/ws/anpa439f-Function_Retrieval_Citation/Research_Project/RetrievalAugmentedGeneration)
âœ… Saved to classified_outputs.jsonl
ðŸ”§ Ready for retrieval module (.py).
-> /home/anpa439f/anaconda3/envs/myenv/bin/python3 /data/horse/ws/anpa439f-Function_Retrieval_Citation/Research_Project/RetrievalAugmentedGeneration/Retreival_query_based.py --skip-reindex --index /data/horse/ws/anpa439f-Function_Retrieval_Citation/Research_Project/e5_index_subset_1/index.faiss --meta /data/horse/ws/anpa439f-Function_Retrieval_Citation/Research_Project/e5_index_subset_1/meta.parquet --topk 20  (cwd=/data/horse/ws/anpa439f-Function_Retrieval_Citation/Research_Project/RetrievalAugmentedGeneration)
âœ… Top-k candidates: /data/horse/ws/anpa439f-Function_Retrieval_Citation/Research_Project/RetrievalAugmentedGeneration/outputs/topk_candidates_query.jsonl
ðŸ”— Symlinked: /data/horse/ws/anpa439f-Function_Retrieval_Citation/Research_Project/outputs/topk_candidates_query.jsonl -> /data/horse/ws/anpa439f-Function_Retrieval_Citation/Research_Project/RetrievalAugmentedGeneration/outputs/topk_candidates_query.jsonl
-> /home/anpa439f/anaconda3/envs/myenv/bin/python3 /data/horse/ws/anpa439f-Function_Retrieval_Citation/Research_Project/RetrievalAugmentedGeneration/function_based_answer-2_copy.py --debug --max-check 10  (cwd=/data/horse/ws/anpa439f-Function_Retrieval_Citation/Research_Project/RetrievalAugmentedGeneration)

ðŸŽ‰ Pipeline complete.
  â€¢ Classified file : /data/horse/ws/anpa439f-Function_Retrieval_Citation/Research_Project/RetrievalAugmentedGeneration/classified_outputs.jsonl
  â€¢ TopK (canonical): /data/horse/ws/anpa439f-Function_Retrieval_Citation/Research_Project/RetrievalAugmentedGeneration/outputs/topk_candidates_query.jsonl
  â€¢ Final outputs   : /data/horse/ws/anpa439f-Function_Retrieval_Citation/Research_Project/RetrievalAugmentedGeneration/outputs
