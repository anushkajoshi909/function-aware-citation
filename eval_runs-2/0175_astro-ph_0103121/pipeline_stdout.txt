âœ… Available Models:
1. alias-code
2. alias-reasoning
3. alias-image-generation
4. alias-vision
5. alias-ha
6. meta-llama/Llama-3.3-70B-Instruct
7. meta-llama/Llama-3.1-8B-Instruct
8. Qwen/Qwen2-VL-7B-Instruct
9. openGPT-X/Teuken-7B-instruct-research-v0.4
10. deepseek-ai/DeepSeek-Coder-V2-Lite-Instruct
11. Qwen/Qwen3-Coder-30B-A3B-Instruct
12. Qwen/Qwen3-Embedding-4B
13. stabilityai/stable-diffusion-3.5-large-turbo
14. black-forest-labs/FLUX.1-dev
15. openai/whisper-large-v3
16. Kokoro-82M
17. tts-1-hd
18. deepseek-ai/DeepSeek-R1
19. openai/gpt-oss-120b
20. meta-llama/Llama-4-Scout-17B-16E-Instruct

ðŸ‘‰ Select a model number (default = 1): 
âœ… Using model: openai/gpt-oss-120b

ðŸ” Enter a scientific query or topic: 
ðŸ”Ž Citation Function Classification:
{
  "citation_functions": [
    "Background",
    "Compares"
  ],
  "justification": "The query seeks foundational context about detecting stellar populations and asks how this relates to earlier studies on galaxy interactions and distance measurements, requiring both background information and a comparative link to prior work."
}

âœ… Saved to classified_outputs.jsonl
ðŸ”§ Ready for retrieval module (handled in a separate file).
âš¡ SKIP_REINDEX=1 â€” using existing FAISS index + meta; not scanning raw JSONL shards.
âœ… Top-k candidates (FAISS): /data/horse/ws/anpa439f-Function_Retrieval_Citation/Research_Project/RetrievalAugmentedGeneration/outputs/topk_candidates_query.jsonl
[01:16:19] main | args: Namespace(max_check=10, debug=True)
[01:16:19] read_last_jsonl | path= classified_outputs.jsonl
[01:16:19] read_last_jsonl | total_lines= 1
[01:16:19] main | query='How does the detection of upper main sequence stars and red giant branch stars in the halo of an amorphous galaxy relate to previous work on galaxy interactions and distance measurements?' | funcs=['Background', 'Compares']
[01:16:21] main | core_terms= ['upper main sequence stars', 'red giant branch stars', 'galaxy halo', 'galaxy interactions', 'distance measurements']
[01:16:21] load_topk_jsonl | path= /data/horse/ws/anpa439f-Function_Retrieval_Citation/Research_Project/outputs/topk_candidates_query.jsonl
[01:16:21] load_topk_jsonl | rows= 20
[01:16:21] load_topk_jsonl | first: rank= 0 paper_id= astro-ph/0103121 title_snip='Observation of the Halo of NGC 3077 Near the "Garland" Region Using thâ€¦' abs_len= 1197
[01:16:21] main | running function= Background
[01:16:21] select | function= Background | candidates_in= 20
[01:16:21] select | core_terms= ['upper main sequence stars', 'red giant branch stars', 'galaxy halo', 'galaxy interactions', 'distance measurements']
[01:16:21] select | no cosine prune; kept=20/20
[01:16:21] select | pool_size= 10 | ranks= [0, 1, 2, 3, 4, 5, 6, 7, 8, 9] | pids= ['astro-ph/0103121', 'astro-ph/0102397', 'astro-ph/0101338', 'astro-ph/0103502', 'astro-ph/0101271', 'astro-ph/0103518', 'astro-ph/0101436', 'astro-ph/0104037', 'astro-ph/0102436', 'astro-ph/0101323']
[01:16:21] select | verify relaxed 1/10
[01:16:21] verify | func= Background | rank= 0 | pid= astro-ph/0103121 | title_snip='Observation of the Halo of NGC 3077 Near the "Garland" Region Using thâ€¦' | abs_len= 1197
[01:16:24] verify | result supports= True fit= 0.80 top= 0.90 invalid= â€” cue_hint= False
[01:16:24] select | verify relaxed 2/10
[01:16:24] verify | func= Background | rank= 1 | pid= astro-ph/0102397 | title_snip='A Near-Infrared Stellar Census of Blue Compact Dwarf Galaxies: The
  Wâ€¦' | abs_len= 1230
[01:16:27] verify | result supports= False fit= 0.00 top= 0.20 invalid= â€” cue_hint= False
[01:16:27] select | verify relaxed 3/10
[01:16:27] verify | func= Background | rank= 2 | pid= astro-ph/0101338 | title_snip='Observational Signatures of the First Stars' | abs_len= 569
[01:16:30] verify | result supports= False fit= 0.00 top= 0.00 invalid= no_quote cue_hint= False
[01:16:30] select | verify relaxed 4/10
[01:16:30] verify | func= Background | rank= 3 | pid= astro-ph/0103502 | title_snip='Abundances in Stars from the Red Giant Branch Tip to the Near the Mainâ€¦' | abs_len= 546
[01:16:33] verify | result supports= False fit= 0.00 top= 0.90 invalid= off_topic_no_core_in_abstract cue_hint= False
[01:16:33] select | verify relaxed 5/10
[01:16:33] verify | func= Background | rank= 4 | pid= astro-ph/0101271 | title_snip='The X-ray Emission in Post-Merger Ellipticals' | abs_len= 909
[01:16:35] verify | result supports= False fit= 0.00 top= 0.00 invalid= no_quote cue_hint= False
[01:16:35] select | verify relaxed 6/10
[01:16:35] verify | func= Background | rank= 5 | pid= astro-ph/0103518 | title_snip='Background galaxies as reddening probes throughout the Magellanic Clouâ€¦' | abs_len= 1323
[01:16:38] verify | result supports= False fit= 0.00 top= 0.00 invalid= no_quote cue_hint= False
[01:16:38] select | verify relaxed 7/10
[01:16:38] verify | func= Background | rank= 6 | pid= astro-ph/0101436 | title_snip='Photometry and the Metallicity Distribution of the Outer Halo of M31' | abs_len= 1815
[01:16:41] verify | result supports= False fit= 0.00 top= 0.90 invalid= off_topic_no_core_in_abstract cue_hint= False
[01:16:41] select | verify relaxed 8/10
[01:16:41] verify | func= Background | rank= 7 | pid= astro-ph/0104037 | title_snip='Faint End of the Galaxy Luminosity Function: A Chronometer for Structuâ€¦' | abs_len= 1418
[01:16:43] verify | result supports= False fit= 0.00 top= 0.00 invalid= no_quote cue_hint= False
[01:16:43] select | verify relaxed 9/10
[01:16:43] verify | func= Background | rank= 8 | pid= astro-ph/0102436 | title_snip='The Host Haloes of Lyman Break Galaxies and Sub-millimeter Sources' | abs_len= 1580
[01:16:46] verify | result supports= False fit= 0.00 top= 0.00 invalid= no_quote cue_hint= False
[01:16:46] select | verify relaxed 10/10
[01:16:46] verify | func= Background | rank= 9 | pid= astro-ph/0101323 | title_snip='Lithium-Beryllium-Boron Evolution: From Meneguzzi, Audouze and Reeves
â€¦' | abs_len= 595
[01:16:48] verify | result supports= False fit= 0.00 top= 0.00 invalid= no_quote cue_hint= False

================================================================================
FUNCTION: Background
QUERY   : How does the detection of upper main sequence stars and red giant branch stars in the halo of an amorphous galaxy relate to previous work on galaxy interactions and distance measurements?
- WINNER: astro-ph/0103121 | Observation of the Halo of NGC 3077 Near the "Garland" Region Using the
  Hubble Space Telescope
- QUOTE : using Wide Field Planetary Camera~2 on board the Hubble Space Telescope
- WHY   : sufficient
- ANSWER: The detection of upper main sequence stars and red giant branch stars in the halo of an amorphous galaxy relates to previous work on galaxy interactions, as it may be associated with star formation triggered by tidal interactions (astro-ph/0103121).
[01:16:53] main | running function= Compares
[01:16:53] select | function= Compares | candidates_in= 20
[01:16:53] select | core_terms= ['upper main sequence stars', 'red giant branch stars', 'galaxy halo', 'galaxy interactions', 'distance measurements']
[01:16:53] select | no cosine prune; kept=20/20
[01:16:53] select | pool_size= 10 | ranks= [0, 1, 2, 3, 4, 5, 6, 7, 8, 9] | pids= ['astro-ph/0103121', 'astro-ph/0102397', 'astro-ph/0101338', 'astro-ph/0103502', 'astro-ph/0101271', 'astro-ph/0103518', 'astro-ph/0101436', 'astro-ph/0104037', 'astro-ph/0102436', 'astro-ph/0101323']
[01:16:53] select | verify relaxed 1/10
[01:16:53] verify | func= Compares | rank= 0 | pid= astro-ph/0103121 | title_snip='Observation of the Halo of NGC 3077 Near the "Garland" Region Using thâ€¦' | abs_len= 1197
[01:16:57] verify | result supports= True fit= 0.80 top= 0.90 invalid= â€” cue_hint= False
[01:16:57] select | verify relaxed 2/10
[01:16:57] verify | func= Compares | rank= 1 | pid= astro-ph/0102397 | title_snip='A Near-Infrared Stellar Census of Blue Compact Dwarf Galaxies: The
  Wâ€¦' | abs_len= 1230
[01:17:00] verify | result supports= False fit= 0.00 top= 0.20 invalid= â€” cue_hint= False
[01:17:00] select | verify relaxed 3/10
[01:17:00] verify | func= Compares | rank= 2 | pid= astro-ph/0101338 | title_snip='Observational Signatures of the First Stars' | abs_len= 569
[01:17:02] verify | result supports= False fit= 0.00 top= 0.00 invalid= no_quote cue_hint= False
[01:17:02] select | verify relaxed 4/10
[01:17:02] verify | func= Compares | rank= 3 | pid= astro-ph/0103502 | title_snip='Abundances in Stars from the Red Giant Branch Tip to the Near the Mainâ€¦' | abs_len= 546
[01:17:05] verify | result supports= False fit= 0.00 top= 0.20 invalid= â€” cue_hint= False
[01:17:05] select | verify relaxed 5/10
[01:17:05] verify | func= Compares | rank= 4 | pid= astro-ph/0101271 | title_snip='The X-ray Emission in Post-Merger Ellipticals' | abs_len= 909
[01:17:08] verify | result supports= False fit= 0.00 top= 0.00 invalid= no_quote cue_hint= False
[01:17:08] select | verify relaxed 6/10
[01:17:08] verify | func= Compares | rank= 5 | pid= astro-ph/0103518 | title_snip='Background galaxies as reddening probes throughout the Magellanic Clouâ€¦' | abs_len= 1323
[01:17:10] verify | result supports= False fit= 0.00 top= 0.00 invalid= no_quote cue_hint= False
[01:17:10] select | verify relaxed 7/10
[01:17:10] verify | func= Compares | rank= 6 | pid= astro-ph/0101436 | title_snip='Photometry and the Metallicity Distribution of the Outer Halo of M31' | abs_len= 1815
[01:17:14] verify | result supports= False fit= 0.00 top= 0.90 invalid= off_topic_no_core_in_abstract cue_hint= False
[01:17:14] select | verify relaxed 8/10
[01:17:14] verify | func= Compares | rank= 7 | pid= astro-ph/0104037 | title_snip='Faint End of the Galaxy Luminosity Function: A Chronometer for Structuâ€¦' | abs_len= 1418
[01:17:17] verify | result supports= False fit= 0.00 top= 0.20 invalid= â€” cue_hint= False
[01:17:17] select | verify relaxed 9/10
[01:17:17] verify | func= Compares | rank= 8 | pid= astro-ph/0102436 | title_snip='The Host Haloes of Lyman Break Galaxies and Sub-millimeter Sources' | abs_len= 1580
[01:17:19] verify | result supports= False fit= 0.00 top= 0.00 invalid= no_quote cue_hint= False
[01:17:19] select | verify relaxed 10/10
[01:17:19] verify | func= Compares | rank= 9 | pid= astro-ph/0101323 | title_snip='Lithium-Beryllium-Boron Evolution: From Meneguzzi, Audouze and Reeves
â€¦' | abs_len= 595
[01:17:22] verify | result supports= False fit= 0.00 top= 0.00 invalid= no_quote cue_hint= False

================================================================================
FUNCTION: Compares
QUERY   : How does the detection of upper main sequence stars and red giant branch stars in the halo of an amorphous galaxy relate to previous work on galaxy interactions and distance measurements?
- WINNER: astro-ph/0103121 | Observation of the Halo of NGC 3077 Near the "Garland" Region Using the
  Hubble Space Telescope
- QUOTE : the observed upper main sequence stars are likely the results of the star formation triggered by the M81-NGC3077 tidal interaction
- WHY   : sufficient
- ANSWER: The detection of upper main sequence stars and red giant branch stars in the halo of NGC 3077 is compared to previous work on galaxy interactions, suggesting that the observed stars are likely the result of star formation triggered by the tidal interaction with M81. The distance measurement of NGC 3077 is also compared to estimates of other galaxies in the M81 Group, showing good agreement (astro-ph/0103121).

ðŸ“„ Saved: outputs/function_selection_results.json
ðŸ“„ Saved: outputs/function_selection_results.jsonl
ðŸ“ Answers-only: outputs/function_answers.txt
-> /home/anpa439f/anaconda3/envs/myenv/bin/python3 /data/horse/ws/anpa439f-Function_Retrieval_Citation/Research_Project/RetrievalAugmentedGeneration/classifying_question.py  (cwd=/data/horse/ws/anpa439f-Function_Retrieval_Citation/Research_Project/RetrievalAugmentedGeneration)
âœ… Saved to classified_outputs.jsonl
ðŸ”§ Ready for retrieval module (.py).
-> /home/anpa439f/anaconda3/envs/myenv/bin/python3 /data/horse/ws/anpa439f-Function_Retrieval_Citation/Research_Project/RetrievalAugmentedGeneration/Retreival_query_based.py --skip-reindex --index /data/horse/ws/anpa439f-Function_Retrieval_Citation/Research_Project/e5_index_subset_1/index.faiss --meta /data/horse/ws/anpa439f-Function_Retrieval_Citation/Research_Project/e5_index_subset_1/meta.parquet --topk 20  (cwd=/data/horse/ws/anpa439f-Function_Retrieval_Citation/Research_Project/RetrievalAugmentedGeneration)
âœ… Top-k candidates: /data/horse/ws/anpa439f-Function_Retrieval_Citation/Research_Project/RetrievalAugmentedGeneration/outputs/topk_candidates_query.jsonl
ðŸ”— Symlinked: /data/horse/ws/anpa439f-Function_Retrieval_Citation/Research_Project/outputs/topk_candidates_query.jsonl -> /data/horse/ws/anpa439f-Function_Retrieval_Citation/Research_Project/RetrievalAugmentedGeneration/outputs/topk_candidates_query.jsonl
-> /home/anpa439f/anaconda3/envs/myenv/bin/python3 /data/horse/ws/anpa439f-Function_Retrieval_Citation/Research_Project/RetrievalAugmentedGeneration/function_based_answer-2.py --debug --max-check 10  (cwd=/data/horse/ws/anpa439f-Function_Retrieval_Citation/Research_Project/RetrievalAugmentedGeneration)

ðŸŽ‰ Pipeline complete.
  â€¢ Classified file : /data/horse/ws/anpa439f-Function_Retrieval_Citation/Research_Project/RetrievalAugmentedGeneration/classified_outputs.jsonl
  â€¢ TopK (canonical): /data/horse/ws/anpa439f-Function_Retrieval_Citation/Research_Project/RetrievalAugmentedGeneration/outputs/topk_candidates_query.jsonl
  â€¢ Final outputs   : /data/horse/ws/anpa439f-Function_Retrieval_Citation/Research_Project/RetrievalAugmentedGeneration/outputs
