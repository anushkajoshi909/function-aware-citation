âœ… Available Models:
1. alias-code
2. alias-reasoning
3. alias-image-generation
4. alias-vision
5. alias-ha
6. meta-llama/Llama-3.3-70B-Instruct
7. meta-llama/Llama-3.1-8B-Instruct
8. Qwen/Qwen2-VL-7B-Instruct
9. openGPT-X/Teuken-7B-instruct-research-v0.4
10. deepseek-ai/DeepSeek-Coder-V2-Lite-Instruct
11. Qwen/Qwen3-Coder-30B-A3B-Instruct
12. Qwen/Qwen3-Embedding-4B
13. stabilityai/stable-diffusion-3.5-large-turbo
14. black-forest-labs/FLUX.1-dev
15. openai/whisper-large-v3
16. Kokoro-82M
17. tts-1-hd
18. deepseek-ai/DeepSeek-R1
19. openai/gpt-oss-120b
20. meta-llama/Llama-4-Scout-17B-16E-Instruct

ðŸ‘‰ Select a model number (default = 1): 
âœ… Using model: openai/gpt-oss-120b

ðŸ” Enter a scientific query or topic: 
ðŸ”Ž Citation Function Classification:
{
  "citation_functions": [
    "Motivation",
    "FutureWork"
  ],
  "justification": "The query asks about current limitations that drive the need for further investigation, highlighting both the motivating factors and the direction for future research."
}

âœ… Saved to classified_outputs.jsonl
ðŸ”§ Ready for retrieval module (handled in a separate file).
âš¡ SKIP_REINDEX=1 â€” using existing FAISS index + meta; not scanning raw JSONL shards.
âœ… Top-k candidates (FAISS): /data/horse/ws/anpa439f-Function_Retrieval_Citation/Research_Project/RetrievalAugmentedGeneration/outputs/topk_candidates_query.jsonl
[22:35:05] main | args: Namespace(max_check=10, debug=True)
[22:35:05] read_last_jsonl | path= classified_outputs.jsonl
[22:35:05] read_last_jsonl | total_lines= 1
[22:35:05] main | query='What limitations in current understanding of supernova explosions and their interactions with the circumstellar medium motivate further research and potential future work in this area?' | funcs=['Motivation', 'FutureWork']
[22:35:08] main | core_terms= ['supernova', 'circumstellar medium', 'explosion', 'interaction']
[22:35:08] load_topk_jsonl | path= /data/horse/ws/anpa439f-Function_Retrieval_Citation/Research_Project/outputs/topk_candidates_query.jsonl
[22:35:08] load_topk_jsonl | rows= 20
[22:35:08] load_topk_jsonl | first: rank= 0 paper_id= astro-ph/0103015 title_snip='Supernova Explosions and Neutron Star Formation' abs_len= 1135
[22:35:08] main | running function= Motivation
[22:35:08] select | function= Motivation | candidates_in= 20
[22:35:08] select | core_terms= ['supernova', 'circumstellar medium', 'explosion', 'interaction']
[22:35:08] select | no cosine prune; kept=20/20
[22:35:08] select | pool_size= 10 | ranks= [0, 1, 2, 3, 4, 5, 6, 7, 8, 9] | pids= ['astro-ph/0103015', 'astro-ph/0102212', 'hep-ph/0104094', 'astro-ph/0101018', 'astro-ph/0104156', 'astro-ph/0101043', 'astro-ph/0102087', 'astro-ph/0103075', 'astro-ph/0103412', 'astro-ph/0103461']
[22:35:08] select | verify relaxed 1/10
[22:35:08] verify | func= Motivation | rank= 0 | pid= astro-ph/0103015 | title_snip='Supernova Explosions and Neutron Star Formation' | abs_len= 1135
[22:35:11] verify | result supports= True fit= 0.80 top= 0.90 invalid= â€” cue_hint= False
[22:35:11] select | verify relaxed 2/10
[22:35:11] verify | func= Motivation | rank= 1 | pid= astro-ph/0102212 | title_snip='Theoretical Implications of the Gamma-Ray Burst - Supernova Connection' | abs_len= 721
[22:35:14] verify | result supports= True fit= 0.80 top= 0.90 invalid= â€” cue_hint= False
[22:35:14] select | verify relaxed 3/10
[22:35:14] verify | func= Motivation | rank= 2 | pid= hep-ph/0104094 | title_snip='Supernova Constraints on Neutrino Mass and Mixing' | abs_len= 396
[22:35:17] verify | result supports= False fit= 0.00 top= 0.20 invalid= â€” cue_hint= False
[22:35:17] select | verify relaxed 4/10
[22:35:17] verify | func= Motivation | rank= 3 | pid= astro-ph/0101018 | title_snip='Science Prospects for SPI' | abs_len= 1822
[22:35:20] verify | result supports= False fit= 0.00 top= 0.50 invalid= no_quote cue_hint= False
[22:35:20] select | verify relaxed 5/10
[22:35:20] verify | func= Motivation | rank= 4 | pid= astro-ph/0104156 | title_snip='SN1993J VLBI (I): The Center of the Explosion and a Limit on Anisotropâ€¦' | abs_len= 1795
[22:35:23] verify | result supports= True fit= 0.80 top= 0.90 invalid= â€” cue_hint= False
[22:35:23] select | verify relaxed 6/10
[22:35:23] verify | func= Motivation | rank= 5 | pid= astro-ph/0101043 | title_snip='Young Supernova Remnants: Issues and Prospects' | abs_len= 386
[22:35:26] verify | result supports= True fit= 0.80 top= 0.90 invalid= â€” cue_hint= True
[22:35:26] select | verify relaxed 7/10
[22:35:26] verify | func= Motivation | rank= 6 | pid= astro-ph/0102087 | title_snip='The X-ray nebula of the filled center supernova remnant 3C58 and its
 â€¦' | abs_len= 1417
[22:35:29] verify | result supports= False fit= 0.00 top= 0.50 invalid= no_quote cue_hint= False
[22:35:29] select | verify relaxed 8/10
[22:35:29] verify | func= Motivation | rank= 7 | pid= astro-ph/0103075 | title_snip='Supernova constraints on spatial variations of the vacuum energy densiâ€¦' | abs_len= 810
[22:35:32] verify | result supports= False fit= 0.00 top= 0.20 invalid= â€” cue_hint= False
[22:35:32] select | verify relaxed 9/10
[22:35:32] verify | func= Motivation | rank= 8 | pid= astro-ph/0103412 | title_snip='Thermal X-ray emission of the remnants of ashperical Supernova
  exploâ€¦' | abs_len= 518
[22:35:34] verify | result supports= False fit= 0.00 top= 0.50 invalid= no_quote cue_hint= False
[22:35:34] select | verify relaxed 10/10
[22:35:34] verify | func= Motivation | rank= 9 | pid= astro-ph/0103461 | title_snip='Observations of Circumstellar Disks' | abs_len= 1289
[22:35:37] verify | result supports= False fit= 0.00 top= 0.00 invalid= no_quote cue_hint= False

================================================================================
FUNCTION: Motivation
QUERY   : What limitations in current understanding of supernova explosions and their interactions with the circumstellar medium motivate further research and potential future work in this area?
- WINNER: astro-ph/0101043 | Young Supernova Remnants: Issues and Prospects
- QUOTE : several challenges
- WHY   : sufficient
- ANSWER: The current understanding of supernova explosions and their interactions with the circumstellar medium is limited by several challenges, including the lack of observed very young supernova remnants and the difficulty of inferring the nature of the supernova and its progenitor star. These limitations motivate further research to address these gaps in knowledge (astro-ph/0101043).
[22:35:41] main | running function= FutureWork
[22:35:41] select | function= FutureWork | candidates_in= 20
[22:35:41] select | core_terms= ['supernova', 'circumstellar medium', 'explosion', 'interaction']
[22:35:41] select | no cosine prune; kept=20/20
[22:35:41] select | pool_size= 10 | ranks= [0, 1, 2, 3, 4, 5, 6, 7, 8, 9] | pids= ['astro-ph/0103015', 'astro-ph/0102212', 'hep-ph/0104094', 'astro-ph/0101018', 'astro-ph/0104156', 'astro-ph/0101043', 'astro-ph/0102087', 'astro-ph/0103075', 'astro-ph/0103412', 'astro-ph/0103461']
[22:35:41] select | verify relaxed 1/10
[22:35:41] verify | func= FutureWork | rank= 0 | pid= astro-ph/0103015 | title_snip='Supernova Explosions and Neutron Star Formation' | abs_len= 1135
[22:35:44] verify | result supports= True fit= 0.80 top= 0.90 invalid= â€” cue_hint= False
[22:35:44] select | verify relaxed 2/10
[22:35:44] verify | func= FutureWork | rank= 1 | pid= astro-ph/0102212 | title_snip='Theoretical Implications of the Gamma-Ray Burst - Supernova Connection' | abs_len= 721
[22:35:47] verify | result supports= False fit= 0.00 top= 0.80 invalid= â€” cue_hint= False
[22:35:47] select | verify relaxed 3/10
[22:35:47] verify | func= FutureWork | rank= 2 | pid= hep-ph/0104094 | title_snip='Supernova Constraints on Neutrino Mass and Mixing' | abs_len= 396
[22:35:50] verify | result supports= False fit= 0.00 top= 0.20 invalid= â€” cue_hint= False
[22:35:50] select | verify relaxed 4/10
[22:35:50] verify | func= FutureWork | rank= 3 | pid= astro-ph/0101018 | title_snip='Science Prospects for SPI' | abs_len= 1822
[22:35:53] verify | result supports= False fit= 0.00 top= 0.60 invalid= â€” cue_hint= False
[22:35:53] select | verify relaxed 5/10
[22:35:53] verify | func= FutureWork | rank= 4 | pid= astro-ph/0104156 | title_snip='SN1993J VLBI (I): The Center of the Explosion and a Limit on Anisotropâ€¦' | abs_len= 1795
[22:35:57] verify | result supports= True fit= 0.80 top= 0.90 invalid= â€” cue_hint= False
[22:35:57] select | verify relaxed 6/10
[22:35:57] verify | func= FutureWork | rank= 5 | pid= astro-ph/0101043 | title_snip='Young Supernova Remnants: Issues and Prospects' | abs_len= 386
[22:35:59] verify | result supports= True fit= 0.80 top= 0.90 invalid= â€” cue_hint= False
[22:35:59] select | verify relaxed 7/10
[22:35:59] verify | func= FutureWork | rank= 6 | pid= astro-ph/0102087 | title_snip='The X-ray nebula of the filled center supernova remnant 3C58 and its
 â€¦' | abs_len= 1417
[22:36:03] verify | result supports= False fit= 0.00 top= 0.60 invalid= â€” cue_hint= False
[22:36:03] select | verify relaxed 8/10
[22:36:03] verify | func= FutureWork | rank= 7 | pid= astro-ph/0103075 | title_snip='Supernova constraints on spatial variations of the vacuum energy densiâ€¦' | abs_len= 810
[22:36:05] verify | result supports= False fit= 0.00 top= 0.20 invalid= â€” cue_hint= False
[22:36:05] select | verify relaxed 9/10
[22:36:05] verify | func= FutureWork | rank= 8 | pid= astro-ph/0103412 | title_snip='Thermal X-ray emission of the remnants of ashperical Supernova
  exploâ€¦' | abs_len= 518
[22:36:08] verify | result supports= False fit= 0.00 top= 0.80 invalid= no_quote cue_hint= False
[22:36:08] select | verify relaxed 10/10
[22:36:08] verify | func= FutureWork | rank= 9 | pid= astro-ph/0103461 | title_snip='Observations of Circumstellar Disks' | abs_len= 1289
[22:36:10] verify | result supports= False fit= 0.00 top= 0.00 invalid= no_quote cue_hint= False

================================================================================
FUNCTION: FutureWork
QUERY   : What limitations in current understanding of supernova explosions and their interactions with the circumstellar medium motivate further research and potential future work in this area?
- WINNER: astro-ph/0103015 | Supernova Explosions and Neutron Star Formation
- QUOTE : may be crucial to resolve the problem
- WHY   : sufficient
- ANSWER: Further research is needed to overcome the limitations of current spherical models, which fail to produce explosions even with accurate neutrino transport. Future work may involve multi-dimensional hydrodynamics, general relativity, and improved understanding of neutrino interactions in neutron star matter to better comprehend supernova explosions and their interactions with the circumstellar medium (astro-ph/0103015).

ðŸ“„ Saved: outputs/function_selection_results.json
ðŸ“„ Saved: outputs/function_selection_results.jsonl
ðŸ“ Answers-only: outputs/function_answers.txt
-> /home/anpa439f/anaconda3/envs/myenv/bin/python3 /data/horse/ws/anpa439f-Function_Retrieval_Citation/Research_Project/RetrievalAugmentedGeneration/classifying_question.py  (cwd=/data/horse/ws/anpa439f-Function_Retrieval_Citation/Research_Project/RetrievalAugmentedGeneration)
âœ… Saved to classified_outputs.jsonl
ðŸ”§ Ready for retrieval module (.py).
-> /home/anpa439f/anaconda3/envs/myenv/bin/python3 /data/horse/ws/anpa439f-Function_Retrieval_Citation/Research_Project/RetrievalAugmentedGeneration/Retreival_query_based.py --skip-reindex --index /data/horse/ws/anpa439f-Function_Retrieval_Citation/Research_Project/e5_index_subset_1/index.faiss --meta /data/horse/ws/anpa439f-Function_Retrieval_Citation/Research_Project/e5_index_subset_1/meta.parquet --topk 20  (cwd=/data/horse/ws/anpa439f-Function_Retrieval_Citation/Research_Project/RetrievalAugmentedGeneration)
âœ… Top-k candidates: /data/horse/ws/anpa439f-Function_Retrieval_Citation/Research_Project/RetrievalAugmentedGeneration/outputs/topk_candidates_query.jsonl
ðŸ”— Symlinked: /data/horse/ws/anpa439f-Function_Retrieval_Citation/Research_Project/outputs/topk_candidates_query.jsonl -> /data/horse/ws/anpa439f-Function_Retrieval_Citation/Research_Project/RetrievalAugmentedGeneration/outputs/topk_candidates_query.jsonl
-> /home/anpa439f/anaconda3/envs/myenv/bin/python3 /data/horse/ws/anpa439f-Function_Retrieval_Citation/Research_Project/RetrievalAugmentedGeneration/function_based_answer-2.py --debug --max-check 10  (cwd=/data/horse/ws/anpa439f-Function_Retrieval_Citation/Research_Project/RetrievalAugmentedGeneration)

ðŸŽ‰ Pipeline complete.
  â€¢ Classified file : /data/horse/ws/anpa439f-Function_Retrieval_Citation/Research_Project/RetrievalAugmentedGeneration/classified_outputs.jsonl
  â€¢ TopK (canonical): /data/horse/ws/anpa439f-Function_Retrieval_Citation/Research_Project/RetrievalAugmentedGeneration/outputs/topk_candidates_query.jsonl
  â€¢ Final outputs   : /data/horse/ws/anpa439f-Function_Retrieval_Citation/Research_Project/RetrievalAugmentedGeneration/outputs
