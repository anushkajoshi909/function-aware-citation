âœ… Available Models:
1. alias-code
2. alias-reasoning
3. alias-image-generation
4. alias-vision
5. alias-ha
6. meta-llama/Llama-3.3-70B-Instruct
7. meta-llama/Llama-3.1-8B-Instruct
8. Qwen/Qwen2-VL-7B-Instruct
9. openGPT-X/Teuken-7B-instruct-research-v0.4
10. deepseek-ai/DeepSeek-Coder-V2-Lite-Instruct
11. Qwen/Qwen3-Coder-30B-A3B-Instruct
12. Qwen/Qwen3-Embedding-4B
13. stabilityai/stable-diffusion-3.5-large-turbo
14. black-forest-labs/FLUX.1-dev
15. openai/whisper-large-v3
16. Kokoro-82M
17. tts-1-hd
18. deepseek-ai/DeepSeek-R1
19. openai/gpt-oss-120b
20. meta-llama/Llama-4-Scout-17B-16E-Instruct

ðŸ‘‰ Select a model number (default = 1): 
âœ… Using model: openai/gpt-oss-120b

ðŸ” Enter a scientific query or topic: 
ðŸ”Ž Citation Function Classification:
{
  "citation_functions": [
    "Motivation",
    "Extends"
  ],
  "justification": "The query asks why the BMW catalogue was created (motivation) and how it builds upon prior X\u2011ray source detection methods (extends)."
}

âœ… Saved to classified_outputs.jsonl
ðŸ”§ Ready for retrieval module (handled in a separate file).
âš¡ SKIP_REINDEX=1 â€” using existing FAISS index + meta; not scanning raw JSONL shards.
âœ… Top-k candidates (FAISS): /data/horse/ws/anpa439f-Function_Retrieval_Citation/Research_Project/RetrievalAugmentedGeneration/outputs/topk_candidates_query.jsonl
[21:31:35] main | args: Namespace(max_check=10, debug=True)
[21:31:35] read_last_jsonl | path= classified_outputs.jsonl
[21:31:35] read_last_jsonl | total_lines= 1
[21:31:35] main | query='How does the development of the BMW catalogue motivate and extend existing work in X-ray source detection?' | funcs=['Motivation', 'Extends']
[21:31:37] main | core_terms= ['BMW catalogue', 'X-ray source', 'source detection', 'BMW', 'X-ray']
[21:31:37] load_topk_jsonl | path= /data/horse/ws/anpa439f-Function_Retrieval_Citation/Research_Project/outputs/topk_candidates_query.jsonl
[21:31:37] load_topk_jsonl | rows= 20
[21:31:37] load_topk_jsonl | first: rank= 0 paper_id= astro-ph/0103236 title_snip='BMW: a ROSAT-HRI source catalogue obtained with a wavelet transform
  â€¦' abs_len= 1232
[21:31:37] main | running function= Motivation
[21:31:37] select | function= Motivation | candidates_in= 20
[21:31:37] select | core_terms= ['BMW catalogue', 'X-ray source', 'source detection', 'BMW', 'X-ray']
[21:31:37] select | no cosine prune; kept=20/20
[21:31:37] select | pool_size= 10 | ranks= [0, 1, 2, 3, 4, 5, 6, 7, 8, 9] | pids= ['astro-ph/0103236', 'astro-ph/0101437', 'astro-ph/0103348', 'astro-ph/0102297', 'astro-ph/0104077', 'astro-ph/0102132', 'astro-ph/0102497', 'astro-ph/0101093', 'astro-ph/0101363', 'astro-ph/0101467']
[21:31:37] select | verify relaxed 1/10
[21:31:37] verify | func= Motivation | rank= 0 | pid= astro-ph/0103236 | title_snip='BMW: a ROSAT-HRI source catalogue obtained with a wavelet transform
  â€¦' | abs_len= 1232
[21:31:40] verify | result supports= False fit= 0.00 top= 0.90 invalid= quote_not_in_abstract cue_hint= True
[21:31:40] select | verify relaxed 2/10
[21:31:40] verify | func= Motivation | rank= 1 | pid= astro-ph/0101437 | title_snip='The BMW Deep X-ray Cluster Survey' | abs_len= 1388
[21:31:43] verify | result supports= True fit= 0.80 top= 0.90 invalid= â€” cue_hint= False
[21:31:43] select | verify relaxed 3/10
[21:31:43] verify | func= Motivation | rank= 2 | pid= astro-ph/0103348 | title_snip='The BMW X-ray Cluster Survey' | abs_len= 509
[21:31:46] verify | result supports= True fit= 0.80 top= 0.90 invalid= â€” cue_hint= False
[21:31:46] select | verify relaxed 4/10
[21:31:46] verify | func= Motivation | rank= 3 | pid= astro-ph/0102297 | title_snip='Comparison of source detection procedures for XMM-Newton images' | abs_len= 1589
[21:31:49] verify | result supports= False fit= 0.00 top= 0.00 invalid= no_quote cue_hint= False
[21:31:49] select | verify relaxed 5/10
[21:31:49] verify | func= Motivation | rank= 4 | pid= astro-ph/0104077 | title_snip='Predicted Planck Extragalactic Point Source Catalogue' | abs_len= 1155
[21:31:51] verify | result supports= False fit= 0.00 top= 0.00 invalid= no_quote cue_hint= False
[21:31:51] select | verify relaxed 6/10
[21:31:51] verify | func= Motivation | rank= 5 | pid= astro-ph/0102132 | title_snip='Public Imaging Surveys: Scientific Opportunities' | abs_len= 1300
[21:31:54] verify | result supports= False fit= 0.00 top= 0.00 invalid= no_quote cue_hint= False
[21:31:54] select | verify relaxed 7/10
[21:31:54] verify | func= Motivation | rank= 6 | pid= astro-ph/0102497 | title_snip='The radio source counts at 15 GHz and their implications for cm-wave Câ€¦' | abs_len= 973
[21:31:56] verify | result supports= False fit= 0.00 top= 0.00 invalid= no_quote cue_hint= False
[21:31:56] select | verify relaxed 8/10
[21:31:56] verify | func= Motivation | rank= 7 | pid= astro-ph/0101093 | title_snip='Faint X-ray sources resolved in the ASCA Galactic plane survey and theâ€¦' | abs_len= 1767
[21:31:58] verify | result supports= False fit= 0.00 top= 0.00 invalid= no_quote cue_hint= False
[21:31:58] select | verify relaxed 9/10
[21:31:58] verify | func= Motivation | rank= 8 | pid= astro-ph/0101363 | title_snip='High Energy X-Ray Emission in Clusters of Galaxies' | abs_len= 983
[21:32:01] verify | result supports= False fit= 0.00 top= 0.00 invalid= no_quote cue_hint= False
[21:32:01] select | verify relaxed 10/10
[21:32:01] verify | func= Motivation | rank= 9 | pid= astro-ph/0101467 | title_snip='The X-ray surface brightness distribution from diffuse gas' | abs_len= 1509
[21:32:03] verify | result supports= False fit= 0.00 top= 0.00 invalid= no_quote cue_hint= False

================================================================================
FUNCTION: Motivation
QUERY   : How does the development of the BMW catalogue motivate and extend existing work in X-ray source detection?
- WINNER: astro-ph/0101437 | The BMW Deep X-ray Cluster Survey
- QUOTE : based on the still unexploited ROSAT-HRI archival observations
- WHY   : sufficient
- ANSWER: The development of the BMW catalogue motivates existing work in X-ray source detection by addressing the need for improved detection of low surface-brightness sources, such as distant clusters. This is important because it enables the identification of rare, highly-luminous systems at higher redshifts, which can provide valuable insights into the universe's structure and evolution (astro-ph/0101437).
[21:32:08] main | running function= Extends
[21:32:08] select | function= Extends | candidates_in= 20
[21:32:08] select | core_terms= ['BMW catalogue', 'X-ray source', 'source detection', 'BMW', 'X-ray']
[21:32:08] select | no cosine prune; kept=20/20
[21:32:08] select | pool_size= 10 | ranks= [0, 1, 2, 3, 4, 5, 6, 7, 8, 9] | pids= ['astro-ph/0103236', 'astro-ph/0101437', 'astro-ph/0103348', 'astro-ph/0102297', 'astro-ph/0104077', 'astro-ph/0102132', 'astro-ph/0102497', 'astro-ph/0101093', 'astro-ph/0101363', 'astro-ph/0101467']
[21:32:08] select | verify relaxed 1/10
[21:32:08] verify | func= Extends | rank= 0 | pid= astro-ph/0103236 | title_snip='BMW: a ROSAT-HRI source catalogue obtained with a wavelet transform
  â€¦' | abs_len= 1232
[21:32:11] verify | result supports= True fit= 0.80 top= 0.90 invalid= â€” cue_hint= False
[21:32:11] select | verify relaxed 2/10
[21:32:11] verify | func= Extends | rank= 1 | pid= astro-ph/0101437 | title_snip='The BMW Deep X-ray Cluster Survey' | abs_len= 1388
[21:32:14] verify | result supports= True fit= 0.80 top= 0.90 invalid= â€” cue_hint= False
[21:32:14] select | verify relaxed 3/10
[21:32:14] verify | func= Extends | rank= 2 | pid= astro-ph/0103348 | title_snip='The BMW X-ray Cluster Survey' | abs_len= 509
[21:32:18] verify | result supports= True fit= 0.80 top= 0.90 invalid= â€” cue_hint= False
[21:32:18] select | verify relaxed 4/10
[21:32:18] verify | func= Extends | rank= 3 | pid= astro-ph/0102297 | title_snip='Comparison of source detection procedures for XMM-Newton images' | abs_len= 1589
[21:32:20] verify | result supports= False fit= 0.00 top= 0.00 invalid= no_quote cue_hint= False
[21:32:20] select | verify relaxed 5/10
[21:32:20] verify | func= Extends | rank= 4 | pid= astro-ph/0104077 | title_snip='Predicted Planck Extragalactic Point Source Catalogue' | abs_len= 1155
[21:32:22] verify | result supports= False fit= 0.00 top= 0.00 invalid= no_quote cue_hint= False
[21:32:22] select | verify relaxed 6/10
[21:32:22] verify | func= Extends | rank= 5 | pid= astro-ph/0102132 | title_snip='Public Imaging Surveys: Scientific Opportunities' | abs_len= 1300
[21:32:25] verify | result supports= False fit= 0.00 top= 0.00 invalid= no_quote cue_hint= False
[21:32:25] select | verify relaxed 7/10
[21:32:25] verify | func= Extends | rank= 6 | pid= astro-ph/0102497 | title_snip='The radio source counts at 15 GHz and their implications for cm-wave Câ€¦' | abs_len= 973
[21:32:27] verify | result supports= False fit= 0.00 top= 0.00 invalid= no_quote cue_hint= False
[21:32:27] select | verify relaxed 8/10
[21:32:27] verify | func= Extends | rank= 7 | pid= astro-ph/0101093 | title_snip='Faint X-ray sources resolved in the ASCA Galactic plane survey and theâ€¦' | abs_len= 1767
[21:32:30] verify | result supports= False fit= 0.00 top= 0.00 invalid= no_quote cue_hint= False
[21:32:30] select | verify relaxed 9/10
[21:32:30] verify | func= Extends | rank= 8 | pid= astro-ph/0101363 | title_snip='High Energy X-Ray Emission in Clusters of Galaxies' | abs_len= 983
[21:32:32] verify | result supports= False fit= 0.00 top= 0.00 invalid= no_quote cue_hint= False
[21:32:32] select | verify relaxed 10/10
[21:32:32] verify | func= Extends | rank= 9 | pid= astro-ph/0101467 | title_snip='The X-ray surface brightness distribution from diffuse gas' | abs_len= 1509
[21:32:35] verify | result supports= False fit= 0.00 top= 0.00 invalid= no_quote cue_hint= False

================================================================================
FUNCTION: Extends
QUERY   : How does the development of the BMW catalogue motivate and extend existing work in X-ray source detection?
- WINNER: astro-ph/0103236 | BMW: a ROSAT-HRI source catalogue obtained with a wavelet transform
  detection algorithm
- QUOTE : developed a detection algorithm based on the Wavelet Transform
- WHY   : sufficient
- ANSWER: The development of the BMW catalogue extends existing work in X-ray source detection by improving the detection of extended sources and point sources in crowded fields, leveraging the Wavelet Transform algorithm. This approach enhances the accuracy of source extension and position determination, particularly with the high angular resolution of HRI images (astro-ph/0103236).

ðŸ“„ Saved: outputs/function_selection_results.json
ðŸ“„ Saved: outputs/function_selection_results.jsonl
ðŸ“ Answers-only: outputs/function_answers.txt
-> /home/anpa439f/anaconda3/envs/myenv/bin/python3 /data/horse/ws/anpa439f-Function_Retrieval_Citation/Research_Project/RetrievalAugmentedGeneration/classifying_question.py  (cwd=/data/horse/ws/anpa439f-Function_Retrieval_Citation/Research_Project/RetrievalAugmentedGeneration)
âœ… Saved to classified_outputs.jsonl
ðŸ”§ Ready for retrieval module (.py).
-> /home/anpa439f/anaconda3/envs/myenv/bin/python3 /data/horse/ws/anpa439f-Function_Retrieval_Citation/Research_Project/RetrievalAugmentedGeneration/Retreival_query_based.py --skip-reindex --index /data/horse/ws/anpa439f-Function_Retrieval_Citation/Research_Project/e5_index_subset_1/index.faiss --meta /data/horse/ws/anpa439f-Function_Retrieval_Citation/Research_Project/e5_index_subset_1/meta.parquet --topk 20  (cwd=/data/horse/ws/anpa439f-Function_Retrieval_Citation/Research_Project/RetrievalAugmentedGeneration)
âœ… Top-k candidates: /data/horse/ws/anpa439f-Function_Retrieval_Citation/Research_Project/RetrievalAugmentedGeneration/outputs/topk_candidates_query.jsonl
ðŸ”— Symlinked: /data/horse/ws/anpa439f-Function_Retrieval_Citation/Research_Project/outputs/topk_candidates_query.jsonl -> /data/horse/ws/anpa439f-Function_Retrieval_Citation/Research_Project/RetrievalAugmentedGeneration/outputs/topk_candidates_query.jsonl
-> /home/anpa439f/anaconda3/envs/myenv/bin/python3 /data/horse/ws/anpa439f-Function_Retrieval_Citation/Research_Project/RetrievalAugmentedGeneration/function_based_answer-2.py --debug --max-check 10  (cwd=/data/horse/ws/anpa439f-Function_Retrieval_Citation/Research_Project/RetrievalAugmentedGeneration)

ðŸŽ‰ Pipeline complete.
  â€¢ Classified file : /data/horse/ws/anpa439f-Function_Retrieval_Citation/Research_Project/RetrievalAugmentedGeneration/classified_outputs.jsonl
  â€¢ TopK (canonical): /data/horse/ws/anpa439f-Function_Retrieval_Citation/Research_Project/RetrievalAugmentedGeneration/outputs/topk_candidates_query.jsonl
  â€¢ Final outputs   : /data/horse/ws/anpa439f-Function_Retrieval_Citation/Research_Project/RetrievalAugmentedGeneration/outputs
