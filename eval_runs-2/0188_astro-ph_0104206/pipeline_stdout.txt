âœ… Available Models:
1. alias-code
2. alias-reasoning
3. alias-image-generation
4. alias-vision
5. alias-ha
6. meta-llama/Llama-3.3-70B-Instruct
7. meta-llama/Llama-3.1-8B-Instruct
8. Qwen/Qwen2-VL-7B-Instruct
9. openGPT-X/Teuken-7B-instruct-research-v0.4
10. deepseek-ai/DeepSeek-Coder-V2-Lite-Instruct
11. Qwen/Qwen3-Coder-30B-A3B-Instruct
12. Qwen/Qwen3-Embedding-4B
13. stabilityai/stable-diffusion-3.5-large-turbo
14. black-forest-labs/FLUX.1-dev
15. openai/whisper-large-v3
16. Kokoro-82M
17. tts-1-hd
18. deepseek-ai/DeepSeek-R1
19. openai/gpt-oss-120b
20. meta-llama/Llama-4-Scout-17B-16E-Instruct

ðŸ‘‰ Select a model number (default = 1): 
âœ… Using model: openai/gpt-oss-120b

ðŸ” Enter a scientific query or topic: 
ðŸ”Ž Citation Function Classification:
{
  "citation_functions": [
    "Background",
    "Motivation"
  ],
  "justification": "The query requests foundational information (background) on axisymmetric stability and asks why this topic is being revisited (motivation)."
}

âœ… Saved to classified_outputs.jsonl
ðŸ”§ Ready for retrieval module (handled in a separate file).
âš¡ SKIP_REINDEX=1 â€” using existing FAISS index + meta; not scanning raw JSONL shards.
âœ… Top-k candidates (FAISS): /data/horse/ws/anpa439f-Function_Retrieval_Citation/Research_Project/RetrievalAugmentedGeneration/outputs/topk_candidates_query.jsonl
[01:33:17] main | args: Namespace(max_check=10, debug=True)
[01:33:17] read_last_jsonl | path= classified_outputs.jsonl
[01:33:17] read_last_jsonl | total_lines= 1
[01:33:17] main | query='What motivates the re-examination of global axisymmetric stability in the context of magnetorotational instabilities, and what background information is necessary to understand this re-examination?' | funcs=['Background', 'Motivation']
[01:33:18] main | core_terms= ['magnetorotational instabilities', 'global axisymmetric stability', 're-examination']
[01:33:18] load_topk_jsonl | path= /data/horse/ws/anpa439f-Function_Retrieval_Citation/Research_Project/outputs/topk_candidates_query.jsonl
[01:33:18] load_topk_jsonl | rows= 20
[01:33:18] load_topk_jsonl | first: rank= 0 paper_id= astro-ph/0103226 title_snip='Magnetorotational Instability in a Rotating Liquid Metal Annulus' abs_len= 691
[01:33:18] main | running function= Background
[01:33:18] select | function= Background | candidates_in= 20
[01:33:18] select | core_terms= ['magnetorotational instabilities', 'global axisymmetric stability', 're-examination']
[01:33:18] select | no cosine prune; kept=20/20
[01:33:18] select | pool_size= 10 | ranks= [0, 1, 2, 3, 4, 5, 6, 7, 8, 9] | pids= ['astro-ph/0103226', 'astro-ph/0104206', 'gr-qc/0103060', 'astro-ph/0101161', 'astro-ph/0104411', 'gr-qc/0102076', 'cond-mat/0103489', 'astro-ph/0102415', 'astro-ph/0104302', 'astro-ph/0101009']
[01:33:18] select | verify relaxed 1/10
[01:33:18] verify | func= Background | rank= 0 | pid= astro-ph/0103226 | title_snip='Magnetorotational Instability in a Rotating Liquid Metal Annulus' | abs_len= 691
[01:33:21] verify | result supports= False fit= 0.00 top= 0.90 invalid= off_topic_no_core_in_abstract cue_hint= False
[01:33:21] select | verify relaxed 2/10
[01:33:21] verify | func= Background | rank= 1 | pid= astro-ph/0104206 | title_snip='Magnetorotational instability of dissipative Couette flow' | abs_len= 1242
[01:33:25] verify | result supports= True fit= 0.80 top= 0.90 invalid= â€” cue_hint= False
[01:33:25] select | verify relaxed 3/10
[01:33:25] verify | func= Background | rank= 2 | pid= gr-qc/0103060 | title_snip='Stability analysis of cosmological models through Liapunov's method' | abs_len= 676
[01:33:27] verify | result supports= False fit= 0.00 top= 0.00 invalid= no_quote cue_hint= False
[01:33:27] select | verify relaxed 4/10
[01:33:27] verify | func= Background | rank= 3 | pid= astro-ph/0101161 | title_snip='On Turbulent Reconnection' | abs_len= 953
[01:33:30] verify | result supports= False fit= 0.00 top= 0.00 invalid= no_quote cue_hint= False
[01:33:30] select | verify relaxed 5/10
[01:33:30] verify | func= Background | rank= 4 | pid= astro-ph/0104411 | title_snip='Statistical evaluation of the observational information on $\Omega_m$
â€¦' | abs_len= 852
[01:33:32] verify | result supports= False fit= 0.00 top= 0.00 invalid= no_quote cue_hint= False
[01:33:32] select | verify relaxed 6/10
[01:33:32] verify | func= Background | rank= 5 | pid= gr-qc/0102076 | title_snip='Dynamical Bar Instability in Relativistic Rotating Stars' | abs_len= 1736
[01:33:35] verify | result supports= False fit= 0.00 top= 0.00 invalid= no_quote cue_hint= False
[01:33:35] select | verify relaxed 7/10
[01:33:35] verify | func= Background | rank= 6 | pid= cond-mat/0103489 | title_snip='Vortex stabilization in a small rotating asymmetric Bose-Einstein
  coâ€¦' | abs_len= 964
[01:33:37] verify | result supports= False fit= 0.00 top= 0.00 invalid= no_quote cue_hint= False
[01:33:37] select | verify relaxed 8/10
[01:33:37] verify | func= Background | rank= 7 | pid= astro-ph/0102415 | title_snip='Acceleration and collimation of relativistic plasmas ejected by fast
 â€¦' | abs_len= 927
[01:33:40] verify | result supports= False fit= 0.00 top= 0.00 invalid= no_quote cue_hint= False
[01:33:40] select | verify relaxed 9/10
[01:33:40] verify | func= Background | rank= 8 | pid= astro-ph/0104302 | title_snip='MHD instability in differentially rotating cylindric flows' | abs_len= 1823
[01:33:43] verify | result supports= False fit= 0.00 top= 0.90 invalid= off_topic_no_core_in_abstract cue_hint= False
[01:33:43] select | verify relaxed 10/10
[01:33:43] verify | func= Background | rank= 9 | pid= astro-ph/0101009 | title_snip='Cosmological Perturbation Theory and Structure Formation' | abs_len= 550
[01:33:45] verify | result supports= False fit= 0.00 top= 0.00 invalid= no_quote cue_hint= False

================================================================================
FUNCTION: Background
QUERY   : What motivates the re-examination of global axisymmetric stability in the context of magnetorotational instabilities, and what background information is necessary to understand this re-examination?
- WINNER: astro-ph/0104206 | Magnetorotational instability of dissipative Couette flow
- QUOTE : Global axisymmetric stability of viscous, resistive, magnetized Couette flow
- WHY   : sufficient
- ANSWER: The re-examination of global axisymmetric stability is motivated by the potential occurrence of magnetorotational instabilities in flows that are hydrodynamically stable according to Rayleigh's criterion (astro-ph/0104206).
[01:33:50] main | running function= Motivation
[01:33:50] select | function= Motivation | candidates_in= 20
[01:33:50] select | core_terms= ['magnetorotational instabilities', 'global axisymmetric stability', 're-examination']
[01:33:50] select | no cosine prune; kept=20/20
[01:33:50] select | pool_size= 10 | ranks= [0, 1, 2, 3, 4, 5, 6, 7, 8, 9] | pids= ['astro-ph/0103226', 'astro-ph/0104206', 'gr-qc/0103060', 'astro-ph/0101161', 'astro-ph/0104411', 'gr-qc/0102076', 'cond-mat/0103489', 'astro-ph/0102415', 'astro-ph/0104302', 'astro-ph/0101009']
[01:33:50] select | verify relaxed 1/10
[01:33:50] verify | func= Motivation | rank= 0 | pid= astro-ph/0103226 | title_snip='Magnetorotational Instability in a Rotating Liquid Metal Annulus' | abs_len= 691
[01:33:54] verify | result supports= False fit= 0.00 top= 0.90 invalid= off_topic_no_core_in_abstract cue_hint= False
[01:33:54] select | verify relaxed 2/10
[01:33:54] verify | func= Motivation | rank= 1 | pid= astro-ph/0104206 | title_snip='Magnetorotational instability of dissipative Couette flow' | abs_len= 1242
[01:33:57] verify | result supports= True fit= 0.80 top= 0.90 invalid= â€” cue_hint= False
[01:33:57] select | verify relaxed 3/10
[01:33:57] verify | func= Motivation | rank= 2 | pid= gr-qc/0103060 | title_snip='Stability analysis of cosmological models through Liapunov's method' | abs_len= 676
[01:33:59] verify | result supports= False fit= 0.00 top= 0.00 invalid= no_quote cue_hint= False
[01:33:59] select | verify relaxed 4/10
[01:33:59] verify | func= Motivation | rank= 3 | pid= astro-ph/0101161 | title_snip='On Turbulent Reconnection' | abs_len= 953
[01:34:01] verify | result supports= False fit= 0.00 top= 0.00 invalid= no_quote cue_hint= False
[01:34:01] select | verify relaxed 5/10
[01:34:01] verify | func= Motivation | rank= 4 | pid= astro-ph/0104411 | title_snip='Statistical evaluation of the observational information on $\Omega_m$
â€¦' | abs_len= 852
[01:34:04] verify | result supports= False fit= 0.00 top= 0.00 invalid= no_quote cue_hint= False
[01:34:04] select | verify relaxed 6/10
[01:34:04] verify | func= Motivation | rank= 5 | pid= gr-qc/0102076 | title_snip='Dynamical Bar Instability in Relativistic Rotating Stars' | abs_len= 1736
[01:34:06] verify | result supports= False fit= 0.00 top= 0.00 invalid= no_quote cue_hint= False
[01:34:06] select | verify relaxed 7/10
[01:34:06] verify | func= Motivation | rank= 6 | pid= cond-mat/0103489 | title_snip='Vortex stabilization in a small rotating asymmetric Bose-Einstein
  coâ€¦' | abs_len= 964
[01:34:09] verify | result supports= False fit= 0.00 top= 0.00 invalid= no_quote cue_hint= False
[01:34:09] select | verify relaxed 8/10
[01:34:09] verify | func= Motivation | rank= 7 | pid= astro-ph/0102415 | title_snip='Acceleration and collimation of relativistic plasmas ejected by fast
 â€¦' | abs_len= 927
[01:34:11] verify | result supports= False fit= 0.00 top= 0.00 invalid= no_quote cue_hint= False
[01:34:11] select | verify relaxed 9/10
[01:34:11] verify | func= Motivation | rank= 8 | pid= astro-ph/0104302 | title_snip='MHD instability in differentially rotating cylindric flows' | abs_len= 1823
[01:34:14] verify | result supports= False fit= 0.00 top= 0.90 invalid= off_topic_no_core_in_abstract cue_hint= False
[01:34:14] select | verify relaxed 10/10
[01:34:14] verify | func= Motivation | rank= 9 | pid= astro-ph/0101009 | title_snip='Cosmological Perturbation Theory and Structure Formation' | abs_len= 550
[01:34:17] verify | result supports= False fit= 0.00 top= 0.00 invalid= no_quote cue_hint= False

================================================================================
FUNCTION: Motivation
QUERY   : What motivates the re-examination of global axisymmetric stability in the context of magnetorotational instabilities, and what background information is necessary to understand this re-examination?
- WINNER: astro-ph/0104206 | Magnetorotational instability of dissipative Couette flow
- QUOTE : intense astrophysical interest
- WHY   : sufficient
- ANSWER: The re-examination of global axisymmetric stability is motivated by the need to understand magnetorotational instabilities in flows that are hydrodynamically stable, which is crucial for astrophysical applications. Background information on Rayleigh's criterion and previous work on Rayleigh-unstable regimes is necessary to understand this re-examination (astro-ph/0104206).

ðŸ“„ Saved: outputs/function_selection_results.json
ðŸ“„ Saved: outputs/function_selection_results.jsonl
ðŸ“ Answers-only: outputs/function_answers.txt
-> /home/anpa439f/anaconda3/envs/myenv/bin/python3 /data/horse/ws/anpa439f-Function_Retrieval_Citation/Research_Project/RetrievalAugmentedGeneration/classifying_question.py  (cwd=/data/horse/ws/anpa439f-Function_Retrieval_Citation/Research_Project/RetrievalAugmentedGeneration)
âœ… Saved to classified_outputs.jsonl
ðŸ”§ Ready for retrieval module (.py).
-> /home/anpa439f/anaconda3/envs/myenv/bin/python3 /data/horse/ws/anpa439f-Function_Retrieval_Citation/Research_Project/RetrievalAugmentedGeneration/Retreival_query_based.py --skip-reindex --index /data/horse/ws/anpa439f-Function_Retrieval_Citation/Research_Project/e5_index_subset_1/index.faiss --meta /data/horse/ws/anpa439f-Function_Retrieval_Citation/Research_Project/e5_index_subset_1/meta.parquet --topk 20  (cwd=/data/horse/ws/anpa439f-Function_Retrieval_Citation/Research_Project/RetrievalAugmentedGeneration)
âœ… Top-k candidates: /data/horse/ws/anpa439f-Function_Retrieval_Citation/Research_Project/RetrievalAugmentedGeneration/outputs/topk_candidates_query.jsonl
ðŸ”— Symlinked: /data/horse/ws/anpa439f-Function_Retrieval_Citation/Research_Project/outputs/topk_candidates_query.jsonl -> /data/horse/ws/anpa439f-Function_Retrieval_Citation/Research_Project/RetrievalAugmentedGeneration/outputs/topk_candidates_query.jsonl
-> /home/anpa439f/anaconda3/envs/myenv/bin/python3 /data/horse/ws/anpa439f-Function_Retrieval_Citation/Research_Project/RetrievalAugmentedGeneration/function_based_answer-2.py --debug --max-check 10  (cwd=/data/horse/ws/anpa439f-Function_Retrieval_Citation/Research_Project/RetrievalAugmentedGeneration)

ðŸŽ‰ Pipeline complete.
  â€¢ Classified file : /data/horse/ws/anpa439f-Function_Retrieval_Citation/Research_Project/RetrievalAugmentedGeneration/classified_outputs.jsonl
  â€¢ TopK (canonical): /data/horse/ws/anpa439f-Function_Retrieval_Citation/Research_Project/RetrievalAugmentedGeneration/outputs/topk_candidates_query.jsonl
  â€¢ Final outputs   : /data/horse/ws/anpa439f-Function_Retrieval_Citation/Research_Project/RetrievalAugmentedGeneration/outputs
