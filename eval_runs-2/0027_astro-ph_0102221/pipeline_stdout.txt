âœ… Available Models:
1. alias-code
2. alias-reasoning
3. alias-image-generation
4. alias-vision
5. alias-ha
6. meta-llama/Llama-3.3-70B-Instruct
7. meta-llama/Llama-3.1-8B-Instruct
8. Qwen/Qwen2-VL-7B-Instruct
9. openGPT-X/Teuken-7B-instruct-research-v0.4
10. deepseek-ai/DeepSeek-Coder-V2-Lite-Instruct
11. Qwen/Qwen3-Coder-30B-A3B-Instruct
12. Qwen/Qwen3-Embedding-4B
13. stabilityai/stable-diffusion-3.5-large-turbo
14. black-forest-labs/FLUX.1-dev
15. openai/whisper-large-v3
16. Kokoro-82M
17. tts-1-hd
18. deepseek-ai/DeepSeek-R1
19. openai/gpt-oss-120b
20. meta-llama/Llama-4-Scout-17B-16E-Instruct

ðŸ‘‰ Select a model number (default = 1): 
âœ… Using model: openai/gpt-oss-120b

ðŸ” Enter a scientific query or topic: 
ðŸ”Ž Citation Function Classification:
{
  "citation_functions": [
    "Background",
    "FutureWork"
  ],
  "justification": "The query requests foundational knowledge about heating of X\u2011ray hot gas (Background) and explicitly seeks information that can guide subsequent research (FutureWork)."
}

âœ… Saved to classified_outputs.jsonl
ðŸ”§ Ready for retrieval module (handled in a separate file).
âš¡ SKIP_REINDEX=1 â€” using existing FAISS index + meta; not scanning raw JSONL shards.
âœ… Top-k candidates (FAISS): /data/horse/ws/anpa439f-Function_Retrieval_Citation/Research_Project/RetrievalAugmentedGeneration/outputs/topk_candidates_query.jsonl
[21:50:12] main | args: Namespace(max_check=10, debug=True)
[21:50:12] read_last_jsonl | path= classified_outputs.jsonl
[21:50:12] read_last_jsonl | total_lines= 1
[21:50:12] main | query='What background information about the heating of X-Ray hot gas in galaxy groups can be used to inform future work on this topic?' | funcs=['Background', 'FutureWork']
[21:50:14] main | core_terms= ['X-Ray hot gas', 'galaxy groups', 'heating', 'X-Ray']
[21:50:14] load_topk_jsonl | path= /data/horse/ws/anpa439f-Function_Retrieval_Citation/Research_Project/outputs/topk_candidates_query.jsonl
[21:50:14] load_topk_jsonl | rows= 20
[21:50:14] load_topk_jsonl | first: rank= 0 paper_id= astro-ph/0101517 title_snip='Entropy Evolution in Galaxy Groups and Clusters; A Comparison of
  Extâ€¦' abs_len= 1348
[21:50:14] main | running function= Background
[21:50:14] select | function= Background | candidates_in= 20
[21:50:14] select | core_terms= ['X-Ray hot gas', 'galaxy groups', 'heating', 'X-Ray']
[21:50:14] select | no cosine prune; kept=20/20
[21:50:14] select | pool_size= 10 | ranks= [0, 1, 2, 3, 4, 5, 6, 7, 8, 9] | pids= ['astro-ph/0101517', 'astro-ph/0101466', 'astro-ph/0102221', 'astro-ph/0101467', 'astro-ph/0103392', 'astro-ph/0104387', 'astro-ph/0101363', 'astro-ph/0103293', 'astro-ph/0102227', 'astro-ph/0101302']
[21:50:14] select | verify relaxed 1/10
[21:50:14] verify | func= Background | rank= 0 | pid= astro-ph/0101517 | title_snip='Entropy Evolution in Galaxy Groups and Clusters; A Comparison of
  Extâ€¦' | abs_len= 1348
[21:50:17] verify | result supports= True fit= 0.80 top= 0.90 invalid= â€” cue_hint= False
[21:50:17] select | verify relaxed 2/10
[21:50:17] verify | func= Background | rank= 1 | pid= astro-ph/0101466 | title_snip='On the Distribution of X-ray Surface Brightness from Diffuse Gas' | abs_len= 1212
[21:50:20] verify | result supports= True fit= 0.80 top= 0.90 invalid= â€” cue_hint= False
[21:50:20] select | verify relaxed 3/10
[21:50:20] verify | func= Background | rank= 2 | pid= astro-ph/0102221 | title_snip='Heating of X-Ray Hot Gas in Groups by Blast Waves' | abs_len= 897
[21:50:23] verify | result supports= True fit= 0.80 top= 0.90 invalid= â€” cue_hint= False
[21:50:23] select | verify relaxed 4/10
[21:50:23] verify | func= Background | rank= 3 | pid= astro-ph/0101467 | title_snip='The X-ray surface brightness distribution from diffuse gas' | abs_len= 1509
[21:50:26] verify | result supports= True fit= 0.80 top= 0.90 invalid= â€” cue_hint= False
[21:50:26] select | verify relaxed 5/10
[21:50:26] verify | func= Background | rank= 4 | pid= astro-ph/0103392 | title_snip='The interaction of radio sources and cooling flows' | abs_len= 606
[21:50:29] verify | result supports= True fit= 0.80 top= 0.90 invalid= â€” cue_hint= False
[21:50:29] select | verify relaxed 6/10
[21:50:29] verify | func= Background | rank= 5 | pid= astro-ph/0104387 | title_snip='Warm and Hot Diffuse Gas in Dwarf Galaxies' | abs_len= 1213
[21:50:32] verify | result supports= False fit= 0.00 top= 0.00 invalid= no_quote cue_hint= False
[21:50:32] select | verify relaxed 7/10
[21:50:32] verify | func= Background | rank= 6 | pid= astro-ph/0101363 | title_snip='High Energy X-Ray Emission in Clusters of Galaxies' | abs_len= 983
[21:50:35] verify | result supports= False fit= 0.00 top= 0.50 invalid= â€” cue_hint= False
[21:50:35] select | verify relaxed 8/10
[21:50:35] verify | func= Background | rank= 7 | pid= astro-ph/0103293 | title_snip='X-ray luminosities of galaxies in groups' | abs_len= 1534
[21:50:38] verify | result supports= True fit= 0.80 top= 0.90 invalid= â€” cue_hint= False
[21:50:38] select | verify relaxed 9/10
[21:50:38] verify | func= Background | rank= 8 | pid= astro-ph/0102227 | title_snip='Testing a model of variability of X-ray reprocessing features in Activâ€¦' | abs_len= 1157
[21:50:40] verify | result supports= False fit= 0.00 top= 0.00 invalid= no_quote cue_hint= False
[21:50:40] select | verify relaxed 10/10
[21:50:40] verify | func= Background | rank= 9 | pid= astro-ph/0101302 | title_snip='The temperature-mass relation in magnetized galaxy clusters' | abs_len= 722
[21:50:43] verify | result supports= False fit= 0.00 top= 0.20 invalid= â€” cue_hint= False

================================================================================
FUNCTION: Background
QUERY   : What background information about the heating of X-Ray hot gas in galaxy groups can be used to inform future work on this topic?
- WINNER: astro-ph/0101517 | Entropy Evolution in Galaxy Groups and Clusters; A Comparison of
  External and Internal Heating
- QUOTE : X-ray observations of hot gas in galaxy groups
- WHY   : sufficient
- ANSWER: The heating of X-Ray hot gas in galaxy groups is thought to result from either a universal external heating process, such as AGN or population III stars, or internal heating by Type II supernovae (astro-ph/0101517).
[21:50:48] main | running function= FutureWork
[21:50:48] select | function= FutureWork | candidates_in= 20
[21:50:48] select | core_terms= ['X-Ray hot gas', 'galaxy groups', 'heating', 'X-Ray']
[21:50:48] select | no cosine prune; kept=20/20
[21:50:48] select | pool_size= 10 | ranks= [0, 1, 2, 3, 4, 5, 6, 7, 8, 9] | pids= ['astro-ph/0101517', 'astro-ph/0101466', 'astro-ph/0102221', 'astro-ph/0101467', 'astro-ph/0103392', 'astro-ph/0104387', 'astro-ph/0101363', 'astro-ph/0103293', 'astro-ph/0102227', 'astro-ph/0101302']
[21:50:48] select | verify relaxed 1/10
[21:50:48] verify | func= FutureWork | rank= 0 | pid= astro-ph/0101517 | title_snip='Entropy Evolution in Galaxy Groups and Clusters; A Comparison of
  Extâ€¦' | abs_len= 1348
[21:50:51] verify | result supports= True fit= 0.80 top= 0.90 invalid= â€” cue_hint= False
[21:50:51] select | verify relaxed 2/10
[21:50:51] verify | func= FutureWork | rank= 1 | pid= astro-ph/0101466 | title_snip='On the Distribution of X-ray Surface Brightness from Diffuse Gas' | abs_len= 1212
[21:50:54] verify | result supports= True fit= 0.80 top= 0.90 invalid= â€” cue_hint= False
[21:50:54] select | verify relaxed 3/10
[21:50:54] verify | func= FutureWork | rank= 2 | pid= astro-ph/0102221 | title_snip='Heating of X-Ray Hot Gas in Groups by Blast Waves' | abs_len= 897
[21:50:57] verify | result supports= True fit= 0.80 top= 0.90 invalid= â€” cue_hint= False
[21:50:57] select | verify relaxed 4/10
[21:50:57] verify | func= FutureWork | rank= 3 | pid= astro-ph/0101467 | title_snip='The X-ray surface brightness distribution from diffuse gas' | abs_len= 1509
[21:51:00] verify | result supports= True fit= 0.80 top= 0.90 invalid= â€” cue_hint= False
[21:51:00] select | verify relaxed 5/10
[21:51:00] verify | func= FutureWork | rank= 4 | pid= astro-ph/0103392 | title_snip='The interaction of radio sources and cooling flows' | abs_len= 606
[21:51:03] verify | result supports= True fit= 0.80 top= 0.90 invalid= â€” cue_hint= False
[21:51:03] select | verify relaxed 6/10
[21:51:03] verify | func= FutureWork | rank= 5 | pid= astro-ph/0104387 | title_snip='Warm and Hot Diffuse Gas in Dwarf Galaxies' | abs_len= 1213
[21:51:05] verify | result supports= False fit= 0.00 top= 0.00 invalid= no_quote cue_hint= False
[21:51:05] select | verify relaxed 7/10
[21:51:05] verify | func= FutureWork | rank= 6 | pid= astro-ph/0101363 | title_snip='High Energy X-Ray Emission in Clusters of Galaxies' | abs_len= 983
[21:51:08] verify | result supports= True fit= 0.80 top= 0.90 invalid= â€” cue_hint= False
[21:51:08] select | verify relaxed 8/10
[21:51:08] verify | func= FutureWork | rank= 7 | pid= astro-ph/0103293 | title_snip='X-ray luminosities of galaxies in groups' | abs_len= 1534
[21:51:12] verify | result supports= False fit= 0.00 top= 0.50 invalid= â€” cue_hint= False
[21:51:12] select | verify relaxed 9/10
[21:51:12] verify | func= FutureWork | rank= 8 | pid= astro-ph/0102227 | title_snip='Testing a model of variability of X-ray reprocessing features in Activâ€¦' | abs_len= 1157
[21:51:14] verify | result supports= False fit= 0.00 top= 0.00 invalid= no_quote cue_hint= False
[21:51:14] select | verify relaxed 10/10
[21:51:14] verify | func= FutureWork | rank= 9 | pid= astro-ph/0101302 | title_snip='The temperature-mass relation in magnetized galaxy clusters' | abs_len= 722
[21:51:16] verify | result supports= False fit= 0.00 top= 0.00 invalid= no_quote cue_hint= False

================================================================================
FUNCTION: FutureWork
QUERY   : What background information about the heating of X-Ray hot gas in galaxy groups can be used to inform future work on this topic?
- WINNER: astro-ph/0101517 | Entropy Evolution in Galaxy Groups and Clusters; A Comparison of
  External and Internal Heating
- QUOTE : X-ray observations of hot gas in galaxy groups
- WHY   : sufficient
- ANSWER: Future work on the heating of X-Ray hot gas in galaxy groups can build on the finding that internal heating by Type II supernovae is a preferred mechanism, and investigate the implications of different initial mass functions on the energy required to heat the gas. The open problem of how supernova energy is transferred to the hot gas remains to be addressed (astro-ph/0101517).

ðŸ“„ Saved: outputs/function_selection_results.json
ðŸ“„ Saved: outputs/function_selection_results.jsonl
ðŸ“ Answers-only: outputs/function_answers.txt
-> /home/anpa439f/anaconda3/envs/myenv/bin/python3 /data/horse/ws/anpa439f-Function_Retrieval_Citation/Research_Project/RetrievalAugmentedGeneration/classifying_question.py  (cwd=/data/horse/ws/anpa439f-Function_Retrieval_Citation/Research_Project/RetrievalAugmentedGeneration)
âœ… Saved to classified_outputs.jsonl
ðŸ”§ Ready for retrieval module (.py).
-> /home/anpa439f/anaconda3/envs/myenv/bin/python3 /data/horse/ws/anpa439f-Function_Retrieval_Citation/Research_Project/RetrievalAugmentedGeneration/Retreival_query_based.py --skip-reindex --index /data/horse/ws/anpa439f-Function_Retrieval_Citation/Research_Project/e5_index_subset_1/index.faiss --meta /data/horse/ws/anpa439f-Function_Retrieval_Citation/Research_Project/e5_index_subset_1/meta.parquet --topk 20  (cwd=/data/horse/ws/anpa439f-Function_Retrieval_Citation/Research_Project/RetrievalAugmentedGeneration)
âœ… Top-k candidates: /data/horse/ws/anpa439f-Function_Retrieval_Citation/Research_Project/RetrievalAugmentedGeneration/outputs/topk_candidates_query.jsonl
ðŸ”— Symlinked: /data/horse/ws/anpa439f-Function_Retrieval_Citation/Research_Project/outputs/topk_candidates_query.jsonl -> /data/horse/ws/anpa439f-Function_Retrieval_Citation/Research_Project/RetrievalAugmentedGeneration/outputs/topk_candidates_query.jsonl
-> /home/anpa439f/anaconda3/envs/myenv/bin/python3 /data/horse/ws/anpa439f-Function_Retrieval_Citation/Research_Project/RetrievalAugmentedGeneration/function_based_answer-2.py --debug --max-check 10  (cwd=/data/horse/ws/anpa439f-Function_Retrieval_Citation/Research_Project/RetrievalAugmentedGeneration)

ðŸŽ‰ Pipeline complete.
  â€¢ Classified file : /data/horse/ws/anpa439f-Function_Retrieval_Citation/Research_Project/RetrievalAugmentedGeneration/classified_outputs.jsonl
  â€¢ TopK (canonical): /data/horse/ws/anpa439f-Function_Retrieval_Citation/Research_Project/RetrievalAugmentedGeneration/outputs/topk_candidates_query.jsonl
  â€¢ Final outputs   : /data/horse/ws/anpa439f-Function_Retrieval_Citation/Research_Project/RetrievalAugmentedGeneration/outputs
