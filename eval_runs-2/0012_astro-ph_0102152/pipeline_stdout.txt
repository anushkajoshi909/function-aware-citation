âœ… Available Models:
1. alias-code
2. alias-reasoning
3. alias-image-generation
4. alias-vision
5. alias-ha
6. meta-llama/Llama-3.3-70B-Instruct
7. meta-llama/Llama-3.1-8B-Instruct
8. Qwen/Qwen2-VL-7B-Instruct
9. openGPT-X/Teuken-7B-instruct-research-v0.4
10. deepseek-ai/DeepSeek-Coder-V2-Lite-Instruct
11. Qwen/Qwen3-Coder-30B-A3B-Instruct
12. Qwen/Qwen3-Embedding-4B
13. stabilityai/stable-diffusion-3.5-large-turbo
14. black-forest-labs/FLUX.1-dev
15. openai/whisper-large-v3
16. Kokoro-82M
17. tts-1-hd
18. deepseek-ai/DeepSeek-R1
19. openai/gpt-oss-120b
20. meta-llama/Llama-4-Scout-17B-16E-Instruct

ðŸ‘‰ Select a model number (default = 1): 
âœ… Using model: openai/gpt-oss-120b

ðŸ” Enter a scientific query or topic: 
ðŸ”Ž Citation Function Classification:
{
  "citation_functions": [
    "Compares",
    "Background"
  ],
  "justification": "The query asks how two lines of evidence (BBN and CMB) are compared and how that informs the foundational knowledge of baryon abundance."
}

âœ… Saved to classified_outputs.jsonl
ðŸ”§ Ready for retrieval module (handled in a separate file).
âš¡ SKIP_REINDEX=1 â€” using existing FAISS index + meta; not scanning raw JSONL shards.
âœ… Top-k candidates (FAISS): /data/horse/ws/anpa439f-Function_Retrieval_Citation/Research_Project/RetrievalAugmentedGeneration/outputs/topk_candidates_query.jsonl
[21:30:09] main | args: Namespace(max_check=10, debug=True)
[21:30:09] read_last_jsonl | path= classified_outputs.jsonl
[21:30:09] read_last_jsonl | total_lines= 1
[21:30:09] main | query='How does the comparison between big bang nucleosynthesis and cosmic microwave background observations relate to the background understanding of the universe's baryon abundance?' | funcs=['Compares', 'Background']
[21:30:11] main | core_terms= ['baryon', 'universe', 'big bang nucleosynthesis', 'cosmic microwave background', 'baryon abundance']
[21:30:11] load_topk_jsonl | path= /data/horse/ws/anpa439f-Function_Retrieval_Citation/Research_Project/outputs/topk_candidates_query.jsonl
[21:30:11] load_topk_jsonl | rows= 20
[21:30:11] load_topk_jsonl | first: rank= 0 paper_id= astro-ph/0103411 title_snip='Primordial nucleosynthesis and hadronic decay of a massive particle wiâ€¦' abs_len= 936
[21:30:11] main | running function= Compares
[21:30:11] select | function= Compares | candidates_in= 20
[21:30:11] select | core_terms= ['baryon', 'universe', 'big bang nucleosynthesis', 'cosmic microwave background', 'baryon abundance']
[21:30:11] select | no cosine prune; kept=20/20
[21:30:11] select | pool_size= 10 | ranks= [0, 1, 2, 3, 4, 5, 6, 7, 8, 9] | pids= ['astro-ph/0103411', 'astro-ph/0102152', 'astro-ph/0102032', 'astro-ph/0102172', 'astro-ph/0101236', 'hep-ph/0101343', 'astro-ph/0103505', 'astro-ph/0101292', 'astro-ph/0103281', 'astro-ph/0102402']
[21:30:11] select | verify relaxed 1/10
[21:30:11] verify | func= Compares | rank= 0 | pid= astro-ph/0103411 | title_snip='Primordial nucleosynthesis and hadronic decay of a massive particle wiâ€¦' | abs_len= 936
[21:30:14] verify | result supports= True fit= 0.80 top= 0.90 invalid= â€” cue_hint= False
[21:30:14] select | verify relaxed 2/10
[21:30:14] verify | func= Compares | rank= 1 | pid= astro-ph/0102152 | title_snip='CMB (And Other) Challenges To BBN' | abs_len= 1154
[21:30:18] verify | result supports= True fit= 0.90 top= 0.95 invalid= â€” cue_hint= False
[21:30:18] select | verify relaxed 3/10
[21:30:18] verify | func= Compares | rank= 2 | pid= astro-ph/0102032 | title_snip='In Support of Inflation' | abs_len= 313
[21:30:20] verify | result supports= False fit= 0.00 top= 0.50 invalid= â€” cue_hint= False
[21:30:20] select | verify relaxed 4/10
[21:30:20] verify | func= Compares | rank= 3 | pid= astro-ph/0102172 | title_snip='Magnetic Fields and the Cosmic Microwave Background' | abs_len= 699
[21:30:23] verify | result supports= False fit= 0.00 top= 0.20 invalid= â€” cue_hint= False
[21:30:23] select | verify relaxed 5/10
[21:30:23] verify | func= Compares | rank= 4 | pid= astro-ph/0101236 | title_snip='Determination of Omega_b From Big Bang Nucleosynthesis in the Presenceâ€¦' | abs_len= 582
[21:30:26] verify | result supports= True fit= 0.80 top= 0.90 invalid= â€” cue_hint= True
[21:30:26] select | verify relaxed 6/10
[21:30:26] verify | func= Compares | rank= 5 | pid= hep-ph/0101343 | title_snip='Cosmic string induced sheet like baryon inhomogeneities at quark-hadroâ€¦' | abs_len= 922
[21:30:30] verify | result supports= True fit= 0.80 top= 0.90 invalid= â€” cue_hint= False
[21:30:30] select | verify relaxed 7/10
[21:30:30] verify | func= Compares | rank= 6 | pid= astro-ph/0103505 | title_snip='Probing the Universe After Cosmological Recombination Through the Effeâ€¦' | abs_len= 942
[21:30:33] verify | result supports= False fit= 0.00 top= 0.20 invalid= no_quote cue_hint= False
[21:30:33] select | verify relaxed 8/10
[21:30:33] verify | func= Compares | rank= 7 | pid= astro-ph/0101292 | title_snip='Inhomogeneous Big Bang Nucleosynthesis: Upper Limit on Omega_b and
  Pâ€¦' | abs_len= 1336
[21:30:36] verify | result supports= True fit= 0.80 top= 0.90 invalid= â€” cue_hint= False
[21:30:36] select | verify relaxed 9/10
[21:30:36] verify | func= Compares | rank= 8 | pid= astro-ph/0103281 | title_snip='Fluctuations in the Cosmic Microwave Background II: $C_\ell$ at Large
â€¦' | abs_len= 1177
[21:30:39] verify | result supports= False fit= 0.00 top= 0.50 invalid= no_quote cue_hint= False
[21:30:39] select | verify relaxed 10/10
[21:30:39] verify | func= Compares | rank= 9 | pid= astro-ph/0102402 | title_snip='The Cosmic Microwave Background' | abs_len= 421
[21:30:42] verify | result supports= False fit= 0.00 top= 0.50 invalid= â€” cue_hint= False

================================================================================
FUNCTION: Compares
QUERY   : How does the comparison between big bang nucleosynthesis and cosmic microwave background observations relate to the background understanding of the universe's baryon abundance?
- WINNER: astro-ph/0102152 | CMB (And Other) Challenges To BBN
- QUOTE : hint that the CMB observations may not be in perfect agreement with those from big bang nucleosynthesis (BBN)
- WHY   : sufficient
- ANSWER: The comparison between big bang nucleosynthesis and cosmic microwave background observations relates to the background understanding of the universe's baryon abundance by probing it at different ages, with the CMB and BBN measurements being compared on the basis of their consistency with the standard model of cosmology. The CMB observations are being compared to BBN results to assess their agreement on the baryon abundance (astro-ph/0102152).
[21:30:47] main | running function= Background
[21:30:47] select | function= Background | candidates_in= 20
[21:30:47] select | core_terms= ['baryon', 'universe', 'big bang nucleosynthesis', 'cosmic microwave background', 'baryon abundance']
[21:30:47] select | no cosine prune; kept=20/20
[21:30:47] select | pool_size= 10 | ranks= [0, 1, 2, 3, 4, 5, 6, 7, 8, 9] | pids= ['astro-ph/0103411', 'astro-ph/0102152', 'astro-ph/0102032', 'astro-ph/0102172', 'astro-ph/0101236', 'hep-ph/0101343', 'astro-ph/0103505', 'astro-ph/0101292', 'astro-ph/0103281', 'astro-ph/0102402']
[21:30:47] select | verify relaxed 1/10
[21:30:47] verify | func= Background | rank= 0 | pid= astro-ph/0103411 | title_snip='Primordial nucleosynthesis and hadronic decay of a massive particle wiâ€¦' | abs_len= 936
[21:30:50] verify | result supports= True fit= 0.80 top= 0.90 invalid= â€” cue_hint= False
[21:30:50] select | verify relaxed 2/10
[21:30:50] verify | func= Background | rank= 1 | pid= astro-ph/0102152 | title_snip='CMB (And Other) Challenges To BBN' | abs_len= 1154
[21:30:53] verify | result supports= True fit= 0.90 top= 0.95 invalid= â€” cue_hint= False
[21:30:53] select | verify relaxed 3/10
[21:30:53] verify | func= Background | rank= 2 | pid= astro-ph/0102032 | title_snip='In Support of Inflation' | abs_len= 313
[21:30:57] verify | result supports= True fit= 0.80 top= 0.90 invalid= â€” cue_hint= False
[21:30:57] select | verify relaxed 4/10
[21:30:57] verify | func= Background | rank= 3 | pid= astro-ph/0102172 | title_snip='Magnetic Fields and the Cosmic Microwave Background' | abs_len= 699
[21:30:59] verify | result supports= False fit= 0.00 top= 0.20 invalid= â€” cue_hint= False
[21:30:59] select | verify relaxed 5/10
[21:30:59] verify | func= Background | rank= 4 | pid= astro-ph/0101236 | title_snip='Determination of Omega_b From Big Bang Nucleosynthesis in the Presenceâ€¦' | abs_len= 582
[21:31:02] verify | result supports= True fit= 0.80 top= 0.90 invalid= â€” cue_hint= False
[21:31:02] select | verify relaxed 6/10
[21:31:02] verify | func= Background | rank= 5 | pid= hep-ph/0101343 | title_snip='Cosmic string induced sheet like baryon inhomogeneities at quark-hadroâ€¦' | abs_len= 922
[21:31:05] verify | result supports= True fit= 0.80 top= 0.90 invalid= â€” cue_hint= False
[21:31:05] select | verify relaxed 7/10
[21:31:05] verify | func= Background | rank= 6 | pid= astro-ph/0103505 | title_snip='Probing the Universe After Cosmological Recombination Through the Effeâ€¦' | abs_len= 942
[21:31:08] verify | result supports= False fit= 0.00 top= 0.20 invalid= no_quote cue_hint= False
[21:31:08] select | verify relaxed 8/10
[21:31:08] verify | func= Background | rank= 7 | pid= astro-ph/0101292 | title_snip='Inhomogeneous Big Bang Nucleosynthesis: Upper Limit on Omega_b and
  Pâ€¦' | abs_len= 1336
[21:31:12] verify | result supports= True fit= 0.80 top= 0.90 invalid= â€” cue_hint= False
[21:31:12] select | verify relaxed 9/10
[21:31:12] verify | func= Background | rank= 8 | pid= astro-ph/0103281 | title_snip='Fluctuations in the Cosmic Microwave Background II: $C_\ell$ at Large
â€¦' | abs_len= 1177
[21:31:14] verify | result supports= False fit= 0.00 top= 0.50 invalid= no_quote cue_hint= False
[21:31:14] select | verify relaxed 10/10
[21:31:14] verify | func= Background | rank= 9 | pid= astro-ph/0102402 | title_snip='The Cosmic Microwave Background' | abs_len= 421
[21:31:17] verify | result supports= False fit= 0.20 top= 0.60 invalid= â€” cue_hint= False

================================================================================
FUNCTION: Background
QUERY   : How does the comparison between big bang nucleosynthesis and cosmic microwave background observations relate to the background understanding of the universe's baryon abundance?
- WINNER: astro-ph/0102152 | CMB (And Other) Challenges To BBN
- QUOTE : Primordial nucleosynthesis provides a probe of the universal abundance of baryons
- WHY   : sufficient
- ANSWER: The comparison between big bang nucleosynthesis and cosmic microwave background observations provides insight into the universe's baryon abundance at different ages (astro-ph/0102152).

ðŸ“„ Saved: outputs/function_selection_results.json
ðŸ“„ Saved: outputs/function_selection_results.jsonl
ðŸ“ Answers-only: outputs/function_answers.txt
-> /home/anpa439f/anaconda3/envs/myenv/bin/python3 /data/horse/ws/anpa439f-Function_Retrieval_Citation/Research_Project/RetrievalAugmentedGeneration/classifying_question.py  (cwd=/data/horse/ws/anpa439f-Function_Retrieval_Citation/Research_Project/RetrievalAugmentedGeneration)
âœ… Saved to classified_outputs.jsonl
ðŸ”§ Ready for retrieval module (.py).
-> /home/anpa439f/anaconda3/envs/myenv/bin/python3 /data/horse/ws/anpa439f-Function_Retrieval_Citation/Research_Project/RetrievalAugmentedGeneration/Retreival_query_based.py --skip-reindex --index /data/horse/ws/anpa439f-Function_Retrieval_Citation/Research_Project/e5_index_subset_1/index.faiss --meta /data/horse/ws/anpa439f-Function_Retrieval_Citation/Research_Project/e5_index_subset_1/meta.parquet --topk 20  (cwd=/data/horse/ws/anpa439f-Function_Retrieval_Citation/Research_Project/RetrievalAugmentedGeneration)
âœ… Top-k candidates: /data/horse/ws/anpa439f-Function_Retrieval_Citation/Research_Project/RetrievalAugmentedGeneration/outputs/topk_candidates_query.jsonl
ðŸ”— Symlinked: /data/horse/ws/anpa439f-Function_Retrieval_Citation/Research_Project/outputs/topk_candidates_query.jsonl -> /data/horse/ws/anpa439f-Function_Retrieval_Citation/Research_Project/RetrievalAugmentedGeneration/outputs/topk_candidates_query.jsonl
-> /home/anpa439f/anaconda3/envs/myenv/bin/python3 /data/horse/ws/anpa439f-Function_Retrieval_Citation/Research_Project/RetrievalAugmentedGeneration/function_based_answer-2.py --debug --max-check 10  (cwd=/data/horse/ws/anpa439f-Function_Retrieval_Citation/Research_Project/RetrievalAugmentedGeneration)

ðŸŽ‰ Pipeline complete.
  â€¢ Classified file : /data/horse/ws/anpa439f-Function_Retrieval_Citation/Research_Project/RetrievalAugmentedGeneration/classified_outputs.jsonl
  â€¢ TopK (canonical): /data/horse/ws/anpa439f-Function_Retrieval_Citation/Research_Project/RetrievalAugmentedGeneration/outputs/topk_candidates_query.jsonl
  â€¢ Final outputs   : /data/horse/ws/anpa439f-Function_Retrieval_Citation/Research_Project/RetrievalAugmentedGeneration/outputs
