âœ… Available Models:
1. alias-code
2. alias-reasoning
3. alias-image-generation
4. alias-vision
5. alias-ha
6. meta-llama/Llama-3.3-70B-Instruct
7. meta-llama/Llama-3.1-8B-Instruct
8. Qwen/Qwen2-VL-7B-Instruct
9. openGPT-X/Teuken-7B-instruct-research-v0.4
10. deepseek-ai/DeepSeek-Coder-V2-Lite-Instruct
11. Qwen/Qwen3-Coder-30B-A3B-Instruct
12. Qwen/Qwen3-Embedding-4B
13. stabilityai/stable-diffusion-3.5-large-turbo
14. black-forest-labs/FLUX.1-dev
15. openai/whisper-large-v3
16. Kokoro-82M
17. tts-1-hd
18. deepseek-ai/DeepSeek-R1
19. openai/gpt-oss-120b
20. meta-llama/Llama-4-Scout-17B-16E-Instruct

ðŸ‘‰ Select a model number (default = 1): 
âœ… Using model: openai/gpt-oss-120b

ðŸ” Enter a scientific query or topic: 
ðŸ”Ž Citation Function Classification:
{
  "citation_functions": [
    "Compares",
    "Motivation"
  ],
  "justification": "The query asks for a comparison between observed radial velocities and prior predictions, and also seeks the reasons motivating a proposed extension of the Hyades Cloud boundary."
}

âœ… Saved to classified_outputs.jsonl
ðŸ”§ Ready for retrieval module (handled in a separate file).
âš¡ SKIP_REINDEX=1 â€” using existing FAISS index + meta; not scanning raw JSONL shards.
âœ… Top-k candidates (FAISS): /data/horse/ws/anpa439f-Function_Retrieval_Citation/Research_Project/RetrievalAugmentedGeneration/outputs/topk_candidates_query.jsonl
[23:10:24] main | args: Namespace(max_check=10, debug=True)
[23:10:24] read_last_jsonl | path= classified_outputs.jsonl
[23:10:24] read_last_jsonl | total_lines= 1
[23:10:24] main | query='How does the observed radial velocity of the Local Interstellar Cloud compare to previous predictions, and what motivates the proposal of an extension of the Hyades Cloud boundary?' | funcs=['Compares', 'Motivation']
[23:10:26] main | core_terms= ['Local Interstellar Cloud', 'Hyades Cloud', 'radial velocity']
[23:10:26] load_topk_jsonl | path= /data/horse/ws/anpa439f-Function_Retrieval_Citation/Research_Project/outputs/topk_candidates_query.jsonl
[23:10:26] load_topk_jsonl | rows= 20
[23:10:26] load_topk_jsonl | first: rank= 0 paper_id= astro-ph/0101090 title_snip='Microstructure of the Local Interstellar Cloud and the Identification â€¦' abs_len= 1552
[23:10:26] main | running function= Compares
[23:10:26] select | function= Compares | candidates_in= 20
[23:10:26] select | core_terms= ['Local Interstellar Cloud', 'Hyades Cloud', 'radial velocity']
[23:10:26] select | no cosine prune; kept=20/20
[23:10:26] select | pool_size= 10 | ranks= [0, 1, 2, 3, 4, 5, 6, 7, 8, 9] | pids= ['astro-ph/0101090', 'astro-ph/0103038', 'astro-ph/0102243', 'astro-ph/0101116', 'astro-ph/0103205', 'astro-ph/0102477', 'astro-ph/0102220', 'astro-ph/0101543', 'astro-ph/0102352', 'astro-ph/0103313']
[23:10:26] select | verify relaxed 1/10
[23:10:26] verify | func= Compares | rank= 0 | pid= astro-ph/0101090 | title_snip='Microstructure of the Local Interstellar Cloud and the Identification â€¦' | abs_len= 1552
[23:10:29] verify | result supports= True fit= 0.80 top= 0.90 invalid= â€” cue_hint= False
[23:10:29] select | verify relaxed 2/10
[23:10:29] verify | func= Compares | rank= 1 | pid= astro-ph/0103038 | title_snip='Light Curves from an Expanding Relativistic Jet' | abs_len= 1185
[23:10:32] verify | result supports= False fit= 0.00 top= 0.00 invalid= no_quote cue_hint= False
[23:10:32] select | verify relaxed 3/10
[23:10:32] verify | func= Compares | rank= 2 | pid= astro-ph/0102243 | title_snip='Radial Velocity of the Phoenix Dwarf Galaxy: Linking Gas and Hi Gas' | abs_len= 1488
[23:10:35] verify | result supports= False fit= 0.00 top= 0.20 invalid= â€” cue_hint= False
[23:10:35] select | verify relaxed 4/10
[23:10:35] verify | func= Compares | rank= 3 | pid= astro-ph/0101116 | title_snip='Constraints on Stirring and Dissipation of MHD Turbulence in Molecularâ€¦' | abs_len= 1270
[23:10:37] verify | result supports= False fit= 0.00 top= 0.00 invalid= no_quote cue_hint= False
[23:10:37] select | verify relaxed 5/10
[23:10:37] verify | func= Compares | rank= 4 | pid= astro-ph/0103205 | title_snip='The Evolution of Stellar Exponential Discs' | abs_len= 1740
[23:10:40] verify | result supports= False fit= 0.00 top= 0.00 invalid= no_quote cue_hint= False
[23:10:40] select | verify relaxed 6/10
[23:10:40] verify | func= Compares | rank= 5 | pid= astro-ph/0102477 | title_snip='The Structure and Evolution of Magnetized Cloud Cores in a Zero--Densiâ€¦' | abs_len= 1571
[23:10:42] verify | result supports= False fit= 0.00 top= 0.00 invalid= no_quote cue_hint= False
[23:10:42] select | verify relaxed 7/10
[23:10:42] verify | func= Compares | rank= 6 | pid= astro-ph/0102220 | title_snip='The growth of structure in the intergalactic medium' | abs_len= 1070
[23:10:44] verify | result supports= False fit= 0.00 top= 0.00 invalid= no_quote cue_hint= False
[23:10:44] select | verify relaxed 8/10
[23:10:44] verify | func= Compares | rank= 7 | pid= astro-ph/0101543 | title_snip='Interpreting Debris from Satellite Disruption In External Galaxies' | abs_len= 1632
[23:10:47] verify | result supports= False fit= 0.00 top= 0.00 invalid= no_quote cue_hint= False
[23:10:47] select | verify relaxed 9/10
[23:10:47] verify | func= Compares | rank= 8 | pid= astro-ph/0102352 | title_snip='Sunyaev-Zel'dovich Predictions for the Planck Surveyor Satellite usingâ€¦' | abs_len= 1353
[23:10:49] verify | result supports= False fit= 0.00 top= 0.00 invalid= no_quote cue_hint= False
[23:10:49] select | verify relaxed 10/10
[23:10:49] verify | func= Compares | rank= 9 | pid= astro-ph/0103313 | title_snip='Velocity dispersion in N-body simulations of CDM models' | abs_len= 741
[23:10:52] verify | result supports= False fit= 0.00 top= 0.00 invalid= no_quote cue_hint= False

================================================================================
FUNCTION: Compares
QUERY   : How does the observed radial velocity of the Local Interstellar Cloud compare to previous predictions, and what motivates the proposal of an extension of the Hyades Cloud boundary?
- WINNER: astro-ph/0101090 | Microstructure of the Local Interstellar Cloud and the Identification of
  the Hyades Cloud
- QUOTE : The LIC absorption is observed at a lower radial velocity than predicted
- WHY   : sufficient
- ANSWER: The observed radial velocity of the Local Interstellar Cloud is compared to previous predictions by Lallement & Bertin and Lallement et al., showing a discrepancy of 2.9 km/s. The proposal to extend the Hyades Cloud boundary is motivated by comparisons with previous HST and ground-based observations of nearby stars (astro-ph/0101090).
[23:10:57] main | running function= Motivation
[23:10:57] select | function= Motivation | candidates_in= 20
[23:10:57] select | core_terms= ['Local Interstellar Cloud', 'Hyades Cloud', 'radial velocity']
[23:10:57] select | no cosine prune; kept=20/20
[23:10:57] select | pool_size= 10 | ranks= [0, 1, 2, 3, 4, 5, 6, 7, 8, 9] | pids= ['astro-ph/0101090', 'astro-ph/0103038', 'astro-ph/0102243', 'astro-ph/0101116', 'astro-ph/0103205', 'astro-ph/0102477', 'astro-ph/0102220', 'astro-ph/0101543', 'astro-ph/0102352', 'astro-ph/0103313']
[23:10:57] select | verify relaxed 1/10
[23:10:57] verify | func= Motivation | rank= 0 | pid= astro-ph/0101090 | title_snip='Microstructure of the Local Interstellar Cloud and the Identification â€¦' | abs_len= 1552
[23:11:00] verify | result supports= True fit= 0.80 top= 0.90 invalid= â€” cue_hint= False
[23:11:00] select | verify relaxed 2/10
[23:11:00] verify | func= Motivation | rank= 1 | pid= astro-ph/0103038 | title_snip='Light Curves from an Expanding Relativistic Jet' | abs_len= 1185
[23:11:03] verify | result supports= False fit= 0.00 top= 0.00 invalid= no_quote cue_hint= False
[23:11:03] select | verify relaxed 3/10
[23:11:03] verify | func= Motivation | rank= 2 | pid= astro-ph/0102243 | title_snip='Radial Velocity of the Phoenix Dwarf Galaxy: Linking Gas and Hi Gas' | abs_len= 1488
[23:11:05] verify | result supports= False fit= 0.00 top= 0.20 invalid= no_quote cue_hint= False
[23:11:05] select | verify relaxed 4/10
[23:11:05] verify | func= Motivation | rank= 3 | pid= astro-ph/0101116 | title_snip='Constraints on Stirring and Dissipation of MHD Turbulence in Molecularâ€¦' | abs_len= 1270
[23:11:08] verify | result supports= False fit= 0.00 top= 0.00 invalid= no_quote cue_hint= False
[23:11:08] select | verify relaxed 5/10
[23:11:08] verify | func= Motivation | rank= 4 | pid= astro-ph/0103205 | title_snip='The Evolution of Stellar Exponential Discs' | abs_len= 1740
[23:11:10] verify | result supports= False fit= 0.00 top= 0.00 invalid= no_quote cue_hint= False
[23:11:10] select | verify relaxed 6/10
[23:11:10] verify | func= Motivation | rank= 5 | pid= astro-ph/0102477 | title_snip='The Structure and Evolution of Magnetized Cloud Cores in a Zero--Densiâ€¦' | abs_len= 1571
[23:11:12] verify | result supports= False fit= 0.00 top= 0.00 invalid= no_quote cue_hint= False
[23:11:12] select | verify relaxed 7/10
[23:11:12] verify | func= Motivation | rank= 6 | pid= astro-ph/0102220 | title_snip='The growth of structure in the intergalactic medium' | abs_len= 1070
[23:11:15] verify | result supports= False fit= 0.00 top= 0.00 invalid= no_quote cue_hint= False
[23:11:15] select | verify relaxed 8/10
[23:11:15] verify | func= Motivation | rank= 7 | pid= astro-ph/0101543 | title_snip='Interpreting Debris from Satellite Disruption In External Galaxies' | abs_len= 1632
[23:11:17] verify | result supports= False fit= 0.00 top= 0.00 invalid= no_quote cue_hint= False
[23:11:17] select | verify relaxed 9/10
[23:11:17] verify | func= Motivation | rank= 8 | pid= astro-ph/0102352 | title_snip='Sunyaev-Zel'dovich Predictions for the Planck Surveyor Satellite usingâ€¦' | abs_len= 1353
[23:11:20] verify | result supports= False fit= 0.00 top= 0.00 invalid= no_quote cue_hint= False
[23:11:20] select | verify relaxed 10/10
[23:11:20] verify | func= Motivation | rank= 9 | pid= astro-ph/0103313 | title_snip='Velocity dispersion in N-body simulations of CDM models' | abs_len= 741
[23:11:22] verify | result supports= False fit= 0.00 top= 0.00 invalid= no_quote cue_hint= False

================================================================================
FUNCTION: Motivation
QUERY   : How does the observed radial velocity of the Local Interstellar Cloud compare to previous predictions, and what motivates the proposal of an extension of the Hyades Cloud boundary?
- WINNER: astro-ph/0101090 | Microstructure of the Local Interstellar Cloud and the Identification of
  the Hyades Cloud
- QUOTE : which may indicate a compression or deceleration at the leading edge
- WHY   : sufficient
- ANSWER: The observed radial velocity of the Local Interstellar Cloud is lower than previously predicted, suggesting compression or deceleration at its leading edge. This discrepancy, along with previous observations of nearby stars, motivates the proposal to extend the Hyades Cloud boundary (astro-ph/0101090).

ðŸ“„ Saved: outputs/function_selection_results.json
ðŸ“„ Saved: outputs/function_selection_results.jsonl
ðŸ“ Answers-only: outputs/function_answers.txt
-> /home/anpa439f/anaconda3/envs/myenv/bin/python3 /data/horse/ws/anpa439f-Function_Retrieval_Citation/Research_Project/RetrievalAugmentedGeneration/classifying_question.py  (cwd=/data/horse/ws/anpa439f-Function_Retrieval_Citation/Research_Project/RetrievalAugmentedGeneration)
âœ… Saved to classified_outputs.jsonl
ðŸ”§ Ready for retrieval module (.py).
-> /home/anpa439f/anaconda3/envs/myenv/bin/python3 /data/horse/ws/anpa439f-Function_Retrieval_Citation/Research_Project/RetrievalAugmentedGeneration/Retreival_query_based.py --skip-reindex --index /data/horse/ws/anpa439f-Function_Retrieval_Citation/Research_Project/e5_index_subset_1/index.faiss --meta /data/horse/ws/anpa439f-Function_Retrieval_Citation/Research_Project/e5_index_subset_1/meta.parquet --topk 20  (cwd=/data/horse/ws/anpa439f-Function_Retrieval_Citation/Research_Project/RetrievalAugmentedGeneration)
âœ… Top-k candidates: /data/horse/ws/anpa439f-Function_Retrieval_Citation/Research_Project/RetrievalAugmentedGeneration/outputs/topk_candidates_query.jsonl
ðŸ”— Symlinked: /data/horse/ws/anpa439f-Function_Retrieval_Citation/Research_Project/outputs/topk_candidates_query.jsonl -> /data/horse/ws/anpa439f-Function_Retrieval_Citation/Research_Project/RetrievalAugmentedGeneration/outputs/topk_candidates_query.jsonl
-> /home/anpa439f/anaconda3/envs/myenv/bin/python3 /data/horse/ws/anpa439f-Function_Retrieval_Citation/Research_Project/RetrievalAugmentedGeneration/function_based_answer-2.py --debug --max-check 10  (cwd=/data/horse/ws/anpa439f-Function_Retrieval_Citation/Research_Project/RetrievalAugmentedGeneration)

ðŸŽ‰ Pipeline complete.
  â€¢ Classified file : /data/horse/ws/anpa439f-Function_Retrieval_Citation/Research_Project/RetrievalAugmentedGeneration/classified_outputs.jsonl
  â€¢ TopK (canonical): /data/horse/ws/anpa439f-Function_Retrieval_Citation/Research_Project/RetrievalAugmentedGeneration/outputs/topk_candidates_query.jsonl
  â€¢ Final outputs   : /data/horse/ws/anpa439f-Function_Retrieval_Citation/Research_Project/RetrievalAugmentedGeneration/outputs
