âœ… Available Models:
1. alias-code
2. alias-reasoning
3. alias-image-generation
4. alias-vision
5. alias-ha
6. meta-llama/Llama-3.3-70B-Instruct
7. meta-llama/Llama-3.1-8B-Instruct
8. Qwen/Qwen2-VL-7B-Instruct
9. openGPT-X/Teuken-7B-instruct-research-v0.4
10. deepseek-ai/DeepSeek-Coder-V2-Lite-Instruct
11. Qwen/Qwen3-Coder-30B-A3B-Instruct
12. Qwen/Qwen3-Embedding-4B
13. stabilityai/stable-diffusion-3.5-large-turbo
14. black-forest-labs/FLUX.1-dev
15. openai/whisper-large-v3
16. Kokoro-82M
17. tts-1-hd
18. deepseek-ai/DeepSeek-R1
19. openai/gpt-oss-120b
20. meta-llama/Llama-4-Scout-17B-16E-Instruct

ðŸ‘‰ Select a model number (default = 1): 
âœ… Using model: openai/gpt-oss-120b

ðŸ” Enter a scientific query or topic: 
ðŸ”Ž Citation Function Classification:
{
  "citation_functions": [
    "Extends",
    "Uses"
  ],
  "justification": "The query asks how the new method builds upon (extends) existing DFT approaches and how it utilizes (uses) them."
}

âœ… Saved to classified_outputs.jsonl
ðŸ”§ Ready for retrieval module (handled in a separate file).
âš¡ SKIP_REINDEX=1 â€” using existing FAISS index + meta; not scanning raw JSONL shards.
âœ… Top-k candidates (FAISS): /data/horse/ws/anpa439f-Function_Retrieval_Citation/Research_Project/RetrievalAugmentedGeneration/outputs/topk_candidates_query.jsonl
[23:08:11] main | args: Namespace(max_check=10, debug=True)
[23:08:11] read_last_jsonl | path= classified_outputs.jsonl
[23:08:11] read_last_jsonl | total_lines= 1
[23:08:11] main | query='How does the new self-interaction correction method build upon and utilize existing density functional theory methods?' | funcs=['Extends', 'Uses']
[23:08:12] main | core_terms= ['density functional theory', 'self-interaction correction', 'self-interaction']
[23:08:12] load_topk_jsonl | path= /data/horse/ws/anpa439f-Function_Retrieval_Citation/Research_Project/outputs/topk_candidates_query.jsonl
[23:08:12] load_topk_jsonl | rows= 20
[23:08:12] load_topk_jsonl | first: rank= 0 paper_id= cond-mat/0103324 title_snip='A novel method of self interaction corrections in density functional
 â€¦' abs_len= 940
[23:08:12] main | running function= Extends
[23:08:12] select | function= Extends | candidates_in= 20
[23:08:12] select | core_terms= ['density functional theory', 'self-interaction correction', 'self-interaction']
[23:08:12] select | no cosine prune; kept=20/20
[23:08:12] select | pool_size= 10 | ranks= [0, 1, 2, 3, 4, 5, 6, 7, 8, 9] | pids= ['cond-mat/0103324', 'cond-mat/0104449', 'nucl-th/0101012', 'nucl-th/0101048', 'cond-mat/0104405', 'physics/0103032', 'cond-mat/0101363', 'cond-mat/0102200', 'physics/0103003', 'nucl-th/0101022']
[23:08:12] select | verify relaxed 1/10
[23:08:12] verify | func= Extends | rank= 0 | pid= cond-mat/0103324 | title_snip='A novel method of self interaction corrections in density functional
 â€¦' | abs_len= 940
[23:08:15] verify | result supports= True fit= 0.80 top= 0.90 invalid= â€” cue_hint= False
[23:08:15] select | verify relaxed 2/10
[23:08:15] verify | func= Extends | rank= 1 | pid= cond-mat/0104449 | title_snip='A practical density functional for polydisperse polymers' | abs_len= 626
[23:08:18] verify | result supports= False fit= 0.00 top= 0.50 invalid= â€” cue_hint= False
[23:08:18] select | verify relaxed 3/10
[23:08:18] verify | func= Extends | rank= 2 | pid= nucl-th/0101012 | title_snip='Nuclear isotope shifts within the local energy-density functional
  apâ€¦' | abs_len= 1196
[23:08:21] verify | result supports= False fit= 0.00 top= 0.00 invalid= no_quote cue_hint= False
[23:08:21] select | verify relaxed 4/10
[23:08:21] verify | func= Extends | rank= 3 | pid= nucl-th/0101048 | title_snip='A New Approach to Large-Scale Nuclear Structure Calculations' | abs_len= 628
[23:08:23] verify | result supports= False fit= 0.00 top= 0.00 invalid= no_quote cue_hint= False
[23:08:23] select | verify relaxed 5/10
[23:08:23] verify | func= Extends | rank= 4 | pid= cond-mat/0104405 | title_snip='Energy loss of charged particles interacting with simple metal surfaceâ€¦' | abs_len= 996
[23:08:26] verify | result supports= False fit= 0.00 top= 0.90 invalid= off_topic_no_core_in_abstract cue_hint= False
[23:08:26] select | verify relaxed 6/10
[23:08:26] verify | func= Extends | rank= 5 | pid= physics/0103032 | title_snip='Spurious oscillations from local self-interaction correction in high
 â€¦' | abs_len= 920
[23:08:30] verify | result supports= True fit= 0.80 top= 0.90 invalid= â€” cue_hint= False
[23:08:30] select | verify relaxed 7/10
[23:08:30] verify | func= Extends | rank= 6 | pid= cond-mat/0101363 | title_snip='Comparative study of density functional theories of the
  exchange-corâ€¦' | abs_len= 1038
[23:08:33] verify | result supports= False fit= 0.00 top= 0.90 invalid= off_topic_no_core_in_abstract cue_hint= False
[23:08:33] select | verify relaxed 8/10
[23:08:33] verify | func= Extends | rank= 7 | pid= cond-mat/0102200 | title_snip='A two-dimensional algorithm of the density matrix renormalization grouâ€¦' | abs_len= 556
[23:08:35] verify | result supports= False fit= 0.00 top= 0.00 invalid= no_quote cue_hint= False
[23:08:35] select | verify relaxed 9/10
[23:08:35] verify | func= Extends | rank= 8 | pid= physics/0103003 | title_snip='Quantum fluid-dynamics from density functional theory' | abs_len= 837
[23:08:38] verify | result supports= False fit= 0.00 top= 0.50 invalid= â€” cue_hint= False
[23:08:38] select | verify relaxed 10/10
[23:08:38] verify | func= Extends | rank= 9 | pid= nucl-th/0101022 | title_snip='The Canonical Nuclear Many-Body Problem as an Effective Theory' | abs_len= 1474
[23:08:41] verify | result supports= False fit= 0.00 top= 0.00 invalid= no_quote cue_hint= False

================================================================================
FUNCTION: Extends
QUERY   : How does the new self-interaction correction method build upon and utilize existing density functional theory methods?
- WINNER: cond-mat/0103324 | A novel method of self interaction corrections in density functional
  calculations
- QUOTE : a novel method which, by construction, is totally free from self interaction
- WHY   : sufficient
- ANSWER: The new self-interaction correction method builds upon existing density functional theory methods, such as the local density approximation (LDA) and the older self-interaction correction (SIC) method, by providing a more accurate correction that is totally free from self interaction. This new method extends the scope and accuracy of prior methods, including the older SIC method, by correctly capturing the asymptotic 1/r dependence and yielding improved results for total energy and cohesive energy (cond-mat/0103324).
[23:08:46] main | running function= Uses
[23:08:46] select | function= Uses | candidates_in= 20
[23:08:46] select | core_terms= ['density functional theory', 'self-interaction correction', 'self-interaction']
[23:08:46] select | no cosine prune; kept=20/20
[23:08:46] select | pool_size= 10 | ranks= [0, 1, 2, 3, 4, 5, 6, 7, 8, 9] | pids= ['cond-mat/0103324', 'cond-mat/0104449', 'nucl-th/0101012', 'nucl-th/0101048', 'cond-mat/0104405', 'physics/0103032', 'cond-mat/0101363', 'cond-mat/0102200', 'physics/0103003', 'nucl-th/0101022']
[23:08:46] select | verify relaxed 1/10
[23:08:46] verify | func= Uses | rank= 0 | pid= cond-mat/0103324 | title_snip='A novel method of self interaction corrections in density functional
 â€¦' | abs_len= 940
[23:08:49] verify | result supports= True fit= 0.80 top= 0.90 invalid= â€” cue_hint= False
[23:08:49] select | verify relaxed 2/10
[23:08:49] verify | func= Uses | rank= 1 | pid= cond-mat/0104449 | title_snip='A practical density functional for polydisperse polymers' | abs_len= 626
[23:08:52] verify | result supports= False fit= 0.00 top= 0.50 invalid= â€” cue_hint= False
[23:08:52] select | verify relaxed 3/10
[23:08:52] verify | func= Uses | rank= 2 | pid= nucl-th/0101012 | title_snip='Nuclear isotope shifts within the local energy-density functional
  apâ€¦' | abs_len= 1196
[23:08:55] verify | result supports= False fit= 0.00 top= 0.20 invalid= no_quote cue_hint= False
[23:08:55] select | verify relaxed 4/10
[23:08:55] verify | func= Uses | rank= 3 | pid= nucl-th/0101048 | title_snip='A New Approach to Large-Scale Nuclear Structure Calculations' | abs_len= 628
[23:08:57] verify | result supports= False fit= 0.00 top= 0.00 invalid= no_quote cue_hint= False
[23:08:57] select | verify relaxed 5/10
[23:08:57] verify | func= Uses | rank= 4 | pid= cond-mat/0104405 | title_snip='Energy loss of charged particles interacting with simple metal surfaceâ€¦' | abs_len= 996
[23:09:00] verify | result supports= False fit= 0.00 top= 0.90 invalid= off_topic_no_core_in_abstract cue_hint= False
[23:09:00] select | verify relaxed 6/10
[23:09:00] verify | func= Uses | rank= 5 | pid= physics/0103032 | title_snip='Spurious oscillations from local self-interaction correction in high
 â€¦' | abs_len= 920
[23:09:04] verify | result supports= True fit= 0.80 top= 0.90 invalid= â€” cue_hint= True
[23:09:04] select | verify relaxed 7/10
[23:09:04] verify | func= Uses | rank= 6 | pid= cond-mat/0101363 | title_snip='Comparative study of density functional theories of the
  exchange-corâ€¦' | abs_len= 1038
[23:09:07] verify | result supports= False fit= 0.00 top= 0.90 invalid= off_topic_no_core_in_abstract cue_hint= False
[23:09:07] select | verify relaxed 8/10
[23:09:07] verify | func= Uses | rank= 7 | pid= cond-mat/0102200 | title_snip='A two-dimensional algorithm of the density matrix renormalization grouâ€¦' | abs_len= 556
[23:09:09] verify | result supports= False fit= 0.00 top= 0.00 invalid= no_quote cue_hint= False
[23:09:09] select | verify relaxed 9/10
[23:09:09] verify | func= Uses | rank= 8 | pid= physics/0103003 | title_snip='Quantum fluid-dynamics from density functional theory' | abs_len= 837
[23:09:12] verify | result supports= True fit= 0.80 top= 0.90 invalid= â€” cue_hint= False
[23:09:12] select | verify relaxed 10/10
[23:09:12] verify | func= Uses | rank= 9 | pid= nucl-th/0101022 | title_snip='The Canonical Nuclear Many-Body Problem as an Effective Theory' | abs_len= 1474
[23:09:15] verify | result supports= False fit= 0.00 top= 0.00 invalid= no_quote cue_hint= False

================================================================================
FUNCTION: Uses
QUERY   : How does the new self-interaction correction method build upon and utilize existing density functional theory methods?
- WINNER: physics/0103032 | Spurious oscillations from local self-interaction correction in high
  energy photoionization calculations for metal clusters
- QUOTE : employing self-interaction correction (SIC) in the framework of local-density approximation
- WHY   : sufficient
- ANSWER: The new self-interaction correction method builds upon existing density functional theory methods, specifically the local-density approximation. Researchers use self-interaction correction within this framework to describe the ground state of simple metal clusters (physics/0103032).

ðŸ“„ Saved: outputs/function_selection_results.json
ðŸ“„ Saved: outputs/function_selection_results.jsonl
ðŸ“ Answers-only: outputs/function_answers.txt
-> /home/anpa439f/anaconda3/envs/myenv/bin/python3 /data/horse/ws/anpa439f-Function_Retrieval_Citation/Research_Project/RetrievalAugmentedGeneration/classifying_question.py  (cwd=/data/horse/ws/anpa439f-Function_Retrieval_Citation/Research_Project/RetrievalAugmentedGeneration)
âœ… Saved to classified_outputs.jsonl
ðŸ”§ Ready for retrieval module (.py).
-> /home/anpa439f/anaconda3/envs/myenv/bin/python3 /data/horse/ws/anpa439f-Function_Retrieval_Citation/Research_Project/RetrievalAugmentedGeneration/Retreival_query_based.py --skip-reindex --index /data/horse/ws/anpa439f-Function_Retrieval_Citation/Research_Project/e5_index_subset_1/index.faiss --meta /data/horse/ws/anpa439f-Function_Retrieval_Citation/Research_Project/e5_index_subset_1/meta.parquet --topk 20  (cwd=/data/horse/ws/anpa439f-Function_Retrieval_Citation/Research_Project/RetrievalAugmentedGeneration)
âœ… Top-k candidates: /data/horse/ws/anpa439f-Function_Retrieval_Citation/Research_Project/RetrievalAugmentedGeneration/outputs/topk_candidates_query.jsonl
ðŸ”— Symlinked: /data/horse/ws/anpa439f-Function_Retrieval_Citation/Research_Project/outputs/topk_candidates_query.jsonl -> /data/horse/ws/anpa439f-Function_Retrieval_Citation/Research_Project/RetrievalAugmentedGeneration/outputs/topk_candidates_query.jsonl
-> /home/anpa439f/anaconda3/envs/myenv/bin/python3 /data/horse/ws/anpa439f-Function_Retrieval_Citation/Research_Project/RetrievalAugmentedGeneration/function_based_answer-2.py --debug --max-check 10  (cwd=/data/horse/ws/anpa439f-Function_Retrieval_Citation/Research_Project/RetrievalAugmentedGeneration)

ðŸŽ‰ Pipeline complete.
  â€¢ Classified file : /data/horse/ws/anpa439f-Function_Retrieval_Citation/Research_Project/RetrievalAugmentedGeneration/classified_outputs.jsonl
  â€¢ TopK (canonical): /data/horse/ws/anpa439f-Function_Retrieval_Citation/Research_Project/RetrievalAugmentedGeneration/outputs/topk_candidates_query.jsonl
  â€¢ Final outputs   : /data/horse/ws/anpa439f-Function_Retrieval_Citation/Research_Project/RetrievalAugmentedGeneration/outputs
