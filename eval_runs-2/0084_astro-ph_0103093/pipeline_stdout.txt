âœ… Available Models:
1. alias-code
2. alias-reasoning
3. alias-image-generation
4. alias-vision
5. alias-ha
6. meta-llama/Llama-3.3-70B-Instruct
7. meta-llama/Llama-3.1-8B-Instruct
8. Qwen/Qwen2-VL-7B-Instruct
9. openGPT-X/Teuken-7B-instruct-research-v0.4
10. deepseek-ai/DeepSeek-Coder-V2-Lite-Instruct
11. Qwen/Qwen3-Coder-30B-A3B-Instruct
12. Qwen/Qwen3-Embedding-4B
13. stabilityai/stable-diffusion-3.5-large-turbo
14. black-forest-labs/FLUX.1-dev
15. openai/whisper-large-v3
16. Kokoro-82M
17. tts-1-hd
18. deepseek-ai/DeepSeek-R1
19. openai/gpt-oss-120b
20. meta-llama/Llama-4-Scout-17B-16E-Instruct

ðŸ‘‰ Select a model number (default = 1): 
âœ… Using model: openai/gpt-oss-120b

ðŸ” Enter a scientific query or topic: 
ðŸ”Ž Citation Function Classification:
{
  "citation_functions": [
    "Uses",
    "FutureWork"
  ],
  "justification": "The query asks how a specific method will be applied (Uses) and explicitly frames it as a direction for upcoming studies (FutureWork)."
}

âœ… Saved to classified_outputs.jsonl
ðŸ”§ Ready for retrieval module (handled in a separate file).
âš¡ SKIP_REINDEX=1 â€” using existing FAISS index + meta; not scanning raw JSONL shards.
âœ… Top-k candidates (FAISS): /data/horse/ws/anpa439f-Function_Retrieval_Citation/Research_Project/RetrievalAugmentedGeneration/outputs/topk_candidates_query.jsonl
[23:01:13] main | args: Namespace(max_check=10, debug=True)
[23:01:13] read_last_jsonl | path= classified_outputs.jsonl
[23:01:13] read_last_jsonl | total_lines= 1
[23:01:13] main | query='How will the method of multi-lens ray-tracing be used in future research to improve our understanding of strong gravitational lensing by multiple objects?' | funcs=['Uses', 'FutureWork']
[23:01:15] main | core_terms= ['strong gravitational lensing', 'multi-lens ray-tracing', 'gravitational lensing', 'multi-lens', 'ray-tracing']
[23:01:15] load_topk_jsonl | path= /data/horse/ws/anpa439f-Function_Retrieval_Citation/Research_Project/outputs/topk_candidates_query.jsonl
[23:01:15] load_topk_jsonl | rows= 20
[23:01:15] load_topk_jsonl | first: rank= 0 paper_id= astro-ph/0103093 title_snip='Strong gravitational lensing by multiple galaxies' abs_len= 1336
[23:01:15] main | running function= Uses
[23:01:15] select | function= Uses | candidates_in= 20
[23:01:15] select | core_terms= ['strong gravitational lensing', 'multi-lens ray-tracing', 'gravitational lensing', 'multi-lens', 'ray-tracing']
[23:01:15] select | no cosine prune; kept=20/20
[23:01:15] select | pool_size= 10 | ranks= [0, 1, 2, 3, 4, 5, 6, 7, 8, 9] | pids= ['astro-ph/0103093', 'astro-ph/0102340', 'astro-ph/0104253', 'astro-ph/0104440', 'astro-ph/0103208', 'physics/0104004', 'gr-qc/0104083', 'astro-ph/0103516', 'astro-ph/0102341', 'astro-ph/0103500']
[23:01:15] select | verify relaxed 1/10
[23:01:15] verify | func= Uses | rank= 0 | pid= astro-ph/0103093 | title_snip='Strong gravitational lensing by multiple galaxies' | abs_len= 1336
[23:01:18] verify | result supports= True fit= 0.80 top= 0.90 invalid= â€” cue_hint= True
[23:01:18] select | verify relaxed 2/10
[23:01:18] verify | func= Uses | rank= 1 | pid= astro-ph/0102340 | title_snip='Computational Methods for Gravitational Lensing' | abs_len= 770
[23:01:21] verify | result supports= False fit= 0.00 top= 0.80 invalid= â€” cue_hint= False
[23:01:21] select | verify relaxed 3/10
[23:01:21] verify | func= Uses | rank= 2 | pid= astro-ph/0104253 | title_snip='Possible Method to Reconstruct the Cosmic Equation of State from Stronâ€¦' | abs_len= 596
[23:01:23] verify | result supports= False fit= 0.00 top= 0.80 invalid= â€” cue_hint= False
[23:01:23] select | verify relaxed 4/10
[23:01:23] verify | func= Uses | rank= 3 | pid= astro-ph/0104440 | title_snip='Seeing double: strong gravitational lensing of high-redshift supernovaâ€¦' | abs_len= 1277
[23:01:27] verify | result supports= False fit= 0.00 top= 0.80 invalid= â€” cue_hint= False
[23:01:27] select | verify relaxed 5/10
[23:01:27] verify | func= Uses | rank= 4 | pid= astro-ph/0103208 | title_snip='Gravitational lensing and modified Newtonian dynamics' | abs_len= 1041
[23:01:30] verify | result supports= False fit= 0.00 top= 0.50 invalid= â€” cue_hint= False
[23:01:30] select | verify relaxed 6/10
[23:01:30] verify | func= Uses | rank= 5 | pid= physics/0104004 | title_snip='Ray-Tracing studies in a perturbed atmosphere: I- The initial value
  â€¦' | abs_len= 1220
[23:01:32] verify | result supports= False fit= 0.00 top= 0.00 invalid= no_quote cue_hint= False
[23:01:32] select | verify relaxed 7/10
[23:01:32] verify | func= Uses | rank= 6 | pid= gr-qc/0104083 | title_snip='Post-Newtonian Expansion of Gravitational Radiation' | abs_len= 1005
[23:01:35] verify | result supports= False fit= 0.00 top= 0.00 invalid= no_quote cue_hint= False
[23:01:35] select | verify relaxed 8/10
[23:01:35] verify | func= Uses | rank= 7 | pid= astro-ph/0103516 | title_snip='Applications of Microlensing to Stellar Astrophysics' | abs_len= 1616
[23:01:37] verify | result supports= False fit= 0.00 top= 0.00 invalid= no_quote cue_hint= False
[23:01:37] select | verify relaxed 9/10
[23:01:37] verify | func= Uses | rank= 8 | pid= astro-ph/0102341 | title_snip='A Catalog of Mass Models for Gravitational Lensing' | abs_len= 435
[23:01:40] verify | result supports= False fit= 0.00 top= 0.50 invalid= â€” cue_hint= False
[23:01:40] select | verify relaxed 10/10
[23:01:40] verify | func= Uses | rank= 9 | pid= astro-ph/0103500 | title_snip='Constraining the Cosmological Parameters using Strong Lensing' | abs_len= 1682
[23:01:43] verify | result supports= False fit= 0.00 top= 0.50 invalid= â€” cue_hint= True

================================================================================
FUNCTION: Uses
QUERY   : How will the method of multi-lens ray-tracing be used in future research to improve our understanding of strong gravitational lensing by multiple objects?
- WINNER: astro-ph/0103093 | Strong gravitational lensing by multiple galaxies
- QUOTE : Using multi-lens ray-tracing, we estimate the likelihood
- WHY   : sufficient
- ANSWER: Researchers will use multi-lens ray-tracing to estimate the likelihood of gravitational lensing by multiple objects and investigate image geometries. This method will be applied to improve understanding of strong gravitational lensing by multiple galaxies and to constrain lens models of individual systems (astro-ph/0103093).
[23:01:47] main | running function= FutureWork
[23:01:47] select | function= FutureWork | candidates_in= 20
[23:01:47] select | core_terms= ['strong gravitational lensing', 'multi-lens ray-tracing', 'gravitational lensing', 'multi-lens', 'ray-tracing']
[23:01:47] select | no cosine prune; kept=20/20
[23:01:47] select | pool_size= 10 | ranks= [0, 1, 2, 3, 4, 5, 6, 7, 8, 9] | pids= ['astro-ph/0103093', 'astro-ph/0102340', 'astro-ph/0104253', 'astro-ph/0104440', 'astro-ph/0103208', 'physics/0104004', 'gr-qc/0104083', 'astro-ph/0103516', 'astro-ph/0102341', 'astro-ph/0103500']
[23:01:47] select | verify relaxed 1/10
[23:01:47] verify | func= FutureWork | rank= 0 | pid= astro-ph/0103093 | title_snip='Strong gravitational lensing by multiple galaxies' | abs_len= 1336
[23:01:50] verify | result supports= True fit= 0.80 top= 0.90 invalid= â€” cue_hint= False
[23:01:50] select | verify relaxed 2/10
[23:01:50] verify | func= FutureWork | rank= 1 | pid= astro-ph/0102340 | title_snip='Computational Methods for Gravitational Lensing' | abs_len= 770
[23:01:53] verify | result supports= False fit= 0.00 top= 0.80 invalid= â€” cue_hint= False
[23:01:53] select | verify relaxed 3/10
[23:01:53] verify | func= FutureWork | rank= 2 | pid= astro-ph/0104253 | title_snip='Possible Method to Reconstruct the Cosmic Equation of State from Stronâ€¦' | abs_len= 596
[23:01:56] verify | result supports= False fit= 0.00 top= 0.80 invalid= â€” cue_hint= False
[23:01:56] select | verify relaxed 4/10
[23:01:56] verify | func= FutureWork | rank= 3 | pid= astro-ph/0104440 | title_snip='Seeing double: strong gravitational lensing of high-redshift supernovaâ€¦' | abs_len= 1277
[23:01:58] verify | result supports= False fit= 0.00 top= 0.50 invalid= no_quote cue_hint= False
[23:01:58] select | verify relaxed 5/10
[23:01:58] verify | func= FutureWork | rank= 4 | pid= astro-ph/0103208 | title_snip='Gravitational lensing and modified Newtonian dynamics' | abs_len= 1041
[23:02:01] verify | result supports= False fit= 0.00 top= 0.50 invalid= â€” cue_hint= False
[23:02:01] select | verify relaxed 6/10
[23:02:01] verify | func= FutureWork | rank= 5 | pid= physics/0104004 | title_snip='Ray-Tracing studies in a perturbed atmosphere: I- The initial value
  â€¦' | abs_len= 1220
[23:02:04] verify | result supports= False fit= 0.00 top= 0.00 invalid= no_quote cue_hint= False
[23:02:04] select | verify relaxed 7/10
[23:02:04] verify | func= FutureWork | rank= 6 | pid= gr-qc/0104083 | title_snip='Post-Newtonian Expansion of Gravitational Radiation' | abs_len= 1005
[23:02:06] verify | result supports= False fit= 0.00 top= 0.00 invalid= no_quote cue_hint= False
[23:02:06] select | verify relaxed 8/10
[23:02:06] verify | func= FutureWork | rank= 7 | pid= astro-ph/0103516 | title_snip='Applications of Microlensing to Stellar Astrophysics' | abs_len= 1616
[23:02:09] verify | result supports= False fit= 0.00 top= 0.00 invalid= no_quote cue_hint= False
[23:02:09] select | verify relaxed 9/10
[23:02:09] verify | func= FutureWork | rank= 8 | pid= astro-ph/0102341 | title_snip='A Catalog of Mass Models for Gravitational Lensing' | abs_len= 435
[23:02:11] verify | result supports= False fit= 0.00 top= 0.50 invalid= â€” cue_hint= False
[23:02:11] select | verify relaxed 10/10
[23:02:11] verify | func= FutureWork | rank= 9 | pid= astro-ph/0103500 | title_snip='Constraining the Cosmological Parameters using Strong Lensing' | abs_len= 1682
[23:02:15] verify | result supports= False fit= 0.00 top= 0.50 invalid= â€” cue_hint= False

================================================================================
FUNCTION: FutureWork
QUERY   : How will the method of multi-lens ray-tracing be used in future research to improve our understanding of strong gravitational lensing by multiple objects?
- WINNER: astro-ph/0103093 | Strong gravitational lensing by multiple galaxies
- QUOTE : Multiple lens systems will be important in future
- WHY   : sufficient
- ANSWER: The method of multi-lens ray-tracing will be used in future research to improve understanding of strong gravitational lensing by multiple objects, particularly in constraining lens models and statistical lensing. Future studies will account for effects such as external shear and aligned discs in lensing galaxies to better model multiple lens systems (astro-ph/0103093).

ðŸ“„ Saved: outputs/function_selection_results.json
ðŸ“„ Saved: outputs/function_selection_results.jsonl
ðŸ“ Answers-only: outputs/function_answers.txt
-> /home/anpa439f/anaconda3/envs/myenv/bin/python3 /data/horse/ws/anpa439f-Function_Retrieval_Citation/Research_Project/RetrievalAugmentedGeneration/classifying_question.py  (cwd=/data/horse/ws/anpa439f-Function_Retrieval_Citation/Research_Project/RetrievalAugmentedGeneration)
âœ… Saved to classified_outputs.jsonl
ðŸ”§ Ready for retrieval module (.py).
-> /home/anpa439f/anaconda3/envs/myenv/bin/python3 /data/horse/ws/anpa439f-Function_Retrieval_Citation/Research_Project/RetrievalAugmentedGeneration/Retreival_query_based.py --skip-reindex --index /data/horse/ws/anpa439f-Function_Retrieval_Citation/Research_Project/e5_index_subset_1/index.faiss --meta /data/horse/ws/anpa439f-Function_Retrieval_Citation/Research_Project/e5_index_subset_1/meta.parquet --topk 20  (cwd=/data/horse/ws/anpa439f-Function_Retrieval_Citation/Research_Project/RetrievalAugmentedGeneration)
âœ… Top-k candidates: /data/horse/ws/anpa439f-Function_Retrieval_Citation/Research_Project/RetrievalAugmentedGeneration/outputs/topk_candidates_query.jsonl
ðŸ”— Symlinked: /data/horse/ws/anpa439f-Function_Retrieval_Citation/Research_Project/outputs/topk_candidates_query.jsonl -> /data/horse/ws/anpa439f-Function_Retrieval_Citation/Research_Project/RetrievalAugmentedGeneration/outputs/topk_candidates_query.jsonl
-> /home/anpa439f/anaconda3/envs/myenv/bin/python3 /data/horse/ws/anpa439f-Function_Retrieval_Citation/Research_Project/RetrievalAugmentedGeneration/function_based_answer-2.py --debug --max-check 10  (cwd=/data/horse/ws/anpa439f-Function_Retrieval_Citation/Research_Project/RetrievalAugmentedGeneration)

ðŸŽ‰ Pipeline complete.
  â€¢ Classified file : /data/horse/ws/anpa439f-Function_Retrieval_Citation/Research_Project/RetrievalAugmentedGeneration/classified_outputs.jsonl
  â€¢ TopK (canonical): /data/horse/ws/anpa439f-Function_Retrieval_Citation/Research_Project/RetrievalAugmentedGeneration/outputs/topk_candidates_query.jsonl
  â€¢ Final outputs   : /data/horse/ws/anpa439f-Function_Retrieval_Citation/Research_Project/RetrievalAugmentedGeneration/outputs
