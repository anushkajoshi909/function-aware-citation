âœ… Available Models:
1. alias-code
2. alias-reasoning
3. alias-image-generation
4. alias-vision
5. alias-ha
6. meta-llama/Llama-3.3-70B-Instruct
7. meta-llama/Llama-3.1-8B-Instruct
8. Qwen/Qwen2-VL-7B-Instruct
9. openGPT-X/Teuken-7B-instruct-research-v0.4
10. deepseek-ai/DeepSeek-Coder-V2-Lite-Instruct
11. Qwen/Qwen3-Coder-30B-A3B-Instruct
12. Qwen/Qwen3-Embedding-4B
13. stabilityai/stable-diffusion-3.5-large-turbo
14. black-forest-labs/FLUX.1-dev
15. openai/whisper-large-v3
16. Kokoro-82M
17. tts-1-hd
18. deepseek-ai/DeepSeek-R1
19. openai/gpt-oss-120b
20. meta-llama/Llama-4-Scout-17B-16E-Instruct

ðŸ‘‰ Select a model number (default = 1): 
âœ… Using model: openai/gpt-oss-120b

ðŸ” Enter a scientific query or topic: 
ðŸ”Ž Citation Function Classification:
{
  "citation_functions": [
    "Motivation",
    "Uses"
  ],
  "justification": "The query asks why the X\u2011ray source should be studied (Motivation) and which techniques are applied to investigate it (Uses)."
}

âœ… Saved to classified_outputs.jsonl
ðŸ”§ Ready for retrieval module (handled in a separate file).
âš¡ SKIP_REINDEX=1 â€” using existing FAISS index + meta; not scanning raw JSONL shards.
âœ… Top-k candidates (FAISS): /data/horse/ws/anpa439f-Function_Retrieval_Citation/Research_Project/RetrievalAugmentedGeneration/outputs/topk_candidates_query.jsonl
[00:25:28] main | args: Namespace(max_check=10, debug=True)
[00:25:28] read_last_jsonl | path= classified_outputs.jsonl
[00:25:28] read_last_jsonl | total_lines= 1
[00:25:28] main | query='What motivates the analysis of the X-ray source and what methods are used to understand its properties?' | funcs=['Motivation', 'Uses']
[00:25:30] main | core_terms= ['X-ray source', 'spectroscopy', 'emission spectrum', 'X-ray']
[00:25:30] load_topk_jsonl | path= /data/horse/ws/anpa439f-Function_Retrieval_Citation/Research_Project/outputs/topk_candidates_query.jsonl
[00:25:30] load_topk_jsonl | rows= 20
[00:25:30] load_topk_jsonl | first: rank= 0 paper_id= astro-ph/0103431 title_snip='Properties of Black Holes in Stellar Binary Systems' abs_len= 880
[00:25:30] main | running function= Motivation
[00:25:30] select | function= Motivation | candidates_in= 20
[00:25:30] select | core_terms= ['X-ray source', 'spectroscopy', 'emission spectrum', 'X-ray']
[00:25:30] select | no cosine prune; kept=20/20
[00:25:30] select | pool_size= 10 | ranks= [0, 1, 2, 3, 4, 5, 6, 7, 8, 9] | pids= ['astro-ph/0103431', 'astro-ph/0102297', 'astro-ph/0102428', 'astro-ph/0102111', 'astro-ph/0102088', 'astro-ph/0104270', 'astro-ph/0104348', 'astro-ph/0102495', 'astro-ph/0101084', 'astro-ph/0101396']
[00:25:30] select | verify relaxed 1/10
[00:25:30] verify | func= Motivation | rank= 0 | pid= astro-ph/0103431 | title_snip='Properties of Black Holes in Stellar Binary Systems' | abs_len= 880
[00:25:33] verify | result supports= True fit= 0.80 top= 0.90 invalid= â€” cue_hint= False
[00:25:33] select | verify relaxed 2/10
[00:25:33] verify | func= Motivation | rank= 1 | pid= astro-ph/0102297 | title_snip='Comparison of source detection procedures for XMM-Newton images' | abs_len= 1589
[00:25:36] verify | result supports= True fit= 0.80 top= 0.90 invalid= â€” cue_hint= False
[00:25:36] select | verify relaxed 3/10
[00:25:36] verify | func= Motivation | rank= 2 | pid= astro-ph/0102428 | title_snip='The BeppoSAX High Energy Large Area Survey. IV. On the soft X-ray
  prâ€¦' | abs_len= 753
[00:25:39] verify | result supports= True fit= 0.80 top= 0.90 invalid= â€” cue_hint= False
[00:25:39] select | verify relaxed 4/10
[00:25:39] verify | func= Motivation | rank= 3 | pid= astro-ph/0102111 | title_snip='Spectral and temporal properties of X-ray emission from the
  ultra-luâ€¦' | abs_len= 494
[00:25:42] verify | result supports= True fit= 0.80 top= 0.90 invalid= â€” cue_hint= False
[00:25:42] select | verify relaxed 5/10
[00:25:42] verify | func= Motivation | rank= 4 | pid= astro-ph/0102088 | title_snip='Spectra and evolution of two X-ray sources in M81' | abs_len= 277
[00:25:45] verify | result supports= True fit= 0.80 top= 0.90 invalid= â€” cue_hint= False
[00:25:45] select | verify relaxed 6/10
[00:25:45] verify | func= Motivation | rank= 5 | pid= astro-ph/0104270 | title_snip='The Enigmatic X-ray Point Sources at the Central Stars of NGC 6543 andâ€¦' | abs_len= 850
[00:25:48] verify | result supports= True fit= 0.80 top= 0.90 invalid= â€” cue_hint= False
[00:25:48] select | verify relaxed 7/10
[00:25:48] verify | func= Motivation | rank= 6 | pid= astro-ph/0104348 | title_snip='Guiding the Way to Gamma-Ray Sources: X-ray Studies of Supernova
  Remâ€¦' | abs_len= 612
[00:25:51] verify | result supports= True fit= 0.80 top= 0.90 invalid= â€” cue_hint= False
[00:25:51] select | verify relaxed 8/10
[00:25:51] verify | func= Motivation | rank= 7 | pid= astro-ph/0102495 | title_snip='The Gamma-Ray Properties of Unidentified EGRET Sources' | abs_len= 894
[00:25:54] verify | result supports= False fit= 0.00 top= 0.00 invalid= no_quote cue_hint= False
[00:25:54] select | verify relaxed 9/10
[00:25:54] verify | func= Motivation | rank= 8 | pid= astro-ph/0101084 | title_snip='Global Evolution Models and the Extragalactic Background Light' | abs_len= 709
[00:25:56] verify | result supports= False fit= 0.00 top= 0.00 invalid= no_quote cue_hint= False
[00:25:56] select | verify relaxed 10/10
[00:25:56] verify | func= Motivation | rank= 9 | pid= astro-ph/0101396 | title_snip='HEXTE Studies of Sco X-1 Spectra: Detections of Hard X-Ray Tails Beyonâ€¦' | abs_len= 944
[00:25:59] verify | result supports= False fit= 0.00 top= 0.80 invalid= no_quote cue_hint= False

================================================================================
FUNCTION: Motivation
QUERY   : What motivates the analysis of the X-ray source and what methods are used to understand its properties?
- WINNER: astro-ph/0103431 | Properties of Black Holes in Stellar Binary Systems
- QUOTE : Recent X-ray timing and spectral observations
- WHY   : sufficient
- ANSWER: The analysis of the X-ray source is motivated by the need to understand the properties of black holes in stellar binary systems, particularly their mass and spin. Investigating these properties matters because it can provide insights into the physics of accretion flows and the formation of relativistic jets (astro-ph/0103431).
[00:26:03] main | running function= Uses
[00:26:03] select | function= Uses | candidates_in= 20
[00:26:03] select | core_terms= ['X-ray source', 'spectroscopy', 'emission spectrum', 'X-ray']
[00:26:03] select | no cosine prune; kept=20/20
[00:26:03] select | pool_size= 10 | ranks= [0, 1, 2, 3, 4, 5, 6, 7, 8, 9] | pids= ['astro-ph/0103431', 'astro-ph/0102297', 'astro-ph/0102428', 'astro-ph/0102111', 'astro-ph/0102088', 'astro-ph/0104270', 'astro-ph/0104348', 'astro-ph/0102495', 'astro-ph/0101084', 'astro-ph/0101396']
[00:26:03] select | verify relaxed 1/10
[00:26:03] verify | func= Uses | rank= 0 | pid= astro-ph/0103431 | title_snip='Properties of Black Holes in Stellar Binary Systems' | abs_len= 880
[00:26:06] verify | result supports= True fit= 0.80 top= 0.90 invalid= â€” cue_hint= False
[00:26:06] select | verify relaxed 2/10
[00:26:06] verify | func= Uses | rank= 1 | pid= astro-ph/0102297 | title_snip='Comparison of source detection procedures for XMM-Newton images' | abs_len= 1589
[00:26:09] verify | result supports= True fit= 0.80 top= 0.90 invalid= â€” cue_hint= True
[00:26:09] select | verify relaxed 3/10
[00:26:09] verify | func= Uses | rank= 2 | pid= astro-ph/0102428 | title_snip='The BeppoSAX High Energy Large Area Survey. IV. On the soft X-ray
  prâ€¦' | abs_len= 753
[00:26:13] verify | result supports= False fit= 0.00 top= 0.90 invalid= quote_not_in_abstract cue_hint= False
[00:26:13] select | verify relaxed 4/10
[00:26:13] verify | func= Uses | rank= 3 | pid= astro-ph/0102111 | title_snip='Spectral and temporal properties of X-ray emission from the
  ultra-luâ€¦' | abs_len= 494
[00:26:16] verify | result supports= True fit= 0.80 top= 0.90 invalid= â€” cue_hint= True
[00:26:16] select | verify relaxed 5/10
[00:26:16] verify | func= Uses | rank= 4 | pid= astro-ph/0102088 | title_snip='Spectra and evolution of two X-ray sources in M81' | abs_len= 277
[00:26:19] verify | result supports= True fit= 0.80 top= 0.90 invalid= â€” cue_hint= True
[00:26:19] select | verify relaxed 6/10
[00:26:19] verify | func= Uses | rank= 5 | pid= astro-ph/0104270 | title_snip='The Enigmatic X-ray Point Sources at the Central Stars of NGC 6543 andâ€¦' | abs_len= 850
[00:26:22] verify | result supports= True fit= 0.80 top= 0.90 invalid= â€” cue_hint= False
[00:26:22] select | verify relaxed 7/10
[00:26:22] verify | func= Uses | rank= 6 | pid= astro-ph/0104348 | title_snip='Guiding the Way to Gamma-Ray Sources: X-ray Studies of Supernova
  Remâ€¦' | abs_len= 612
[00:26:26] verify | result supports= True fit= 0.80 top= 0.90 invalid= â€” cue_hint= False
[00:26:26] select | verify relaxed 8/10
[00:26:26] verify | func= Uses | rank= 7 | pid= astro-ph/0102495 | title_snip='The Gamma-Ray Properties of Unidentified EGRET Sources' | abs_len= 894
[00:26:28] verify | result supports= False fit= 0.00 top= 0.00 invalid= no_quote cue_hint= False
[00:26:28] select | verify relaxed 9/10
[00:26:28] verify | func= Uses | rank= 8 | pid= astro-ph/0101084 | title_snip='Global Evolution Models and the Extragalactic Background Light' | abs_len= 709
[00:26:30] verify | result supports= False fit= 0.00 top= 0.00 invalid= no_quote cue_hint= False
[00:26:30] select | verify relaxed 10/10
[00:26:30] verify | func= Uses | rank= 9 | pid= astro-ph/0101396 | title_snip='HEXTE Studies of Sco X-1 Spectra: Detections of Hard X-Ray Tails Beyonâ€¦' | abs_len= 944
[00:26:34] verify | result supports= True fit= 0.80 top= 0.90 invalid= â€” cue_hint= True

================================================================================
FUNCTION: Uses
QUERY   : What motivates the analysis of the X-ray source and what methods are used to understand its properties?
- WINNER: astro-ph/0102297 | Comparison of source detection procedures for XMM-Newton images
- QUOTE : Procedures based on current methods to detect sources in X-ray images are
- WHY   : sufficient
- ANSWER: The authors use multiresolution filtering and SExtractor to analyze X-ray sources, and also apply the maximum likelihood technique for point-like sources. These methods are used to detect and understand the properties of X-ray sources, including unresolved and extended sources, in XMM-Newton images (astro-ph/0102297).

ðŸ“„ Saved: outputs/function_selection_results.json
ðŸ“„ Saved: outputs/function_selection_results.jsonl
ðŸ“ Answers-only: outputs/function_answers.txt
-> /home/anpa439f/anaconda3/envs/myenv/bin/python3 /data/horse/ws/anpa439f-Function_Retrieval_Citation/Research_Project/RetrievalAugmentedGeneration/classifying_question.py  (cwd=/data/horse/ws/anpa439f-Function_Retrieval_Citation/Research_Project/RetrievalAugmentedGeneration)
âœ… Saved to classified_outputs.jsonl
ðŸ”§ Ready for retrieval module (.py).
-> /home/anpa439f/anaconda3/envs/myenv/bin/python3 /data/horse/ws/anpa439f-Function_Retrieval_Citation/Research_Project/RetrievalAugmentedGeneration/Retreival_query_based.py --skip-reindex --index /data/horse/ws/anpa439f-Function_Retrieval_Citation/Research_Project/e5_index_subset_1/index.faiss --meta /data/horse/ws/anpa439f-Function_Retrieval_Citation/Research_Project/e5_index_subset_1/meta.parquet --topk 20  (cwd=/data/horse/ws/anpa439f-Function_Retrieval_Citation/Research_Project/RetrievalAugmentedGeneration)
âœ… Top-k candidates: /data/horse/ws/anpa439f-Function_Retrieval_Citation/Research_Project/RetrievalAugmentedGeneration/outputs/topk_candidates_query.jsonl
ðŸ”— Symlinked: /data/horse/ws/anpa439f-Function_Retrieval_Citation/Research_Project/outputs/topk_candidates_query.jsonl -> /data/horse/ws/anpa439f-Function_Retrieval_Citation/Research_Project/RetrievalAugmentedGeneration/outputs/topk_candidates_query.jsonl
-> /home/anpa439f/anaconda3/envs/myenv/bin/python3 /data/horse/ws/anpa439f-Function_Retrieval_Citation/Research_Project/RetrievalAugmentedGeneration/function_based_answer-2.py --debug --max-check 10  (cwd=/data/horse/ws/anpa439f-Function_Retrieval_Citation/Research_Project/RetrievalAugmentedGeneration)

ðŸŽ‰ Pipeline complete.
  â€¢ Classified file : /data/horse/ws/anpa439f-Function_Retrieval_Citation/Research_Project/RetrievalAugmentedGeneration/classified_outputs.jsonl
  â€¢ TopK (canonical): /data/horse/ws/anpa439f-Function_Retrieval_Citation/Research_Project/RetrievalAugmentedGeneration/outputs/topk_candidates_query.jsonl
  â€¢ Final outputs   : /data/horse/ws/anpa439f-Function_Retrieval_Citation/Research_Project/RetrievalAugmentedGeneration/outputs
