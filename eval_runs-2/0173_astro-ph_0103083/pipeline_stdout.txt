âœ… Available Models:
1. alias-code
2. alias-reasoning
3. alias-image-generation
4. alias-vision
5. alias-ha
6. meta-llama/Llama-3.3-70B-Instruct
7. meta-llama/Llama-3.1-8B-Instruct
8. Qwen/Qwen2-VL-7B-Instruct
9. openGPT-X/Teuken-7B-instruct-research-v0.4
10. deepseek-ai/DeepSeek-Coder-V2-Lite-Instruct
11. Qwen/Qwen3-Coder-30B-A3B-Instruct
12. Qwen/Qwen3-Embedding-4B
13. stabilityai/stable-diffusion-3.5-large-turbo
14. black-forest-labs/FLUX.1-dev
15. openai/whisper-large-v3
16. Kokoro-82M
17. tts-1-hd
18. deepseek-ai/DeepSeek-R1
19. openai/gpt-oss-120b
20. meta-llama/Llama-4-Scout-17B-16E-Instruct

ðŸ‘‰ Select a model number (default = 1): 
âœ… Using model: openai/gpt-oss-120b

ðŸ” Enter a scientific query or topic: 
ðŸ”Ž Citation Function Classification:
{
  "citation_functions": [
    "Background",
    "FutureWork"
  ],
  "justification": "The query seeks to understand underlying astrophysical processes (background) and explicitly asks for directions for subsequent investigations (future work)."
}

âœ… Saved to classified_outputs.jsonl
ðŸ”§ Ready for retrieval module (handled in a separate file).
âš¡ SKIP_REINDEX=1 â€” using existing FAISS index + meta; not scanning raw JSONL shards.
âœ… Top-k candidates (FAISS): /data/horse/ws/anpa439f-Function_Retrieval_Citation/Research_Project/RetrievalAugmentedGeneration/outputs/topk_candidates_query.jsonl
[01:13:37] main | args: Namespace(max_check=10, debug=True)
[01:13:37] read_last_jsonl | path= classified_outputs.jsonl
[01:13:37] read_last_jsonl | total_lines= 1
[01:13:37] main | query='How do the observed variations in r-process element abundances inform our understanding of the background astrophysical processes and suggest avenues for future research?' | funcs=['Background', 'FutureWork']
[01:13:38] main | core_terms= ['r-process', 'element abundances', 'astrophysical processes']
[01:13:38] load_topk_jsonl | path= /data/horse/ws/anpa439f-Function_Retrieval_Citation/Research_Project/outputs/topk_candidates_query.jsonl
[01:13:38] load_topk_jsonl | rows= 20
[01:13:38] load_topk_jsonl | first: rank= 0 paper_id= nucl-th/0103049 title_snip='Changes in r-process abundances at late times' abs_len= 661
[01:13:38] main | running function= Background
[01:13:38] select | function= Background | candidates_in= 20
[01:13:38] select | core_terms= ['r-process', 'element abundances', 'astrophysical processes']
[01:13:38] select | no cosine prune; kept=20/20
[01:13:38] select | pool_size= 10 | ranks= [0, 1, 2, 3, 4, 5, 6, 7, 8, 9] | pids= ['nucl-th/0103049', 'astro-ph/0103083', 'astro-ph/0101440', 'astro-ph/0104187', 'astro-ph/0101407', 'astro-ph/0103072', 'astro-ph/0104189', 'astro-ph/0104392', 'nucl-ex/0104021', 'hep-ph/0104234']
[01:13:38] select | verify relaxed 1/10
[01:13:38] verify | func= Background | rank= 0 | pid= nucl-th/0103049 | title_snip='Changes in r-process abundances at late times' | abs_len= 661
[01:13:42] verify | result supports= False fit= 0.00 top= 0.90 invalid= off_topic_no_core_in_abstract cue_hint= False
[01:13:42] select | verify relaxed 2/10
[01:13:42] verify | func= Background | rank= 1 | pid= astro-ph/0103083 | title_snip='A Simple Model for r-Process Scatter and Halo Evolution' | abs_len= 1288
[01:13:45] verify | result supports= False fit= 0.00 top= 0.90 invalid= quote_not_in_abstract cue_hint= False
[01:13:45] select | verify relaxed 3/10
[01:13:45] verify | func= Background | rank= 2 | pid= astro-ph/0101440 | title_snip='Halo Star Abundances and r-Process Synthesis' | abs_len= 197
[01:13:48] verify | result supports= True fit= 0.80 top= 0.90 invalid= â€” cue_hint= False
[01:13:48] select | verify relaxed 4/10
[01:13:48] verify | func= Background | rank= 3 | pid= astro-ph/0104187 | title_snip='Diverse Supernova Sources for the r-Process and Abundances in Metal-Poâ€¦' | abs_len= 872
[01:13:51] verify | result supports= True fit= 0.80 top= 0.90 invalid= â€” cue_hint= False
[01:13:51] select | verify relaxed 5/10
[01:13:51] verify | func= Background | rank= 4 | pid= astro-ph/0101407 | title_snip='Chemical Evolution and Starbursts' | abs_len= 629
[01:13:54] verify | result supports= False fit= 0.00 top= 0.20 invalid= â€” cue_hint= False
[01:13:54] select | verify relaxed 6/10
[01:13:54] verify | func= Background | rank= 5 | pid= astro-ph/0103072 | title_snip='A Mapping Survey of the 12CO and 13CO Emission in Galaxies' | abs_len= 1548
[01:13:57] verify | result supports= False fit= 0.00 top= 0.00 invalid= no_quote cue_hint= False
[01:13:57] select | verify relaxed 7/10
[01:13:57] verify | func= Background | rank= 6 | pid= astro-ph/0104189 | title_snip='Scintillation as a Probe of the Intergalactic Medium' | abs_len= 810
[01:13:59] verify | result supports= False fit= 0.00 top= 0.00 invalid= no_quote cue_hint= False
[01:13:59] select | verify relaxed 8/10
[01:13:59] verify | func= Background | rank= 7 | pid= astro-ph/0104392 | title_snip='Systematic Uncertainties in the Determination of the Primordial 4He
  â€¦' | abs_len= 1524
[01:14:02] verify | result supports= False fit= 0.00 top= 0.00 invalid= no_quote cue_hint= False
[01:14:02] select | verify relaxed 9/10
[01:14:02] verify | func= Background | rank= 8 | pid= nucl-ex/0104021 | title_snip='Hadron freeze-out conditions in high energy nuclear collisions' | abs_len= 670
[01:14:04] verify | result supports= False fit= 0.00 top= 0.00 invalid= no_quote cue_hint= False
[01:14:04] select | verify relaxed 10/10
[01:14:04] verify | func= Background | rank= 9 | pid= hep-ph/0104234 | title_snip='A proposal on the possibility of detecting D-particles' | abs_len= 1182
[01:14:07] verify | result supports= False fit= 0.00 top= 0.00 invalid= no_quote cue_hint= False

================================================================================
FUNCTION: Background
QUERY   : How do the observed variations in r-process element abundances inform our understanding of the background astrophysical processes and suggest avenues for future research?
- WINNER: astro-ph/0101440 | Halo Star Abundances and r-Process Synthesis
- QUOTE : heavy element abundances in low metallicity stars
- WHY   : sufficient
- ANSWER: The observed variations in r-process element abundances in low metallicity stars provide insights into nucleosynthesis and early Galactic chemical evolution (astro-ph/0101440).
[01:14:10] main | running function= FutureWork
[01:14:10] select | function= FutureWork | candidates_in= 20
[01:14:10] select | core_terms= ['r-process', 'element abundances', 'astrophysical processes']
[01:14:10] select | no cosine prune; kept=20/20
[01:14:10] select | pool_size= 10 | ranks= [0, 1, 2, 3, 4, 5, 6, 7, 8, 9] | pids= ['nucl-th/0103049', 'astro-ph/0103083', 'astro-ph/0101440', 'astro-ph/0104187', 'astro-ph/0101407', 'astro-ph/0103072', 'astro-ph/0104189', 'astro-ph/0104392', 'nucl-ex/0104021', 'hep-ph/0104234']
[01:14:10] select | verify relaxed 1/10
[01:14:10] verify | func= FutureWork | rank= 0 | pid= nucl-th/0103049 | title_snip='Changes in r-process abundances at late times' | abs_len= 661
[01:14:13] verify | result supports= False fit= 0.00 top= 0.90 invalid= off_topic_no_core_in_abstract cue_hint= False
[01:14:13] select | verify relaxed 2/10
[01:14:13] verify | func= FutureWork | rank= 1 | pid= astro-ph/0103083 | title_snip='A Simple Model for r-Process Scatter and Halo Evolution' | abs_len= 1288
[01:14:16] verify | result supports= False fit= 0.00 top= 0.00 invalid= no_quote cue_hint= False
[01:14:16] select | verify relaxed 3/10
[01:14:16] verify | func= FutureWork | rank= 2 | pid= astro-ph/0101440 | title_snip='Halo Star Abundances and r-Process Synthesis' | abs_len= 197
[01:14:19] verify | result supports= True fit= 0.80 top= 0.90 invalid= â€” cue_hint= False
[01:14:19] select | verify relaxed 4/10
[01:14:19] verify | func= FutureWork | rank= 3 | pid= astro-ph/0104187 | title_snip='Diverse Supernova Sources for the r-Process and Abundances in Metal-Poâ€¦' | abs_len= 872
[01:14:23] verify | result supports= True fit= 0.80 top= 0.90 invalid= â€” cue_hint= False
[01:14:23] select | verify relaxed 5/10
[01:14:23] verify | func= FutureWork | rank= 4 | pid= astro-ph/0101407 | title_snip='Chemical Evolution and Starbursts' | abs_len= 629
[01:14:25] verify | result supports= False fit= 0.00 top= 0.20 invalid= no_quote cue_hint= False
[01:14:25] select | verify relaxed 6/10
[01:14:25] verify | func= FutureWork | rank= 5 | pid= astro-ph/0103072 | title_snip='A Mapping Survey of the 12CO and 13CO Emission in Galaxies' | abs_len= 1548
[01:14:27] verify | result supports= False fit= 0.00 top= 0.00 invalid= no_quote cue_hint= False
[01:14:27] select | verify relaxed 7/10
[01:14:27] verify | func= FutureWork | rank= 6 | pid= astro-ph/0104189 | title_snip='Scintillation as a Probe of the Intergalactic Medium' | abs_len= 810
[01:14:30] verify | result supports= False fit= 0.00 top= 0.00 invalid= no_quote cue_hint= False
[01:14:30] select | verify relaxed 8/10
[01:14:30] verify | func= FutureWork | rank= 7 | pid= astro-ph/0104392 | title_snip='Systematic Uncertainties in the Determination of the Primordial 4He
  â€¦' | abs_len= 1524
[01:14:32] verify | result supports= False fit= 0.00 top= 0.00 invalid= no_quote cue_hint= False
[01:14:32] select | verify relaxed 9/10
[01:14:32] verify | func= FutureWork | rank= 8 | pid= nucl-ex/0104021 | title_snip='Hadron freeze-out conditions in high energy nuclear collisions' | abs_len= 670
[01:14:35] verify | result supports= False fit= 0.00 top= 0.00 invalid= no_quote cue_hint= False
[01:14:35] select | verify relaxed 10/10
[01:14:35] verify | func= FutureWork | rank= 9 | pid= hep-ph/0104234 | title_snip='A proposal on the possibility of detecting D-particles' | abs_len= 1182
[01:14:38] verify | result supports= False fit= 0.00 top= 0.20 invalid= â€” cue_hint= False

================================================================================
FUNCTION: FutureWork
QUERY   : How do the observed variations in r-process element abundances inform our understanding of the background astrophysical processes and suggest avenues for future research?
- WINNER: astro-ph/0101440 | Halo Star Abundances and r-Process Synthesis
- QUOTE : implications of these results for nucleosynthesis
- WHY   : sufficient
- ANSWER: The observed variations in r-process element abundances have implications for nucleosynthesis and early Galactic chemical evolution, suggesting avenues for future research in these areas. Further study of heavy element abundances in low metallicity stars is needed to fully understand the background astrophysical processes (astro-ph/0101440).

ðŸ“„ Saved: outputs/function_selection_results.json
ðŸ“„ Saved: outputs/function_selection_results.jsonl
ðŸ“ Answers-only: outputs/function_answers.txt
-> /home/anpa439f/anaconda3/envs/myenv/bin/python3 /data/horse/ws/anpa439f-Function_Retrieval_Citation/Research_Project/RetrievalAugmentedGeneration/classifying_question.py  (cwd=/data/horse/ws/anpa439f-Function_Retrieval_Citation/Research_Project/RetrievalAugmentedGeneration)
âœ… Saved to classified_outputs.jsonl
ðŸ”§ Ready for retrieval module (.py).
-> /home/anpa439f/anaconda3/envs/myenv/bin/python3 /data/horse/ws/anpa439f-Function_Retrieval_Citation/Research_Project/RetrievalAugmentedGeneration/Retreival_query_based.py --skip-reindex --index /data/horse/ws/anpa439f-Function_Retrieval_Citation/Research_Project/e5_index_subset_1/index.faiss --meta /data/horse/ws/anpa439f-Function_Retrieval_Citation/Research_Project/e5_index_subset_1/meta.parquet --topk 20  (cwd=/data/horse/ws/anpa439f-Function_Retrieval_Citation/Research_Project/RetrievalAugmentedGeneration)
âœ… Top-k candidates: /data/horse/ws/anpa439f-Function_Retrieval_Citation/Research_Project/RetrievalAugmentedGeneration/outputs/topk_candidates_query.jsonl
ðŸ”— Symlinked: /data/horse/ws/anpa439f-Function_Retrieval_Citation/Research_Project/outputs/topk_candidates_query.jsonl -> /data/horse/ws/anpa439f-Function_Retrieval_Citation/Research_Project/RetrievalAugmentedGeneration/outputs/topk_candidates_query.jsonl
-> /home/anpa439f/anaconda3/envs/myenv/bin/python3 /data/horse/ws/anpa439f-Function_Retrieval_Citation/Research_Project/RetrievalAugmentedGeneration/function_based_answer-2.py --debug --max-check 10  (cwd=/data/horse/ws/anpa439f-Function_Retrieval_Citation/Research_Project/RetrievalAugmentedGeneration)

ðŸŽ‰ Pipeline complete.
  â€¢ Classified file : /data/horse/ws/anpa439f-Function_Retrieval_Citation/Research_Project/RetrievalAugmentedGeneration/classified_outputs.jsonl
  â€¢ TopK (canonical): /data/horse/ws/anpa439f-Function_Retrieval_Citation/Research_Project/RetrievalAugmentedGeneration/outputs/topk_candidates_query.jsonl
  â€¢ Final outputs   : /data/horse/ws/anpa439f-Function_Retrieval_Citation/Research_Project/RetrievalAugmentedGeneration/outputs
