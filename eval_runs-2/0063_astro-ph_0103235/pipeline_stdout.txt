âœ… Available Models:
1. alias-code
2. alias-reasoning
3. alias-image-generation
4. alias-vision
5. alias-ha
6. meta-llama/Llama-3.3-70B-Instruct
7. meta-llama/Llama-3.1-8B-Instruct
8. Qwen/Qwen2-VL-7B-Instruct
9. openGPT-X/Teuken-7B-instruct-research-v0.4
10. deepseek-ai/DeepSeek-Coder-V2-Lite-Instruct
11. Qwen/Qwen3-Coder-30B-A3B-Instruct
12. Qwen/Qwen3-Embedding-4B
13. stabilityai/stable-diffusion-3.5-large-turbo
14. black-forest-labs/FLUX.1-dev
15. openai/whisper-large-v3
16. Kokoro-82M
17. tts-1-hd
18. deepseek-ai/DeepSeek-R1
19. openai/gpt-oss-120b
20. meta-llama/Llama-4-Scout-17B-16E-Instruct

ðŸ‘‰ Select a model number (default = 1): 
âœ… Using model: openai/gpt-oss-120b

ðŸ” Enter a scientific query or topic: 
ðŸ”Ž Citation Function Classification:
{
  "citation_functions": [
    "Compares",
    "FutureWork"
  ],
  "justification": "The query asks for a comparison of detection rates and characteristics, and also solicits ideas for future research on the relationship."
}

âœ… Saved to classified_outputs.jsonl
ðŸ”§ Ready for retrieval module (handled in a separate file).
âš¡ SKIP_REINDEX=1 â€” using existing FAISS index + meta; not scanning raw JSONL shards.
âœ… Top-k candidates (FAISS): /data/horse/ws/anpa439f-Function_Retrieval_Citation/Research_Project/RetrievalAugmentedGeneration/outputs/topk_candidates_query.jsonl
[22:33:38] main | args: Namespace(max_check=10, debug=True)
[22:33:38] read_last_jsonl | path= classified_outputs.jsonl
[22:33:38] read_last_jsonl | total_lines= 1
[22:33:38] main | query='How do the detection rates and characteristics of beamed Magnetar Flares compare to other gamma-ray bursts, and what future research could explore this relationship?' | funcs=['Compares', 'FutureWork']
[22:33:40] main | core_terms= ['Magnetar Flares', 'gamma-ray bursts', 'detection rates', 'beamed emission', 'gamma-ray']
[22:33:40] load_topk_jsonl | path= /data/horse/ws/anpa439f-Function_Retrieval_Citation/Research_Project/outputs/topk_candidates_query.jsonl
[22:33:40] load_topk_jsonl | rows= 20
[22:33:40] load_topk_jsonl | first: rank= 0 paper_id= astro-ph/0103235 title_snip='Gamma-Ray Bursts from Extragalactic Magnetar Flares' abs_len= 1581
[22:33:40] main | running function= Compares
[22:33:40] select | function= Compares | candidates_in= 20
[22:33:40] select | core_terms= ['Magnetar Flares', 'gamma-ray bursts', 'detection rates', 'beamed emission', 'gamma-ray']
[22:33:40] select | no cosine prune; kept=20/20
[22:33:40] select | pool_size= 10 | ranks= [0, 1, 2, 3, 4, 5, 6, 7, 8, 9] | pids= ['astro-ph/0103235', 'astro-ph/0103384', 'astro-ph/0102315', 'astro-ph/0102366', 'astro-ph/0104208', 'astro-ph/0103179', 'astro-ph/0103028', 'astro-ph/0103396', 'astro-ph/0103125', 'astro-ph/0101036']
[22:33:40] select | verify relaxed 1/10
[22:33:40] verify | func= Compares | rank= 0 | pid= astro-ph/0103235 | title_snip='Gamma-Ray Bursts from Extragalactic Magnetar Flares' | abs_len= 1581
[22:33:43] verify | result supports= True fit= 0.80 top= 0.90 invalid= â€” cue_hint= False
[22:33:43] select | verify relaxed 2/10
[22:33:43] verify | func= Compares | rank= 1 | pid= astro-ph/0103384 | title_snip='Gamma-Ray Bursts at Low Redshift' | abs_len= 1121
[22:33:46] verify | result supports= False fit= 0.00 top= 0.50 invalid= â€” cue_hint= False
[22:33:46] select | verify relaxed 3/10
[22:33:46] verify | func= Compares | rank= 2 | pid= astro-ph/0102315 | title_snip='Gravitational Radiation from Gamma-Ray Bursts' | abs_len= 1031
[22:33:49] verify | result supports= False fit= 0.00 top= 0.20 invalid= â€” cue_hint= False
[22:33:49] select | verify relaxed 4/10
[22:33:49] verify | func= Compares | rank= 3 | pid= astro-ph/0102366 | title_snip='Gamma ray bursts from superconducting cosmic strings' | abs_len= 1224
[22:33:52] verify | result supports= False fit= 0.00 top= 0.20 invalid= â€” cue_hint= False
[22:33:52] select | verify relaxed 5/10
[22:33:52] verify | func= Compares | rank= 4 | pid= astro-ph/0104208 | title_snip='A Search for Early Optical Emission from Short and Long Duration
  Gamâ€¦' | abs_len= 1039
[22:33:55] verify | result supports= False fit= 0.00 top= 0.20 invalid= â€” cue_hint= False
[22:33:55] select | verify relaxed 6/10
[22:33:55] verify | func= Compares | rank= 5 | pid= astro-ph/0103179 | title_snip='HST Observations of SGR 0526-66: New Constraints on Accretion and
  Maâ€¦' | abs_len= 1144
[22:33:58] verify | result supports= False fit= 0.00 top= 0.50 invalid= â€” cue_hint= False
[22:33:58] select | verify relaxed 7/10
[22:33:58] verify | func= Compares | rank= 6 | pid= astro-ph/0103028 | title_snip='Evidence For and Against Collimation of Gamma Ray Bursts' | abs_len= 856
[22:34:01] verify | result supports= False fit= 0.00 top= 0.50 invalid= â€” cue_hint= False
[22:34:01] select | verify relaxed 8/10
[22:34:01] verify | func= Compares | rank= 7 | pid= astro-ph/0103396 | title_snip='A New Model for the Thermal X-ray Composites and the Neutral Pion Decaâ€¦' | abs_len= 1165
[22:34:03] verify | result supports= False fit= 0.00 top= 0.00 invalid= no_quote cue_hint= False
[22:34:03] select | verify relaxed 9/10
[22:34:03] verify | func= Compares | rank= 8 | pid= astro-ph/0103125 | title_snip='Recurrent very-long type-I X-ray bursts in the low-mass X-ray binary 4â€¦' | abs_len= 838
[22:34:06] verify | result supports= False fit= 0.00 top= 0.00 invalid= no_quote cue_hint= False
[22:34:06] select | verify relaxed 10/10
[22:34:06] verify | func= Compares | rank= 9 | pid= astro-ph/0101036 | title_snip='GRBS: Standard Model & Beyond' | abs_len= 391
[22:34:09] verify | result supports= False fit= 0.00 top= 0.50 invalid= quote_not_in_abstract cue_hint= False

================================================================================
FUNCTION: Compares
QUERY   : How do the detection rates and characteristics of beamed Magnetar Flares compare to other gamma-ray bursts, and what future research could explore this relationship?
- WINNER: astro-ph/0103235 | Gamma-Ray Bursts from Extragalactic Magnetar Flares
- QUOTE : could account for the short, hard Class II gamma-ray bursts
- WHY   : sufficient
- ANSWER: The detection rates of beamed Magnetar Flares are compared to other gamma-ray bursts, such as Class II gamma-ray bursts, on the basis of their luminosity and distance. Beamed Magnetar Flares could be detected out to redshift z ~ 0.1, potentially accounting for a subset of short, hard Class II gamma-ray bursts (astro-ph/0103235).
[22:34:13] main | running function= FutureWork
[22:34:13] select | function= FutureWork | candidates_in= 20
[22:34:13] select | core_terms= ['Magnetar Flares', 'gamma-ray bursts', 'detection rates', 'beamed emission', 'gamma-ray']
[22:34:13] select | no cosine prune; kept=20/20
[22:34:13] select | pool_size= 10 | ranks= [0, 1, 2, 3, 4, 5, 6, 7, 8, 9] | pids= ['astro-ph/0103235', 'astro-ph/0103384', 'astro-ph/0102315', 'astro-ph/0102366', 'astro-ph/0104208', 'astro-ph/0103179', 'astro-ph/0103028', 'astro-ph/0103396', 'astro-ph/0103125', 'astro-ph/0101036']
[22:34:13] select | verify relaxed 1/10
[22:34:13] verify | func= FutureWork | rank= 0 | pid= astro-ph/0103235 | title_snip='Gamma-Ray Bursts from Extragalactic Magnetar Flares' | abs_len= 1581
[22:34:17] verify | result supports= True fit= 0.80 top= 0.90 invalid= â€” cue_hint= False
[22:34:17] select | verify relaxed 2/10
[22:34:17] verify | func= FutureWork | rank= 1 | pid= astro-ph/0103384 | title_snip='Gamma-Ray Bursts at Low Redshift' | abs_len= 1121
[22:34:20] verify | result supports= False fit= 0.00 top= 0.50 invalid= â€” cue_hint= False
[22:34:20] select | verify relaxed 3/10
[22:34:20] verify | func= FutureWork | rank= 2 | pid= astro-ph/0102315 | title_snip='Gravitational Radiation from Gamma-Ray Bursts' | abs_len= 1031
[22:34:24] verify | result supports= False fit= 0.00 top= 0.20 invalid= â€” cue_hint= False
[22:34:24] select | verify relaxed 4/10
[22:34:24] verify | func= FutureWork | rank= 3 | pid= astro-ph/0102366 | title_snip='Gamma ray bursts from superconducting cosmic strings' | abs_len= 1224
[22:34:27] verify | result supports= False fit= 0.00 top= 0.20 invalid= â€” cue_hint= False
[22:34:27] select | verify relaxed 5/10
[22:34:27] verify | func= FutureWork | rank= 4 | pid= astro-ph/0104208 | title_snip='A Search for Early Optical Emission from Short and Long Duration
  Gamâ€¦' | abs_len= 1039
[22:34:30] verify | result supports= False fit= 0.00 top= 0.20 invalid= â€” cue_hint= False
[22:34:30] select | verify relaxed 6/10
[22:34:30] verify | func= FutureWork | rank= 5 | pid= astro-ph/0103179 | title_snip='HST Observations of SGR 0526-66: New Constraints on Accretion and
  Maâ€¦' | abs_len= 1144
[22:34:33] verify | result supports= False fit= 0.00 top= 0.60 invalid= â€” cue_hint= False
[22:34:33] select | verify relaxed 7/10
[22:34:33] verify | func= FutureWork | rank= 6 | pid= astro-ph/0103028 | title_snip='Evidence For and Against Collimation of Gamma Ray Bursts' | abs_len= 856
[22:34:36] verify | result supports= False fit= 0.00 top= 0.90 invalid= off_topic_no_core_in_abstract cue_hint= False
[22:34:36] select | verify relaxed 8/10
[22:34:36] verify | func= FutureWork | rank= 7 | pid= astro-ph/0103396 | title_snip='A New Model for the Thermal X-ray Composites and the Neutral Pion Decaâ€¦' | abs_len= 1165
[22:34:38] verify | result supports= False fit= 0.00 top= 0.00 invalid= no_quote cue_hint= False
[22:34:38] select | verify relaxed 9/10
[22:34:38] verify | func= FutureWork | rank= 8 | pid= astro-ph/0103125 | title_snip='Recurrent very-long type-I X-ray bursts in the low-mass X-ray binary 4â€¦' | abs_len= 838
[22:34:41] verify | result supports= False fit= 0.00 top= 0.00 invalid= no_quote cue_hint= False
[22:34:41] select | verify relaxed 10/10
[22:34:41] verify | func= FutureWork | rank= 9 | pid= astro-ph/0101036 | title_snip='GRBS: Standard Model & Beyond' | abs_len= 391
[22:34:43] verify | result supports= False fit= 0.00 top= 0.20 invalid= quote_not_in_abstract cue_hint= False

================================================================================
FUNCTION: FutureWork
QUERY   : How do the detection rates and characteristics of beamed Magnetar Flares compare to other gamma-ray bursts, and what future research could explore this relationship?
- WINNER: astro-ph/0103235 | Gamma-Ray Bursts from Extragalactic Magnetar Flares
- QUOTE : We speculate that such beamed MFs could account for the short, hard Class II gamma-ray bursts
- WHY   : sufficient
- ANSWER: Future research could explore the possibility that beamed Magnetar Flares account for short, hard Class II gamma-ray bursts, investigating whether their positions correlate with galaxies and galaxy clusters within 350 Mpc. This could involve analyzing the detection rates and characteristics of beamed Magnetar Flares in relation to other gamma-ray bursts to confirm or rule out this hypothesis (astro-ph/0103235).

ðŸ“„ Saved: outputs/function_selection_results.json
ðŸ“„ Saved: outputs/function_selection_results.jsonl
ðŸ“ Answers-only: outputs/function_answers.txt
-> /home/anpa439f/anaconda3/envs/myenv/bin/python3 /data/horse/ws/anpa439f-Function_Retrieval_Citation/Research_Project/RetrievalAugmentedGeneration/classifying_question.py  (cwd=/data/horse/ws/anpa439f-Function_Retrieval_Citation/Research_Project/RetrievalAugmentedGeneration)
âœ… Saved to classified_outputs.jsonl
ðŸ”§ Ready for retrieval module (.py).
-> /home/anpa439f/anaconda3/envs/myenv/bin/python3 /data/horse/ws/anpa439f-Function_Retrieval_Citation/Research_Project/RetrievalAugmentedGeneration/Retreival_query_based.py --skip-reindex --index /data/horse/ws/anpa439f-Function_Retrieval_Citation/Research_Project/e5_index_subset_1/index.faiss --meta /data/horse/ws/anpa439f-Function_Retrieval_Citation/Research_Project/e5_index_subset_1/meta.parquet --topk 20  (cwd=/data/horse/ws/anpa439f-Function_Retrieval_Citation/Research_Project/RetrievalAugmentedGeneration)
âœ… Top-k candidates: /data/horse/ws/anpa439f-Function_Retrieval_Citation/Research_Project/RetrievalAugmentedGeneration/outputs/topk_candidates_query.jsonl
ðŸ”— Symlinked: /data/horse/ws/anpa439f-Function_Retrieval_Citation/Research_Project/outputs/topk_candidates_query.jsonl -> /data/horse/ws/anpa439f-Function_Retrieval_Citation/Research_Project/RetrievalAugmentedGeneration/outputs/topk_candidates_query.jsonl
-> /home/anpa439f/anaconda3/envs/myenv/bin/python3 /data/horse/ws/anpa439f-Function_Retrieval_Citation/Research_Project/RetrievalAugmentedGeneration/function_based_answer-2.py --debug --max-check 10  (cwd=/data/horse/ws/anpa439f-Function_Retrieval_Citation/Research_Project/RetrievalAugmentedGeneration)

ðŸŽ‰ Pipeline complete.
  â€¢ Classified file : /data/horse/ws/anpa439f-Function_Retrieval_Citation/Research_Project/RetrievalAugmentedGeneration/classified_outputs.jsonl
  â€¢ TopK (canonical): /data/horse/ws/anpa439f-Function_Retrieval_Citation/Research_Project/RetrievalAugmentedGeneration/outputs/topk_candidates_query.jsonl
  â€¢ Final outputs   : /data/horse/ws/anpa439f-Function_Retrieval_Citation/Research_Project/RetrievalAugmentedGeneration/outputs
