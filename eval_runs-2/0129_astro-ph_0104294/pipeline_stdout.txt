âœ… Available Models:
1. alias-code
2. alias-reasoning
3. alias-image-generation
4. alias-vision
5. alias-ha
6. meta-llama/Llama-3.3-70B-Instruct
7. meta-llama/Llama-3.1-8B-Instruct
8. Qwen/Qwen2-VL-7B-Instruct
9. openGPT-X/Teuken-7B-instruct-research-v0.4
10. deepseek-ai/DeepSeek-Coder-V2-Lite-Instruct
11. Qwen/Qwen3-Coder-30B-A3B-Instruct
12. Qwen/Qwen3-Embedding-4B
13. stabilityai/stable-diffusion-3.5-large-turbo
14. black-forest-labs/FLUX.1-dev
15. openai/whisper-large-v3
16. Kokoro-82M
17. tts-1-hd
18. deepseek-ai/DeepSeek-R1
19. openai/gpt-oss-120b
20. meta-llama/Llama-4-Scout-17B-16E-Instruct

ðŸ‘‰ Select a model number (default = 1): 
âœ… Using model: openai/gpt-oss-120b

ðŸ” Enter a scientific query or topic: 
ðŸ”Ž Citation Function Classification:
{
  "citation_functions": [
    "Motivation",
    "Extends"
  ],
  "justification": "The query asks why the discovery drives further investigation (Motivation) and how it broadens our knowledge of primitive galaxies (Extends)."
}

âœ… Saved to classified_outputs.jsonl
ðŸ”§ Ready for retrieval module (handled in a separate file).
âš¡ SKIP_REINDEX=1 â€” using existing FAISS index + meta; not scanning raw JSONL shards.
âœ… Top-k candidates (FAISS): /data/horse/ws/anpa439f-Function_Retrieval_Citation/Research_Project/RetrievalAugmentedGeneration/outputs/topk_candidates_query.jsonl
[23:59:37] main | args: Namespace(max_check=10, debug=True)
[23:59:37] read_last_jsonl | path= classified_outputs.jsonl
[23:59:37] read_last_jsonl | total_lines= 1
[23:59:37] main | query='How does the discovery of high redshift Lyman-$\alpha$ sources motivate and extend our understanding of chemically primitive galaxies in the early universe?' | funcs=['Motivation', 'Extends']
[23:59:39] main | core_terms= ['discovery', 'high', 'redshift', 'lyman', 'alpha', 'sources', 'motivate', 'extend', 'understanding', 'chemically', 'primitive', 'galaxies', 'early', 'universe']
[23:59:39] load_topk_jsonl | path= /data/horse/ws/anpa439f-Function_Retrieval_Citation/Research_Project/outputs/topk_candidates_query.jsonl
[23:59:39] load_topk_jsonl | rows= 20
[23:59:39] load_topk_jsonl | first: rank= 0 paper_id= astro-ph/0104308 title_snip='Chemical Enrichment at High Redshifts: Understanding the Nature of
  Dâ€¦' abs_len= 1464
[23:59:39] main | running function= Motivation
[23:59:39] select | function= Motivation | candidates_in= 20
[23:59:39] select | core_terms= ['discovery', 'high', 'redshift', 'lyman', 'alpha', 'sources', 'motivate', 'extend', 'understanding', 'chemically', 'primitive', 'galaxies', 'early', 'universe']
[23:59:39] select | no cosine prune; kept=20/20
[23:59:39] select | pool_size= 10 | ranks= [0, 1, 2, 3, 4, 5, 6, 7, 8, 9] | pids= ['astro-ph/0104308', 'astro-ph/0103485', 'astro-ph/0104466', 'astro-ph/0104294', 'astro-ph/0101174', 'astro-ph/0101544', 'astro-ph/0101407', 'hep-ph/0101162', 'astro-ph/0103048', 'astro-ph/0104237']
[23:59:39] select | verify relaxed 1/10
[23:59:39] verify | func= Motivation | rank= 0 | pid= astro-ph/0104308 | title_snip='Chemical Enrichment at High Redshifts: Understanding the Nature of
  Dâ€¦' | abs_len= 1464
[23:59:42] verify | result supports= True fit= 0.80 top= 0.90 invalid= â€” cue_hint= False
[23:59:42] select | verify relaxed 2/10
[23:59:42] verify | func= Motivation | rank= 1 | pid= astro-ph/0103485 | title_snip='Star formation and chemical evolution of damped Lyman $\alpha$ systems' | abs_len= 1606
[23:59:46] verify | result supports= False fit= 0.00 top= 0.00 invalid= no_quote cue_hint= False
[23:59:46] select | verify relaxed 3/10
[23:59:46] verify | func= Motivation | rank= 2 | pid= astro-ph/0104466 | title_snip='The First Detection of Co in a Damped Lyman Alpha System' | abs_len= 1220
[23:59:49] verify | result supports= True fit= 0.80 top= 0.90 invalid= â€” cue_hint= False
[23:59:49] select | verify relaxed 4/10
[23:59:49] verify | func= Motivation | rank= 3 | pid= astro-ph/0104294 | title_snip='The Large Area Lyman Alpha Survey' | abs_len= 1497
[23:59:52] verify | result supports= True fit= 0.80 top= 0.90 invalid= â€” cue_hint= False
[23:59:52] select | verify relaxed 5/10
[23:59:52] verify | func= Motivation | rank= 4 | pid= astro-ph/0101174 | title_snip='Extended Lyman Alpha Emission Around Young Quasars: a Constraint on
  â€¦' | abs_len= 1134
[23:59:55] verify | result supports= True fit= 0.80 top= 0.90 invalid= â€” cue_hint= False
[23:59:55] select | verify relaxed 6/10
[23:59:55] verify | func= Motivation | rank= 5 | pid= astro-ph/0101544 | title_snip='Dark energy and the epoch of galaxy formation' | abs_len= 971
[23:59:58] verify | result supports= False fit= 0.00 top= 0.20 invalid= â€” cue_hint= False
[23:59:58] select | verify relaxed 7/10
[23:59:58] verify | func= Motivation | rank= 6 | pid= astro-ph/0101407 | title_snip='Chemical Evolution and Starbursts' | abs_len= 629
[00:00:00] verify | result supports= False fit= 0.00 top= 0.50 invalid= â€” cue_hint= False
[00:00:00] select | verify relaxed 8/10
[00:00:00] verify | func= Motivation | rank= 7 | pid= hep-ph/0101162 | title_snip='Probing for the Charm Content of $B$ and $\Upsilon$ Mesons' | abs_len= 652
[00:00:03] verify | result supports= False fit= 0.00 top= 0.00 invalid= no_quote cue_hint= False
[00:00:03] select | verify relaxed 9/10
[00:00:03] verify | func= Motivation | rank= 8 | pid= astro-ph/0103048 | title_snip='Polarization Insights for Active Galactic Nuclei' | abs_len= 1223
[00:00:05] verify | result supports= False fit= 0.00 top= 0.00 invalid= no_quote cue_hint= False
[00:00:05] select | verify relaxed 10/10
[00:00:05] verify | func= Motivation | rank= 9 | pid= astro-ph/0104237 | title_snip='Chemical Evolution of Galaxies' | abs_len= 977
[00:00:08] verify | result supports= False fit= 0.00 top= 0.20 invalid= â€” cue_hint= False

================================================================================
FUNCTION: Motivation
QUERY   : How does the discovery of high redshift Lyman-$\alpha$ sources motivate and extend our understanding of chemically primitive galaxies in the early universe?
- WINNER: astro-ph/0104308 | Chemical Enrichment at High Redshifts: Understanding the Nature of
  Damped Ly$\alpha$ Systems in Hierarchical Models
- QUOTE : Chemical Enrichment at High Redshifts
- WHY   : sufficient
- ANSWER: The discovery of high redshift Lyman-$\alpha$ sources motivates a deeper understanding of chemically primitive galaxies in the early universe because it sheds light on the formation and evolution of galaxy-like objects. This understanding is crucial as it reveals the chemical enrichment history of the universe, particularly the role of supernovae in enriching the gas component of these early galaxies (astro-ph/0104308).
[00:00:13] main | running function= Extends
[00:00:13] select | function= Extends | candidates_in= 20
[00:00:13] select | core_terms= ['discovery', 'high', 'redshift', 'lyman', 'alpha', 'sources', 'motivate', 'extend', 'understanding', 'chemically', 'primitive', 'galaxies', 'early', 'universe']
[00:00:13] select | no cosine prune; kept=20/20
[00:00:13] select | pool_size= 10 | ranks= [0, 1, 2, 3, 4, 5, 6, 7, 8, 9] | pids= ['astro-ph/0104308', 'astro-ph/0103485', 'astro-ph/0104466', 'astro-ph/0104294', 'astro-ph/0101174', 'astro-ph/0101544', 'astro-ph/0101407', 'hep-ph/0101162', 'astro-ph/0103048', 'astro-ph/0104237']
[00:00:13] select | verify relaxed 1/10
[00:00:13] verify | func= Extends | rank= 0 | pid= astro-ph/0104308 | title_snip='Chemical Enrichment at High Redshifts: Understanding the Nature of
  Dâ€¦' | abs_len= 1464
[00:00:16] verify | result supports= False fit= 0.00 top= 0.00 invalid= no_quote cue_hint= False
[00:00:16] select | verify relaxed 2/10
[00:00:16] verify | func= Extends | rank= 1 | pid= astro-ph/0103485 | title_snip='Star formation and chemical evolution of damped Lyman $\alpha$ systems' | abs_len= 1606
[00:00:20] verify | result supports= False fit= 0.00 top= 0.00 invalid= no_quote cue_hint= False
[00:00:20] select | verify relaxed 3/10
[00:00:20] verify | func= Extends | rank= 2 | pid= astro-ph/0104466 | title_snip='The First Detection of Co in a Damped Lyman Alpha System' | abs_len= 1220
[00:00:23] verify | result supports= True fit= 0.80 top= 0.90 invalid= â€” cue_hint= False
[00:00:23] select | verify relaxed 4/10
[00:00:23] verify | func= Extends | rank= 3 | pid= astro-ph/0104294 | title_snip='The Large Area Lyman Alpha Survey' | abs_len= 1497
[00:00:26] verify | result supports= True fit= 0.80 top= 0.90 invalid= â€” cue_hint= False
[00:00:26] select | verify relaxed 5/10
[00:00:26] verify | func= Extends | rank= 4 | pid= astro-ph/0101174 | title_snip='Extended Lyman Alpha Emission Around Young Quasars: a Constraint on
  â€¦' | abs_len= 1134
[00:00:29] verify | result supports= True fit= 0.80 top= 0.90 invalid= â€” cue_hint= True
[00:00:29] select | verify relaxed 6/10
[00:00:29] verify | func= Extends | rank= 5 | pid= astro-ph/0101544 | title_snip='Dark energy and the epoch of galaxy formation' | abs_len= 971
[00:00:32] verify | result supports= False fit= 0.00 top= 0.20 invalid= â€” cue_hint= False
[00:00:32] select | verify relaxed 7/10
[00:00:32] verify | func= Extends | rank= 6 | pid= astro-ph/0101407 | title_snip='Chemical Evolution and Starbursts' | abs_len= 629
[00:00:34] verify | result supports= True fit= 0.80 top= 0.90 invalid= â€” cue_hint= False
[00:00:34] select | verify relaxed 8/10
[00:00:34] verify | func= Extends | rank= 7 | pid= hep-ph/0101162 | title_snip='Probing for the Charm Content of $B$ and $\Upsilon$ Mesons' | abs_len= 652
[00:00:37] verify | result supports= False fit= 0.00 top= 0.00 invalid= no_quote cue_hint= False
[00:00:37] select | verify relaxed 9/10
[00:00:37] verify | func= Extends | rank= 8 | pid= astro-ph/0103048 | title_snip='Polarization Insights for Active Galactic Nuclei' | abs_len= 1223
[00:00:39] verify | result supports= False fit= 0.00 top= 0.00 invalid= no_quote cue_hint= False
[00:00:39] select | verify relaxed 10/10
[00:00:39] verify | func= Extends | rank= 9 | pid= astro-ph/0104237 | title_snip='Chemical Evolution of Galaxies' | abs_len= 977
[00:00:42] verify | result supports= False fit= 0.00 top= 0.50 invalid= â€” cue_hint= False

================================================================================
FUNCTION: Extends
QUERY   : How does the discovery of high redshift Lyman-$\alpha$ sources motivate and extend our understanding of chemically primitive galaxies in the early universe?
- WINNER: astro-ph/0101174 | Extended Lyman Alpha Emission Around Young Quasars: a Constraint on
  Galaxy Formation
- QUOTE : extended Lyman alpha emission
- WHY   : sufficient
- ANSWER: The discovery of high redshift Lyman-$\alpha$ sources extends our understanding of chemically primitive galaxies by providing a direct constraint on galaxy formation models, particularly the distribution of infalling cold gas during the early stages of galaxy formation. This extends prior methods by offering a means to detect and characterize the "fuzz" of extended Lyman alpha emission around young quasars (astro-ph/0101174).

ðŸ“„ Saved: outputs/function_selection_results.json
ðŸ“„ Saved: outputs/function_selection_results.jsonl
ðŸ“ Answers-only: outputs/function_answers.txt
-> /home/anpa439f/anaconda3/envs/myenv/bin/python3 /data/horse/ws/anpa439f-Function_Retrieval_Citation/Research_Project/RetrievalAugmentedGeneration/classifying_question.py  (cwd=/data/horse/ws/anpa439f-Function_Retrieval_Citation/Research_Project/RetrievalAugmentedGeneration)
âœ… Saved to classified_outputs.jsonl
ðŸ”§ Ready for retrieval module (.py).
-> /home/anpa439f/anaconda3/envs/myenv/bin/python3 /data/horse/ws/anpa439f-Function_Retrieval_Citation/Research_Project/RetrievalAugmentedGeneration/Retreival_query_based.py --skip-reindex --index /data/horse/ws/anpa439f-Function_Retrieval_Citation/Research_Project/e5_index_subset_1/index.faiss --meta /data/horse/ws/anpa439f-Function_Retrieval_Citation/Research_Project/e5_index_subset_1/meta.parquet --topk 20  (cwd=/data/horse/ws/anpa439f-Function_Retrieval_Citation/Research_Project/RetrievalAugmentedGeneration)
âœ… Top-k candidates: /data/horse/ws/anpa439f-Function_Retrieval_Citation/Research_Project/RetrievalAugmentedGeneration/outputs/topk_candidates_query.jsonl
ðŸ”— Symlinked: /data/horse/ws/anpa439f-Function_Retrieval_Citation/Research_Project/outputs/topk_candidates_query.jsonl -> /data/horse/ws/anpa439f-Function_Retrieval_Citation/Research_Project/RetrievalAugmentedGeneration/outputs/topk_candidates_query.jsonl
-> /home/anpa439f/anaconda3/envs/myenv/bin/python3 /data/horse/ws/anpa439f-Function_Retrieval_Citation/Research_Project/RetrievalAugmentedGeneration/function_based_answer-2.py --debug --max-check 10  (cwd=/data/horse/ws/anpa439f-Function_Retrieval_Citation/Research_Project/RetrievalAugmentedGeneration)

ðŸŽ‰ Pipeline complete.
  â€¢ Classified file : /data/horse/ws/anpa439f-Function_Retrieval_Citation/Research_Project/RetrievalAugmentedGeneration/classified_outputs.jsonl
  â€¢ TopK (canonical): /data/horse/ws/anpa439f-Function_Retrieval_Citation/Research_Project/RetrievalAugmentedGeneration/outputs/topk_candidates_query.jsonl
  â€¢ Final outputs   : /data/horse/ws/anpa439f-Function_Retrieval_Citation/Research_Project/RetrievalAugmentedGeneration/outputs
