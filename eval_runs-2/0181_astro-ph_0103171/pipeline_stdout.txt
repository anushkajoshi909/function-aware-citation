âœ… Available Models:
1. alias-code
2. alias-reasoning
3. alias-image-generation
4. alias-vision
5. alias-ha
6. meta-llama/Llama-3.3-70B-Instruct
7. meta-llama/Llama-3.1-8B-Instruct
8. Qwen/Qwen2-VL-7B-Instruct
9. openGPT-X/Teuken-7B-instruct-research-v0.4
10. deepseek-ai/DeepSeek-Coder-V2-Lite-Instruct
11. Qwen/Qwen3-Coder-30B-A3B-Instruct
12. Qwen/Qwen3-Embedding-4B
13. stabilityai/stable-diffusion-3.5-large-turbo
14. black-forest-labs/FLUX.1-dev
15. openai/whisper-large-v3
16. Kokoro-82M
17. tts-1-hd
18. deepseek-ai/DeepSeek-R1
19. openai/gpt-oss-120b
20. meta-llama/Llama-4-Scout-17B-16E-Instruct

ðŸ‘‰ Select a model number (default = 1): 
âœ… Using model: openai/gpt-oss-120b

ðŸ” Enter a scientific query or topic: 
ðŸ”Ž Citation Function Classification:
{
  "citation_functions": [
    "Compares",
    "Extends"
  ],
  "justification": "The query asks how new spectral analysis results compare with existing models and how they extend those models of neutron star cooling and emission."
}

âœ… Saved to classified_outputs.jsonl
ðŸ”§ Ready for retrieval module (handled in a separate file).
âš¡ SKIP_REINDEX=1 â€” using existing FAISS index + meta; not scanning raw JSONL shards.
âœ… Top-k candidates (FAISS): /data/horse/ws/anpa439f-Function_Retrieval_Citation/Research_Project/RetrievalAugmentedGeneration/outputs/topk_candidates_query.jsonl
[01:24:05] main | args: Namespace(max_check=10, debug=True)
[01:24:05] read_last_jsonl | path= classified_outputs.jsonl
[01:24:05] read_last_jsonl | total_lines= 1
[01:24:05] main | query='How does the spectral analysis of the Vela pulsar compare to and extend existing models of neutron star cooling and emission?' | funcs=['Compares', 'Extends']
[01:24:07] main | core_terms= ['Vela pulsar', 'neutron star', 'spectral analysis', 'cooling', 'emission']
[01:24:07] load_topk_jsonl | path= /data/horse/ws/anpa439f-Function_Retrieval_Citation/Research_Project/outputs/topk_candidates_query.jsonl
[01:24:07] load_topk_jsonl | rows= 20
[01:24:07] load_topk_jsonl | first: rank= 0 paper_id= astro-ph/0103171 title_snip='The X-ray Spectrum of the Vela Pulsar Resolved with Chandra' abs_len= 1771
[01:24:07] main | running function= Compares
[01:24:07] select | function= Compares | candidates_in= 20
[01:24:07] select | core_terms= ['Vela pulsar', 'neutron star', 'spectral analysis', 'cooling', 'emission']
[01:24:07] select | no cosine prune; kept=20/20
[01:24:07] select | pool_size= 10 | ranks= [0, 1, 2, 3, 4, 5, 6, 7, 8, 9] | pids= ['astro-ph/0103171', 'astro-ph/0103273', 'astro-ph/0101339', 'astro-ph/0103140', 'astro-ph/0101044', 'astro-ph/0101246', 'astro-ph/0102047', 'astro-ph/0103227', 'astro-ph/0103316', 'astro-ph/0101257']
[01:24:07] select | verify relaxed 1/10
[01:24:07] verify | func= Compares | rank= 0 | pid= astro-ph/0103171 | title_snip='The X-ray Spectrum of the Vela Pulsar Resolved with Chandra' | abs_len= 1771
[01:24:10] verify | result supports= True fit= 0.80 top= 0.90 invalid= â€” cue_hint= False
[01:24:10] select | verify relaxed 2/10
[01:24:10] verify | func= Compares | rank= 1 | pid= astro-ph/0103273 | title_snip='Anomalous X-ray Pulsars and Soft gamma-ray Repeaters: Spectral Fits anâ€¦' | abs_len= 1419
[01:24:13] verify | result supports= False fit= 0.00 top= 0.20 invalid= â€” cue_hint= False
[01:24:13] select | verify relaxed 3/10
[01:24:13] verify | func= Compares | rank= 2 | pid= astro-ph/0101339 | title_snip='A Ray-Tracing Model of the Vela Pulsar' | abs_len= 463
[01:24:16] verify | result supports= False fit= 0.20 top= 0.80 invalid= â€” cue_hint= False
[01:24:16] select | verify relaxed 4/10
[01:24:16] verify | func= Compares | rank= 3 | pid= astro-ph/0103140 | title_snip='Phase Dependent Spectral Variability of 4U1907+09' | abs_len= 939
[01:24:19] verify | result supports= False fit= 0.00 top= 0.00 invalid= no_quote cue_hint= False
[01:24:19] select | verify relaxed 5/10
[01:24:19] verify | func= Compares | rank= 4 | pid= astro-ph/0101044 | title_snip='A Doppler Shift model to explain the Cyclotron Line Variability in X-Râ€¦' | abs_len= 683
[01:24:22] verify | result supports= False fit= 0.00 top= 0.20 invalid= â€” cue_hint= False
[01:24:22] select | verify relaxed 6/10
[01:24:22] verify | func= Compares | rank= 5 | pid= astro-ph/0101246 | title_snip='Particle Spectra Of Ultra-Relativistic Shock Waves' | abs_len= 768
[01:24:24] verify | result supports= False fit= 0.00 top= 0.00 invalid= no_quote cue_hint= False
[01:24:24] select | verify relaxed 7/10
[01:24:24] verify | func= Compares | rank= 6 | pid= astro-ph/0102047 | title_snip='Neutron star cooling in transiently accreting low mass binaries: a newâ€¦' | abs_len= 768
[01:24:27] verify | result supports= False fit= 0.00 top= 0.20 invalid= â€” cue_hint= False
[01:24:27] select | verify relaxed 8/10
[01:24:27] verify | func= Compares | rank= 7 | pid= astro-ph/0103227 | title_snip='Surface Emission Properties of Strongly Magnetic Neutron Stars' | abs_len= 1514
[01:24:30] verify | result supports= False fit= 0.00 top= 0.50 invalid= no_quote cue_hint= False
[01:24:30] select | verify relaxed 9/10
[01:24:30] verify | func= Compares | rank= 8 | pid= astro-ph/0103316 | title_snip='Proton Cyclotron Features in Thermal Spectra of Ultra-magnetized Neutrâ€¦' | abs_len= 1010
[01:24:33] verify | result supports= False fit= 0.00 top= 0.20 invalid= â€” cue_hint= False
[01:24:33] select | verify relaxed 10/10
[01:24:33] verify | func= Compares | rank= 9 | pid= astro-ph/0101257 | title_snip='Relativistic superfluid models for rotating neutron stars' | abs_len= 849
[01:24:35] verify | result supports= True fit= 0.80 top= 0.90 invalid= â€” cue_hint= False

================================================================================
FUNCTION: Compares
QUERY   : How does the spectral analysis of the Vela pulsar compare to and extend existing models of neutron star cooling and emission?
- WINNER: astro-ph/0103171 | The X-ray Spectrum of the Vela Pulsar Resolved with Chandra
- QUOTE : The effective temperature is lower than that predicted by standard neutron star cooling models
- WHY   : sufficient
- ANSWER: The spectral analysis of the Vela pulsar is compared to standard neutron star cooling models, with the effective temperature found to be lower than predicted. The results are also compared to a standard blackbody fit, which yields an unrealistically small radius, highlighting the differences between the two models (astro-ph/0103171).
[01:24:40] main | running function= Extends
[01:24:40] select | function= Extends | candidates_in= 20
[01:24:40] select | core_terms= ['Vela pulsar', 'neutron star', 'spectral analysis', 'cooling', 'emission']
[01:24:40] select | no cosine prune; kept=20/20
[01:24:40] select | pool_size= 10 | ranks= [0, 1, 2, 3, 4, 5, 6, 7, 8, 9] | pids= ['astro-ph/0103171', 'astro-ph/0103273', 'astro-ph/0101339', 'astro-ph/0103140', 'astro-ph/0101044', 'astro-ph/0101246', 'astro-ph/0102047', 'astro-ph/0103227', 'astro-ph/0103316', 'astro-ph/0101257']
[01:24:40] select | verify relaxed 1/10
[01:24:40] verify | func= Extends | rank= 0 | pid= astro-ph/0103171 | title_snip='The X-ray Spectrum of the Vela Pulsar Resolved with Chandra' | abs_len= 1771
[01:24:43] verify | result supports= True fit= 0.80 top= 0.90 invalid= â€” cue_hint= False
[01:24:43] select | verify relaxed 2/10
[01:24:43] verify | func= Extends | rank= 1 | pid= astro-ph/0103273 | title_snip='Anomalous X-ray Pulsars and Soft gamma-ray Repeaters: Spectral Fits anâ€¦' | abs_len= 1419
[01:24:46] verify | result supports= False fit= 0.00 top= 0.20 invalid= â€” cue_hint= False
[01:24:46] select | verify relaxed 3/10
[01:24:46] verify | func= Extends | rank= 2 | pid= astro-ph/0101339 | title_snip='A Ray-Tracing Model of the Vela Pulsar' | abs_len= 463
[01:24:49] verify | result supports= False fit= 0.20 top= 0.80 invalid= â€” cue_hint= False
[01:24:49] select | verify relaxed 4/10
[01:24:49] verify | func= Extends | rank= 3 | pid= astro-ph/0103140 | title_snip='Phase Dependent Spectral Variability of 4U1907+09' | abs_len= 939
[01:24:52] verify | result supports= False fit= 0.00 top= 0.00 invalid= no_quote cue_hint= False
[01:24:52] select | verify relaxed 5/10
[01:24:52] verify | func= Extends | rank= 4 | pid= astro-ph/0101044 | title_snip='A Doppler Shift model to explain the Cyclotron Line Variability in X-Râ€¦' | abs_len= 683
[01:24:55] verify | result supports= False fit= 0.00 top= 0.20 invalid= â€” cue_hint= False
[01:24:55] select | verify relaxed 6/10
[01:24:55] verify | func= Extends | rank= 5 | pid= astro-ph/0101246 | title_snip='Particle Spectra Of Ultra-Relativistic Shock Waves' | abs_len= 768
[01:24:57] verify | result supports= False fit= 0.00 top= 0.00 invalid= no_quote cue_hint= False
[01:24:57] select | verify relaxed 7/10
[01:24:57] verify | func= Extends | rank= 6 | pid= astro-ph/0102047 | title_snip='Neutron star cooling in transiently accreting low mass binaries: a newâ€¦' | abs_len= 768
[01:25:00] verify | result supports= False fit= 0.00 top= 0.20 invalid= â€” cue_hint= False
[01:25:00] select | verify relaxed 8/10
[01:25:00] verify | func= Extends | rank= 7 | pid= astro-ph/0103227 | title_snip='Surface Emission Properties of Strongly Magnetic Neutron Stars' | abs_len= 1514
[01:25:03] verify | result supports= False fit= 0.00 top= 0.50 invalid= no_quote cue_hint= False
[01:25:03] select | verify relaxed 9/10
[01:25:03] verify | func= Extends | rank= 8 | pid= astro-ph/0103316 | title_snip='Proton Cyclotron Features in Thermal Spectra of Ultra-magnetized Neutrâ€¦' | abs_len= 1010
[01:25:06] verify | result supports= False fit= 0.00 top= 0.20 invalid= â€” cue_hint= False
[01:25:06] select | verify relaxed 10/10
[01:25:06] verify | func= Extends | rank= 9 | pid= astro-ph/0101257 | title_snip='Relativistic superfluid models for rotating neutron stars' | abs_len= 849
[01:25:09] verify | result supports= True fit= 0.80 top= 0.90 invalid= â€” cue_hint= False

================================================================================
FUNCTION: Extends
QUERY   : How does the spectral analysis of the Vela pulsar compare to and extend existing models of neutron star cooling and emission?
- WINNER: astro-ph/0103171 | The X-ray Spectrum of the Vela Pulsar Resolved with Chandra
- QUOTE : The effective temperature is lower than that predicted by standard neutron star cooling models
- WHY   : sufficient
- ANSWER: The spectral analysis of the Vela pulsar extends existing models of neutron star cooling by providing a lower effective temperature than predicted by standard models. The results also refine emission models by resolving the pulsar's spectrum into two distinct components, a softer thermal component and a harder power-law component (astro-ph/0103171).

ðŸ“„ Saved: outputs/function_selection_results.json
ðŸ“„ Saved: outputs/function_selection_results.jsonl
ðŸ“ Answers-only: outputs/function_answers.txt
-> /home/anpa439f/anaconda3/envs/myenv/bin/python3 /data/horse/ws/anpa439f-Function_Retrieval_Citation/Research_Project/RetrievalAugmentedGeneration/classifying_question.py  (cwd=/data/horse/ws/anpa439f-Function_Retrieval_Citation/Research_Project/RetrievalAugmentedGeneration)
âœ… Saved to classified_outputs.jsonl
ðŸ”§ Ready for retrieval module (.py).
-> /home/anpa439f/anaconda3/envs/myenv/bin/python3 /data/horse/ws/anpa439f-Function_Retrieval_Citation/Research_Project/RetrievalAugmentedGeneration/Retreival_query_based.py --skip-reindex --index /data/horse/ws/anpa439f-Function_Retrieval_Citation/Research_Project/e5_index_subset_1/index.faiss --meta /data/horse/ws/anpa439f-Function_Retrieval_Citation/Research_Project/e5_index_subset_1/meta.parquet --topk 20  (cwd=/data/horse/ws/anpa439f-Function_Retrieval_Citation/Research_Project/RetrievalAugmentedGeneration)
âœ… Top-k candidates: /data/horse/ws/anpa439f-Function_Retrieval_Citation/Research_Project/RetrievalAugmentedGeneration/outputs/topk_candidates_query.jsonl
ðŸ”— Symlinked: /data/horse/ws/anpa439f-Function_Retrieval_Citation/Research_Project/outputs/topk_candidates_query.jsonl -> /data/horse/ws/anpa439f-Function_Retrieval_Citation/Research_Project/RetrievalAugmentedGeneration/outputs/topk_candidates_query.jsonl
-> /home/anpa439f/anaconda3/envs/myenv/bin/python3 /data/horse/ws/anpa439f-Function_Retrieval_Citation/Research_Project/RetrievalAugmentedGeneration/function_based_answer-2.py --debug --max-check 10  (cwd=/data/horse/ws/anpa439f-Function_Retrieval_Citation/Research_Project/RetrievalAugmentedGeneration)

ðŸŽ‰ Pipeline complete.
  â€¢ Classified file : /data/horse/ws/anpa439f-Function_Retrieval_Citation/Research_Project/RetrievalAugmentedGeneration/classified_outputs.jsonl
  â€¢ TopK (canonical): /data/horse/ws/anpa439f-Function_Retrieval_Citation/Research_Project/RetrievalAugmentedGeneration/outputs/topk_candidates_query.jsonl
  â€¢ Final outputs   : /data/horse/ws/anpa439f-Function_Retrieval_Citation/Research_Project/RetrievalAugmentedGeneration/outputs
