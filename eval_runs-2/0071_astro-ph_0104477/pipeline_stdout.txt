âœ… Available Models:
1. alias-code
2. alias-reasoning
3. alias-image-generation
4. alias-vision
5. alias-ha
6. meta-llama/Llama-3.3-70B-Instruct
7. meta-llama/Llama-3.1-8B-Instruct
8. Qwen/Qwen2-VL-7B-Instruct
9. openGPT-X/Teuken-7B-instruct-research-v0.4
10. deepseek-ai/DeepSeek-Coder-V2-Lite-Instruct
11. Qwen/Qwen3-Coder-30B-A3B-Instruct
12. Qwen/Qwen3-Embedding-4B
13. stabilityai/stable-diffusion-3.5-large-turbo
14. black-forest-labs/FLUX.1-dev
15. openai/whisper-large-v3
16. Kokoro-82M
17. tts-1-hd
18. deepseek-ai/DeepSeek-R1
19. openai/gpt-oss-120b
20. meta-llama/Llama-4-Scout-17B-16E-Instruct

ðŸ‘‰ Select a model number (default = 1): 
âœ… Using model: openai/gpt-oss-120b

ðŸ” Enter a scientific query or topic: 
ðŸ”Ž Citation Function Classification:
{
  "citation_functions": [
    "Extends",
    "Motivation"
  ],
  "justification": "The query asks how the new survey builds upon previous work (extension) and why it drives future studies (motivation)."
}

âœ… Saved to classified_outputs.jsonl
ðŸ”§ Ready for retrieval module (handled in a separate file).
âš¡ SKIP_REINDEX=1 â€” using existing FAISS index + meta; not scanning raw JSONL shards.
âœ… Top-k candidates (FAISS): /data/horse/ws/anpa439f-Function_Retrieval_Citation/Research_Project/RetrievalAugmentedGeneration/outputs/topk_candidates_query.jsonl
[22:43:59] main | args: Namespace(max_check=10, debug=True)
[22:43:59] read_last_jsonl | path= classified_outputs.jsonl
[22:43:59] read_last_jsonl | total_lines= 1
[22:43:59] main | query='How does the spectroscopic survey of faint lensed galaxies in the core of the galaxy cluster AC114 extend the work of Natarajan et al and motivate further research on the faint end of the luminosity function of high redshift galaxies?' | funcs=['Extends', 'Motivation']
[22:44:01] main | core_terms= ['galaxy cluster', 'AC114', 'luminosity function', 'high redshift galaxies', 'lensed galaxies', 'AC']
[22:44:01] load_topk_jsonl | path= /data/horse/ws/anpa439f-Function_Retrieval_Citation/Research_Project/outputs/topk_candidates_query.jsonl
[22:44:01] load_topk_jsonl | rows= 20
[22:44:01] load_topk_jsonl | first: rank= 0 paper_id= astro-ph/0104477 title_snip='VLT Spectroscopy of Galaxies Lensed by Abell AC114: Implication for thâ€¦' abs_len= 1672
[22:44:01] main | running function= Extends
[22:44:01] select | function= Extends | candidates_in= 20
[22:44:01] select | core_terms= ['galaxy cluster', 'AC114', 'luminosity function', 'high redshift galaxies', 'lensed galaxies', 'AC']
[22:44:01] select | no cosine prune; kept=20/20
[22:44:01] select | pool_size= 10 | ranks= [0, 1, 2, 3, 4, 5, 6, 7, 8, 9] | pids= ['astro-ph/0104477', 'astro-ph/0102214', 'astro-ph/0104094', 'astro-ph/0103123', 'astro-ph/0103500', 'astro-ph/0102470', 'astro-ph/0102393', 'astro-ph/0102213', 'astro-ph/0101371', 'astro-ph/0103242']
[22:44:01] select | verify relaxed 1/10
[22:44:01] verify | func= Extends | rank= 0 | pid= astro-ph/0104477 | title_snip='VLT Spectroscopy of Galaxies Lensed by Abell AC114: Implication for thâ€¦' | abs_len= 1672
[22:44:05] verify | result supports= True fit= 0.80 top= 0.90 invalid= â€” cue_hint= False
[22:44:05] select | verify relaxed 2/10
[22:44:05] verify | func= Extends | rank= 1 | pid= astro-ph/0102214 | title_snip='The Tolman Surface Brightness Test for the Reality of the Expansion. Iâ€¦' | abs_len= 1793
[22:44:07] verify | result supports= False fit= 0.00 top= 0.00 invalid= no_quote cue_hint= False
[22:44:07] select | verify relaxed 3/10
[22:44:07] verify | func= Extends | rank= 2 | pid= astro-ph/0104094 | title_snip='Discovery of a Galaxy Cluster via Weak Lensing' | abs_len= 876
[22:44:10] verify | result supports= False fit= 0.00 top= 0.50 invalid= â€” cue_hint= False
[22:44:10] select | verify relaxed 4/10
[22:44:10] verify | func= Extends | rank= 3 | pid= astro-ph/0103123 | title_snip='A wide-field spectroscopic survey of the cluster of galaxies
  Cl0024+â€¦' | abs_len= 1441
[22:44:12] verify | result supports= False fit= 0.00 top= 0.00 invalid= no_quote cue_hint= False
[22:44:12] select | verify relaxed 5/10
[22:44:12] verify | func= Extends | rank= 4 | pid= astro-ph/0103500 | title_snip='Constraining the Cosmological Parameters using Strong Lensing' | abs_len= 1682
[22:44:15] verify | result supports= False fit= 0.00 top= 0.20 invalid= â€” cue_hint= False
[22:44:15] select | verify relaxed 6/10
[22:44:15] verify | func= Extends | rank= 5 | pid= astro-ph/0102470 | title_snip='The redshift-space two-point correlation functions of galaxies and
  gâ€¦' | abs_len= 1525
[22:44:18] verify | result supports= False fit= 0.00 top= 0.00 invalid= no_quote cue_hint= False
[22:44:18] select | verify relaxed 7/10
[22:44:18] verify | func= Extends | rank= 6 | pid= astro-ph/0102393 | title_snip='On the estimation of galaxy structural parameters: the Sersic Model' | abs_len= 1814
[22:44:20] verify | result supports= False fit= 0.00 top= 0.00 invalid= no_quote cue_hint= False
[22:44:20] select | verify relaxed 8/10
[22:44:20] verify | func= Extends | rank= 7 | pid= astro-ph/0102213 | title_snip='The Tolman Surface Brightness Test for the Reality of the Expansion. Iâ€¦' | abs_len= 1760
[22:44:23] verify | result supports= False fit= 0.00 top= 0.00 invalid= no_quote cue_hint= False
[22:44:23] select | verify relaxed 9/10
[22:44:23] verify | func= Extends | rank= 8 | pid= astro-ph/0101371 | title_snip='Luminosity and mass function of galactic open clusters: I. NGC 4815' | abs_len= 1423
[22:44:25] verify | result supports= False fit= 0.00 top= 0.00 invalid= no_quote cue_hint= False
[22:44:25] select | verify relaxed 10/10
[22:44:25] verify | func= Extends | rank= 9 | pid= astro-ph/0103242 | title_snip='The milliJansky 12 micron Population: First Followup' | abs_len= 1755
[22:44:28] verify | result supports= False fit= 0.00 top= 0.00 invalid= no_quote cue_hint= False

================================================================================
FUNCTION: Extends
QUERY   : How does the spectroscopic survey of faint lensed galaxies in the core of the galaxy cluster AC114 extend the work of Natarajan et al and motivate further research on the faint end of the luminosity function of high redshift galaxies?
- WINNER: astro-ph/0104477 | VLT Spectroscopy of Galaxies Lensed by Abell AC114: Implication for the
  Mass Model and the Study of Low-Luminosity Galaxies at High-Redshift
- QUOTE : galaxies lensed by Abell AC114
- WHY   : sufficient
- ANSWER: The spectroscopic survey of faint lensed galaxies in the core of the galaxy cluster AC114 extends the work of Natarajan et al by confirming predicted lensing redshifts and discovering new multiple-image systems, increasing the scope and accuracy of high-redshift galaxy studies. This extension enables a larger gain in sensitivity towards low-luminosity high-z objects, motivating further research on the faint end of the luminosity function of high-redshift galaxies (astro-ph/0104477).
[22:44:33] main | running function= Motivation
[22:44:33] select | function= Motivation | candidates_in= 20
[22:44:33] select | core_terms= ['galaxy cluster', 'AC114', 'luminosity function', 'high redshift galaxies', 'lensed galaxies', 'AC']
[22:44:33] select | no cosine prune; kept=20/20
[22:44:33] select | pool_size= 10 | ranks= [0, 1, 2, 3, 4, 5, 6, 7, 8, 9] | pids= ['astro-ph/0104477', 'astro-ph/0102214', 'astro-ph/0104094', 'astro-ph/0103123', 'astro-ph/0103500', 'astro-ph/0102470', 'astro-ph/0102393', 'astro-ph/0102213', 'astro-ph/0101371', 'astro-ph/0103242']
[22:44:33] select | verify relaxed 1/10
[22:44:33] verify | func= Motivation | rank= 0 | pid= astro-ph/0104477 | title_snip='VLT Spectroscopy of Galaxies Lensed by Abell AC114: Implication for thâ€¦' | abs_len= 1672
[22:44:36] verify | result supports= True fit= 0.80 top= 0.90 invalid= â€” cue_hint= False
[22:44:36] select | verify relaxed 2/10
[22:44:36] verify | func= Motivation | rank= 1 | pid= astro-ph/0102214 | title_snip='The Tolman Surface Brightness Test for the Reality of the Expansion. Iâ€¦' | abs_len= 1793
[22:44:38] verify | result supports= False fit= 0.00 top= 0.00 invalid= no_quote cue_hint= False
[22:44:38] select | verify relaxed 3/10
[22:44:38] verify | func= Motivation | rank= 2 | pid= astro-ph/0104094 | title_snip='Discovery of a Galaxy Cluster via Weak Lensing' | abs_len= 876
[22:44:41] verify | result supports= False fit= 0.00 top= 0.50 invalid= â€” cue_hint= False
[22:44:41] select | verify relaxed 4/10
[22:44:41] verify | func= Motivation | rank= 3 | pid= astro-ph/0103123 | title_snip='A wide-field spectroscopic survey of the cluster of galaxies
  Cl0024+â€¦' | abs_len= 1441
[22:44:44] verify | result supports= False fit= 0.00 top= 0.00 invalid= no_quote cue_hint= False
[22:44:44] select | verify relaxed 5/10
[22:44:44] verify | func= Motivation | rank= 4 | pid= astro-ph/0103500 | title_snip='Constraining the Cosmological Parameters using Strong Lensing' | abs_len= 1682
[22:44:47] verify | result supports= False fit= 0.00 top= 0.20 invalid= â€” cue_hint= False
[22:44:47] select | verify relaxed 6/10
[22:44:47] verify | func= Motivation | rank= 5 | pid= astro-ph/0102470 | title_snip='The redshift-space two-point correlation functions of galaxies and
  gâ€¦' | abs_len= 1525
[22:44:49] verify | result supports= False fit= 0.00 top= 0.00 invalid= no_quote cue_hint= False
[22:44:49] select | verify relaxed 7/10
[22:44:49] verify | func= Motivation | rank= 6 | pid= astro-ph/0102393 | title_snip='On the estimation of galaxy structural parameters: the Sersic Model' | abs_len= 1814
[22:44:51] verify | result supports= False fit= 0.00 top= 0.00 invalid= no_quote cue_hint= False
[22:44:51] select | verify relaxed 8/10
[22:44:51] verify | func= Motivation | rank= 7 | pid= astro-ph/0102213 | title_snip='The Tolman Surface Brightness Test for the Reality of the Expansion. Iâ€¦' | abs_len= 1760
[22:44:54] verify | result supports= False fit= 0.00 top= 0.00 invalid= no_quote cue_hint= False
[22:44:54] select | verify relaxed 9/10
[22:44:54] verify | func= Motivation | rank= 8 | pid= astro-ph/0101371 | title_snip='Luminosity and mass function of galactic open clusters: I. NGC 4815' | abs_len= 1423
[22:44:56] verify | result supports= False fit= 0.00 top= 0.00 invalid= no_quote cue_hint= False
[22:44:56] select | verify relaxed 10/10
[22:44:56] verify | func= Motivation | rank= 9 | pid= astro-ph/0103242 | title_snip='The milliJansky 12 micron Population: First Followup' | abs_len= 1755
[22:44:59] verify | result supports= False fit= 0.00 top= 0.00 invalid= no_quote cue_hint= False

================================================================================
FUNCTION: Motivation
QUERY   : How does the spectroscopic survey of faint lensed galaxies in the core of the galaxy cluster AC114 extend the work of Natarajan et al and motivate further research on the faint end of the luminosity function of high redshift galaxies?
- WINNER: astro-ph/0104477 | VLT Spectroscopy of Galaxies Lensed by Abell AC114: Implication for the
  Mass Model and the Study of Low-Luminosity Galaxies at High-Redshift
- QUOTE : probe the high redshift Universe
- WHY   : sufficient
- ANSWER: The spectroscopic survey of faint lensed galaxies in AC114 extends the work of Natarajan et al by confirming predicted lensing redshifts and discovering new multiple-image systems, which motivates further research on the faint end of the luminosity function of high redshift galaxies. This is important because it enables the study of intrinsically fainter galaxies that are beyond the reach of existing blank field studies (astro-ph/0104477).

ðŸ“„ Saved: outputs/function_selection_results.json
ðŸ“„ Saved: outputs/function_selection_results.jsonl
ðŸ“ Answers-only: outputs/function_answers.txt
-> /home/anpa439f/anaconda3/envs/myenv/bin/python3 /data/horse/ws/anpa439f-Function_Retrieval_Citation/Research_Project/RetrievalAugmentedGeneration/classifying_question.py  (cwd=/data/horse/ws/anpa439f-Function_Retrieval_Citation/Research_Project/RetrievalAugmentedGeneration)
âœ… Saved to classified_outputs.jsonl
ðŸ”§ Ready for retrieval module (.py).
-> /home/anpa439f/anaconda3/envs/myenv/bin/python3 /data/horse/ws/anpa439f-Function_Retrieval_Citation/Research_Project/RetrievalAugmentedGeneration/Retreival_query_based.py --skip-reindex --index /data/horse/ws/anpa439f-Function_Retrieval_Citation/Research_Project/e5_index_subset_1/index.faiss --meta /data/horse/ws/anpa439f-Function_Retrieval_Citation/Research_Project/e5_index_subset_1/meta.parquet --topk 20  (cwd=/data/horse/ws/anpa439f-Function_Retrieval_Citation/Research_Project/RetrievalAugmentedGeneration)
âœ… Top-k candidates: /data/horse/ws/anpa439f-Function_Retrieval_Citation/Research_Project/RetrievalAugmentedGeneration/outputs/topk_candidates_query.jsonl
ðŸ”— Symlinked: /data/horse/ws/anpa439f-Function_Retrieval_Citation/Research_Project/outputs/topk_candidates_query.jsonl -> /data/horse/ws/anpa439f-Function_Retrieval_Citation/Research_Project/RetrievalAugmentedGeneration/outputs/topk_candidates_query.jsonl
-> /home/anpa439f/anaconda3/envs/myenv/bin/python3 /data/horse/ws/anpa439f-Function_Retrieval_Citation/Research_Project/RetrievalAugmentedGeneration/function_based_answer-2.py --debug --max-check 10  (cwd=/data/horse/ws/anpa439f-Function_Retrieval_Citation/Research_Project/RetrievalAugmentedGeneration)

ðŸŽ‰ Pipeline complete.
  â€¢ Classified file : /data/horse/ws/anpa439f-Function_Retrieval_Citation/Research_Project/RetrievalAugmentedGeneration/classified_outputs.jsonl
  â€¢ TopK (canonical): /data/horse/ws/anpa439f-Function_Retrieval_Citation/Research_Project/RetrievalAugmentedGeneration/outputs/topk_candidates_query.jsonl
  â€¢ Final outputs   : /data/horse/ws/anpa439f-Function_Retrieval_Citation/Research_Project/RetrievalAugmentedGeneration/outputs
