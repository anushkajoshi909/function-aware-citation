âœ… Available Models:
1. alias-code
2. alias-reasoning
3. alias-image-generation
4. alias-vision
5. alias-ha
6. meta-llama/Llama-3.3-70B-Instruct
7. meta-llama/Llama-3.1-8B-Instruct
8. Qwen/Qwen2-VL-7B-Instruct
9. openGPT-X/Teuken-7B-instruct-research-v0.4
10. deepseek-ai/DeepSeek-Coder-V2-Lite-Instruct
11. Qwen/Qwen3-Coder-30B-A3B-Instruct
12. Qwen/Qwen3-Embedding-4B
13. stabilityai/stable-diffusion-3.5-large-turbo
14. black-forest-labs/FLUX.1-dev
15. openai/whisper-large-v3
16. Kokoro-82M
17. tts-1-hd
18. deepseek-ai/DeepSeek-R1
19. openai/gpt-oss-120b
20. meta-llama/Llama-4-Scout-17B-16E-Instruct

ðŸ‘‰ Select a model number (default = 1): 
âœ… Using model: openai/gpt-oss-120b

ðŸ” Enter a scientific query or topic: 
ðŸ”Ž Citation Function Classification:
{
  "citation_functions": [
    "Background",
    "Motivation"
  ],
  "justification": "The query seeks foundational information about VLBI imaging capabilities (background) and asks why this knowledge is important for advancing our understanding of distant cosmological sources (motivation)."
}

âœ… Saved to classified_outputs.jsonl
ðŸ”§ Ready for retrieval module (handled in a separate file).
âš¡ SKIP_REINDEX=1 â€” using existing FAISS index + meta; not scanning raw JSONL shards.
âœ… Top-k candidates (FAISS): /data/horse/ws/anpa439f-Function_Retrieval_Citation/Research_Project/RetrievalAugmentedGeneration/outputs/topk_candidates_query.jsonl
[21:28:45] main | args: Namespace(max_check=10, debug=True)
[21:28:45] read_last_jsonl | path= classified_outputs.jsonl
[21:28:45] read_last_jsonl | total_lines= 1
[21:28:45] main | query='How does the capability of VLBI to image large fields-of-view with sub-mJy detection limits provide background for extending our understanding of cosmologically distant sources?' | funcs=['Background', 'Motivation']
[21:28:47] main | core_terms= ['VLBI', 'field-of-view', 'detection limit', 'cosmologically distant sources', 'fields-of-view', 'sub-mJy']
[21:28:47] load_topk_jsonl | path= /data/horse/ws/anpa439f-Function_Retrieval_Citation/Research_Project/outputs/topk_candidates_query.jsonl
[21:28:47] load_topk_jsonl | rows= 20
[21:28:47] load_topk_jsonl | first: rank= 0 paper_id= astro-ph/0102273 title_snip='The Pearson-Readhead Survey of Compact Extragalactic Radio Sources Froâ€¦' abs_len= 1510
[21:28:47] main | running function= Background
[21:28:47] select | function= Background | candidates_in= 20
[21:28:47] select | core_terms= ['VLBI', 'field-of-view', 'detection limit', 'cosmologically distant sources', 'fields-of-view', 'sub-mJy']
[21:28:47] select | no cosine prune; kept=20/20
[21:28:47] select | pool_size= 10 | ranks= [0, 1, 2, 3, 4, 5, 6, 7, 8, 9] | pids= ['astro-ph/0102273', 'astro-ph/0101313', 'astro-ph/0102037', 'astro-ph/0101096', 'astro-ph/0102276', 'astro-ph/0102242', 'astro-ph/0101086', 'astro-ph/0101433', 'astro-ph/0101491', 'astro-ph/0104309']
[21:28:47] select | verify relaxed 1/10
[21:28:47] verify | func= Background | rank= 0 | pid= astro-ph/0102273 | title_snip='The Pearson-Readhead Survey of Compact Extragalactic Radio Sources Froâ€¦' | abs_len= 1510
[21:28:50] verify | result supports= True fit= 0.80 top= 0.90 invalid= â€” cue_hint= False
[21:28:50] select | verify relaxed 2/10
[21:28:50] verify | func= Background | rank= 1 | pid= astro-ph/0101313 | title_snip='Measuring the brightness temperature distribution of extragalactic radâ€¦' | abs_len= 1194
[21:28:54] verify | result supports= True fit= 0.80 top= 0.90 invalid= â€” cue_hint= False
[21:28:54] select | verify relaxed 3/10
[21:28:54] verify | func= Background | rank= 2 | pid= astro-ph/0102037 | title_snip='AGN and starbursts at high redshift: High resolution EVN radio
  obserâ€¦' | abs_len= 1075
[21:28:57] verify | result supports= True fit= 0.90 top= 0.90 invalid= â€” cue_hint= False
[21:28:57] select | verify relaxed 4/10
[21:28:57] verify | func= Background | rank= 3 | pid= astro-ph/0101096 | title_snip='VLBI Observations of a Complete Sample of Radio Galaxies. 10 Years Latâ€¦' | abs_len= 999
[21:28:59] verify | result supports= False fit= 0.00 top= 0.20 invalid= no_quote cue_hint= False
[21:28:59] select | verify relaxed 5/10
[21:28:59] verify | func= Background | rank= 4 | pid= astro-ph/0102276 | title_snip='The Pearson-Readhead Survey of Compact Extragalactic Radio Sources Froâ€¦' | abs_len= 1783
[21:29:03] verify | result supports= False fit= 0.00 top= 0.20 invalid= â€” cue_hint= False
[21:29:03] select | verify relaxed 6/10
[21:29:03] verify | func= Background | rank= 5 | pid= astro-ph/0102242 | title_snip='Detecting Galactic MACHOs with VERA through Astrometric Microlensing oâ€¦' | abs_len= 1755
[21:29:05] verify | result supports= False fit= 0.00 top= 0.20 invalid= no_quote cue_hint= False
[21:29:05] select | verify relaxed 7/10
[21:29:05] verify | func= Background | rank= 6 | pid= astro-ph/0101086 | title_snip='Constraints from the damping tail' | abs_len= 827
[21:29:08] verify | result supports= False fit= 0.00 top= 0.00 invalid= no_quote cue_hint= False
[21:29:08] select | verify relaxed 8/10
[21:29:08] verify | func= Background | rank= 7 | pid= astro-ph/0101433 | title_snip='The quasar 3C345 at the highest resolution with mm- and space-VLBI' | abs_len= 601
[21:29:11] verify | result supports= False fit= 0.00 top= 0.20 invalid= â€” cue_hint= False
[21:29:11] select | verify relaxed 9/10
[21:29:11] verify | func= Background | rank= 8 | pid= astro-ph/0101491 | title_snip='The FORS Deep Field' | abs_len= 820
[21:29:13] verify | result supports= False fit= 0.00 top= 0.00 invalid= no_quote cue_hint= False
[21:29:13] select | verify relaxed 10/10
[21:29:13] verify | func= Background | rank= 9 | pid= astro-ph/0104309 | title_snip='The Inner Light Year of the Nearest Seyfert 1 Nucleus in NGC 4395' | abs_len= 1009
[21:29:17] verify | result supports= False fit= 0.00 top= 0.90 invalid= off_topic_no_core_in_abstract cue_hint= False

================================================================================
FUNCTION: Background
QUERY   : How does the capability of VLBI to image large fields-of-view with sub-mJy detection limits provide background for extending our understanding of cosmologically distant sources?
- WINNER: astro-ph/0102037 | AGN and starbursts at high redshift: High resolution EVN radio
  observations of the Hubble Deep Field
- QUOTE : VLBI now has the capability of imaging relatively large fields-of-view
- WHY   : sufficient
- ANSWER: VLBI's ability to image large fields-of-view with sub-mJy detection limits allows for the distinction between starburst and AGN activity in distant sources (astro-ph/0102037).
[21:29:21] main | running function= Motivation
[21:29:21] select | function= Motivation | candidates_in= 20
[21:29:21] select | core_terms= ['VLBI', 'field-of-view', 'detection limit', 'cosmologically distant sources', 'fields-of-view', 'sub-mJy']
[21:29:21] select | no cosine prune; kept=20/20
[21:29:21] select | pool_size= 10 | ranks= [0, 1, 2, 3, 4, 5, 6, 7, 8, 9] | pids= ['astro-ph/0102273', 'astro-ph/0101313', 'astro-ph/0102037', 'astro-ph/0101096', 'astro-ph/0102276', 'astro-ph/0102242', 'astro-ph/0101086', 'astro-ph/0101433', 'astro-ph/0101491', 'astro-ph/0104309']
[21:29:21] select | verify relaxed 1/10
[21:29:21] verify | func= Motivation | rank= 0 | pid= astro-ph/0102273 | title_snip='The Pearson-Readhead Survey of Compact Extragalactic Radio Sources Froâ€¦' | abs_len= 1510
[21:29:24] verify | result supports= False fit= 0.00 top= 0.50 invalid= no_quote cue_hint= False
[21:29:24] select | verify relaxed 2/10
[21:29:24] verify | func= Motivation | rank= 1 | pid= astro-ph/0101313 | title_snip='Measuring the brightness temperature distribution of extragalactic radâ€¦' | abs_len= 1194
[21:29:26] verify | result supports= False fit= 0.00 top= 0.60 invalid= no_quote cue_hint= False
[21:29:26] select | verify relaxed 3/10
[21:29:26] verify | func= Motivation | rank= 2 | pid= astro-ph/0102037 | title_snip='AGN and starbursts at high redshift: High resolution EVN radio
  obserâ€¦' | abs_len= 1075
[21:29:30] verify | result supports= True fit= 0.80 top= 0.90 invalid= â€” cue_hint= False
[21:29:30] select | verify relaxed 4/10
[21:29:30] verify | func= Motivation | rank= 3 | pid= astro-ph/0101096 | title_snip='VLBI Observations of a Complete Sample of Radio Galaxies. 10 Years Latâ€¦' | abs_len= 999
[21:29:32] verify | result supports= False fit= 0.00 top= 0.20 invalid= no_quote cue_hint= False
[21:29:32] select | verify relaxed 5/10
[21:29:32] verify | func= Motivation | rank= 4 | pid= astro-ph/0102276 | title_snip='The Pearson-Readhead Survey of Compact Extragalactic Radio Sources Froâ€¦' | abs_len= 1783
[21:29:35] verify | result supports= False fit= 0.00 top= 0.20 invalid= â€” cue_hint= False
[21:29:35] select | verify relaxed 6/10
[21:29:35] verify | func= Motivation | rank= 5 | pid= astro-ph/0102242 | title_snip='Detecting Galactic MACHOs with VERA through Astrometric Microlensing oâ€¦' | abs_len= 1755
[21:29:38] verify | result supports= False fit= 0.00 top= 0.20 invalid= no_quote cue_hint= False
[21:29:38] select | verify relaxed 7/10
[21:29:38] verify | func= Motivation | rank= 6 | pid= astro-ph/0101086 | title_snip='Constraints from the damping tail' | abs_len= 827
[21:29:40] verify | result supports= False fit= 0.00 top= 0.00 invalid= no_quote cue_hint= False
[21:29:40] select | verify relaxed 8/10
[21:29:40] verify | func= Motivation | rank= 7 | pid= astro-ph/0101433 | title_snip='The quasar 3C345 at the highest resolution with mm- and space-VLBI' | abs_len= 601
[21:29:44] verify | result supports= False fit= 0.00 top= 0.20 invalid= â€” cue_hint= False
[21:29:44] select | verify relaxed 9/10
[21:29:44] verify | func= Motivation | rank= 8 | pid= astro-ph/0101491 | title_snip='The FORS Deep Field' | abs_len= 820
[21:29:46] verify | result supports= False fit= 0.00 top= 0.00 invalid= no_quote cue_hint= False
[21:29:46] select | verify relaxed 10/10
[21:29:46] verify | func= Motivation | rank= 9 | pid= astro-ph/0104309 | title_snip='The Inner Light Year of the Nearest Seyfert 1 Nucleus in NGC 4395' | abs_len= 1009
[21:29:49] verify | result supports= False fit= 0.00 top= 0.00 invalid= no_quote cue_hint= False

================================================================================
FUNCTION: Motivation
QUERY   : How does the capability of VLBI to image large fields-of-view with sub-mJy detection limits provide background for extending our understanding of cosmologically distant sources?
- WINNER: astro-ph/0102037 | AGN and starbursts at high redshift: High resolution EVN radio
  observations of the Hubble Deep Field
- QUOTE : VLBI now has the capability of imaging relatively large fields-of-view
- WHY   : sufficient
- ANSWER: The capability of VLBI to image large fields-of-view with sub-mJy detection limits is crucial for distinguishing between starburst and AGN activity in distant sources, which is essential for understanding their nature. This capability enables the study of faint radio sources, such as those in the Hubble Deep Field, and sheds light on the coexistence of AGN and starburst activity in these sources (astro-ph/0102037).

ðŸ“„ Saved: outputs/function_selection_results.json
ðŸ“„ Saved: outputs/function_selection_results.jsonl
ðŸ“ Answers-only: outputs/function_answers.txt
-> /home/anpa439f/anaconda3/envs/myenv/bin/python3 /data/horse/ws/anpa439f-Function_Retrieval_Citation/Research_Project/RetrievalAugmentedGeneration/classifying_question.py  (cwd=/data/horse/ws/anpa439f-Function_Retrieval_Citation/Research_Project/RetrievalAugmentedGeneration)
âœ… Saved to classified_outputs.jsonl
ðŸ”§ Ready for retrieval module (.py).
-> /home/anpa439f/anaconda3/envs/myenv/bin/python3 /data/horse/ws/anpa439f-Function_Retrieval_Citation/Research_Project/RetrievalAugmentedGeneration/Retreival_query_based.py --skip-reindex --index /data/horse/ws/anpa439f-Function_Retrieval_Citation/Research_Project/e5_index_subset_1/index.faiss --meta /data/horse/ws/anpa439f-Function_Retrieval_Citation/Research_Project/e5_index_subset_1/meta.parquet --topk 20  (cwd=/data/horse/ws/anpa439f-Function_Retrieval_Citation/Research_Project/RetrievalAugmentedGeneration)
âœ… Top-k candidates: /data/horse/ws/anpa439f-Function_Retrieval_Citation/Research_Project/RetrievalAugmentedGeneration/outputs/topk_candidates_query.jsonl
ðŸ”— Symlinked: /data/horse/ws/anpa439f-Function_Retrieval_Citation/Research_Project/outputs/topk_candidates_query.jsonl -> /data/horse/ws/anpa439f-Function_Retrieval_Citation/Research_Project/RetrievalAugmentedGeneration/outputs/topk_candidates_query.jsonl
-> /home/anpa439f/anaconda3/envs/myenv/bin/python3 /data/horse/ws/anpa439f-Function_Retrieval_Citation/Research_Project/RetrievalAugmentedGeneration/function_based_answer-2.py --debug --max-check 10  (cwd=/data/horse/ws/anpa439f-Function_Retrieval_Citation/Research_Project/RetrievalAugmentedGeneration)

ðŸŽ‰ Pipeline complete.
  â€¢ Classified file : /data/horse/ws/anpa439f-Function_Retrieval_Citation/Research_Project/RetrievalAugmentedGeneration/classified_outputs.jsonl
  â€¢ TopK (canonical): /data/horse/ws/anpa439f-Function_Retrieval_Citation/Research_Project/RetrievalAugmentedGeneration/outputs/topk_candidates_query.jsonl
  â€¢ Final outputs   : /data/horse/ws/anpa439f-Function_Retrieval_Citation/Research_Project/RetrievalAugmentedGeneration/outputs
