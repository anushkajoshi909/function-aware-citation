âœ… Available Models:
1. alias-code
2. alias-reasoning
3. alias-image-generation
4. alias-vision
5. alias-ha
6. meta-llama/Llama-3.3-70B-Instruct
7. meta-llama/Llama-3.1-8B-Instruct
8. Qwen/Qwen2-VL-7B-Instruct
9. openGPT-X/Teuken-7B-instruct-research-v0.4
10. deepseek-ai/DeepSeek-Coder-V2-Lite-Instruct
11. Qwen/Qwen3-Coder-30B-A3B-Instruct
12. Qwen/Qwen3-Embedding-4B
13. stabilityai/stable-diffusion-3.5-large-turbo
14. black-forest-labs/FLUX.1-dev
15. openai/whisper-large-v3
16. Kokoro-82M
17. tts-1-hd
18. deepseek-ai/DeepSeek-R1
19. openai/gpt-oss-120b
20. meta-llama/Llama-4-Scout-17B-16E-Instruct

ðŸ‘‰ Select a model number (default = 1): 
âœ… Using model: openai/gpt-oss-120b

ðŸ” Enter a scientific query or topic: 
ðŸ”Ž Citation Function Classification:
{
  "citation_functions": [
    "Uses",
    "Compares"
  ],
  "justification": "The query asks how the current study applies (Uses) chiral perturbation theory and how it is evaluated against (Compares) earlier analyses of the strong NN-force."
}

âœ… Saved to classified_outputs.jsonl
ðŸ”§ Ready for retrieval module (handled in a separate file).
âš¡ SKIP_REINDEX=1 â€” using existing FAISS index + meta; not scanning raw JSONL shards.
âœ… Top-k candidates (FAISS): /data/horse/ws/anpa439f-Function_Retrieval_Citation/Research_Project/RetrievalAugmentedGeneration/outputs/topk_candidates_query.jsonl
[23:34:12] main | args: Namespace(max_check=10, debug=True)
[23:34:12] read_last_jsonl | path= classified_outputs.jsonl
[23:34:12] read_last_jsonl | total_lines= 1
[23:34:12] main | query='How does the current work use and compare chiral perturbation theory to previous analyses of the strong NN-force?' | funcs=['Uses', 'Compares']
[23:34:14] main | core_terms= ['NN-force', 'chiral perturbation theory']
[23:34:14] load_topk_jsonl | path= /data/horse/ws/anpa439f-Function_Retrieval_Citation/Research_Project/outputs/topk_candidates_query.jsonl
[23:34:14] load_topk_jsonl | rows= 20
[23:34:14] load_topk_jsonl | first: rank= 0 paper_id= hep-ph/0101030 title_snip='Complete analysis of pion-nucleon scattering in chiral perturbation
  â€¦' abs_len= 880
[23:34:14] main | running function= Uses
[23:34:14] select | function= Uses | candidates_in= 20
[23:34:14] select | core_terms= ['NN-force', 'chiral perturbation theory']
[23:34:14] select | no cosine prune; kept=20/20
[23:34:14] select | pool_size= 10 | ranks= [0, 1, 2, 3, 4, 5, 6, 7, 8, 9] | pids= ['hep-ph/0101030', 'nucl-th/0104030', 'hep-ph/0102287', 'nucl-th/0103020', 'nucl-th/0101052', 'nucl-th/0101032', 'nucl-th/0103002', 'nucl-th/0104043', 'hep-ph/0103123', 'hep-ph/0101110']
[23:34:14] select | verify relaxed 1/10
[23:34:14] verify | func= Uses | rank= 0 | pid= hep-ph/0101030 | title_snip='Complete analysis of pion-nucleon scattering in chiral perturbation
  â€¦' | abs_len= 880
[23:34:17] verify | result supports= True fit= 0.80 top= 0.90 invalid= â€” cue_hint= False
[23:34:17] select | verify relaxed 2/10
[23:34:17] verify | func= Uses | rank= 1 | pid= nucl-th/0104030 | title_snip='Towards a Perturbative Theory of Nuclear Forces' | abs_len= 368
[23:34:20] verify | result supports= False fit= 0.00 top= 0.90 invalid= off_topic_no_core_in_abstract cue_hint= False
[23:34:20] select | verify relaxed 3/10
[23:34:20] verify | func= Uses | rank= 2 | pid= hep-ph/0102287 | title_snip='Dispersion relations and soft pion theorems for K -> pi pi' | abs_len= 663
[23:34:24] verify | result supports= True fit= 0.80 top= 0.60 invalid= â€” cue_hint= False
[23:34:24] select | verify relaxed 4/10
[23:34:24] verify | func= Uses | rank= 3 | pid= nucl-th/0103020 | title_snip='Elastic electron-deuteron scattering in chiral effective field theory' | abs_len= 898
[23:34:27] verify | result supports= False fit= 0.00 top= 0.50 invalid= â€” cue_hint= False
[23:34:27] select | verify relaxed 5/10
[23:34:27] verify | func= Uses | rank= 4 | pid= nucl-th/0101052 | title_snip='Chiral 3$\pi$-exchange NN-potentials: Results for dominant
  next-to-lâ€¦' | abs_len= 1292
[23:34:30] verify | result supports= True fit= 0.80 top= 0.90 invalid= â€” cue_hint= False
[23:34:30] select | verify relaxed 6/10
[23:34:30] verify | func= Uses | rank= 5 | pid= nucl-th/0101032 | title_snip='Chiral unitary theory: application to nuclear problems' | abs_len= 468
[23:34:33] verify | result supports= True fit= 0.80 top= 0.90 invalid= â€” cue_hint= False
[23:34:33] select | verify relaxed 7/10
[23:34:33] verify | func= Uses | rank= 6 | pid= nucl-th/0103002 | title_snip='Tensor Analyzing Power and Current Conservation in the d+p->3He+g
  reâ€¦' | abs_len= 480
[23:34:35] verify | result supports= False fit= 0.00 top= 0.00 invalid= no_quote cue_hint= False
[23:34:35] select | verify relaxed 8/10
[23:34:35] verify | func= Uses | rank= 7 | pid= nucl-th/0104043 | title_snip='A New Slant on Hadron Structure' | abs_len= 689
[23:34:39] verify | result supports= False fit= 0.00 top= 0.50 invalid= â€” cue_hint= True
[23:34:39] select | verify relaxed 9/10
[23:34:39] verify | func= Uses | rank= 8 | pid= hep-ph/0103123 | title_snip='Non-singlet structure functions beyond the next-to-next-to leading ordâ€¦' | abs_len= 985
[23:34:41] verify | result supports= False fit= 0.00 top= 0.00 invalid= no_quote cue_hint= False
[23:34:41] select | verify relaxed 10/10
[23:34:41] verify | func= Uses | rank= 9 | pid= hep-ph/0101110 | title_snip='Current quark mass effects on chiral phase transition of QCD in the
  â€¦' | abs_len= 1153
[23:34:43] verify | result supports= False fit= 0.00 top= 0.00 invalid= no_quote cue_hint= False

================================================================================
FUNCTION: Uses
QUERY   : How does the current work use and compare chiral perturbation theory to previous analyses of the strong NN-force?
- WINNER: hep-ph/0101030 | Complete analysis of pion-nucleon scattering in chiral perturbation
  theory to third order
- QUOTE : pion-nucleon scattering in heavy-baryon chiral perturbation theory
- WHY   : sufficient
- ANSWER: The authors use heavy-baryon chiral perturbation theory to analyze pion-nucleon scattering, allowing for a consistent description of strong and electromagnetic effects. This method is applied to isolate the strong part of the interaction and compare the results with previous phase shift analyses, revealing sizeable differences in the S-waves of elastic channels (hep-ph/0101030).
[23:34:48] main | running function= Compares
[23:34:48] select | function= Compares | candidates_in= 20
[23:34:48] select | core_terms= ['NN-force', 'chiral perturbation theory']
[23:34:48] select | no cosine prune; kept=20/20
[23:34:48] select | pool_size= 10 | ranks= [0, 1, 2, 3, 4, 5, 6, 7, 8, 9] | pids= ['hep-ph/0101030', 'nucl-th/0104030', 'hep-ph/0102287', 'nucl-th/0103020', 'nucl-th/0101052', 'nucl-th/0101032', 'nucl-th/0103002', 'nucl-th/0104043', 'hep-ph/0103123', 'hep-ph/0101110']
[23:34:48] select | verify relaxed 1/10
[23:34:48] verify | func= Compares | rank= 0 | pid= hep-ph/0101030 | title_snip='Complete analysis of pion-nucleon scattering in chiral perturbation
  â€¦' | abs_len= 880
[23:34:52] verify | result supports= False fit= 0.00 top= 0.90 invalid= off_topic_no_core_in_abstract cue_hint= True
[23:34:52] select | verify relaxed 2/10
[23:34:52] verify | func= Compares | rank= 1 | pid= nucl-th/0104030 | title_snip='Towards a Perturbative Theory of Nuclear Forces' | abs_len= 368
[23:34:55] verify | result supports= False fit= 0.00 top= 0.90 invalid= off_topic_no_core_in_abstract cue_hint= False
[23:34:55] select | verify relaxed 3/10
[23:34:55] verify | func= Compares | rank= 2 | pid= hep-ph/0102287 | title_snip='Dispersion relations and soft pion theorems for K -> pi pi' | abs_len= 663
[23:34:58] verify | result supports= False fit= 0.00 top= 0.50 invalid= â€” cue_hint= False
[23:34:58] select | verify relaxed 4/10
[23:34:58] verify | func= Compares | rank= 3 | pid= nucl-th/0103020 | title_snip='Elastic electron-deuteron scattering in chiral effective field theory' | abs_len= 898
[23:35:01] verify | result supports= False fit= 0.00 top= 0.50 invalid= â€” cue_hint= False
[23:35:01] select | verify relaxed 5/10
[23:35:01] verify | func= Compares | rank= 4 | pid= nucl-th/0101052 | title_snip='Chiral 3$\pi$-exchange NN-potentials: Results for dominant
  next-to-lâ€¦' | abs_len= 1292
[23:35:04] verify | result supports= False fit= 0.00 top= 0.00 invalid= no_quote cue_hint= False
[23:35:04] select | verify relaxed 6/10
[23:35:04] verify | func= Compares | rank= 5 | pid= nucl-th/0101032 | title_snip='Chiral unitary theory: application to nuclear problems' | abs_len= 468
[23:35:07] verify | result supports= False fit= 0.00 top= 0.50 invalid= â€” cue_hint= False
[23:35:07] select | verify relaxed 7/10
[23:35:07] verify | func= Compares | rank= 6 | pid= nucl-th/0103002 | title_snip='Tensor Analyzing Power and Current Conservation in the d+p->3He+g
  reâ€¦' | abs_len= 480
[23:35:09] verify | result supports= False fit= 0.00 top= 0.00 invalid= no_quote cue_hint= False
[23:35:09] select | verify relaxed 8/10
[23:35:09] verify | func= Compares | rank= 7 | pid= nucl-th/0104043 | title_snip='A New Slant on Hadron Structure' | abs_len= 689
[23:35:13] verify | result supports= False fit= 0.00 top= 0.50 invalid= â€” cue_hint= False
[23:35:13] select | verify relaxed 9/10
[23:35:13] verify | func= Compares | rank= 8 | pid= hep-ph/0103123 | title_snip='Non-singlet structure functions beyond the next-to-next-to leading ordâ€¦' | abs_len= 985
[23:35:15] verify | result supports= False fit= 0.00 top= 0.00 invalid= no_quote cue_hint= False
[23:35:15] select | verify relaxed 10/10
[23:35:15] verify | func= Compares | rank= 9 | pid= hep-ph/0101110 | title_snip='Current quark mass effects on chiral phase transition of QCD in the
  â€¦' | abs_len= 1153
[23:35:18] verify | result supports= False fit= 0.00 top= 0.00 invalid= no_quote cue_hint= False

================================================================================
FUNCTION: Compares
QUERY   : How does the current work use and compare chiral perturbation theory to previous analyses of the strong NN-force?
- No supporting candidate with sufficient evidence.
- ANSWER: The abstract does not provide information relevant to Compares.

ðŸ“„ Saved: outputs/function_selection_results.json
ðŸ“„ Saved: outputs/function_selection_results.jsonl
ðŸ“ Answers-only: outputs/function_answers.txt
-> /home/anpa439f/anaconda3/envs/myenv/bin/python3 /data/horse/ws/anpa439f-Function_Retrieval_Citation/Research_Project/RetrievalAugmentedGeneration/classifying_question.py  (cwd=/data/horse/ws/anpa439f-Function_Retrieval_Citation/Research_Project/RetrievalAugmentedGeneration)
âœ… Saved to classified_outputs.jsonl
ðŸ”§ Ready for retrieval module (.py).
-> /home/anpa439f/anaconda3/envs/myenv/bin/python3 /data/horse/ws/anpa439f-Function_Retrieval_Citation/Research_Project/RetrievalAugmentedGeneration/Retreival_query_based.py --skip-reindex --index /data/horse/ws/anpa439f-Function_Retrieval_Citation/Research_Project/e5_index_subset_1/index.faiss --meta /data/horse/ws/anpa439f-Function_Retrieval_Citation/Research_Project/e5_index_subset_1/meta.parquet --topk 20  (cwd=/data/horse/ws/anpa439f-Function_Retrieval_Citation/Research_Project/RetrievalAugmentedGeneration)
âœ… Top-k candidates: /data/horse/ws/anpa439f-Function_Retrieval_Citation/Research_Project/RetrievalAugmentedGeneration/outputs/topk_candidates_query.jsonl
ðŸ”— Symlinked: /data/horse/ws/anpa439f-Function_Retrieval_Citation/Research_Project/outputs/topk_candidates_query.jsonl -> /data/horse/ws/anpa439f-Function_Retrieval_Citation/Research_Project/RetrievalAugmentedGeneration/outputs/topk_candidates_query.jsonl
-> /home/anpa439f/anaconda3/envs/myenv/bin/python3 /data/horse/ws/anpa439f-Function_Retrieval_Citation/Research_Project/RetrievalAugmentedGeneration/function_based_answer-2.py --debug --max-check 10  (cwd=/data/horse/ws/anpa439f-Function_Retrieval_Citation/Research_Project/RetrievalAugmentedGeneration)

ðŸŽ‰ Pipeline complete.
  â€¢ Classified file : /data/horse/ws/anpa439f-Function_Retrieval_Citation/Research_Project/RetrievalAugmentedGeneration/classified_outputs.jsonl
  â€¢ TopK (canonical): /data/horse/ws/anpa439f-Function_Retrieval_Citation/Research_Project/RetrievalAugmentedGeneration/outputs/topk_candidates_query.jsonl
  â€¢ Final outputs   : /data/horse/ws/anpa439f-Function_Retrieval_Citation/Research_Project/RetrievalAugmentedGeneration/outputs
