âœ… Available Models:
1. alias-code
2. alias-reasoning
3. alias-image-generation
4. alias-vision
5. alias-ha
6. meta-llama/Llama-3.3-70B-Instruct
7. meta-llama/Llama-3.1-8B-Instruct
8. Qwen/Qwen2-VL-7B-Instruct
9. openGPT-X/Teuken-7B-instruct-research-v0.4
10. deepseek-ai/DeepSeek-Coder-V2-Lite-Instruct
11. Qwen/Qwen3-Coder-30B-A3B-Instruct
12. Qwen/Qwen3-Embedding-4B
13. stabilityai/stable-diffusion-3.5-large-turbo
14. black-forest-labs/FLUX.1-dev
15. openai/whisper-large-v3
16. Kokoro-82M
17. tts-1-hd
18. deepseek-ai/DeepSeek-R1
19. openai/gpt-oss-120b
20. meta-llama/Llama-4-Scout-17B-16E-Instruct

ðŸ‘‰ Select a model number (default = 1): 
âœ… Using model: openai/gpt-oss-120b

ðŸ” Enter a scientific query or topic: 
ðŸ”Ž Citation Function Classification:
{
  "citation_functions": [
    "Extends",
    "Motivation"
  ],
  "justification": "The query asks how the new work builds on prior research (Extends) and seeks the reasons\u2014limitations in earlier studies\u2014that drove this development (Motivation)."
}

âœ… Saved to classified_outputs.jsonl
ðŸ”§ Ready for retrieval module (handled in a separate file).
âš¡ SKIP_REINDEX=1 â€” using existing FAISS index + meta; not scanning raw JSONL shards.
âœ… Top-k candidates (FAISS): /data/horse/ws/anpa439f-Function_Retrieval_Citation/Research_Project/RetrievalAugmentedGeneration/outputs/topk_candidates_query.jsonl
[22:27:16] main | args: Namespace(max_check=10, debug=True)
[22:27:16] read_last_jsonl | path= classified_outputs.jsonl
[22:27:16] read_last_jsonl | total_lines= 1
[22:27:16] main | query='How does the current work extend previous research on quantum field theories, and what limitations in earlier studies motivated this extension?' | funcs=['Extends', 'Motivation']
[22:27:18] main | core_terms= ['quantum field', 'theory', 'symmetry', 'renormalization']
[22:27:18] load_topk_jsonl | path= /data/horse/ws/anpa439f-Function_Retrieval_Citation/Research_Project/outputs/topk_candidates_query.jsonl
[22:27:18] load_topk_jsonl | rows= 20
[22:27:18] load_topk_jsonl | first: rank= 0 paper_id= hep-th/0103228 title_snip='New Approach to Quantum Field Theory for Arbitrary Observers in
  Elecâ€¦' abs_len= 1692
[22:27:18] main | running function= Extends
[22:27:18] select | function= Extends | candidates_in= 20
[22:27:18] select | core_terms= ['quantum field', 'theory', 'symmetry', 'renormalization']
[22:27:18] select | no cosine prune; kept=20/20
[22:27:18] select | pool_size= 10 | ranks= [0, 1, 2, 3, 4, 5, 6, 7, 8, 9] | pids= ['hep-th/0103228', 'hep-ph/0103299', 'hep-th/0102041', 'physics/0101039', 'hep-th/0101174', 'hep-ph/0102096', 'physics/0101057', 'astro-ph/0104162', 'hep-ph/0102014', 'hep-ph/0103146']
[22:27:18] select | verify relaxed 1/10
[22:27:18] verify | func= Extends | rank= 0 | pid= hep-th/0103228 | title_snip='New Approach to Quantum Field Theory for Arbitrary Observers in
  Elecâ€¦' | abs_len= 1692
[22:27:21] verify | result supports= True fit= 0.80 top= 0.90 invalid= â€” cue_hint= False
[22:27:21] select | verify relaxed 2/10
[22:27:21] verify | func= Extends | rank= 1 | pid= hep-ph/0103299 | title_snip='Constraining Models of New Physics in Light of Recent Experimental
  Râ€¦' | abs_len= 780
[22:27:24] verify | result supports= False fit= 0.00 top= 0.90 invalid= off_topic_no_core_in_abstract cue_hint= False
[22:27:24] select | verify relaxed 3/10
[22:27:24] verify | func= Extends | rank= 2 | pid= hep-th/0102041 | title_snip='A model for gauge theories with Higgs fields' | abs_len= 1532
[22:27:27] verify | result supports= True fit= 0.80 top= 0.90 invalid= â€” cue_hint= False
[22:27:27] select | verify relaxed 4/10
[22:27:27] verify | func= Extends | rank= 3 | pid= physics/0101039 | title_snip='Reductionism, Emergence, and Effective Field Theories' | abs_len= 505
[22:27:30] verify | result supports= True fit= 0.80 top= 0.90 invalid= â€” cue_hint= False
[22:27:30] select | verify relaxed 5/10
[22:27:30] verify | func= Extends | rank= 4 | pid= hep-th/0101174 | title_snip='Boundary integrable quantum field theories' | abs_len= 258
[22:27:33] verify | result supports= True fit= 0.80 top= 0.90 invalid= â€” cue_hint= False
[22:27:33] select | verify relaxed 6/10
[22:27:33] verify | func= Extends | rank= 5 | pid= hep-ph/0102096 | title_snip='$\mu$-term due to the non-universal supersymmetry breaking and the Higâ€¦' | abs_len= 995
[22:27:36] verify | result supports= True fit= 0.80 top= 0.90 invalid= â€” cue_hint= False
[22:27:36] select | verify relaxed 7/10
[22:27:36] verify | func= Extends | rank= 6 | pid= physics/0101057 | title_snip='Consequences of a Quantized Spacetime Model' | abs_len= 218
[22:27:39] verify | result supports= False fit= 0.00 top= 0.20 invalid= â€” cue_hint= True
[22:27:39] select | verify relaxed 8/10
[22:27:39] verify | func= Extends | rank= 7 | pid= astro-ph/0104162 | title_snip='Early-universe constraints on a Primordial Scaling Field' | abs_len= 1051
[22:27:42] verify | result supports= False fit= 0.00 top= 0.20 invalid= no_quote cue_hint= False
[22:27:42] select | verify relaxed 9/10
[22:27:42] verify | func= Extends | rank= 8 | pid= hep-ph/0102014 | title_snip='Spin-Dependent Structure Functions of the Photon' | abs_len= 475
[22:27:45] verify | result supports= False fit= 0.00 top= 0.20 invalid= â€” cue_hint= False
[22:27:45] select | verify relaxed 10/10
[22:27:45] verify | func= Extends | rank= 9 | pid= hep-ph/0103146 | title_snip='Electro-strong interaction and high Q^2 events at HERA' | abs_len= 498
[22:27:48] verify | result supports= True fit= 0.80 top= 0.90 invalid= â€” cue_hint= False

================================================================================
FUNCTION: Extends
QUERY   : How does the current work extend previous research on quantum field theories, and what limitations in earlier studies motivated this extension?
- WINNER: hep-th/0103228 | New Approach to Quantum Field Theory for Arbitrary Observers in
  Electromagnetic Backgrounds
- QUOTE : A reformulation of fermionic QFT in electromagnetic backgrounds
- WHY   : sufficient
- ANSWER: This work extends previous research on quantum field theories by generalizing the particle interpretation to arbitrarily moving observers in electromagnetic backgrounds, addressing limitations in earlier studies that relied on specific coordinate or gauge choices. The approach builds upon Gibbons' method and conventional multiparticle quantum mechanics to provide a more straightforward and coordinate-independent definition of particles (hep-th/0103228).
[22:27:52] main | running function= Motivation
[22:27:52] select | function= Motivation | candidates_in= 20
[22:27:52] select | core_terms= ['quantum field', 'theory', 'symmetry', 'renormalization']
[22:27:52] select | no cosine prune; kept=20/20
[22:27:52] select | pool_size= 10 | ranks= [0, 1, 2, 3, 4, 5, 6, 7, 8, 9] | pids= ['hep-th/0103228', 'hep-ph/0103299', 'hep-th/0102041', 'physics/0101039', 'hep-th/0101174', 'hep-ph/0102096', 'physics/0101057', 'astro-ph/0104162', 'hep-ph/0102014', 'hep-ph/0103146']
[22:27:52] select | verify relaxed 1/10
[22:27:52] verify | func= Motivation | rank= 0 | pid= hep-th/0103228 | title_snip='New Approach to Quantum Field Theory for Arbitrary Observers in
  Elecâ€¦' | abs_len= 1692
[22:27:55] verify | result supports= True fit= 0.80 top= 0.90 invalid= â€” cue_hint= False
[22:27:55] select | verify relaxed 2/10
[22:27:55] verify | func= Motivation | rank= 1 | pid= hep-ph/0103299 | title_snip='Constraining Models of New Physics in Light of Recent Experimental
  Râ€¦' | abs_len= 780
[22:27:58] verify | result supports= False fit= 0.00 top= 0.50 invalid= â€” cue_hint= True
[22:27:58] select | verify relaxed 3/10
[22:27:58] verify | func= Motivation | rank= 2 | pid= hep-th/0102041 | title_snip='A model for gauge theories with Higgs fields' | abs_len= 1532
[22:28:01] verify | result supports= True fit= 0.80 top= 0.90 invalid= â€” cue_hint= False
[22:28:01] select | verify relaxed 4/10
[22:28:01] verify | func= Motivation | rank= 3 | pid= physics/0101039 | title_snip='Reductionism, Emergence, and Effective Field Theories' | abs_len= 505
[22:28:04] verify | result supports= True fit= 0.80 top= 0.90 invalid= â€” cue_hint= False
[22:28:04] select | verify relaxed 5/10
[22:28:04] verify | func= Motivation | rank= 4 | pid= hep-th/0101174 | title_snip='Boundary integrable quantum field theories' | abs_len= 258
[22:28:07] verify | result supports= False fit= 0.00 top= 0.90 invalid= off_topic_no_core_in_abstract cue_hint= True
[22:28:07] select | verify relaxed 6/10
[22:28:07] verify | func= Motivation | rank= 5 | pid= hep-ph/0102096 | title_snip='$\mu$-term due to the non-universal supersymmetry breaking and the Higâ€¦' | abs_len= 995
[22:28:10] verify | result supports= True fit= 0.80 top= 0.90 invalid= â€” cue_hint= False
[22:28:10] select | verify relaxed 7/10
[22:28:10] verify | func= Motivation | rank= 6 | pid= physics/0101057 | title_snip='Consequences of a Quantized Spacetime Model' | abs_len= 218
[22:28:13] verify | result supports= False fit= 0.00 top= 0.20 invalid= â€” cue_hint= False
[22:28:13] select | verify relaxed 8/10
[22:28:13] verify | func= Motivation | rank= 7 | pid= astro-ph/0104162 | title_snip='Early-universe constraints on a Primordial Scaling Field' | abs_len= 1051
[22:28:16] verify | result supports= False fit= 0.00 top= 0.20 invalid= no_quote cue_hint= False
[22:28:16] select | verify relaxed 9/10
[22:28:16] verify | func= Motivation | rank= 8 | pid= hep-ph/0102014 | title_snip='Spin-Dependent Structure Functions of the Photon' | abs_len= 475
[22:28:18] verify | result supports= False fit= 0.00 top= 0.20 invalid= no_quote cue_hint= False
[22:28:18] select | verify relaxed 10/10
[22:28:18] verify | func= Motivation | rank= 9 | pid= hep-ph/0103146 | title_snip='Electro-strong interaction and high Q^2 events at HERA' | abs_len= 498
[22:28:21] verify | result supports= True fit= 0.80 top= 0.90 invalid= â€” cue_hint= False

================================================================================
FUNCTION: Motivation
QUERY   : How does the current work extend previous research on quantum field theories, and what limitations in earlier studies motivated this extension?
- WINNER: hep-th/0103228 | New Approach to Quantum Field Theory for Arbitrary Observers in
  Electromagnetic Backgrounds
- QUOTE : A reformulation of fermionic QFT in electromagnetic backgrounds
- WHY   : sufficient
- ANSWER: The current work extends previous research on quantum field theories by addressing limitations in earlier studies that relied on specific choices of coordinates, gauge, or particle detectors. This extension was motivated by the need for a more general and observer-independent definition of particles in electromagnetic backgrounds (hep-th/0103228).

ðŸ“„ Saved: outputs/function_selection_results.json
ðŸ“„ Saved: outputs/function_selection_results.jsonl
ðŸ“ Answers-only: outputs/function_answers.txt
-> /home/anpa439f/anaconda3/envs/myenv/bin/python3 /data/horse/ws/anpa439f-Function_Retrieval_Citation/Research_Project/RetrievalAugmentedGeneration/classifying_question.py  (cwd=/data/horse/ws/anpa439f-Function_Retrieval_Citation/Research_Project/RetrievalAugmentedGeneration)
âœ… Saved to classified_outputs.jsonl
ðŸ”§ Ready for retrieval module (.py).
-> /home/anpa439f/anaconda3/envs/myenv/bin/python3 /data/horse/ws/anpa439f-Function_Retrieval_Citation/Research_Project/RetrievalAugmentedGeneration/Retreival_query_based.py --skip-reindex --index /data/horse/ws/anpa439f-Function_Retrieval_Citation/Research_Project/e5_index_subset_1/index.faiss --meta /data/horse/ws/anpa439f-Function_Retrieval_Citation/Research_Project/e5_index_subset_1/meta.parquet --topk 20  (cwd=/data/horse/ws/anpa439f-Function_Retrieval_Citation/Research_Project/RetrievalAugmentedGeneration)
âœ… Top-k candidates: /data/horse/ws/anpa439f-Function_Retrieval_Citation/Research_Project/RetrievalAugmentedGeneration/outputs/topk_candidates_query.jsonl
ðŸ”— Symlinked: /data/horse/ws/anpa439f-Function_Retrieval_Citation/Research_Project/outputs/topk_candidates_query.jsonl -> /data/horse/ws/anpa439f-Function_Retrieval_Citation/Research_Project/RetrievalAugmentedGeneration/outputs/topk_candidates_query.jsonl
-> /home/anpa439f/anaconda3/envs/myenv/bin/python3 /data/horse/ws/anpa439f-Function_Retrieval_Citation/Research_Project/RetrievalAugmentedGeneration/function_based_answer-2.py --debug --max-check 10  (cwd=/data/horse/ws/anpa439f-Function_Retrieval_Citation/Research_Project/RetrievalAugmentedGeneration)

ðŸŽ‰ Pipeline complete.
  â€¢ Classified file : /data/horse/ws/anpa439f-Function_Retrieval_Citation/Research_Project/RetrievalAugmentedGeneration/classified_outputs.jsonl
  â€¢ TopK (canonical): /data/horse/ws/anpa439f-Function_Retrieval_Citation/Research_Project/RetrievalAugmentedGeneration/outputs/topk_candidates_query.jsonl
  â€¢ Final outputs   : /data/horse/ws/anpa439f-Function_Retrieval_Citation/Research_Project/RetrievalAugmentedGeneration/outputs
