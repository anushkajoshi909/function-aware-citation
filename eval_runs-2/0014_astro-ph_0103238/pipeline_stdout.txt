âœ… Available Models:
1. alias-code
2. alias-reasoning
3. alias-image-generation
4. alias-vision
5. alias-ha
6. meta-llama/Llama-3.3-70B-Instruct
7. meta-llama/Llama-3.1-8B-Instruct
8. Qwen/Qwen2-VL-7B-Instruct
9. openGPT-X/Teuken-7B-instruct-research-v0.4
10. deepseek-ai/DeepSeek-Coder-V2-Lite-Instruct
11. Qwen/Qwen3-Coder-30B-A3B-Instruct
12. Qwen/Qwen3-Embedding-4B
13. stabilityai/stable-diffusion-3.5-large-turbo
14. black-forest-labs/FLUX.1-dev
15. openai/whisper-large-v3
16. Kokoro-82M
17. tts-1-hd
18. deepseek-ai/DeepSeek-R1
19. openai/gpt-oss-120b
20. meta-llama/Llama-4-Scout-17B-16E-Instruct

ðŸ‘‰ Select a model number (default = 1): 
âœ… Using model: openai/gpt-oss-120b

ðŸ” Enter a scientific query or topic: 
ðŸ”Ž Citation Function Classification:
{
  "citation_functions": [
    "Background",
    "FutureWork"
  ],
  "justification": "The query requests foundational properties of host galaxies (Background) and explicitly asks for suggested directions for further study (FutureWork)."
}

âœ… Saved to classified_outputs.jsonl
ðŸ”§ Ready for retrieval module (handled in a separate file).
âš¡ SKIP_REINDEX=1 â€” using existing FAISS index + meta; not scanning raw JSONL shards.
âœ… Top-k candidates (FAISS): /data/horse/ws/anpa439f-Function_Retrieval_Citation/Research_Project/RetrievalAugmentedGeneration/outputs/topk_candidates_query.jsonl
[21:32:53] main | args: Namespace(max_check=10, debug=True)
[21:32:53] read_last_jsonl | path= classified_outputs.jsonl
[21:32:53] read_last_jsonl | total_lines= 1
[21:32:53] main | query='How do the properties of host galaxies of radio-loud and radio-quiet quasars provide background information for understanding the origin of radio loudness and suggest areas for future research?' | funcs=['Background', 'FutureWork']
[21:32:56] main | core_terms= ['quasars', 'host galaxies', 'radio loudness', 'radio-loud quasars', 'radio-quiet quasars', 'radio-loud', 'radio-quiet']
[21:32:56] load_topk_jsonl | path= /data/horse/ws/anpa439f-Function_Retrieval_Citation/Research_Project/outputs/topk_candidates_query.jsonl
[21:32:56] load_topk_jsonl | rows= 20
[21:32:56] load_topk_jsonl | first: rank= 0 paper_id= astro-ph/0103238 title_snip='The Host Galaxies of Radio-Loud and Radio-Quiet Quasars' abs_len= 1554
[21:32:56] main | running function= Background
[21:32:56] select | function= Background | candidates_in= 20
[21:32:56] select | core_terms= ['quasars', 'host galaxies', 'radio loudness', 'radio-loud quasars', 'radio-quiet quasars', 'radio-loud', 'radio-quiet']
[21:32:56] select | no cosine prune; kept=20/20
[21:32:56] select | pool_size= 10 | ranks= [0, 1, 2, 3, 4, 5, 6, 7, 8, 9] | pids= ['astro-ph/0103238', 'astro-ph/0104310', 'astro-ph/0102046', 'astro-ph/0102166', 'astro-ph/0103394', 'astro-ph/0101137', 'astro-ph/0104383', 'astro-ph/0103291', 'astro-ph/0101096', 'astro-ph/0104183']
[21:32:56] select | verify relaxed 1/10
[21:32:56] verify | func= Background | rank= 0 | pid= astro-ph/0103238 | title_snip='The Host Galaxies of Radio-Loud and Radio-Quiet Quasars' | abs_len= 1554
[21:32:59] verify | result supports= True fit= 0.90 top= 0.90 invalid= â€” cue_hint= False
[21:32:59] select | verify relaxed 2/10
[21:32:59] verify | func= Background | rank= 1 | pid= astro-ph/0104310 | title_snip='The environments of radio-loud quasars' | abs_len= 815
[21:33:02] verify | result supports= False fit= 0.00 top= 0.90 invalid= quote_not_in_abstract cue_hint= False
[21:33:02] select | verify relaxed 3/10
[21:33:02] verify | func= Background | rank= 2 | pid= astro-ph/0102046 | title_snip='QSO environments at intermediate redshifts' | abs_len= 1087
[21:33:05] verify | result supports= True fit= 0.80 top= 0.90 invalid= â€” cue_hint= False
[21:33:05] select | verify relaxed 4/10
[21:33:05] verify | func= Background | rank= 3 | pid= astro-ph/0102166 | title_snip='The radio-loudness dichotomy: environment or black-hole mass?' | abs_len= 687
[21:33:09] verify | result supports= True fit= 0.80 top= 0.90 invalid= â€” cue_hint= False
[21:33:09] select | verify relaxed 5/10
[21:33:09] verify | func= Background | rank= 4 | pid= astro-ph/0103394 | title_snip='An X-ray selected sample of radio-loud quasars' | abs_len= 1114
[21:33:12] verify | result supports= True fit= 0.80 top= 0.90 invalid= â€” cue_hint= False
[21:33:12] select | verify relaxed 6/10
[21:33:12] verify | func= Background | rank= 5 | pid= astro-ph/0101137 | title_snip='Millimeter observations of radio-loud active galaxies' | abs_len= 641
[21:33:15] verify | result supports= False fit= 0.00 top= 0.50 invalid= â€” cue_hint= False
[21:33:15] select | verify relaxed 7/10
[21:33:15] verify | func= Background | rank= 6 | pid= astro-ph/0104383 | title_snip='On the masses of black-holes in radio-loud quasars' | abs_len= 500
[21:33:18] verify | result supports= True fit= 0.80 top= 0.90 invalid= â€” cue_hint= False
[21:33:18] select | verify relaxed 8/10
[21:33:18] verify | func= Background | rank= 7 | pid= astro-ph/0103291 | title_snip='A search for distant radio-loud quasars in the CLASS survey: three newâ€¦' | abs_len= 1120
[21:33:21] verify | result supports= True fit= 0.80 top= 0.90 invalid= â€” cue_hint= False
[21:33:21] select | verify relaxed 9/10
[21:33:21] verify | func= Background | rank= 8 | pid= astro-ph/0101096 | title_snip='VLBI Observations of a Complete Sample of Radio Galaxies. 10 Years Latâ€¦' | abs_len= 999
[21:33:23] verify | result supports= False fit= 0.00 top= 0.20 invalid= no_quote cue_hint= False
[21:33:23] select | verify relaxed 10/10
[21:33:23] verify | func= Background | rank= 9 | pid= astro-ph/0104183 | title_snip='On The Parent Population of Radio Galaxies and the FRI - FRII Dichotomâ€¦' | abs_len= 1197
[21:33:27] verify | result supports= True fit= 0.80 top= 0.90 invalid= â€” cue_hint= False

================================================================================
FUNCTION: Background
QUERY   : How do the properties of host galaxies of radio-loud and radio-quiet quasars provide background information for understanding the origin of radio loudness and suggest areas for future research?
- WINNER: astro-ph/0103238 | The Host Galaxies of Radio-Loud and Radio-Quiet Quasars
- QUOTE : I review our knowledge of the properties of the host galaxies
- WHY   : sufficient
- ANSWER: The properties of host galaxies of radio-loud and radio-quiet quasars, including their masses and structural parameters, provide a foundation for understanding the origin of radio loudness (astro-ph/0103238).
[21:33:31] main | running function= FutureWork
[21:33:31] select | function= FutureWork | candidates_in= 20
[21:33:31] select | core_terms= ['quasars', 'host galaxies', 'radio loudness', 'radio-loud quasars', 'radio-quiet quasars', 'radio-loud', 'radio-quiet']
[21:33:31] select | no cosine prune; kept=20/20
[21:33:31] select | pool_size= 10 | ranks= [0, 1, 2, 3, 4, 5, 6, 7, 8, 9] | pids= ['astro-ph/0103238', 'astro-ph/0104310', 'astro-ph/0102046', 'astro-ph/0102166', 'astro-ph/0103394', 'astro-ph/0101137', 'astro-ph/0104383', 'astro-ph/0103291', 'astro-ph/0101096', 'astro-ph/0104183']
[21:33:31] select | verify relaxed 1/10
[21:33:31] verify | func= FutureWork | rank= 0 | pid= astro-ph/0103238 | title_snip='The Host Galaxies of Radio-Loud and Radio-Quiet Quasars' | abs_len= 1554
[21:33:34] verify | result supports= True fit= 0.80 top= 0.90 invalid= â€” cue_hint= False
[21:33:34] select | verify relaxed 2/10
[21:33:34] verify | func= FutureWork | rank= 1 | pid= astro-ph/0104310 | title_snip='The environments of radio-loud quasars' | abs_len= 815
[21:33:38] verify | result supports= False fit= 0.00 top= 0.80 invalid= â€” cue_hint= False
[21:33:38] select | verify relaxed 3/10
[21:33:38] verify | func= FutureWork | rank= 2 | pid= astro-ph/0102046 | title_snip='QSO environments at intermediate redshifts' | abs_len= 1087
[21:33:41] verify | result supports= False fit= 0.20 top= 0.80 invalid= â€” cue_hint= False
[21:33:41] select | verify relaxed 4/10
[21:33:41] verify | func= FutureWork | rank= 3 | pid= astro-ph/0102166 | title_snip='The radio-loudness dichotomy: environment or black-hole mass?' | abs_len= 687
[21:33:44] verify | result supports= False fit= 0.20 top= 0.80 invalid= â€” cue_hint= False
[21:33:44] select | verify relaxed 5/10
[21:33:44] verify | func= FutureWork | rank= 4 | pid= astro-ph/0103394 | title_snip='An X-ray selected sample of radio-loud quasars' | abs_len= 1114
[21:33:47] verify | result supports= False fit= 0.00 top= 0.80 invalid= â€” cue_hint= False
[21:33:47] select | verify relaxed 6/10
[21:33:47] verify | func= FutureWork | rank= 5 | pid= astro-ph/0101137 | title_snip='Millimeter observations of radio-loud active galaxies' | abs_len= 641
[21:33:50] verify | result supports= False fit= 0.00 top= 0.80 invalid= no_quote cue_hint= False
[21:33:50] select | verify relaxed 7/10
[21:33:50] verify | func= FutureWork | rank= 6 | pid= astro-ph/0104383 | title_snip='On the masses of black-holes in radio-loud quasars' | abs_len= 500
[21:33:53] verify | result supports= False fit= 0.00 top= 0.50 invalid= â€” cue_hint= False
[21:33:53] select | verify relaxed 8/10
[21:33:53] verify | func= FutureWork | rank= 7 | pid= astro-ph/0103291 | title_snip='A search for distant radio-loud quasars in the CLASS survey: three newâ€¦' | abs_len= 1120
[21:33:56] verify | result supports= False fit= 0.00 top= 0.60 invalid= no_quote cue_hint= False
[21:33:56] select | verify relaxed 9/10
[21:33:56] verify | func= FutureWork | rank= 8 | pid= astro-ph/0101096 | title_snip='VLBI Observations of a Complete Sample of Radio Galaxies. 10 Years Latâ€¦' | abs_len= 999
[21:33:58] verify | result supports= False fit= 0.00 top= 0.20 invalid= no_quote cue_hint= False
[21:33:58] select | verify relaxed 10/10
[21:33:58] verify | func= FutureWork | rank= 9 | pid= astro-ph/0104183 | title_snip='On The Parent Population of Radio Galaxies and the FRI - FRII Dichotomâ€¦' | abs_len= 1197
[21:34:01] verify | result supports= False fit= 0.00 top= 0.60 invalid= no_quote cue_hint= False

================================================================================
FUNCTION: FutureWork
QUERY   : How do the properties of host galaxies of radio-loud and radio-quiet quasars provide background information for understanding the origin of radio loudness and suggest areas for future research?
- WINNER: astro-ph/0103238 | The Host Galaxies of Radio-Loud and Radio-Quiet Quasars
- QUOTE : host-galaxy studies may yet play a crucial role in resolving the long-standing problem
- WHY   : sufficient
- ANSWER: The properties of host galaxies of radio-loud and radio-quiet quasars suggest that future research should investigate the relationship between black hole mass, accretion efficiency, and radio loudness. Further studies on the role of host galaxy properties in determining radio loudness are needed to resolve the long-standing problem of its origin (astro-ph/0103238).

ðŸ“„ Saved: outputs/function_selection_results.json
ðŸ“„ Saved: outputs/function_selection_results.jsonl
ðŸ“ Answers-only: outputs/function_answers.txt
-> /home/anpa439f/anaconda3/envs/myenv/bin/python3 /data/horse/ws/anpa439f-Function_Retrieval_Citation/Research_Project/RetrievalAugmentedGeneration/classifying_question.py  (cwd=/data/horse/ws/anpa439f-Function_Retrieval_Citation/Research_Project/RetrievalAugmentedGeneration)
âœ… Saved to classified_outputs.jsonl
ðŸ”§ Ready for retrieval module (.py).
-> /home/anpa439f/anaconda3/envs/myenv/bin/python3 /data/horse/ws/anpa439f-Function_Retrieval_Citation/Research_Project/RetrievalAugmentedGeneration/Retreival_query_based.py --skip-reindex --index /data/horse/ws/anpa439f-Function_Retrieval_Citation/Research_Project/e5_index_subset_1/index.faiss --meta /data/horse/ws/anpa439f-Function_Retrieval_Citation/Research_Project/e5_index_subset_1/meta.parquet --topk 20  (cwd=/data/horse/ws/anpa439f-Function_Retrieval_Citation/Research_Project/RetrievalAugmentedGeneration)
âœ… Top-k candidates: /data/horse/ws/anpa439f-Function_Retrieval_Citation/Research_Project/RetrievalAugmentedGeneration/outputs/topk_candidates_query.jsonl
ðŸ”— Symlinked: /data/horse/ws/anpa439f-Function_Retrieval_Citation/Research_Project/outputs/topk_candidates_query.jsonl -> /data/horse/ws/anpa439f-Function_Retrieval_Citation/Research_Project/RetrievalAugmentedGeneration/outputs/topk_candidates_query.jsonl
-> /home/anpa439f/anaconda3/envs/myenv/bin/python3 /data/horse/ws/anpa439f-Function_Retrieval_Citation/Research_Project/RetrievalAugmentedGeneration/function_based_answer-2.py --debug --max-check 10  (cwd=/data/horse/ws/anpa439f-Function_Retrieval_Citation/Research_Project/RetrievalAugmentedGeneration)

ðŸŽ‰ Pipeline complete.
  â€¢ Classified file : /data/horse/ws/anpa439f-Function_Retrieval_Citation/Research_Project/RetrievalAugmentedGeneration/classified_outputs.jsonl
  â€¢ TopK (canonical): /data/horse/ws/anpa439f-Function_Retrieval_Citation/Research_Project/RetrievalAugmentedGeneration/outputs/topk_candidates_query.jsonl
  â€¢ Final outputs   : /data/horse/ws/anpa439f-Function_Retrieval_Citation/Research_Project/RetrievalAugmentedGeneration/outputs
