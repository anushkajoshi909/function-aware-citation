âœ… Available Models:
1. alias-code
2. alias-reasoning
3. alias-image-generation
4. alias-vision
5. alias-ha
6. meta-llama/Llama-3.3-70B-Instruct
7. meta-llama/Llama-3.1-8B-Instruct
8. Qwen/Qwen2-VL-7B-Instruct
9. openGPT-X/Teuken-7B-instruct-research-v0.4
10. deepseek-ai/DeepSeek-Coder-V2-Lite-Instruct
11. Qwen/Qwen3-Coder-30B-A3B-Instruct
12. Qwen/Qwen3-Embedding-4B
13. stabilityai/stable-diffusion-3.5-large-turbo
14. black-forest-labs/FLUX.1-dev
15. openai/whisper-large-v3
16. Kokoro-82M
17. tts-1-hd
18. deepseek-ai/DeepSeek-R1
19. openai/gpt-oss-120b
20. meta-llama/Llama-4-Scout-17B-16E-Instruct

ðŸ‘‰ Select a model number (default = 1): 
âœ… Using model: openai/gpt-oss-120b

ðŸ” Enter a scientific query or topic: 
ðŸ”Ž Citation Function Classification:
{
  "citation_functions": [
    "Motivation",
    "Uses"
  ],
  "justification": "The query asks for the reasons driving the study (motivation) and how polarization observations are applied to interpret magnetic field fluctuations (uses)."
}

âœ… Saved to classified_outputs.jsonl
ðŸ”§ Ready for retrieval module (handled in a separate file).
âš¡ SKIP_REINDEX=1 â€” using existing FAISS index + meta; not scanning raw JSONL shards.
âœ… Top-k candidates (FAISS): /data/horse/ws/anpa439f-Function_Retrieval_Citation/Research_Project/RetrievalAugmentedGeneration/outputs/topk_candidates_query.jsonl
[22:49:48] main | args: Namespace(max_check=10, debug=True)
[22:49:48] read_last_jsonl | path= classified_outputs.jsonl
[22:49:48] read_last_jsonl | total_lines= 1
[22:49:48] main | query='What motivates the investigation of magnetic field fluctuations in the NGC 7538 region and how are the observations of polarization used to understand these fluctuations?' | funcs=['Motivation', 'Uses']
[22:49:50] main | core_terms= ['NGC 7538', 'magnetic field', 'polarization', 'fluctuations', 'NGC']
[22:49:50] load_topk_jsonl | path= /data/horse/ws/anpa439f-Function_Retrieval_Citation/Research_Project/outputs/topk_candidates_query.jsonl
[22:49:50] load_topk_jsonl | rows= 20
[22:49:50] load_topk_jsonl | first: rank= 0 paper_id= astro-ph/0103334 title_snip='Submillimeter Imaging Polarimetry of the NGC 7538 Region' abs_len= 1603
[22:49:50] main | running function= Motivation
[22:49:50] select | function= Motivation | candidates_in= 20
[22:49:50] select | core_terms= ['NGC 7538', 'magnetic field', 'polarization', 'fluctuations', 'NGC']
[22:49:50] select | no cosine prune; kept=20/20
[22:49:50] select | pool_size= 10 | ranks= [0, 1, 2, 3, 4, 5, 6, 7, 8, 9] | pids= ['astro-ph/0103334', 'astro-ph/0103048', 'astro-ph/0104360', 'cond-mat/0102414', 'physics/0103029', 'astro-ph/0101001', 'astro-ph/0102445', 'nucl-th/0102026', 'astro-ph/0101368', 'hep-ex/0101010']
[22:49:50] select | verify relaxed 1/10
[22:49:50] verify | func= Motivation | rank= 0 | pid= astro-ph/0103334 | title_snip='Submillimeter Imaging Polarimetry of the NGC 7538 Region' | abs_len= 1603
[22:49:53] verify | result supports= True fit= 0.80 top= 0.90 invalid= â€” cue_hint= False
[22:49:53] select | verify relaxed 2/10
[22:49:53] verify | func= Motivation | rank= 1 | pid= astro-ph/0103048 | title_snip='Polarization Insights for Active Galactic Nuclei' | abs_len= 1223
[22:49:55] verify | result supports= False fit= 0.00 top= 0.00 invalid= no_quote cue_hint= False
[22:49:55] select | verify relaxed 3/10
[22:49:55] verify | func= Motivation | rank= 2 | pid= astro-ph/0104360 | title_snip='Spectra of Maser Radiation from a Turbulent, Circumnuclear Accretion
 â€¦' | abs_len= 1208
[22:49:58] verify | result supports= False fit= 0.00 top= 0.00 invalid= no_quote cue_hint= False
[22:49:58] select | verify relaxed 4/10
[22:49:58] verify | func= Motivation | rank= 3 | pid= cond-mat/0102414 | title_snip='Spin fluctuations in a magnetically frustrated metal, LiV2O4' | abs_len= 735
[22:50:00] verify | result supports= False fit= 0.00 top= 0.00 invalid= no_quote cue_hint= False
[22:50:00] select | verify relaxed 5/10
[22:50:00] verify | func= Motivation | rank= 4 | pid= physics/0103029 | title_snip='The Inertial Polarization Principle: The Mechanism Underlying
  Sonoluâ€¦' | abs_len= 1263
[22:50:03] verify | result supports= False fit= 0.00 top= 0.00 invalid= no_quote cue_hint= False
[22:50:03] select | verify relaxed 6/10
[22:50:03] verify | func= Motivation | rank= 5 | pid= astro-ph/0101001 | title_snip='Polarized Microwave Radiation from Dust' | abs_len= 1125
[22:50:05] verify | result supports= False fit= 0.00 top= 0.00 invalid= no_quote cue_hint= False
[22:50:05] select | verify relaxed 7/10
[22:50:05] verify | func= Motivation | rank= 6 | pid= astro-ph/0102445 | title_snip='Optical Structure and Physics of the M87 Jet' | abs_len= 1065
[22:50:08] verify | result supports= False fit= 0.00 top= 0.00 invalid= no_quote cue_hint= False
[22:50:08] select | verify relaxed 8/10
[22:50:08] verify | func= Motivation | rank= 7 | pid= nucl-th/0102026 | title_snip='Polarization observables in the reaction $p n \to d \phi$' | abs_len= 195
[22:50:10] verify | result supports= False fit= 0.00 top= 0.00 invalid= no_quote cue_hint= False
[22:50:10] select | verify relaxed 9/10
[22:50:10] verify | func= Motivation | rank= 8 | pid= astro-ph/0101368 | title_snip='Polarization of the Cosmic Microwave Background from Non-Uniform
  Reiâ€¦' | abs_len= 1537
[22:50:13] verify | result supports= False fit= 0.00 top= 0.00 invalid= no_quote cue_hint= False
[22:50:13] select | verify relaxed 10/10
[22:50:13] verify | func= Motivation | rank= 9 | pid= hep-ex/0101010 | title_snip='Constraining CP-Violating TGCs and Measuring W-Polarization at OPAL' | abs_len= 430
[22:50:15] verify | result supports= False fit= 0.00 top= 0.00 invalid= no_quote cue_hint= False

================================================================================
FUNCTION: Motivation
QUERY   : What motivates the investigation of magnetic field fluctuations in the NGC 7538 region and how are the observations of polarization used to understand these fluctuations?
- WINNER: astro-ph/0103334 | Submillimeter Imaging Polarimetry of the NGC 7538 Region
- QUOTE : small scale fluctuations of the magnetic field
- WHY   : sufficient
- ANSWER: The investigation of magnetic field fluctuations in the NGC 7538 region is motivated by the observed differences in polarization between two prominent cores, suggesting varying evolutionary stages and magnetic field structures. The observations of polarization are used to understand these fluctuations, which are thought to have developed during the formation of substructures in the more evolved core (astro-ph/0103334).
[22:50:19] main | running function= Uses
[22:50:19] select | function= Uses | candidates_in= 20
[22:50:19] select | core_terms= ['NGC 7538', 'magnetic field', 'polarization', 'fluctuations', 'NGC']
[22:50:19] select | no cosine prune; kept=20/20
[22:50:19] select | pool_size= 10 | ranks= [0, 1, 2, 3, 4, 5, 6, 7, 8, 9] | pids= ['astro-ph/0103334', 'astro-ph/0103048', 'astro-ph/0104360', 'cond-mat/0102414', 'physics/0103029', 'astro-ph/0101001', 'astro-ph/0102445', 'nucl-th/0102026', 'astro-ph/0101368', 'hep-ex/0101010']
[22:50:19] select | verify relaxed 1/10
[22:50:19] verify | func= Uses | rank= 0 | pid= astro-ph/0103334 | title_snip='Submillimeter Imaging Polarimetry of the NGC 7538 Region' | abs_len= 1603
[22:50:23] verify | result supports= True fit= 0.80 top= 0.90 invalid= â€” cue_hint= False
[22:50:23] select | verify relaxed 2/10
[22:50:23] verify | func= Uses | rank= 1 | pid= astro-ph/0103048 | title_snip='Polarization Insights for Active Galactic Nuclei' | abs_len= 1223
[22:50:25] verify | result supports= False fit= 0.00 top= 0.00 invalid= no_quote cue_hint= False
[22:50:25] select | verify relaxed 3/10
[22:50:25] verify | func= Uses | rank= 2 | pid= astro-ph/0104360 | title_snip='Spectra of Maser Radiation from a Turbulent, Circumnuclear Accretion
 â€¦' | abs_len= 1208
[22:50:28] verify | result supports= False fit= 0.00 top= 0.00 invalid= no_quote cue_hint= False
[22:50:28] select | verify relaxed 4/10
[22:50:28] verify | func= Uses | rank= 3 | pid= cond-mat/0102414 | title_snip='Spin fluctuations in a magnetically frustrated metal, LiV2O4' | abs_len= 735
[22:50:30] verify | result supports= False fit= 0.00 top= 0.00 invalid= no_quote cue_hint= False
[22:50:30] select | verify relaxed 5/10
[22:50:30] verify | func= Uses | rank= 4 | pid= physics/0103029 | title_snip='The Inertial Polarization Principle: The Mechanism Underlying
  Sonoluâ€¦' | abs_len= 1263
[22:50:32] verify | result supports= False fit= 0.00 top= 0.00 invalid= no_quote cue_hint= False
[22:50:32] select | verify relaxed 6/10
[22:50:32] verify | func= Uses | rank= 5 | pid= astro-ph/0101001 | title_snip='Polarized Microwave Radiation from Dust' | abs_len= 1125
[22:50:35] verify | result supports= False fit= 0.00 top= 0.00 invalid= no_quote cue_hint= False
[22:50:35] select | verify relaxed 7/10
[22:50:35] verify | func= Uses | rank= 6 | pid= astro-ph/0102445 | title_snip='Optical Structure and Physics of the M87 Jet' | abs_len= 1065
[22:50:37] verify | result supports= False fit= 0.00 top= 0.00 invalid= no_quote cue_hint= False
[22:50:37] select | verify relaxed 8/10
[22:50:37] verify | func= Uses | rank= 7 | pid= nucl-th/0102026 | title_snip='Polarization observables in the reaction $p n \to d \phi$' | abs_len= 195
[22:50:40] verify | result supports= False fit= 0.00 top= 0.00 invalid= no_quote cue_hint= False
[22:50:40] select | verify relaxed 9/10
[22:50:40] verify | func= Uses | rank= 8 | pid= astro-ph/0101368 | title_snip='Polarization of the Cosmic Microwave Background from Non-Uniform
  Reiâ€¦' | abs_len= 1537
[22:50:42] verify | result supports= False fit= 0.00 top= 0.00 invalid= no_quote cue_hint= False
[22:50:42] select | verify relaxed 10/10
[22:50:42] verify | func= Uses | rank= 9 | pid= hep-ex/0101010 | title_snip='Constraining CP-Violating TGCs and Measuring W-Polarization at OPAL' | abs_len= 430
[22:50:45] verify | result supports= False fit= 0.00 top= 0.00 invalid= no_quote cue_hint= False

================================================================================
FUNCTION: Uses
QUERY   : What motivates the investigation of magnetic field fluctuations in the NGC 7538 region and how are the observations of polarization used to understand these fluctuations?
- WINNER: astro-ph/0103334 | Submillimeter Imaging Polarimetry of the NGC 7538 Region
- QUOTE : polarization map is interpreted in terms of thermal radiation by magnetically aligned dust grains
- WHY   : sufficient
- ANSWER: The SCUBA Polarimeter is used to obtain imaging polarimetry of the 0.85mm continuum emission in the NGC 7538 region to understand magnetic field fluctuations. The observations of polarization are used to interpret thermal radiation by magnetically aligned dust grains and derive the distribution of magnetic field directions (astro-ph/0103334).

ðŸ“„ Saved: outputs/function_selection_results.json
ðŸ“„ Saved: outputs/function_selection_results.jsonl
ðŸ“ Answers-only: outputs/function_answers.txt
-> /home/anpa439f/anaconda3/envs/myenv/bin/python3 /data/horse/ws/anpa439f-Function_Retrieval_Citation/Research_Project/RetrievalAugmentedGeneration/classifying_question.py  (cwd=/data/horse/ws/anpa439f-Function_Retrieval_Citation/Research_Project/RetrievalAugmentedGeneration)
âœ… Saved to classified_outputs.jsonl
ðŸ”§ Ready for retrieval module (.py).
-> /home/anpa439f/anaconda3/envs/myenv/bin/python3 /data/horse/ws/anpa439f-Function_Retrieval_Citation/Research_Project/RetrievalAugmentedGeneration/Retreival_query_based.py --skip-reindex --index /data/horse/ws/anpa439f-Function_Retrieval_Citation/Research_Project/e5_index_subset_1/index.faiss --meta /data/horse/ws/anpa439f-Function_Retrieval_Citation/Research_Project/e5_index_subset_1/meta.parquet --topk 20  (cwd=/data/horse/ws/anpa439f-Function_Retrieval_Citation/Research_Project/RetrievalAugmentedGeneration)
âœ… Top-k candidates: /data/horse/ws/anpa439f-Function_Retrieval_Citation/Research_Project/RetrievalAugmentedGeneration/outputs/topk_candidates_query.jsonl
ðŸ”— Symlinked: /data/horse/ws/anpa439f-Function_Retrieval_Citation/Research_Project/outputs/topk_candidates_query.jsonl -> /data/horse/ws/anpa439f-Function_Retrieval_Citation/Research_Project/RetrievalAugmentedGeneration/outputs/topk_candidates_query.jsonl
-> /home/anpa439f/anaconda3/envs/myenv/bin/python3 /data/horse/ws/anpa439f-Function_Retrieval_Citation/Research_Project/RetrievalAugmentedGeneration/function_based_answer-2.py --debug --max-check 10  (cwd=/data/horse/ws/anpa439f-Function_Retrieval_Citation/Research_Project/RetrievalAugmentedGeneration)

ðŸŽ‰ Pipeline complete.
  â€¢ Classified file : /data/horse/ws/anpa439f-Function_Retrieval_Citation/Research_Project/RetrievalAugmentedGeneration/classified_outputs.jsonl
  â€¢ TopK (canonical): /data/horse/ws/anpa439f-Function_Retrieval_Citation/Research_Project/RetrievalAugmentedGeneration/outputs/topk_candidates_query.jsonl
  â€¢ Final outputs   : /data/horse/ws/anpa439f-Function_Retrieval_Citation/Research_Project/RetrievalAugmentedGeneration/outputs
