âœ… Available Models:
1. alias-code
2. alias-reasoning
3. alias-image-generation
4. alias-vision
5. alias-ha
6. meta-llama/Llama-3.3-70B-Instruct
7. meta-llama/Llama-3.1-8B-Instruct
8. Qwen/Qwen2-VL-7B-Instruct
9. openGPT-X/Teuken-7B-instruct-research-v0.4
10. deepseek-ai/DeepSeek-Coder-V2-Lite-Instruct
11. Qwen/Qwen3-Coder-30B-A3B-Instruct
12. Qwen/Qwen3-Embedding-4B
13. stabilityai/stable-diffusion-3.5-large-turbo
14. black-forest-labs/FLUX.1-dev
15. openai/whisper-large-v3
16. Kokoro-82M
17. tts-1-hd
18. deepseek-ai/DeepSeek-R1
19. openai/gpt-oss-120b
20. meta-llama/Llama-4-Scout-17B-16E-Instruct

ðŸ‘‰ Select a model number (default = 1): 
âœ… Using model: openai/gpt-oss-120b

ðŸ” Enter a scientific query or topic: 
ðŸ”Ž Citation Function Classification:
{
  "citation_functions": [
    "Background",
    "Motivation"
  ],
  "justification": "The query seeks to identify gaps in current knowledge (background) and explains why these gaps drive the need for further investigation (motivation)."
}

âœ… Saved to classified_outputs.jsonl
ðŸ”§ Ready for retrieval module (handled in a separate file).
âš¡ SKIP_REINDEX=1 â€” using existing FAISS index + meta; not scanning raw JSONL shards.
âœ… Top-k candidates (FAISS): /data/horse/ws/anpa439f-Function_Retrieval_Citation/Research_Project/RetrievalAugmentedGeneration/outputs/topk_candidates_query.jsonl
[21:38:33] main | args: Namespace(max_check=10, debug=True)
[21:38:33] read_last_jsonl | path= classified_outputs.jsonl
[21:38:33] read_last_jsonl | total_lines= 1
[21:38:33] main | query='What limitations in current understanding of ionization properties in Damped Ly alpha systems motivate further research on the effects of ionization corrections on abundance measurements?' | funcs=['Background', 'Motivation']
[21:38:35] main | core_terms= ['Damped Ly alpha systems', 'ionization properties', 'ionization corrections', 'abundance measurements']
[21:38:35] load_topk_jsonl | path= /data/horse/ws/anpa439f-Function_Retrieval_Citation/Research_Project/outputs/topk_candidates_query.jsonl
[21:38:35] load_topk_jsonl | rows= 20
[21:38:35] load_topk_jsonl | first: rank= 0 paper_id= astro-ph/0104298 title_snip='Ionization Properties and Elemental Abundances in Damped Ly alpha
  Syâ€¦' abs_len= 1762
[21:38:35] main | running function= Background
[21:38:35] select | function= Background | candidates_in= 20
[21:38:35] select | core_terms= ['Damped Ly alpha systems', 'ionization properties', 'ionization corrections', 'abundance measurements']
[21:38:35] select | no cosine prune; kept=20/20
[21:38:35] select | pool_size= 10 | ranks= [0, 1, 2, 3, 4, 5, 6, 7, 8, 9] | pids= ['astro-ph/0104298', 'astro-ph/0101029', 'astro-ph/0104392', 'hep-ph/0103121', 'astro-ph/0101335', 'hep-ph/0101212', 'astro-ph/0102403', 'hep-ph/0101106', 'hep-ex/0103006', 'astro-ph/0104308']
[21:38:35] select | verify relaxed 1/10
[21:38:35] verify | func= Background | rank= 0 | pid= astro-ph/0104298 | title_snip='Ionization Properties and Elemental Abundances in Damped Ly alpha
  Syâ€¦' | abs_len= 1762
[21:38:38] verify | result supports= True fit= 0.80 top= 0.90 invalid= â€” cue_hint= False
[21:38:38] select | verify relaxed 2/10
[21:38:38] verify | func= Background | rank= 1 | pid= astro-ph/0101029 | title_snip='Galactic Chemical Abundances at z>3 I: First Results from the Echelletâ€¦' | abs_len= 1144
[21:38:41] verify | result supports= False fit= 0.00 top= 0.60 invalid= â€” cue_hint= False
[21:38:41] select | verify relaxed 3/10
[21:38:41] verify | func= Background | rank= 2 | pid= astro-ph/0104392 | title_snip='Systematic Uncertainties in the Determination of the Primordial 4He
  â€¦' | abs_len= 1524
[21:38:44] verify | result supports= False fit= 0.00 top= 0.00 invalid= no_quote cue_hint= False
[21:38:44] select | verify relaxed 4/10
[21:38:44] verify | func= Background | rank= 3 | pid= hep-ph/0103121 | title_snip='Exploring New Physics in the $B\to \phi K$ System' | abs_len= 916
[21:38:46] verify | result supports= False fit= 0.00 top= 0.00 invalid= no_quote cue_hint= False
[21:38:46] select | verify relaxed 5/10
[21:38:46] verify | func= Background | rank= 4 | pid= astro-ph/0101335 | title_snip='A Comprehensive Statistical Analysis of the Gas Distribution in
  Lymaâ€¦' | abs_len= 1408
[21:38:49] verify | result supports= False fit= 0.00 top= 0.80 invalid= no_quote cue_hint= False
[21:38:49] select | verify relaxed 6/10
[21:38:49] verify | func= Background | rank= 5 | pid= hep-ph/0101212 | title_snip='Theory of eps'/eps' | abs_len= 723
[21:38:51] verify | result supports= False fit= 0.00 top= 0.00 invalid= no_quote cue_hint= False
[21:38:51] select | verify relaxed 7/10
[21:38:51] verify | func= Background | rank= 6 | pid= astro-ph/0102403 | title_snip='The electron temperature in ionized nebulae' | abs_len= 944
[21:38:54] verify | result supports= False fit= 0.00 top= 0.00 invalid= no_quote cue_hint= False
[21:38:54] select | verify relaxed 8/10
[21:38:54] verify | func= Background | rank= 7 | pid= hep-ph/0101106 | title_snip='CP-Violating Phases in SUSY, Electric Dipole Moments, and Linear
  Colâ€¦' | abs_len= 1397
[21:38:56] verify | result supports= False fit= 0.00 top= 0.00 invalid= no_quote cue_hint= False
[21:38:56] select | verify relaxed 9/10
[21:38:56] verify | func= Background | rank= 8 | pid= hep-ex/0103006 | title_snip='Search for SUSY with R-parity violating LL\bar{E} couplings at sqrt(s)â€¦' | abs_len= 1118
[21:38:59] verify | result supports= False fit= 0.00 top= 0.00 invalid= no_quote cue_hint= False
[21:38:59] select | verify relaxed 10/10
[21:38:59] verify | func= Background | rank= 9 | pid= astro-ph/0104308 | title_snip='Chemical Enrichment at High Redshifts: Understanding the Nature of
  Dâ€¦' | abs_len= 1464
[21:39:01] verify | result supports= False fit= 0.00 top= 0.80 invalid= no_quote cue_hint= False

================================================================================
FUNCTION: Background
QUERY   : What limitations in current understanding of ionization properties in Damped Ly alpha systems motivate further research on the effects of ionization corrections on abundance measurements?
- WINNER: astro-ph/0104298 | Ionization Properties and Elemental Abundances in Damped Ly alpha
  Systems
- QUOTE : Contrary to common belief, the ratio can attain relatively high values
- WHY   : sufficient
- ANSWER: Current understanding of ionization properties in Damped Ly alpha systems is limited by the lack of knowledge on how ionization corrections affect abundance measurements (astro-ph/0104298).
[21:39:05] main | running function= Motivation
[21:39:05] select | function= Motivation | candidates_in= 20
[21:39:05] select | core_terms= ['Damped Ly alpha systems', 'ionization properties', 'ionization corrections', 'abundance measurements']
[21:39:05] select | no cosine prune; kept=20/20
[21:39:05] select | pool_size= 10 | ranks= [0, 1, 2, 3, 4, 5, 6, 7, 8, 9] | pids= ['astro-ph/0104298', 'astro-ph/0101029', 'astro-ph/0104392', 'hep-ph/0103121', 'astro-ph/0101335', 'hep-ph/0101212', 'astro-ph/0102403', 'hep-ph/0101106', 'hep-ex/0103006', 'astro-ph/0104308']
[21:39:05] select | verify relaxed 1/10
[21:39:05] verify | func= Motivation | rank= 0 | pid= astro-ph/0104298 | title_snip='Ionization Properties and Elemental Abundances in Damped Ly alpha
  Syâ€¦' | abs_len= 1762
[21:39:08] verify | result supports= True fit= 0.80 top= 0.90 invalid= â€” cue_hint= False
[21:39:08] select | verify relaxed 2/10
[21:39:08] verify | func= Motivation | rank= 1 | pid= astro-ph/0101029 | title_snip='Galactic Chemical Abundances at z>3 I: First Results from the Echelletâ€¦' | abs_len= 1144
[21:39:11] verify | result supports= False fit= 0.00 top= 0.90 invalid= off_topic_no_core_in_abstract cue_hint= True
[21:39:11] select | verify relaxed 3/10
[21:39:11] verify | func= Motivation | rank= 2 | pid= astro-ph/0104392 | title_snip='Systematic Uncertainties in the Determination of the Primordial 4He
  â€¦' | abs_len= 1524
[21:39:14] verify | result supports= False fit= 0.00 top= 0.00 invalid= no_quote cue_hint= False
[21:39:14] select | verify relaxed 4/10
[21:39:14] verify | func= Motivation | rank= 3 | pid= hep-ph/0103121 | title_snip='Exploring New Physics in the $B\to \phi K$ System' | abs_len= 916
[21:39:16] verify | result supports= False fit= 0.00 top= 0.00 invalid= no_quote cue_hint= False
[21:39:16] select | verify relaxed 5/10
[21:39:16] verify | func= Motivation | rank= 4 | pid= astro-ph/0101335 | title_snip='A Comprehensive Statistical Analysis of the Gas Distribution in
  Lymaâ€¦' | abs_len= 1408
[21:39:19] verify | result supports= False fit= 0.00 top= 0.80 invalid= no_quote cue_hint= False
[21:39:19] select | verify relaxed 6/10
[21:39:19] verify | func= Motivation | rank= 5 | pid= hep-ph/0101212 | title_snip='Theory of eps'/eps' | abs_len= 723
[21:39:21] verify | result supports= False fit= 0.00 top= 0.00 invalid= no_quote cue_hint= False
[21:39:21] select | verify relaxed 7/10
[21:39:21] verify | func= Motivation | rank= 6 | pid= astro-ph/0102403 | title_snip='The electron temperature in ionized nebulae' | abs_len= 944
[21:39:24] verify | result supports= False fit= 0.00 top= 0.00 invalid= no_quote cue_hint= False
[21:39:24] select | verify relaxed 8/10
[21:39:24] verify | func= Motivation | rank= 7 | pid= hep-ph/0101106 | title_snip='CP-Violating Phases in SUSY, Electric Dipole Moments, and Linear
  Colâ€¦' | abs_len= 1397
[21:39:26] verify | result supports= False fit= 0.00 top= 0.00 invalid= no_quote cue_hint= False
[21:39:26] select | verify relaxed 9/10
[21:39:26] verify | func= Motivation | rank= 8 | pid= hep-ex/0103006 | title_snip='Search for SUSY with R-parity violating LL\bar{E} couplings at sqrt(s)â€¦' | abs_len= 1118
[21:39:29] verify | result supports= False fit= 0.00 top= 0.00 invalid= no_quote cue_hint= False
[21:39:29] select | verify relaxed 10/10
[21:39:29] verify | func= Motivation | rank= 9 | pid= astro-ph/0104308 | title_snip='Chemical Enrichment at High Redshifts: Understanding the Nature of
  Dâ€¦' | abs_len= 1464
[21:39:31] verify | result supports= False fit= 0.00 top= 0.80 invalid= no_quote cue_hint= False

================================================================================
FUNCTION: Motivation
QUERY   : What limitations in current understanding of ionization properties in Damped Ly alpha systems motivate further research on the effects of ionization corrections on abundance measurements?
- WINNER: astro-ph/0104298 | Ionization Properties and Elemental Abundances in Damped Ly alpha
  Systems
- QUOTE : Contrary to common belief, the ratio can attain relatively high values
- WHY   : sufficient
- ANSWER: Current understanding of ionization properties in Damped Ly alpha systems is limited, as the role of gas with intermediate ionization state and the impact of ionization corrections on abundance measurements are not well understood. This knowledge gap motivates further research to accurately determine elemental abundances in these systems (astro-ph/0104298).

ðŸ“„ Saved: outputs/function_selection_results.json
ðŸ“„ Saved: outputs/function_selection_results.jsonl
ðŸ“ Answers-only: outputs/function_answers.txt
-> /home/anpa439f/anaconda3/envs/myenv/bin/python3 /data/horse/ws/anpa439f-Function_Retrieval_Citation/Research_Project/RetrievalAugmentedGeneration/classifying_question.py  (cwd=/data/horse/ws/anpa439f-Function_Retrieval_Citation/Research_Project/RetrievalAugmentedGeneration)
âœ… Saved to classified_outputs.jsonl
ðŸ”§ Ready for retrieval module (.py).
-> /home/anpa439f/anaconda3/envs/myenv/bin/python3 /data/horse/ws/anpa439f-Function_Retrieval_Citation/Research_Project/RetrievalAugmentedGeneration/Retreival_query_based.py --skip-reindex --index /data/horse/ws/anpa439f-Function_Retrieval_Citation/Research_Project/e5_index_subset_1/index.faiss --meta /data/horse/ws/anpa439f-Function_Retrieval_Citation/Research_Project/e5_index_subset_1/meta.parquet --topk 20  (cwd=/data/horse/ws/anpa439f-Function_Retrieval_Citation/Research_Project/RetrievalAugmentedGeneration)
âœ… Top-k candidates: /data/horse/ws/anpa439f-Function_Retrieval_Citation/Research_Project/RetrievalAugmentedGeneration/outputs/topk_candidates_query.jsonl
ðŸ”— Symlinked: /data/horse/ws/anpa439f-Function_Retrieval_Citation/Research_Project/outputs/topk_candidates_query.jsonl -> /data/horse/ws/anpa439f-Function_Retrieval_Citation/Research_Project/RetrievalAugmentedGeneration/outputs/topk_candidates_query.jsonl
-> /home/anpa439f/anaconda3/envs/myenv/bin/python3 /data/horse/ws/anpa439f-Function_Retrieval_Citation/Research_Project/RetrievalAugmentedGeneration/function_based_answer-2.py --debug --max-check 10  (cwd=/data/horse/ws/anpa439f-Function_Retrieval_Citation/Research_Project/RetrievalAugmentedGeneration)

ðŸŽ‰ Pipeline complete.
  â€¢ Classified file : /data/horse/ws/anpa439f-Function_Retrieval_Citation/Research_Project/RetrievalAugmentedGeneration/classified_outputs.jsonl
  â€¢ TopK (canonical): /data/horse/ws/anpa439f-Function_Retrieval_Citation/Research_Project/RetrievalAugmentedGeneration/outputs/topk_candidates_query.jsonl
  â€¢ Final outputs   : /data/horse/ws/anpa439f-Function_Retrieval_Citation/Research_Project/RetrievalAugmentedGeneration/outputs
