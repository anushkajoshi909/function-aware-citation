âœ… Available Models:
1. alias-code
2. alias-reasoning
3. alias-image-generation
4. alias-vision
5. alias-ha
6. meta-llama/Llama-3.3-70B-Instruct
7. meta-llama/Llama-3.1-8B-Instruct
8. Qwen/Qwen2-VL-7B-Instruct
9. openGPT-X/Teuken-7B-instruct-research-v0.4
10. deepseek-ai/DeepSeek-Coder-V2-Lite-Instruct
11. Qwen/Qwen3-Coder-30B-A3B-Instruct
12. Qwen/Qwen3-Embedding-4B
13. stabilityai/stable-diffusion-3.5-large-turbo
14. black-forest-labs/FLUX.1-dev
15. openai/whisper-large-v3
16. Kokoro-82M
17. tts-1-hd
18. deepseek-ai/DeepSeek-R1
19. openai/gpt-oss-120b
20. meta-llama/Llama-4-Scout-17B-16E-Instruct

ðŸ‘‰ Select a model number (default = 1): 
âœ… Using model: openai/gpt-oss-120b

ðŸ” Enter a scientific query or topic: 
ðŸ”Ž Citation Function Classification:
{
  "citation_functions": [
    "Compares",
    "FutureWork"
  ],
  "justification": "The query asks for a comparison between the study's results and existing models, and also seeks directions for future research to address the observed discrepancy."
}

âœ… Saved to classified_outputs.jsonl
ðŸ”§ Ready for retrieval module (handled in a separate file).
âš¡ SKIP_REINDEX=1 â€” using existing FAISS index + meta; not scanning raw JSONL shards.
âœ… Top-k candidates (FAISS): /data/horse/ws/anpa439f-Function_Retrieval_Citation/Research_Project/RetrievalAugmentedGeneration/outputs/topk_candidates_query.jsonl
[01:09:36] main | args: Namespace(max_check=10, debug=True)
[01:09:36] read_last_jsonl | path= classified_outputs.jsonl
[01:09:36] read_last_jsonl | total_lines= 1
[01:09:36] main | query='How does the current study's finding on the lower mass threshold for Hot Bottom Burning compare to existing stellar evolution models, and what future research could resolve the discrepancy between the observed and predicted luminosity of the carbon star?' | funcs=['Compares', 'FutureWork']
[01:09:38] main | core_terms= ['Hot Bottom Burning', 'carbon star', 'stellar evolution', 'luminosity']
[01:09:38] load_topk_jsonl | path= /data/horse/ws/anpa439f-Function_Retrieval_Citation/Research_Project/outputs/topk_candidates_query.jsonl
[01:09:38] load_topk_jsonl | rows= 20
[01:09:38] load_topk_jsonl | first: rank= 0 paper_id= astro-ph/0103104 title_snip='Evolution and Nucleosynthesis of Zero Metal Intermediate Mass Stars' abs_len= 1765
[01:09:38] main | running function= Compares
[01:09:38] select | function= Compares | candidates_in= 20
[01:09:38] select | core_terms= ['Hot Bottom Burning', 'carbon star', 'stellar evolution', 'luminosity']
[01:09:38] select | no cosine prune; kept=20/20
[01:09:38] select | pool_size= 10 | ranks= [0, 1, 2, 3, 4, 5, 6, 7, 8, 9] | pids= ['astro-ph/0103104', 'astro-ph/0102430', 'astro-ph/0103113', 'astro-ph/0101107', 'astro-ph/0102010', 'astro-ph/0101472', 'astro-ph/0101330', 'astro-ph/0102379', 'astro-ph/0103396', 'astro-ph/0102253']
[01:09:38] select | verify relaxed 1/10
[01:09:38] verify | func= Compares | rank= 0 | pid= astro-ph/0103104 | title_snip='Evolution and Nucleosynthesis of Zero Metal Intermediate Mass Stars' | abs_len= 1765
[01:09:41] verify | result supports= True fit= 0.80 top= 0.90 invalid= â€” cue_hint= False
[01:09:41] select | verify relaxed 2/10
[01:09:41] verify | func= Compares | rank= 1 | pid= astro-ph/0102430 | title_snip='Probing the Evolution of Gas Mass Fraction with Sunyaev-Zel'dovich
  Eâ€¦' | abs_len= 1039
[01:09:43] verify | result supports= False fit= 0.00 top= 0.00 invalid= no_quote cue_hint= False
[01:09:43] select | verify relaxed 3/10
[01:09:43] verify | func= Compares | rank= 2 | pid= astro-ph/0103113 | title_snip='The Evolution of the Luminosity Function in Deep Fields: A Comparison
â€¦' | abs_len= 1083
[01:09:46] verify | result supports= False fit= 0.00 top= 0.00 invalid= no_quote cue_hint= False
[01:09:46] select | verify relaxed 4/10
[01:09:46] verify | func= Compares | rank= 3 | pid= astro-ph/0101107 | title_snip='The peculiar cluster HS 327 in the Large Magellanic Cloud: can OH/IR
 â€¦' | abs_len= 1042
[01:09:50] verify | result supports= True fit= 0.80 top= 0.90 invalid= â€” cue_hint= False
[01:09:50] select | verify relaxed 5/10
[01:09:50] verify | func= Compares | rank= 4 | pid= astro-ph/0102010 | title_snip='New Light on the Baryon Fraction in Galaxy Clusters' | abs_len= 1661
[01:09:52] verify | result supports= False fit= 0.00 top= 0.00 invalid= no_quote cue_hint= False
[01:09:52] select | verify relaxed 6/10
[01:09:52] verify | func= Compares | rank= 5 | pid= astro-ph/0101472 | title_snip='Cosmological History of Stars and Metals' | abs_len= 1543
[01:09:54] verify | result supports= False fit= 0.00 top= 0.00 invalid= no_quote cue_hint= False
[01:09:54] select | verify relaxed 7/10
[01:09:54] verify | func= Compares | rank= 6 | pid= astro-ph/0101330 | title_snip='Accretion Processes in the Nucleus of M31' | abs_len= 1631
[01:09:57] verify | result supports= False fit= 0.00 top= 0.00 invalid= no_quote cue_hint= False
[01:09:57] select | verify relaxed 8/10
[01:09:57] verify | func= Compares | rank= 7 | pid= astro-ph/0102379 | title_snip='Formation of High Mass X-ray Black Hole Binaries' | abs_len= 1737
[01:09:59] verify | result supports= False fit= 0.00 top= 0.00 invalid= no_quote cue_hint= False
[01:09:59] select | verify relaxed 9/10
[01:09:59] verify | func= Compares | rank= 8 | pid= astro-ph/0103396 | title_snip='A New Model for the Thermal X-ray Composites and the Neutral Pion Decaâ€¦' | abs_len= 1165
[01:10:02] verify | result supports= False fit= 0.00 top= 0.00 invalid= no_quote cue_hint= False
[01:10:02] select | verify relaxed 10/10
[01:10:02] verify | func= Compares | rank= 9 | pid= astro-ph/0102253 | title_snip='Zero-metallicity stars I. Evolution at constant mass' | abs_len= 1567
[01:10:05] verify | result supports= False fit= 0.00 top= 0.90 invalid= off_topic_no_core_in_abstract cue_hint= True

================================================================================
FUNCTION: Compares
QUERY   : How does the current study's finding on the lower mass threshold for Hot Bottom Burning compare to existing stellar evolution models, and what future research could resolve the discrepancy between the observed and predicted luminosity of the carbon star?
- WINNER: astro-ph/0103104 | Evolution and Nucleosynthesis of Zero Metal Intermediate Mass Stars
- QUOTE : At variance with previous claims
- WHY   : sufficient
- ANSWER: The current study's finding on the lower mass threshold for Hot Bottom Burning is compared to existing stellar evolution models, which previously claimed that thermal pulses do not occur in zero metal intermediate mass stars. The study's results, showing that models with mass larger than 6 Mo experience "normal" AGB evolution, differ from previous claims and may inform future research to resolve the discrepancy between observed and predicted luminosity of carbon stars (astro-ph/0103104).
[01:10:11] main | running function= FutureWork
[01:10:11] select | function= FutureWork | candidates_in= 20
[01:10:11] select | core_terms= ['Hot Bottom Burning', 'carbon star', 'stellar evolution', 'luminosity']
[01:10:11] select | no cosine prune; kept=20/20
[01:10:11] select | pool_size= 10 | ranks= [0, 1, 2, 3, 4, 5, 6, 7, 8, 9] | pids= ['astro-ph/0103104', 'astro-ph/0102430', 'astro-ph/0103113', 'astro-ph/0101107', 'astro-ph/0102010', 'astro-ph/0101472', 'astro-ph/0101330', 'astro-ph/0102379', 'astro-ph/0103396', 'astro-ph/0102253']
[01:10:11] select | verify relaxed 1/10
[01:10:11] verify | func= FutureWork | rank= 0 | pid= astro-ph/0103104 | title_snip='Evolution and Nucleosynthesis of Zero Metal Intermediate Mass Stars' | abs_len= 1765
[01:10:15] verify | result supports= False fit= 0.00 top= 0.80 invalid= â€” cue_hint= False
[01:10:15] select | verify relaxed 2/10
[01:10:15] verify | func= FutureWork | rank= 1 | pid= astro-ph/0102430 | title_snip='Probing the Evolution of Gas Mass Fraction with Sunyaev-Zel'dovich
  Eâ€¦' | abs_len= 1039
[01:10:17] verify | result supports= False fit= 0.00 top= 0.00 invalid= no_quote cue_hint= False
[01:10:17] select | verify relaxed 3/10
[01:10:17] verify | func= FutureWork | rank= 2 | pid= astro-ph/0103113 | title_snip='The Evolution of the Luminosity Function in Deep Fields: A Comparison
â€¦' | abs_len= 1083
[01:10:20] verify | result supports= False fit= 0.00 top= 0.00 invalid= no_quote cue_hint= False
[01:10:20] select | verify relaxed 4/10
[01:10:20] verify | func= FutureWork | rank= 3 | pid= astro-ph/0101107 | title_snip='The peculiar cluster HS 327 in the Large Magellanic Cloud: can OH/IR
 â€¦' | abs_len= 1042
[01:10:23] verify | result supports= False fit= 0.20 top= 0.80 invalid= â€” cue_hint= False
[01:10:23] select | verify relaxed 5/10
[01:10:23] verify | func= FutureWork | rank= 4 | pid= astro-ph/0102010 | title_snip='New Light on the Baryon Fraction in Galaxy Clusters' | abs_len= 1661
[01:10:25] verify | result supports= False fit= 0.00 top= 0.00 invalid= no_quote cue_hint= False
[01:10:25] select | verify relaxed 6/10
[01:10:25] verify | func= FutureWork | rank= 5 | pid= astro-ph/0101472 | title_snip='Cosmological History of Stars and Metals' | abs_len= 1543
[01:10:28] verify | result supports= False fit= 0.00 top= 0.00 invalid= no_quote cue_hint= False
[01:10:28] select | verify relaxed 7/10
[01:10:28] verify | func= FutureWork | rank= 6 | pid= astro-ph/0101330 | title_snip='Accretion Processes in the Nucleus of M31' | abs_len= 1631
[01:10:30] verify | result supports= False fit= 0.00 top= 0.00 invalid= no_quote cue_hint= False
[01:10:30] select | verify relaxed 8/10
[01:10:30] verify | func= FutureWork | rank= 7 | pid= astro-ph/0102379 | title_snip='Formation of High Mass X-ray Black Hole Binaries' | abs_len= 1737
[01:10:33] verify | result supports= False fit= 0.00 top= 0.00 invalid= no_quote cue_hint= False
[01:10:33] select | verify relaxed 9/10
[01:10:33] verify | func= FutureWork | rank= 8 | pid= astro-ph/0103396 | title_snip='A New Model for the Thermal X-ray Composites and the Neutral Pion Decaâ€¦' | abs_len= 1165
[01:10:35] verify | result supports= False fit= 0.00 top= 0.00 invalid= no_quote cue_hint= False
[01:10:35] select | verify relaxed 10/10
[01:10:35] verify | func= FutureWork | rank= 9 | pid= astro-ph/0102253 | title_snip='Zero-metallicity stars I. Evolution at constant mass' | abs_len= 1567
[01:10:38] verify | result supports= False fit= 0.00 top= 0.20 invalid= â€” cue_hint= False

================================================================================
FUNCTION: FutureWork
QUERY   : How does the current study's finding on the lower mass threshold for Hot Bottom Burning compare to existing stellar evolution models, and what future research could resolve the discrepancy between the observed and predicted luminosity of the carbon star?
- No supporting candidate with sufficient evidence.
- ANSWER: The abstract does not provide information relevant to FutureWork.

ðŸ“„ Saved: outputs/function_selection_results.json
ðŸ“„ Saved: outputs/function_selection_results.jsonl
ðŸ“ Answers-only: outputs/function_answers.txt
-> /home/anpa439f/anaconda3/envs/myenv/bin/python3 /data/horse/ws/anpa439f-Function_Retrieval_Citation/Research_Project/RetrievalAugmentedGeneration/classifying_question.py  (cwd=/data/horse/ws/anpa439f-Function_Retrieval_Citation/Research_Project/RetrievalAugmentedGeneration)
âœ… Saved to classified_outputs.jsonl
ðŸ”§ Ready for retrieval module (.py).
-> /home/anpa439f/anaconda3/envs/myenv/bin/python3 /data/horse/ws/anpa439f-Function_Retrieval_Citation/Research_Project/RetrievalAugmentedGeneration/Retreival_query_based.py --skip-reindex --index /data/horse/ws/anpa439f-Function_Retrieval_Citation/Research_Project/e5_index_subset_1/index.faiss --meta /data/horse/ws/anpa439f-Function_Retrieval_Citation/Research_Project/e5_index_subset_1/meta.parquet --topk 20  (cwd=/data/horse/ws/anpa439f-Function_Retrieval_Citation/Research_Project/RetrievalAugmentedGeneration)
âœ… Top-k candidates: /data/horse/ws/anpa439f-Function_Retrieval_Citation/Research_Project/RetrievalAugmentedGeneration/outputs/topk_candidates_query.jsonl
ðŸ”— Symlinked: /data/horse/ws/anpa439f-Function_Retrieval_Citation/Research_Project/outputs/topk_candidates_query.jsonl -> /data/horse/ws/anpa439f-Function_Retrieval_Citation/Research_Project/RetrievalAugmentedGeneration/outputs/topk_candidates_query.jsonl
-> /home/anpa439f/anaconda3/envs/myenv/bin/python3 /data/horse/ws/anpa439f-Function_Retrieval_Citation/Research_Project/RetrievalAugmentedGeneration/function_based_answer-2.py --debug --max-check 10  (cwd=/data/horse/ws/anpa439f-Function_Retrieval_Citation/Research_Project/RetrievalAugmentedGeneration)

ðŸŽ‰ Pipeline complete.
  â€¢ Classified file : /data/horse/ws/anpa439f-Function_Retrieval_Citation/Research_Project/RetrievalAugmentedGeneration/classified_outputs.jsonl
  â€¢ TopK (canonical): /data/horse/ws/anpa439f-Function_Retrieval_Citation/Research_Project/RetrievalAugmentedGeneration/outputs/topk_candidates_query.jsonl
  â€¢ Final outputs   : /data/horse/ws/anpa439f-Function_Retrieval_Citation/Research_Project/RetrievalAugmentedGeneration/outputs
