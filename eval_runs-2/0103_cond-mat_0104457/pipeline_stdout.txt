âœ… Available Models:
1. alias-code
2. alias-reasoning
3. alias-image-generation
4. alias-vision
5. alias-ha
6. meta-llama/Llama-3.3-70B-Instruct
7. meta-llama/Llama-3.1-8B-Instruct
8. Qwen/Qwen2-VL-7B-Instruct
9. openGPT-X/Teuken-7B-instruct-research-v0.4
10. deepseek-ai/DeepSeek-Coder-V2-Lite-Instruct
11. Qwen/Qwen3-Coder-30B-A3B-Instruct
12. Qwen/Qwen3-Embedding-4B
13. stabilityai/stable-diffusion-3.5-large-turbo
14. black-forest-labs/FLUX.1-dev
15. openai/whisper-large-v3
16. Kokoro-82M
17. tts-1-hd
18. deepseek-ai/DeepSeek-R1
19. openai/gpt-oss-120b
20. meta-llama/Llama-4-Scout-17B-16E-Instruct

ðŸ‘‰ Select a model number (default = 1): 
âœ… Using model: openai/gpt-oss-120b

ðŸ” Enter a scientific query or topic: 
ðŸ”Ž Citation Function Classification:
{
  "citation_functions": [
    "Background",
    "FutureWork"
  ],
  "justification": "The query requests foundational information about Migdal\u2011Eliashberg theory (Background) and explicitly asks how that background points to the need for further research (FutureWork)."
}

âœ… Saved to classified_outputs.jsonl
ðŸ”§ Ready for retrieval module (handled in a separate file).
âš¡ SKIP_REINDEX=1 â€” using existing FAISS index + meta; not scanning raw JSONL shards.
âœ… Top-k candidates (FAISS): /data/horse/ws/anpa439f-Function_Retrieval_Citation/Research_Project/RetrievalAugmentedGeneration/outputs/topk_candidates_query.jsonl
[23:26:17] main | args: Namespace(max_check=10, debug=True)
[23:26:17] read_last_jsonl | path= classified_outputs.jsonl
[23:26:17] read_last_jsonl | total_lines= 1
[23:26:17] main | query='What background information on the Migdal-Eliashberg theory suggests a need for future work in generalizing the theory of superconductivity?' | funcs=['Background', 'FutureWork']
[23:26:18] main | core_terms= ['Migdal-Eliashberg theory', 'superconductivity', 'Migdal-Eliashberg']
[23:26:18] load_topk_jsonl | path= /data/horse/ws/anpa439f-Function_Retrieval_Citation/Research_Project/outputs/topk_candidates_query.jsonl
[23:26:18] load_topk_jsonl | rows= 20
[23:26:18] load_topk_jsonl | first: rank= 0 paper_id= cond-mat/0104457 title_snip='Superconductivity of Rb$_3$C$_{60}$: breakdown of the Migdal-Eliashberâ€¦' abs_len= 1338
[23:26:18] main | running function= Background
[23:26:18] select | function= Background | candidates_in= 20
[23:26:18] select | core_terms= ['Migdal-Eliashberg theory', 'superconductivity', 'Migdal-Eliashberg']
[23:26:18] select | no cosine prune; kept=20/20
[23:26:18] select | pool_size= 10 | ranks= [0, 1, 2, 3, 4, 5, 6, 7, 8, 9] | pids= ['cond-mat/0104457', 'cond-mat/0102189', 'cond-mat/0101258', 'cond-mat/0103518', 'cond-mat/0104502', 'cond-mat/0102456', 'cond-mat/0102111', 'cond-mat/0101080', 'cond-mat/0102136', 'cond-mat/0104519']
[23:26:18] select | verify relaxed 1/10
[23:26:18] verify | func= Background | rank= 0 | pid= cond-mat/0104457 | title_snip='Superconductivity of Rb$_3$C$_{60}$: breakdown of the Migdal-Eliashberâ€¦' | abs_len= 1338
[23:26:21] verify | result supports= True fit= 0.80 top= 0.90 invalid= â€” cue_hint= False
[23:26:21] select | verify relaxed 2/10
[23:26:21] verify | func= Background | rank= 1 | pid= cond-mat/0102189 | title_snip='Breakdown of the Migdal-Eliashberg theory in the strong-coupling
  adiâ€¦' | abs_len= 903
[23:26:25] verify | result supports= True fit= 0.80 top= 0.90 invalid= â€” cue_hint= False
[23:26:25] select | verify relaxed 3/10
[23:26:25] verify | func= Background | rank= 2 | pid= cond-mat/0101258 | title_snip='To Phenomenological Theory of Superconductivity. Superconductivity - nâ€¦' | abs_len= 574
[23:26:28] verify | result supports= True fit= 0.80 top= 0.90 invalid= â€” cue_hint= False
[23:26:28] select | verify relaxed 4/10
[23:26:28] verify | func= Background | rank= 3 | pid= cond-mat/0103518 | title_snip='Calculation of Dip Features in the SIS Conductance of D-Wave
  Supercoâ€¦' | abs_len= 407
[23:26:31] verify | result supports= False fit= 0.00 top= 0.50 invalid= â€” cue_hint= False
[23:26:31] select | verify relaxed 5/10
[23:26:31] verify | func= Background | rank= 4 | pid= cond-mat/0104502 | title_snip='Application of the scattering rate sum-rule to the interplane optical
â€¦' | abs_len= 543
[23:26:33] verify | result supports= False fit= 0.00 top= 0.00 invalid= no_quote cue_hint= False
[23:26:33] select | verify relaxed 6/10
[23:26:33] verify | func= Background | rank= 5 | pid= cond-mat/0102456 | title_snip='Quantum Group based Modeling for the description of high temperature
 â€¦' | abs_len= 1009
[23:26:36] verify | result supports= False fit= 0.00 top= 0.00 invalid= no_quote cue_hint= False
[23:26:36] select | verify relaxed 7/10
[23:26:36] verify | func= Background | rank= 6 | pid= cond-mat/0102111 | title_snip='Pseudogap in High - Temperature Superconductors' | abs_len= 918
[23:26:38] verify | result supports= False fit= 0.00 top= 0.20 invalid= no_quote cue_hint= False
[23:26:38] select | verify relaxed 8/10
[23:26:38] verify | func= Background | rank= 7 | pid= cond-mat/0101080 | title_snip='Superconductors with Magnetic Impurities: Instantons and Sub-gap Stateâ€¦' | abs_len= 1453
[23:26:41] verify | result supports= False fit= 0.00 top= 0.00 invalid= no_quote cue_hint= False
[23:26:41] select | verify relaxed 9/10
[23:26:41] verify | func= Background | rank= 8 | pid= cond-mat/0102136 | title_snip='Superconductivity from Hole Undressing' | abs_len= 1264
[23:26:44] verify | result supports= False fit= 0.00 top= 0.20 invalid= no_quote cue_hint= False
[23:26:44] select | verify relaxed 10/10
[23:26:44] verify | func= Background | rank= 9 | pid= cond-mat/0104519 | title_snip='Bond operator theory of doped antiferromagnets: from Mott insulators
 â€¦' | abs_len= 1454
[23:26:46] verify | result supports= False fit= 0.00 top= 0.00 invalid= no_quote cue_hint= False

================================================================================
FUNCTION: Background
QUERY   : What background information on the Migdal-Eliashberg theory suggests a need for future work in generalizing the theory of superconductivity?
- WINNER: cond-mat/0104457 | Superconductivity of Rb$_3$C$_{60}$: breakdown of the Migdal-Eliashberg
  theory
- QUOTE : breakdown of the Migdal-Eliashberg theory
- WHY   : sufficient
- ANSWER: The Migdal-Eliashberg theory has limitations, as evidenced by its incompatibility with experimental data of Rb$_3$C$_{60}$, which requires extremely large electron-phonon couplings that violate Migdal's theorem (cond-mat/0104457).
[23:26:51] main | running function= FutureWork
[23:26:51] select | function= FutureWork | candidates_in= 20
[23:26:51] select | core_terms= ['Migdal-Eliashberg theory', 'superconductivity', 'Migdal-Eliashberg']
[23:26:51] select | no cosine prune; kept=20/20
[23:26:51] select | pool_size= 10 | ranks= [0, 1, 2, 3, 4, 5, 6, 7, 8, 9] | pids= ['cond-mat/0104457', 'cond-mat/0102189', 'cond-mat/0101258', 'cond-mat/0103518', 'cond-mat/0104502', 'cond-mat/0102456', 'cond-mat/0102111', 'cond-mat/0101080', 'cond-mat/0102136', 'cond-mat/0104519']
[23:26:51] select | verify relaxed 1/10
[23:26:51] verify | func= FutureWork | rank= 0 | pid= cond-mat/0104457 | title_snip='Superconductivity of Rb$_3$C$_{60}$: breakdown of the Migdal-Eliashberâ€¦' | abs_len= 1338
[23:26:55] verify | result supports= True fit= 0.90 top= 0.90 invalid= â€” cue_hint= False
[23:26:55] select | verify relaxed 2/10
[23:26:55] verify | func= FutureWork | rank= 1 | pid= cond-mat/0102189 | title_snip='Breakdown of the Migdal-Eliashberg theory in the strong-coupling
  adiâ€¦' | abs_len= 903
[23:26:58] verify | result supports= True fit= 0.80 top= 0.90 invalid= â€” cue_hint= False
[23:26:58] select | verify relaxed 3/10
[23:26:58] verify | func= FutureWork | rank= 2 | pid= cond-mat/0101258 | title_snip='To Phenomenological Theory of Superconductivity. Superconductivity - nâ€¦' | abs_len= 574
[23:27:01] verify | result supports= False fit= 0.00 top= 0.50 invalid= â€” cue_hint= False
[23:27:01] select | verify relaxed 4/10
[23:27:01] verify | func= FutureWork | rank= 3 | pid= cond-mat/0103518 | title_snip='Calculation of Dip Features in the SIS Conductance of D-Wave
  Supercoâ€¦' | abs_len= 407
[23:27:04] verify | result supports= False fit= 0.00 top= 0.50 invalid= â€” cue_hint= False
[23:27:04] select | verify relaxed 5/10
[23:27:04] verify | func= FutureWork | rank= 4 | pid= cond-mat/0104502 | title_snip='Application of the scattering rate sum-rule to the interplane optical
â€¦' | abs_len= 543
[23:27:06] verify | result supports= False fit= 0.00 top= 0.00 invalid= no_quote cue_hint= False
[23:27:06] select | verify relaxed 6/10
[23:27:06] verify | func= FutureWork | rank= 5 | pid= cond-mat/0102456 | title_snip='Quantum Group based Modeling for the description of high temperature
 â€¦' | abs_len= 1009
[23:27:09] verify | result supports= False fit= 0.00 top= 0.00 invalid= no_quote cue_hint= False
[23:27:09] select | verify relaxed 7/10
[23:27:09] verify | func= FutureWork | rank= 6 | pid= cond-mat/0102111 | title_snip='Pseudogap in High - Temperature Superconductors' | abs_len= 918
[23:27:11] verify | result supports= False fit= 0.00 top= 0.20 invalid= no_quote cue_hint= False
[23:27:11] select | verify relaxed 8/10
[23:27:11] verify | func= FutureWork | rank= 7 | pid= cond-mat/0101080 | title_snip='Superconductors with Magnetic Impurities: Instantons and Sub-gap Stateâ€¦' | abs_len= 1453
[23:27:14] verify | result supports= False fit= 0.00 top= 0.20 invalid= no_quote cue_hint= False
[23:27:14] select | verify relaxed 9/10
[23:27:14] verify | func= FutureWork | rank= 8 | pid= cond-mat/0102136 | title_snip='Superconductivity from Hole Undressing' | abs_len= 1264
[23:27:17] verify | result supports= False fit= 0.00 top= 0.20 invalid= no_quote cue_hint= False
[23:27:17] select | verify relaxed 10/10
[23:27:17] verify | func= FutureWork | rank= 9 | pid= cond-mat/0104519 | title_snip='Bond operator theory of doped antiferromagnets: from Mott insulators
 â€¦' | abs_len= 1454
[23:27:19] verify | result supports= False fit= 0.00 top= 0.20 invalid= no_quote cue_hint= False

================================================================================
FUNCTION: FutureWork
QUERY   : What background information on the Migdal-Eliashberg theory suggests a need for future work in generalizing the theory of superconductivity?
- WINNER: cond-mat/0104457 | Superconductivity of Rb$_3$C$_{60}$: breakdown of the Migdal-Eliashberg
  theory
- QUOTE : One has therefore to consider the generalization of the theory of superconductivity
- WHY   : sufficient
- ANSWER: The Migdal-Eliashberg theory's inability to explain the experimental data of Rb$_3$C$_{60}$ with reasonable electron-phonon coupling values suggests a need for future work in generalizing the theory of superconductivity, particularly in the nonadiabatic regime. This generalization is necessary to account for the experimental properties of fullerides that strongly violate Migdal's theorem (cond-mat/0104457).

ðŸ“„ Saved: outputs/function_selection_results.json
ðŸ“„ Saved: outputs/function_selection_results.jsonl
ðŸ“ Answers-only: outputs/function_answers.txt
-> /home/anpa439f/anaconda3/envs/myenv/bin/python3 /data/horse/ws/anpa439f-Function_Retrieval_Citation/Research_Project/RetrievalAugmentedGeneration/classifying_question.py  (cwd=/data/horse/ws/anpa439f-Function_Retrieval_Citation/Research_Project/RetrievalAugmentedGeneration)
âœ… Saved to classified_outputs.jsonl
ðŸ”§ Ready for retrieval module (.py).
-> /home/anpa439f/anaconda3/envs/myenv/bin/python3 /data/horse/ws/anpa439f-Function_Retrieval_Citation/Research_Project/RetrievalAugmentedGeneration/Retreival_query_based.py --skip-reindex --index /data/horse/ws/anpa439f-Function_Retrieval_Citation/Research_Project/e5_index_subset_1/index.faiss --meta /data/horse/ws/anpa439f-Function_Retrieval_Citation/Research_Project/e5_index_subset_1/meta.parquet --topk 20  (cwd=/data/horse/ws/anpa439f-Function_Retrieval_Citation/Research_Project/RetrievalAugmentedGeneration)
âœ… Top-k candidates: /data/horse/ws/anpa439f-Function_Retrieval_Citation/Research_Project/RetrievalAugmentedGeneration/outputs/topk_candidates_query.jsonl
ðŸ”— Symlinked: /data/horse/ws/anpa439f-Function_Retrieval_Citation/Research_Project/outputs/topk_candidates_query.jsonl -> /data/horse/ws/anpa439f-Function_Retrieval_Citation/Research_Project/RetrievalAugmentedGeneration/outputs/topk_candidates_query.jsonl
-> /home/anpa439f/anaconda3/envs/myenv/bin/python3 /data/horse/ws/anpa439f-Function_Retrieval_Citation/Research_Project/RetrievalAugmentedGeneration/function_based_answer-2.py --debug --max-check 10  (cwd=/data/horse/ws/anpa439f-Function_Retrieval_Citation/Research_Project/RetrievalAugmentedGeneration)

ðŸŽ‰ Pipeline complete.
  â€¢ Classified file : /data/horse/ws/anpa439f-Function_Retrieval_Citation/Research_Project/RetrievalAugmentedGeneration/classified_outputs.jsonl
  â€¢ TopK (canonical): /data/horse/ws/anpa439f-Function_Retrieval_Citation/Research_Project/RetrievalAugmentedGeneration/outputs/topk_candidates_query.jsonl
  â€¢ Final outputs   : /data/horse/ws/anpa439f-Function_Retrieval_Citation/Research_Project/RetrievalAugmentedGeneration/outputs
