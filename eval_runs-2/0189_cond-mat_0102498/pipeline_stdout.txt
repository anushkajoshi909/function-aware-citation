âœ… Available Models:
1. alias-code
2. alias-reasoning
3. alias-image-generation
4. alias-vision
5. alias-ha
6. meta-llama/Llama-3.3-70B-Instruct
7. meta-llama/Llama-3.1-8B-Instruct
8. Qwen/Qwen2-VL-7B-Instruct
9. openGPT-X/Teuken-7B-instruct-research-v0.4
10. deepseek-ai/DeepSeek-Coder-V2-Lite-Instruct
11. Qwen/Qwen3-Coder-30B-A3B-Instruct
12. Qwen/Qwen3-Embedding-4B
13. stabilityai/stable-diffusion-3.5-large-turbo
14. black-forest-labs/FLUX.1-dev
15. openai/whisper-large-v3
16. Kokoro-82M
17. tts-1-hd
18. deepseek-ai/DeepSeek-R1
19. openai/gpt-oss-120b
20. meta-llama/Llama-4-Scout-17B-16E-Instruct

ðŸ‘‰ Select a model number (default = 1): 
âœ… Using model: openai/gpt-oss-120b

ðŸ” Enter a scientific query or topic: 
ðŸ”Ž Citation Function Classification:
{
  "citation_functions": [
    "Uses",
    "Motivation"
  ],
  "justification": "The query seeks the specific method employed (usage) and the problem the work aims to address (motivation)."
}

âœ… Saved to classified_outputs.jsonl
ðŸ”§ Ready for retrieval module (handled in a separate file).
âš¡ SKIP_REINDEX=1 â€” using existing FAISS index + meta; not scanning raw JSONL shards.
âœ… Top-k candidates (FAISS): /data/horse/ws/anpa439f-Function_Retrieval_Citation/Research_Project/RetrievalAugmentedGeneration/outputs/topk_candidates_query.jsonl
[01:34:36] main | args: Namespace(max_check=10, debug=True)
[01:34:36] read_last_jsonl | path= classified_outputs.jsonl
[01:34:36] read_last_jsonl | total_lines= 1
[01:34:36] main | query='What method does the current work use to investigate the microstructure of the MgB2 superconductor and what problem does it aim to solve by doing so?' | funcs=['Uses', 'Motivation']
[01:34:38] main | core_terms= ['MgB2', 'superconductor', 'microstructure']
[01:34:38] load_topk_jsonl | path= /data/horse/ws/anpa439f-Function_Retrieval_Citation/Research_Project/outputs/topk_candidates_query.jsonl
[01:34:38] load_topk_jsonl | rows= 20
[01:34:38] load_topk_jsonl | first: rank= 0 paper_id= cond-mat/0102312 title_snip='Scanning Tunneling Spectroscopy in MgB2' abs_len= 664
[01:34:38] main | running function= Uses
[01:34:38] select | function= Uses | candidates_in= 20
[01:34:38] select | core_terms= ['MgB2', 'superconductor', 'microstructure']
[01:34:38] select | no cosine prune; kept=20/20
[01:34:38] select | pool_size= 10 | ranks= [0, 1, 2, 3, 4, 5, 6, 7, 8, 9] | pids= ['cond-mat/0102312', 'cond-mat/0103390', 'cond-mat/0102507', 'cond-mat/0103157', 'cond-mat/0102498', 'cond-mat/0103431', 'cond-mat/0103006', 'cond-mat/0103154', 'cond-mat/0102289', 'cond-mat/0102242']
[01:34:38] select | verify relaxed 1/10
[01:34:38] verify | func= Uses | rank= 0 | pid= cond-mat/0102312 | title_snip='Scanning Tunneling Spectroscopy in MgB2' | abs_len= 664
[01:34:41] verify | result supports= True fit= 0.80 top= 0.90 invalid= â€” cue_hint= False
[01:34:41] select | verify relaxed 2/10
[01:34:41] verify | func= Uses | rank= 1 | pid= cond-mat/0103390 | title_snip='Synthesis and Processing of $MgB_2$ powders and wires' | abs_len= 825
[01:34:44] verify | result supports= False fit= 0.00 top= 0.90 invalid= off_topic_no_core_in_abstract cue_hint= False
[01:34:44] select | verify relaxed 3/10
[01:34:44] verify | func= Uses | rank= 2 | pid= cond-mat/0102507 | title_snip='Compressibility of the MgB2 Superconductor' | abs_len= 966
[01:34:48] verify | result supports= True fit= 0.80 top= 0.90 invalid= â€” cue_hint= False
[01:34:48] select | verify relaxed 4/10
[01:34:48] verify | func= Uses | rank= 3 | pid= cond-mat/0103157 | title_snip='Electronic structure of superconducting MgB2 and related binary and
  â€¦' | abs_len= 1015
[01:34:51] verify | result supports= True fit= 0.80 top= 0.90 invalid= â€” cue_hint= False
[01:34:51] select | verify relaxed 5/10
[01:34:51] verify | func= Uses | rank= 4 | pid= cond-mat/0102498 | title_snip='Microstructure of the highly dense MgB2 Superconductor by transmissionâ€¦' | abs_len= 1004
[01:34:54] verify | result supports= True fit= 0.90 top= 1.00 invalid= â€” cue_hint= True
[01:34:54] select | verify relaxed 6/10
[01:34:54] verify | func= Uses | rank= 5 | pid= cond-mat/0103431 | title_snip='Two-Band-Type Superconducting Instability in MgB2' | abs_len= 1160
[01:34:57] verify | result supports= False fit= 0.00 top= 0.00 invalid= no_quote cue_hint= False
[01:34:57] select | verify relaxed 7/10
[01:34:57] verify | func= Uses | rank= 6 | pid= cond-mat/0103006 | title_snip='Superconductivity Driven by the Interband Coulomb Interaction and
  Imâ€¦' | abs_len= 1033
[01:35:01] verify | result supports= True fit= 0.80 top= 0.90 invalid= â€” cue_hint= True
[01:35:01] select | verify relaxed 8/10
[01:35:01] verify | func= Uses | rank= 7 | pid= cond-mat/0103154 | title_snip='The upper critical field problem in MgB2' | abs_len= 667
[01:35:04] verify | result supports= True fit= 0.80 top= 0.90 invalid= â€” cue_hint= False
[01:35:04] select | verify relaxed 9/10
[01:35:04] verify | func= Uses | rank= 8 | pid= cond-mat/0102289 | title_snip='Superconductivity in Dense $MgB_2$ Wires' | abs_len= 897
[01:35:08] verify | result supports= False fit= 0.00 top= 0.00 invalid= no_quote cue_hint= False
[01:35:08] select | verify relaxed 10/10
[01:35:08] verify | func= Uses | rank= 9 | pid= cond-mat/0102242 | title_snip='Tunneling spectroscopy in small grains of superconducting MgB2' | abs_len= 430
[01:35:11] verify | result supports= True fit= 0.80 top= 0.90 invalid= â€” cue_hint= False

================================================================================
FUNCTION: Uses
QUERY   : What method does the current work use to investigate the microstructure of the MgB2 superconductor and what problem does it aim to solve by doing so?
- WINNER: cond-mat/0102498 | Microstructure of the highly dense MgB2 Superconductor by transmission
  electron microscope
- QUOTE : investigated by using a high-resolution transmission electron microscope
- WHY   : sufficient
- ANSWER: The current work uses a high-resolution transmission electron microscope (HRTEM) to investigate the microstructure of the MgB2 superconductor. This method aims to solve the problem of understanding the microstructure of highly dense MgB2, specifically to verify if it can be sintered to its theoretical density without porosity or grain growth (cond-mat/0102498).
[01:35:16] main | running function= Motivation
[01:35:16] select | function= Motivation | candidates_in= 20
[01:35:16] select | core_terms= ['MgB2', 'superconductor', 'microstructure']
[01:35:16] select | no cosine prune; kept=20/20
[01:35:16] select | pool_size= 10 | ranks= [0, 1, 2, 3, 4, 5, 6, 7, 8, 9] | pids= ['cond-mat/0102312', 'cond-mat/0103390', 'cond-mat/0102507', 'cond-mat/0103157', 'cond-mat/0102498', 'cond-mat/0103431', 'cond-mat/0103006', 'cond-mat/0103154', 'cond-mat/0102289', 'cond-mat/0102242']
[01:35:16] select | verify relaxed 1/10
[01:35:16] verify | func= Motivation | rank= 0 | pid= cond-mat/0102312 | title_snip='Scanning Tunneling Spectroscopy in MgB2' | abs_len= 664
[01:35:19] verify | result supports= False fit= 0.00 top= 0.80 invalid= â€” cue_hint= False
[01:35:19] select | verify relaxed 2/10
[01:35:19] verify | func= Motivation | rank= 1 | pid= cond-mat/0103390 | title_snip='Synthesis and Processing of $MgB_2$ powders and wires' | abs_len= 825
[01:35:22] verify | result supports= False fit= 0.00 top= 0.90 invalid= off_topic_no_core_in_abstract cue_hint= False
[01:35:22] select | verify relaxed 3/10
[01:35:22] verify | func= Motivation | rank= 2 | pid= cond-mat/0102507 | title_snip='Compressibility of the MgB2 Superconductor' | abs_len= 966
[01:35:26] verify | result supports= True fit= 0.80 top= 0.90 invalid= â€” cue_hint= False
[01:35:26] select | verify relaxed 4/10
[01:35:26] verify | func= Motivation | rank= 3 | pid= cond-mat/0103157 | title_snip='Electronic structure of superconducting MgB2 and related binary and
  â€¦' | abs_len= 1015
[01:35:29] verify | result supports= False fit= 0.00 top= 0.90 invalid= quote_not_in_abstract cue_hint= False
[01:35:29] select | verify relaxed 5/10
[01:35:29] verify | func= Motivation | rank= 4 | pid= cond-mat/0102498 | title_snip='Microstructure of the highly dense MgB2 Superconductor by transmissionâ€¦' | abs_len= 1004
[01:35:32] verify | result supports= False fit= 0.00 top= 0.80 invalid= â€” cue_hint= False
[01:35:32] select | verify relaxed 6/10
[01:35:32] verify | func= Motivation | rank= 5 | pid= cond-mat/0103431 | title_snip='Two-Band-Type Superconducting Instability in MgB2' | abs_len= 1160
[01:35:35] verify | result supports= False fit= 0.00 top= 0.90 invalid= quote_not_in_abstract cue_hint= True
[01:35:35] select | verify relaxed 7/10
[01:35:35] verify | func= Motivation | rank= 6 | pid= cond-mat/0103006 | title_snip='Superconductivity Driven by the Interband Coulomb Interaction and
  Imâ€¦' | abs_len= 1033
[01:35:39] verify | result supports= True fit= 0.80 top= 0.90 invalid= â€” cue_hint= False
[01:35:39] select | verify relaxed 8/10
[01:35:39] verify | func= Motivation | rank= 7 | pid= cond-mat/0103154 | title_snip='The upper critical field problem in MgB2' | abs_len= 667
[01:35:42] verify | result supports= True fit= 0.80 top= 0.90 invalid= â€” cue_hint= True
[01:35:42] select | verify relaxed 9/10
[01:35:42] verify | func= Motivation | rank= 8 | pid= cond-mat/0102289 | title_snip='Superconductivity in Dense $MgB_2$ Wires' | abs_len= 897
[01:35:45] verify | result supports= False fit= 0.00 top= 0.80 invalid= quote_not_in_abstract cue_hint= False
[01:35:45] select | verify relaxed 10/10
[01:35:45] verify | func= Motivation | rank= 9 | pid= cond-mat/0102242 | title_snip='Tunneling spectroscopy in small grains of superconducting MgB2' | abs_len= 430
[01:35:48] verify | result supports= False fit= 0.00 top= 0.80 invalid= â€” cue_hint= False

================================================================================
FUNCTION: Motivation
QUERY   : What method does the current work use to investigate the microstructure of the MgB2 superconductor and what problem does it aim to solve by doing so?
- WINNER: cond-mat/0103154 | The upper critical field problem in MgB2
- QUOTE : The upper critical field problem in MgB2
- WHY   : sufficient
- ANSWER: The work uses single and multi-band Eliashberg models to investigate the microstructure of the MgB2 superconductor. It aims to solve the problem of understanding the relatively high upper critical field in MgB2 by analyzing the involvement of heavy quasiparticles and their coupling to bosons (cond-mat/0103154).

ðŸ“„ Saved: outputs/function_selection_results.json
ðŸ“„ Saved: outputs/function_selection_results.jsonl
ðŸ“ Answers-only: outputs/function_answers.txt
-> /home/anpa439f/anaconda3/envs/myenv/bin/python3 /data/horse/ws/anpa439f-Function_Retrieval_Citation/Research_Project/RetrievalAugmentedGeneration/classifying_question.py  (cwd=/data/horse/ws/anpa439f-Function_Retrieval_Citation/Research_Project/RetrievalAugmentedGeneration)
âœ… Saved to classified_outputs.jsonl
ðŸ”§ Ready for retrieval module (.py).
-> /home/anpa439f/anaconda3/envs/myenv/bin/python3 /data/horse/ws/anpa439f-Function_Retrieval_Citation/Research_Project/RetrievalAugmentedGeneration/Retreival_query_based.py --skip-reindex --index /data/horse/ws/anpa439f-Function_Retrieval_Citation/Research_Project/e5_index_subset_1/index.faiss --meta /data/horse/ws/anpa439f-Function_Retrieval_Citation/Research_Project/e5_index_subset_1/meta.parquet --topk 20  (cwd=/data/horse/ws/anpa439f-Function_Retrieval_Citation/Research_Project/RetrievalAugmentedGeneration)
âœ… Top-k candidates: /data/horse/ws/anpa439f-Function_Retrieval_Citation/Research_Project/RetrievalAugmentedGeneration/outputs/topk_candidates_query.jsonl
ðŸ”— Symlinked: /data/horse/ws/anpa439f-Function_Retrieval_Citation/Research_Project/outputs/topk_candidates_query.jsonl -> /data/horse/ws/anpa439f-Function_Retrieval_Citation/Research_Project/RetrievalAugmentedGeneration/outputs/topk_candidates_query.jsonl
-> /home/anpa439f/anaconda3/envs/myenv/bin/python3 /data/horse/ws/anpa439f-Function_Retrieval_Citation/Research_Project/RetrievalAugmentedGeneration/function_based_answer-2.py --debug --max-check 10  (cwd=/data/horse/ws/anpa439f-Function_Retrieval_Citation/Research_Project/RetrievalAugmentedGeneration)

ðŸŽ‰ Pipeline complete.
  â€¢ Classified file : /data/horse/ws/anpa439f-Function_Retrieval_Citation/Research_Project/RetrievalAugmentedGeneration/classified_outputs.jsonl
  â€¢ TopK (canonical): /data/horse/ws/anpa439f-Function_Retrieval_Citation/Research_Project/RetrievalAugmentedGeneration/outputs/topk_candidates_query.jsonl
  â€¢ Final outputs   : /data/horse/ws/anpa439f-Function_Retrieval_Citation/Research_Project/RetrievalAugmentedGeneration/outputs
