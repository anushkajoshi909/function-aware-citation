âœ… Available Models:
1. alias-code
2. alias-reasoning
3. alias-image-generation
4. alias-vision
5. alias-ha
6. meta-llama/Llama-3.3-70B-Instruct
7. meta-llama/Llama-3.1-8B-Instruct
8. Qwen/Qwen2-VL-7B-Instruct
9. openGPT-X/Teuken-7B-instruct-research-v0.4
10. deepseek-ai/DeepSeek-Coder-V2-Lite-Instruct
11. Qwen/Qwen3-Coder-30B-A3B-Instruct
12. Qwen/Qwen3-Embedding-4B
13. stabilityai/stable-diffusion-3.5-large-turbo
14. black-forest-labs/FLUX.1-dev
15. openai/whisper-large-v3
16. Kokoro-82M
17. tts-1-hd
18. deepseek-ai/DeepSeek-R1
19. openai/gpt-oss-120b
20. meta-llama/Llama-4-Scout-17B-16E-Instruct

ðŸ‘‰ Select a model number (default = 1): 
âœ… Using model: openai/gpt-oss-120b

ðŸ” Enter a scientific query or topic: 
ðŸ”Ž Citation Function Classification:
{
  "citation_functions": [
    "Extends",
    "Background"
  ],
  "justification": "The query asks how the new study expands (extends) knowledge about mass\u2011loss rates and crystalline silicate features, while also referencing the existing ISO observational background."
}

âœ… Saved to classified_outputs.jsonl
ðŸ”§ Ready for retrieval module (handled in a separate file).
âš¡ SKIP_REINDEX=1 â€” using existing FAISS index + meta; not scanning raw JSONL shards.
âœ… Top-k candidates (FAISS): /data/horse/ws/anpa439f-Function_Retrieval_Citation/Research_Project/RetrievalAugmentedGeneration/outputs/topk_candidates_query.jsonl
[23:22:07] main | args: Namespace(max_check=10, debug=True)
[23:22:07] read_last_jsonl | path= classified_outputs.jsonl
[23:22:07] read_last_jsonl | total_lines= 1
[23:22:07] main | query='How does the current study extend our understanding of the relationship between mass-loss rates and crystalline silicate features in AGB stars, given the background knowledge of ISO observations?' | funcs=['Extends', 'Background']
[23:22:09] main | core_terms= ['AGB stars', 'ISO', 'mass-loss rates', 'crystalline silicate features', 'mass-loss', 'AGB']
[23:22:09] load_topk_jsonl | path= /data/horse/ws/anpa439f-Function_Retrieval_Citation/Research_Project/outputs/topk_candidates_query.jsonl
[23:22:09] load_topk_jsonl | rows= 20
[23:22:09] load_topk_jsonl | first: rank= 0 paper_id= astro-ph/0101256 title_snip='Crystallinity versus mass-loss rate in Asymptotic Giant Branch stars' abs_len= 1302
[23:22:09] main | running function= Extends
[23:22:09] select | function= Extends | candidates_in= 20
[23:22:09] select | core_terms= ['AGB stars', 'ISO', 'mass-loss rates', 'crystalline silicate features', 'mass-loss', 'AGB']
[23:22:09] select | no cosine prune; kept=20/20
[23:22:09] select | pool_size= 10 | ranks= [0, 1, 2, 3, 4, 5, 6, 7, 8, 9] | pids= ['astro-ph/0101256', 'astro-ph/0101094', 'astro-ph/0101374', 'astro-ph/0101054', 'astro-ph/0104292', 'astro-ph/0102217', 'astro-ph/0101260', 'astro-ph/0103048', 'astro-ph/0102198', 'astro-ph/0102430']
[23:22:09] select | verify relaxed 1/10
[23:22:09] verify | func= Extends | rank= 0 | pid= astro-ph/0101256 | title_snip='Crystallinity versus mass-loss rate in Asymptotic Giant Branch stars' | abs_len= 1302
[23:22:12] verify | result supports= True fit= 0.90 top= 0.90 invalid= â€” cue_hint= False
[23:22:12] select | verify relaxed 2/10
[23:22:12] verify | func= Extends | rank= 1 | pid= astro-ph/0101094 | title_snip='Mass-Losing Semiregular Variable Stars in Baade's Windows' | abs_len= 1568
[23:22:16] verify | result supports= True fit= 0.80 top= 0.90 invalid= â€” cue_hint= False
[23:22:16] select | verify relaxed 3/10
[23:22:16] verify | func= Extends | rank= 2 | pid= astro-ph/0101374 | title_snip='Lithium and mass loss in massive AGB stars in the Large Magellanic
  Câ€¦' | abs_len= 588
[23:22:19] verify | result supports= True fit= 0.80 top= 0.90 invalid= â€” cue_hint= False
[23:22:19] select | verify relaxed 4/10
[23:22:19] verify | func= Extends | rank= 3 | pid= astro-ph/0101054 | title_snip='Spectroscopy of Stellar Jets, Outflows, and Young Stellar Objects withâ€¦' | abs_len= 941
[23:22:22] verify | result supports= False fit= 0.00 top= 0.20 invalid= â€” cue_hint= False
[23:22:22] select | verify relaxed 5/10
[23:22:22] verify | func= Extends | rank= 4 | pid= astro-ph/0104292 | title_snip='Towards Better Age Estimates for Stellar Populations: The Y^2 Isochronâ€¦' | abs_len= 1394
[23:22:25] verify | result supports= False fit= 0.00 top= 0.00 invalid= no_quote cue_hint= False
[23:22:25] select | verify relaxed 6/10
[23:22:25] verify | func= Extends | rank= 5 | pid= astro-ph/0102217 | title_snip='100-year Mass Loss Modulations on the Asymptotic Giant Branch' | abs_len= 1563
[23:22:28] verify | result supports= True fit= 0.80 top= 0.90 invalid= â€” cue_hint= False
[23:22:28] select | verify relaxed 7/10
[23:22:28] verify | func= Extends | rank= 6 | pid= astro-ph/0101260 | title_snip='A representative sample of Be stars IV: Infrared Photometry and the
  â€¦' | abs_len= 602
[23:22:30] verify | result supports= False fit= 0.00 top= 0.00 invalid= no_quote cue_hint= False
[23:22:30] select | verify relaxed 8/10
[23:22:30] verify | func= Extends | rank= 7 | pid= astro-ph/0103048 | title_snip='Polarization Insights for Active Galactic Nuclei' | abs_len= 1223
[23:22:33] verify | result supports= False fit= 0.00 top= 0.00 invalid= no_quote cue_hint= False
[23:22:33] select | verify relaxed 9/10
[23:22:33] verify | func= Extends | rank= 8 | pid= astro-ph/0102198 | title_snip='Mm/submm observations of symbiotic binary stars: implications for the
â€¦' | abs_len= 729
[23:22:35] verify | result supports= False fit= 0.00 top= 0.20 invalid= â€” cue_hint= False
[23:22:35] select | verify relaxed 10/10
[23:22:35] verify | func= Extends | rank= 9 | pid= astro-ph/0102430 | title_snip='Probing the Evolution of Gas Mass Fraction with Sunyaev-Zel'dovich
  Eâ€¦' | abs_len= 1039
[23:22:38] verify | result supports= False fit= 0.00 top= 0.00 invalid= no_quote cue_hint= False

================================================================================
FUNCTION: Extends
QUERY   : How does the current study extend our understanding of the relationship between mass-loss rates and crystalline silicate features in AGB stars, given the background knowledge of ISO observations?
- WINNER: astro-ph/0101256 | Crystallinity versus mass-loss rate in Asymptotic Giant Branch stars
- QUOTE : Infrared Space Observatory (ISO) observations have shown
- WHY   : sufficient
- ANSWER: The current study extends our understanding of the relationship between mass-loss rates and crystalline silicate features in AGB stars by showing that low mass-loss rate objects may also form crystalline silicates, contrary to previous interpretations of ISO observations. This is achieved by accounting for temperature differences between amorphous and crystalline silicates, allowing for up to 40% crystalline silicate material to be present without visible spectral features (astro-ph/0101256).
[23:22:44] main | running function= Background
[23:22:44] select | function= Background | candidates_in= 20
[23:22:44] select | core_terms= ['AGB stars', 'ISO', 'mass-loss rates', 'crystalline silicate features', 'mass-loss', 'AGB']
[23:22:44] select | no cosine prune; kept=20/20
[23:22:44] select | pool_size= 10 | ranks= [0, 1, 2, 3, 4, 5, 6, 7, 8, 9] | pids= ['astro-ph/0101256', 'astro-ph/0101094', 'astro-ph/0101374', 'astro-ph/0101054', 'astro-ph/0104292', 'astro-ph/0102217', 'astro-ph/0101260', 'astro-ph/0103048', 'astro-ph/0102198', 'astro-ph/0102430']
[23:22:44] select | verify relaxed 1/10
[23:22:44] verify | func= Background | rank= 0 | pid= astro-ph/0101256 | title_snip='Crystallinity versus mass-loss rate in Asymptotic Giant Branch stars' | abs_len= 1302
[23:22:47] verify | result supports= True fit= 0.80 top= 0.90 invalid= â€” cue_hint= False
[23:22:47] select | verify relaxed 2/10
[23:22:47] verify | func= Background | rank= 1 | pid= astro-ph/0101094 | title_snip='Mass-Losing Semiregular Variable Stars in Baade's Windows' | abs_len= 1568
[23:22:50] verify | result supports= True fit= 0.80 top= 0.90 invalid= â€” cue_hint= False
[23:22:50] select | verify relaxed 3/10
[23:22:50] verify | func= Background | rank= 2 | pid= astro-ph/0101374 | title_snip='Lithium and mass loss in massive AGB stars in the Large Magellanic
  Câ€¦' | abs_len= 588
[23:22:53] verify | result supports= True fit= 0.80 top= 0.90 invalid= â€” cue_hint= False
[23:22:53] select | verify relaxed 4/10
[23:22:53] verify | func= Background | rank= 3 | pid= astro-ph/0101054 | title_snip='Spectroscopy of Stellar Jets, Outflows, and Young Stellar Objects withâ€¦' | abs_len= 941
[23:22:56] verify | result supports= False fit= 0.00 top= 0.00 invalid= no_quote cue_hint= False
[23:22:56] select | verify relaxed 5/10
[23:22:56] verify | func= Background | rank= 4 | pid= astro-ph/0104292 | title_snip='Towards Better Age Estimates for Stellar Populations: The Y^2 Isochronâ€¦' | abs_len= 1394
[23:22:58] verify | result supports= False fit= 0.00 top= 0.00 invalid= no_quote cue_hint= False
[23:22:58] select | verify relaxed 6/10
[23:22:58] verify | func= Background | rank= 5 | pid= astro-ph/0102217 | title_snip='100-year Mass Loss Modulations on the Asymptotic Giant Branch' | abs_len= 1563
[23:23:01] verify | result supports= False fit= 0.00 top= 0.50 invalid= â€” cue_hint= False
[23:23:01] select | verify relaxed 7/10
[23:23:01] verify | func= Background | rank= 6 | pid= astro-ph/0101260 | title_snip='A representative sample of Be stars IV: Infrared Photometry and the
  â€¦' | abs_len= 602
[23:23:04] verify | result supports= False fit= 0.00 top= 0.00 invalid= no_quote cue_hint= False
[23:23:04] select | verify relaxed 8/10
[23:23:04] verify | func= Background | rank= 7 | pid= astro-ph/0103048 | title_snip='Polarization Insights for Active Galactic Nuclei' | abs_len= 1223
[23:23:06] verify | result supports= False fit= 0.00 top= 0.00 invalid= no_quote cue_hint= False
[23:23:06] select | verify relaxed 9/10
[23:23:06] verify | func= Background | rank= 8 | pid= astro-ph/0102198 | title_snip='Mm/submm observations of symbiotic binary stars: implications for the
â€¦' | abs_len= 729
[23:23:09] verify | result supports= False fit= 0.00 top= 0.20 invalid= no_quote cue_hint= False
[23:23:09] select | verify relaxed 10/10
[23:23:09] verify | func= Background | rank= 9 | pid= astro-ph/0102430 | title_snip='Probing the Evolution of Gas Mass Fraction with Sunyaev-Zel'dovich
  Eâ€¦' | abs_len= 1039
[23:23:11] verify | result supports= False fit= 0.00 top= 0.00 invalid= no_quote cue_hint= False

================================================================================
FUNCTION: Background
QUERY   : How does the current study extend our understanding of the relationship between mass-loss rates and crystalline silicate features in AGB stars, given the background knowledge of ISO observations?
- WINNER: astro-ph/0101256 | Crystallinity versus mass-loss rate in Asymptotic Giant Branch stars
- QUOTE : Infrared Space Observatory (ISO) observations have shown
- WHY   : sufficient
- ANSWER: The current study builds on ISO observations by exploring an alternative explanation for the lack of crystalline silicate features in low mass-loss rate AGB stars (astro-ph/0101256).

ðŸ“„ Saved: outputs/function_selection_results.json
ðŸ“„ Saved: outputs/function_selection_results.jsonl
ðŸ“ Answers-only: outputs/function_answers.txt
-> /home/anpa439f/anaconda3/envs/myenv/bin/python3 /data/horse/ws/anpa439f-Function_Retrieval_Citation/Research_Project/RetrievalAugmentedGeneration/classifying_question.py  (cwd=/data/horse/ws/anpa439f-Function_Retrieval_Citation/Research_Project/RetrievalAugmentedGeneration)
âœ… Saved to classified_outputs.jsonl
ðŸ”§ Ready for retrieval module (.py).
-> /home/anpa439f/anaconda3/envs/myenv/bin/python3 /data/horse/ws/anpa439f-Function_Retrieval_Citation/Research_Project/RetrievalAugmentedGeneration/Retreival_query_based.py --skip-reindex --index /data/horse/ws/anpa439f-Function_Retrieval_Citation/Research_Project/e5_index_subset_1/index.faiss --meta /data/horse/ws/anpa439f-Function_Retrieval_Citation/Research_Project/e5_index_subset_1/meta.parquet --topk 20  (cwd=/data/horse/ws/anpa439f-Function_Retrieval_Citation/Research_Project/RetrievalAugmentedGeneration)
âœ… Top-k candidates: /data/horse/ws/anpa439f-Function_Retrieval_Citation/Research_Project/RetrievalAugmentedGeneration/outputs/topk_candidates_query.jsonl
ðŸ”— Symlinked: /data/horse/ws/anpa439f-Function_Retrieval_Citation/Research_Project/outputs/topk_candidates_query.jsonl -> /data/horse/ws/anpa439f-Function_Retrieval_Citation/Research_Project/RetrievalAugmentedGeneration/outputs/topk_candidates_query.jsonl
-> /home/anpa439f/anaconda3/envs/myenv/bin/python3 /data/horse/ws/anpa439f-Function_Retrieval_Citation/Research_Project/RetrievalAugmentedGeneration/function_based_answer-2.py --debug --max-check 10  (cwd=/data/horse/ws/anpa439f-Function_Retrieval_Citation/Research_Project/RetrievalAugmentedGeneration)

ðŸŽ‰ Pipeline complete.
  â€¢ Classified file : /data/horse/ws/anpa439f-Function_Retrieval_Citation/Research_Project/RetrievalAugmentedGeneration/classified_outputs.jsonl
  â€¢ TopK (canonical): /data/horse/ws/anpa439f-Function_Retrieval_Citation/Research_Project/RetrievalAugmentedGeneration/outputs/topk_candidates_query.jsonl
  â€¢ Final outputs   : /data/horse/ws/anpa439f-Function_Retrieval_Citation/Research_Project/RetrievalAugmentedGeneration/outputs
