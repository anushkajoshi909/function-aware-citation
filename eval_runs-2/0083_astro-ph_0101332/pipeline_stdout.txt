âœ… Available Models:
1. alias-code
2. alias-reasoning
3. alias-image-generation
4. alias-vision
5. alias-ha
6. meta-llama/Llama-3.3-70B-Instruct
7. meta-llama/Llama-3.1-8B-Instruct
8. Qwen/Qwen2-VL-7B-Instruct
9. openGPT-X/Teuken-7B-instruct-research-v0.4
10. deepseek-ai/DeepSeek-Coder-V2-Lite-Instruct
11. Qwen/Qwen3-Coder-30B-A3B-Instruct
12. Qwen/Qwen3-Embedding-4B
13. stabilityai/stable-diffusion-3.5-large-turbo
14. black-forest-labs/FLUX.1-dev
15. openai/whisper-large-v3
16. Kokoro-82M
17. tts-1-hd
18. deepseek-ai/DeepSeek-R1
19. openai/gpt-oss-120b
20. meta-llama/Llama-4-Scout-17B-16E-Instruct

ðŸ‘‰ Select a model number (default = 1): 
âœ… Using model: openai/gpt-oss-120b

ðŸ” Enter a scientific query or topic: 
ðŸ”Ž Citation Function Classification:
{
  "citation_functions": [
    "Motivation",
    "Compares"
  ],
  "justification": "The query asks for the reasons driving research on coupled two\u2011planet evolution (Motivation) and seeks a direct comparison with the single\u2011planet migration scenario (Compares)."
}

âœ… Saved to classified_outputs.jsonl
ðŸ”§ Ready for retrieval module (handled in a separate file).
âš¡ SKIP_REINDEX=1 â€” using existing FAISS index + meta; not scanning raw JSONL shards.
âœ… Top-k candidates (FAISS): /data/horse/ws/anpa439f-Function_Retrieval_Citation/Research_Project/RetrievalAugmentedGeneration/outputs/topk_candidates_query.jsonl
[22:59:49] main | args: Namespace(max_check=10, debug=True)
[22:59:49] read_last_jsonl | path= classified_outputs.jsonl
[22:59:49] read_last_jsonl | total_lines= 1
[22:59:49] main | query='What motivates the study of the coupled evolution of a two giant planet system and how does it compare to the one planet case in terms of migration?' | funcs=['Motivation', 'Compares']
[22:59:51] main | core_terms= ['giant planet', 'planet system', 'migration', 'coupled evolution']
[22:59:51] load_topk_jsonl | path= /data/horse/ws/anpa439f-Function_Retrieval_Citation/Research_Project/outputs/topk_candidates_query.jsonl
[22:59:51] load_topk_jsonl | rows= 20
[22:59:51] load_topk_jsonl | first: rank= 0 paper_id= astro-ph/0101332 title_snip='Reversing type II migration: resonance trapping of a lighter giant
  pâ€¦' abs_len= 992
[22:59:51] main | running function= Motivation
[22:59:51] select | function= Motivation | candidates_in= 20
[22:59:51] select | core_terms= ['giant planet', 'planet system', 'migration', 'coupled evolution']
[22:59:51] select | no cosine prune; kept=20/20
[22:59:51] select | pool_size= 10 | ranks= [0, 1, 2, 3, 4, 5, 6, 7, 8, 9] | pids= ['astro-ph/0101332', 'astro-ph/0104432', 'astro-ph/0102244', 'astro-ph/0102126', 'astro-ph/0103383', 'astro-ph/0101024', 'astro-ph/0103327', 'astro-ph/0104475', 'astro-ph/0102198', 'astro-ph/0103092']
[22:59:51] select | verify relaxed 1/10
[22:59:51] verify | func= Motivation | rank= 0 | pid= astro-ph/0101332 | title_snip='Reversing type II migration: resonance trapping of a lighter giant
  pâ€¦' | abs_len= 992
[22:59:54] verify | result supports= True fit= 0.80 top= 0.90 invalid= â€” cue_hint= False
[22:59:54] select | verify relaxed 2/10
[22:59:54] verify | func= Motivation | rank= 1 | pid= astro-ph/0104432 | title_snip='On disc driven inward migration of resonantly coupled planets with
  aâ€¦' | abs_len= 1101
[22:59:57] verify | result supports= True fit= 0.80 top= 0.90 invalid= â€” cue_hint= False
[22:59:57] select | verify relaxed 3/10
[22:59:57] verify | func= Motivation | rank= 2 | pid= astro-ph/0102244 | title_snip='Formation of contact in massive close binaries' | abs_len= 1484
[23:00:00] verify | result supports= False fit= 0.00 top= 0.00 invalid= no_quote cue_hint= False
[23:00:00] select | verify relaxed 4/10
[23:00:00] verify | func= Motivation | rank= 3 | pid= astro-ph/0102126 | title_snip='Astronomical engineering: a strategy for modifying planetary orbits' | abs_len= 1431
[23:00:03] verify | result supports= False fit= 0.00 top= 0.20 invalid= â€” cue_hint= False
[23:00:03] select | verify relaxed 5/10
[23:00:03] verify | func= Motivation | rank= 4 | pid= astro-ph/0103383 | title_snip='The Theory of Brown Dwarfs and Extrasolar Giant Planets' | abs_len= 1260
[23:00:06] verify | result supports= False fit= 0.00 top= 0.50 invalid= â€” cue_hint= False
[23:00:06] select | verify relaxed 6/10
[23:00:06] verify | func= Motivation | rank= 5 | pid= astro-ph/0101024 | title_snip='Theory of Extrasolar Giant Planet Transits' | abs_len= 802
[23:00:09] verify | result supports= False fit= 0.00 top= 0.20 invalid= â€” cue_hint= False
[23:00:09] select | verify relaxed 7/10
[23:00:09] verify | func= Motivation | rank= 6 | pid= astro-ph/0103327 | title_snip='Migration of giant planets in planetesimal discs' | abs_len= 911
[23:00:12] verify | result supports= True fit= 0.80 top= 0.90 invalid= â€” cue_hint= False
[23:00:12] select | verify relaxed 8/10
[23:00:12] verify | func= Motivation | rank= 7 | pid= astro-ph/0104475 | title_snip='Eccentricity Evolution of Resonant Migrating Planets' | abs_len= 1051
[23:00:15] verify | result supports= False fit= 0.00 top= 0.90 invalid= off_topic_no_core_in_abstract cue_hint= False
[23:00:15] select | verify relaxed 9/10
[23:00:15] verify | func= Motivation | rank= 8 | pid= astro-ph/0102198 | title_snip='Mm/submm observations of symbiotic binary stars: implications for the
â€¦' | abs_len= 729
[23:00:17] verify | result supports= False fit= 0.00 top= 0.00 invalid= no_quote cue_hint= False
[23:00:17] select | verify relaxed 10/10
[23:00:17] verify | func= Motivation | rank= 9 | pid= astro-ph/0103092 | title_snip='The evolution of the galaxy distribution' | abs_len= 1552
[23:00:20] verify | result supports= False fit= 0.00 top= 0.00 invalid= no_quote cue_hint= False

================================================================================
FUNCTION: Motivation
QUERY   : What motivates the study of the coupled evolution of a two giant planet system and how does it compare to the one planet case in terms of migration?
- WINNER: astro-ph/0101332 | Reversing type II migration: resonance trapping of a lighter giant
  protoplanet
- QUOTE : high eccentricities of the extra-solar planets
- WHY   : sufficient
- ANSWER: The study of a two giant planet system's coupled evolution is motivated by the need to understand how the migration of planets is affected by the presence of multiple planets, which can lead to different outcomes compared to the one planet case. This is important because the traditional understanding of planet migration, based on single planet systems, may not apply to multi-planet systems (astro-ph/0101332).
[23:00:24] main | running function= Compares
[23:00:24] select | function= Compares | candidates_in= 20
[23:00:24] select | core_terms= ['giant planet', 'planet system', 'migration', 'coupled evolution']
[23:00:24] select | no cosine prune; kept=20/20
[23:00:24] select | pool_size= 10 | ranks= [0, 1, 2, 3, 4, 5, 6, 7, 8, 9] | pids= ['astro-ph/0101332', 'astro-ph/0104432', 'astro-ph/0102244', 'astro-ph/0102126', 'astro-ph/0103383', 'astro-ph/0101024', 'astro-ph/0103327', 'astro-ph/0104475', 'astro-ph/0102198', 'astro-ph/0103092']
[23:00:24] select | verify relaxed 1/10
[23:00:24] verify | func= Compares | rank= 0 | pid= astro-ph/0101332 | title_snip='Reversing type II migration: resonance trapping of a lighter giant
  pâ€¦' | abs_len= 992
[23:00:27] verify | result supports= True fit= 0.80 top= 0.90 invalid= â€” cue_hint= False
[23:00:27] select | verify relaxed 2/10
[23:00:27] verify | func= Compares | rank= 1 | pid= astro-ph/0104432 | title_snip='On disc driven inward migration of resonantly coupled planets with
  aâ€¦' | abs_len= 1101
[23:00:31] verify | result supports= True fit= 0.80 top= 0.90 invalid= â€” cue_hint= False
[23:00:31] select | verify relaxed 3/10
[23:00:31] verify | func= Compares | rank= 2 | pid= astro-ph/0102244 | title_snip='Formation of contact in massive close binaries' | abs_len= 1484
[23:00:33] verify | result supports= False fit= 0.00 top= 0.00 invalid= no_quote cue_hint= False
[23:00:33] select | verify relaxed 4/10
[23:00:33] verify | func= Compares | rank= 3 | pid= astro-ph/0102126 | title_snip='Astronomical engineering: a strategy for modifying planetary orbits' | abs_len= 1431
[23:00:36] verify | result supports= False fit= 0.00 top= 0.20 invalid= â€” cue_hint= False
[23:00:36] select | verify relaxed 5/10
[23:00:36] verify | func= Compares | rank= 4 | pid= astro-ph/0103383 | title_snip='The Theory of Brown Dwarfs and Extrasolar Giant Planets' | abs_len= 1260
[23:00:39] verify | result supports= False fit= 0.00 top= 0.50 invalid= â€” cue_hint= False
[23:00:39] select | verify relaxed 6/10
[23:00:39] verify | func= Compares | rank= 5 | pid= astro-ph/0101024 | title_snip='Theory of Extrasolar Giant Planet Transits' | abs_len= 802
[23:00:42] verify | result supports= False fit= 0.00 top= 0.20 invalid= â€” cue_hint= False
[23:00:42] select | verify relaxed 7/10
[23:00:42] verify | func= Compares | rank= 6 | pid= astro-ph/0103327 | title_snip='Migration of giant planets in planetesimal discs' | abs_len= 911
[23:00:45] verify | result supports= False fit= 0.00 top= 0.80 invalid= â€” cue_hint= False
[23:00:45] select | verify relaxed 8/10
[23:00:45] verify | func= Compares | rank= 7 | pid= astro-ph/0104475 | title_snip='Eccentricity Evolution of Resonant Migrating Planets' | abs_len= 1051
[23:00:48] verify | result supports= False fit= 0.00 top= 0.90 invalid= off_topic_no_core_in_abstract cue_hint= False
[23:00:48] select | verify relaxed 9/10
[23:00:48] verify | func= Compares | rank= 8 | pid= astro-ph/0102198 | title_snip='Mm/submm observations of symbiotic binary stars: implications for the
â€¦' | abs_len= 729
[23:00:51] verify | result supports= False fit= 0.00 top= 0.00 invalid= no_quote cue_hint= False
[23:00:51] select | verify relaxed 10/10
[23:00:51] verify | func= Compares | rank= 9 | pid= astro-ph/0103092 | title_snip='The evolution of the galaxy distribution' | abs_len= 1552
[23:00:53] verify | result supports= False fit= 0.00 top= 0.00 invalid= no_quote cue_hint= False

================================================================================
FUNCTION: Compares
QUERY   : What motivates the study of the coupled evolution of a two giant planet system and how does it compare to the one planet case in terms of migration?
- WINNER: astro-ph/0101332 | Reversing type II migration: resonance trapping of a lighter giant
  protoplanet
- QUOTE : favored by a factor ~10 with respect to the one planet case
- WHY   : sufficient
- ANSWER: The study of a two giant planet system is motivated by its comparison to the one planet case in terms of migration, with the two planet system exhibiting outwards migration due to resonance trapping. The two planet system is compared to the one planet case on the basis of angular momentum exchange with the disk and the resulting differential Lindblad torque (astro-ph/0101332).

ðŸ“„ Saved: outputs/function_selection_results.json
ðŸ“„ Saved: outputs/function_selection_results.jsonl
ðŸ“ Answers-only: outputs/function_answers.txt
-> /home/anpa439f/anaconda3/envs/myenv/bin/python3 /data/horse/ws/anpa439f-Function_Retrieval_Citation/Research_Project/RetrievalAugmentedGeneration/classifying_question.py  (cwd=/data/horse/ws/anpa439f-Function_Retrieval_Citation/Research_Project/RetrievalAugmentedGeneration)
âœ… Saved to classified_outputs.jsonl
ðŸ”§ Ready for retrieval module (.py).
-> /home/anpa439f/anaconda3/envs/myenv/bin/python3 /data/horse/ws/anpa439f-Function_Retrieval_Citation/Research_Project/RetrievalAugmentedGeneration/Retreival_query_based.py --skip-reindex --index /data/horse/ws/anpa439f-Function_Retrieval_Citation/Research_Project/e5_index_subset_1/index.faiss --meta /data/horse/ws/anpa439f-Function_Retrieval_Citation/Research_Project/e5_index_subset_1/meta.parquet --topk 20  (cwd=/data/horse/ws/anpa439f-Function_Retrieval_Citation/Research_Project/RetrievalAugmentedGeneration)
âœ… Top-k candidates: /data/horse/ws/anpa439f-Function_Retrieval_Citation/Research_Project/RetrievalAugmentedGeneration/outputs/topk_candidates_query.jsonl
ðŸ”— Symlinked: /data/horse/ws/anpa439f-Function_Retrieval_Citation/Research_Project/outputs/topk_candidates_query.jsonl -> /data/horse/ws/anpa439f-Function_Retrieval_Citation/Research_Project/RetrievalAugmentedGeneration/outputs/topk_candidates_query.jsonl
-> /home/anpa439f/anaconda3/envs/myenv/bin/python3 /data/horse/ws/anpa439f-Function_Retrieval_Citation/Research_Project/RetrievalAugmentedGeneration/function_based_answer-2.py --debug --max-check 10  (cwd=/data/horse/ws/anpa439f-Function_Retrieval_Citation/Research_Project/RetrievalAugmentedGeneration)

ðŸŽ‰ Pipeline complete.
  â€¢ Classified file : /data/horse/ws/anpa439f-Function_Retrieval_Citation/Research_Project/RetrievalAugmentedGeneration/classified_outputs.jsonl
  â€¢ TopK (canonical): /data/horse/ws/anpa439f-Function_Retrieval_Citation/Research_Project/RetrievalAugmentedGeneration/outputs/topk_candidates_query.jsonl
  â€¢ Final outputs   : /data/horse/ws/anpa439f-Function_Retrieval_Citation/Research_Project/RetrievalAugmentedGeneration/outputs
