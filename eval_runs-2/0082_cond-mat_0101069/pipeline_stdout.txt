âœ… Available Models:
1. alias-code
2. alias-reasoning
3. alias-image-generation
4. alias-vision
5. alias-ha
6. meta-llama/Llama-3.3-70B-Instruct
7. meta-llama/Llama-3.1-8B-Instruct
8. Qwen/Qwen2-VL-7B-Instruct
9. openGPT-X/Teuken-7B-instruct-research-v0.4
10. deepseek-ai/DeepSeek-Coder-V2-Lite-Instruct
11. Qwen/Qwen3-Coder-30B-A3B-Instruct
12. Qwen/Qwen3-Embedding-4B
13. stabilityai/stable-diffusion-3.5-large-turbo
14. black-forest-labs/FLUX.1-dev
15. openai/whisper-large-v3
16. Kokoro-82M
17. tts-1-hd
18. deepseek-ai/DeepSeek-R1
19. openai/gpt-oss-120b
20. meta-llama/Llama-4-Scout-17B-16E-Instruct

ðŸ‘‰ Select a model number (default = 1): 
âœ… Using model: openai/gpt-oss-120b

ðŸ” Enter a scientific query or topic: 
ðŸ”Ž Citation Function Classification:
{
  "citation_functions": [
    "Background",
    "Motivation"
  ],
  "justification": "The query seeks foundational information on GaN/AlGaN quantum wells (Background) and asks why this knowledge drives the present investigation of valence band ordering and excitonic properties (Motivation)."
}

âœ… Saved to classified_outputs.jsonl
ðŸ”§ Ready for retrieval module (handled in a separate file).
âš¡ SKIP_REINDEX=1 â€” using existing FAISS index + meta; not scanning raw JSONL shards.
âœ… Top-k candidates (FAISS): /data/horse/ws/anpa439f-Function_Retrieval_Citation/Research_Project/RetrievalAugmentedGeneration/outputs/topk_candidates_query.jsonl
[22:58:31] main | args: Namespace(max_check=10, debug=True)
[22:58:31] read_last_jsonl | path= classified_outputs.jsonl
[22:58:31] read_last_jsonl | total_lines= 1
[22:58:31] main | query='What background information about GaN/AlGaN quantum wells motivates the current study on their valence band ordering and excitonic properties?' | funcs=['Background', 'Motivation']
[22:58:33] main | core_terms= ['GaN', 'AlGaN', 'quantum wells', 'valence band ordering', 'excitonic properties', 'GaN/AlGaN']
[22:58:33] load_topk_jsonl | path= /data/horse/ws/anpa439f-Function_Retrieval_Citation/Research_Project/outputs/topk_candidates_query.jsonl
[22:58:33] load_topk_jsonl | rows= 20
[22:58:33] load_topk_jsonl | first: rank= 0 paper_id= cond-mat/0101069 title_snip='Magneto-photoluminescence of GaN/AlGaN quantum wells: valence band
  râ€¦' abs_len= 958
[22:58:33] main | running function= Background
[22:58:33] select | function= Background | candidates_in= 20
[22:58:33] select | core_terms= ['GaN', 'AlGaN', 'quantum wells', 'valence band ordering', 'excitonic properties', 'GaN/AlGaN']
[22:58:33] select | no cosine prune; kept=20/20
[22:58:33] select | pool_size= 10 | ranks= [0, 1, 2, 3, 4, 5, 6, 7, 8, 9] | pids= ['cond-mat/0101069', 'cond-mat/0101459', 'cond-mat/0102506', 'cond-mat/0103461', 'cond-mat/0102343', 'cond-mat/0104316', 'cond-mat/0103469', 'quant-ph/0103164', 'cond-mat/0103351', 'cond-mat/0101105']
[22:58:33] select | verify relaxed 1/10
[22:58:33] verify | func= Background | rank= 0 | pid= cond-mat/0101069 | title_snip='Magneto-photoluminescence of GaN/AlGaN quantum wells: valence band
  râ€¦' | abs_len= 958
[22:58:36] verify | result supports= True fit= 0.80 top= 0.90 invalid= â€” cue_hint= False
[22:58:36] select | verify relaxed 2/10
[22:58:36] verify | func= Background | rank= 1 | pid= cond-mat/0101459 | title_snip='Theory of coherent acoustic phonons in InGaN/GaN multi-quantum wells' | abs_len= 776
[22:58:39] verify | result supports= False fit= 0.00 top= 0.00 invalid= no_quote cue_hint= False
[22:58:39] select | verify relaxed 3/10
[22:58:39] verify | func= Background | rank= 2 | pid= cond-mat/0102506 | title_snip='Electronic and Optical Properties of Self-Assembled Quantum Wires' | abs_len= 1063
[22:58:41] verify | result supports= False fit= 0.00 top= 0.00 invalid= no_quote cue_hint= False
[22:58:41] select | verify relaxed 4/10
[22:58:41] verify | func= Background | rank= 3 | pid= cond-mat/0103461 | title_snip='Electron transport and intrinsic mobility limits in two-dimensional
  â€¦' | abs_len= 659
[22:58:44] verify | result supports= False fit= 0.00 top= 0.20 invalid= â€” cue_hint= False
[22:58:44] select | verify relaxed 5/10
[22:58:44] verify | func= Background | rank= 4 | pid= cond-mat/0102343 | title_snip='Spinwaves and large electron-phonon coupling near the metal-insulator
â€¦' | abs_len= 823
[22:58:47] verify | result supports= False fit= 0.00 top= 0.00 invalid= no_quote cue_hint= False
[22:58:47] select | verify relaxed 6/10
[22:58:47] verify | func= Background | rank= 5 | pid= cond-mat/0104316 | title_snip='Coulomb correlation and magnetic ordering in double-layered manganitesâ€¦' | abs_len= 1106
[22:58:49] verify | result supports= False fit= 0.00 top= 0.00 invalid= no_quote cue_hint= False
[22:58:49] select | verify relaxed 7/10
[22:58:49] verify | func= Background | rank= 6 | pid= cond-mat/0103469 | title_snip='Giant anharmonicity and non-linear electron-phonon coupling in
  MgB$_â€¦' | abs_len= 736
[22:58:52] verify | result supports= False fit= 0.00 top= 0.00 invalid= no_quote cue_hint= False
[22:58:52] select | verify relaxed 8/10
[22:58:52] verify | func= Background | rank= 7 | pid= quant-ph/0103164 | title_snip='The Local Larmor Clock, Partial Densities of States, and Mesoscopic
  â€¦' | abs_len= 1631
[22:58:54] verify | result supports= False fit= 0.00 top= 0.00 invalid= no_quote cue_hint= False
[22:58:54] select | verify relaxed 9/10
[22:58:54] verify | func= Background | rank= 8 | pid= cond-mat/0103351 | title_snip='Electronic states and optical properties of GaAs/AlAs and GaAs/vacuum
â€¦' | abs_len= 1153
[22:58:57] verify | result supports= False fit= 0.00 top= 0.00 invalid= no_quote cue_hint= False
[22:58:57] select | verify relaxed 10/10
[22:58:57] verify | func= Background | rank= 9 | pid= cond-mat/0101105 | title_snip='External losses in photoemission from strongly correlated quasi
  two-â€¦' | abs_len= 1498
[22:58:59] verify | result supports= False fit= 0.00 top= 0.00 invalid= no_quote cue_hint= False

================================================================================
FUNCTION: Background
QUERY   : What background information about GaN/AlGaN quantum wells motivates the current study on their valence band ordering and excitonic properties?
- WINNER: cond-mat/0101069 | Magneto-photoluminescence of GaN/AlGaN quantum wells: valence band
  reordering and excitonic binding energies
- QUOTE : A re-ordered valence band in GaN/AlGaN quantum wells
- WHY   : sufficient
- ANSWER: The background for the current study on GaN/AlGaN quantum wells is their unique valence band structure, which is altered by strain in the AlGaN barriers (cond-mat/0101069).
[22:59:03] main | running function= Motivation
[22:59:03] select | function= Motivation | candidates_in= 20
[22:59:03] select | core_terms= ['GaN', 'AlGaN', 'quantum wells', 'valence band ordering', 'excitonic properties', 'GaN/AlGaN']
[22:59:03] select | no cosine prune; kept=20/20
[22:59:03] select | pool_size= 10 | ranks= [0, 1, 2, 3, 4, 5, 6, 7, 8, 9] | pids= ['cond-mat/0101069', 'cond-mat/0101459', 'cond-mat/0102506', 'cond-mat/0103461', 'cond-mat/0102343', 'cond-mat/0104316', 'cond-mat/0103469', 'quant-ph/0103164', 'cond-mat/0103351', 'cond-mat/0101105']
[22:59:03] select | verify relaxed 1/10
[22:59:03] verify | func= Motivation | rank= 0 | pid= cond-mat/0101069 | title_snip='Magneto-photoluminescence of GaN/AlGaN quantum wells: valence band
  râ€¦' | abs_len= 958
[22:59:07] verify | result supports= True fit= 0.80 top= 0.90 invalid= â€” cue_hint= False
[22:59:07] select | verify relaxed 2/10
[22:59:07] verify | func= Motivation | rank= 1 | pid= cond-mat/0101459 | title_snip='Theory of coherent acoustic phonons in InGaN/GaN multi-quantum wells' | abs_len= 776
[22:59:09] verify | result supports= False fit= 0.00 top= 0.00 invalid= no_quote cue_hint= False
[22:59:09] select | verify relaxed 3/10
[22:59:09] verify | func= Motivation | rank= 2 | pid= cond-mat/0102506 | title_snip='Electronic and Optical Properties of Self-Assembled Quantum Wires' | abs_len= 1063
[22:59:12] verify | result supports= False fit= 0.00 top= 0.00 invalid= no_quote cue_hint= False
[22:59:12] select | verify relaxed 4/10
[22:59:12] verify | func= Motivation | rank= 3 | pid= cond-mat/0103461 | title_snip='Electron transport and intrinsic mobility limits in two-dimensional
  â€¦' | abs_len= 659
[22:59:15] verify | result supports= False fit= 0.00 top= 0.20 invalid= â€” cue_hint= False
[22:59:15] select | verify relaxed 5/10
[22:59:15] verify | func= Motivation | rank= 4 | pid= cond-mat/0102343 | title_snip='Spinwaves and large electron-phonon coupling near the metal-insulator
â€¦' | abs_len= 823
[22:59:17] verify | result supports= False fit= 0.00 top= 0.00 invalid= no_quote cue_hint= False
[22:59:17] select | verify relaxed 6/10
[22:59:17] verify | func= Motivation | rank= 5 | pid= cond-mat/0104316 | title_snip='Coulomb correlation and magnetic ordering in double-layered manganitesâ€¦' | abs_len= 1106
[22:59:20] verify | result supports= False fit= 0.00 top= 0.00 invalid= no_quote cue_hint= False
[22:59:20] select | verify relaxed 7/10
[22:59:20] verify | func= Motivation | rank= 6 | pid= cond-mat/0103469 | title_snip='Giant anharmonicity and non-linear electron-phonon coupling in
  MgB$_â€¦' | abs_len= 736
[22:59:22] verify | result supports= False fit= 0.00 top= 0.00 invalid= no_quote cue_hint= False
[22:59:22] select | verify relaxed 8/10
[22:59:22] verify | func= Motivation | rank= 7 | pid= quant-ph/0103164 | title_snip='The Local Larmor Clock, Partial Densities of States, and Mesoscopic
  â€¦' | abs_len= 1631
[22:59:25] verify | result supports= False fit= 0.00 top= 0.00 invalid= no_quote cue_hint= False
[22:59:25] select | verify relaxed 9/10
[22:59:25] verify | func= Motivation | rank= 8 | pid= cond-mat/0103351 | title_snip='Electronic states and optical properties of GaAs/AlAs and GaAs/vacuum
â€¦' | abs_len= 1153
[22:59:27] verify | result supports= False fit= 0.00 top= 0.00 invalid= no_quote cue_hint= False
[22:59:27] select | verify relaxed 10/10
[22:59:27] verify | func= Motivation | rank= 9 | pid= cond-mat/0101105 | title_snip='External losses in photoemission from strongly correlated quasi
  two-â€¦' | abs_len= 1498
[22:59:30] verify | result supports= False fit= 0.00 top= 0.00 invalid= no_quote cue_hint= False

================================================================================
FUNCTION: Motivation
QUERY   : What background information about GaN/AlGaN quantum wells motivates the current study on their valence band ordering and excitonic properties?
- WINNER: cond-mat/0101069 | Magneto-photoluminescence of GaN/AlGaN quantum wells: valence band
  reordering and excitonic binding energies
- QUOTE : A re-ordered valence band in GaN/AlGaN quantum wells
- WHY   : sufficient
- ANSWER: The current study is motivated by the need to understand the valence band ordering and excitonic properties in GaN/AlGaN quantum wells, which is important due to the observed differences in valence band structure compared to GaN epilayers. This difference has significant implications for the behavior of excitons in these quantum wells (cond-mat/0101069).

ðŸ“„ Saved: outputs/function_selection_results.json
ðŸ“„ Saved: outputs/function_selection_results.jsonl
ðŸ“ Answers-only: outputs/function_answers.txt
-> /home/anpa439f/anaconda3/envs/myenv/bin/python3 /data/horse/ws/anpa439f-Function_Retrieval_Citation/Research_Project/RetrievalAugmentedGeneration/classifying_question.py  (cwd=/data/horse/ws/anpa439f-Function_Retrieval_Citation/Research_Project/RetrievalAugmentedGeneration)
âœ… Saved to classified_outputs.jsonl
ðŸ”§ Ready for retrieval module (.py).
-> /home/anpa439f/anaconda3/envs/myenv/bin/python3 /data/horse/ws/anpa439f-Function_Retrieval_Citation/Research_Project/RetrievalAugmentedGeneration/Retreival_query_based.py --skip-reindex --index /data/horse/ws/anpa439f-Function_Retrieval_Citation/Research_Project/e5_index_subset_1/index.faiss --meta /data/horse/ws/anpa439f-Function_Retrieval_Citation/Research_Project/e5_index_subset_1/meta.parquet --topk 20  (cwd=/data/horse/ws/anpa439f-Function_Retrieval_Citation/Research_Project/RetrievalAugmentedGeneration)
âœ… Top-k candidates: /data/horse/ws/anpa439f-Function_Retrieval_Citation/Research_Project/RetrievalAugmentedGeneration/outputs/topk_candidates_query.jsonl
ðŸ”— Symlinked: /data/horse/ws/anpa439f-Function_Retrieval_Citation/Research_Project/outputs/topk_candidates_query.jsonl -> /data/horse/ws/anpa439f-Function_Retrieval_Citation/Research_Project/RetrievalAugmentedGeneration/outputs/topk_candidates_query.jsonl
-> /home/anpa439f/anaconda3/envs/myenv/bin/python3 /data/horse/ws/anpa439f-Function_Retrieval_Citation/Research_Project/RetrievalAugmentedGeneration/function_based_answer-2.py --debug --max-check 10  (cwd=/data/horse/ws/anpa439f-Function_Retrieval_Citation/Research_Project/RetrievalAugmentedGeneration)

ðŸŽ‰ Pipeline complete.
  â€¢ Classified file : /data/horse/ws/anpa439f-Function_Retrieval_Citation/Research_Project/RetrievalAugmentedGeneration/classified_outputs.jsonl
  â€¢ TopK (canonical): /data/horse/ws/anpa439f-Function_Retrieval_Citation/Research_Project/RetrievalAugmentedGeneration/outputs/topk_candidates_query.jsonl
  â€¢ Final outputs   : /data/horse/ws/anpa439f-Function_Retrieval_Citation/Research_Project/RetrievalAugmentedGeneration/outputs
