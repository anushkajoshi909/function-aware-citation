âœ… Available Models:
1. alias-code
2. alias-reasoning
3. alias-image-generation
4. alias-vision
5. alias-ha
6. meta-llama/Llama-3.3-70B-Instruct
7. meta-llama/Llama-3.1-8B-Instruct
8. Qwen/Qwen2-VL-7B-Instruct
9. openGPT-X/Teuken-7B-instruct-research-v0.4
10. deepseek-ai/DeepSeek-Coder-V2-Lite-Instruct
11. Qwen/Qwen3-Coder-30B-A3B-Instruct
12. Qwen/Qwen3-Embedding-4B
13. stabilityai/stable-diffusion-3.5-large-turbo
14. black-forest-labs/FLUX.1-dev
15. openai/whisper-large-v3
16. Kokoro-82M
17. tts-1-hd
18. deepseek-ai/DeepSeek-R1
19. openai/gpt-oss-120b
20. meta-llama/Llama-4-Scout-17B-16E-Instruct

ðŸ‘‰ Select a model number (default = 1): 
âœ… Using model: openai/gpt-oss-120b

ðŸ” Enter a scientific query or topic: 
ðŸ”Ž Citation Function Classification:
{
  "citation_functions": [
    "Uses",
    "Compares"
  ],
  "justification": "The query asks how the current work employs prior studies (Uses) and how it is evaluated against them (Compares)."
}

âœ… Saved to classified_outputs.jsonl
ðŸ”§ Ready for retrieval module (handled in a separate file).
âš¡ SKIP_REINDEX=1 â€” using existing FAISS index + meta; not scanning raw JSONL shards.
âœ… Top-k candidates (FAISS): /data/horse/ws/anpa439f-Function_Retrieval_Citation/Research_Project/RetrievalAugmentedGeneration/outputs/topk_candidates_query.jsonl
[00:32:07] main | args: Namespace(max_check=10, debug=True)
[00:32:07] read_last_jsonl | path= classified_outputs.jsonl
[00:32:07] read_last_jsonl | total_lines= 1
[00:32:07] main | query='How does the current work use and compare with previous studies of circumstellar disks around classical T Tauri stars?' | funcs=['Uses', 'Compares']
[00:32:09] main | core_terms= ['classical T Tauri stars', 'circumstellar disks', 'previous studies']
[00:32:09] load_topk_jsonl | path= /data/horse/ws/anpa439f-Function_Retrieval_Citation/Research_Project/outputs/topk_candidates_query.jsonl
[00:32:09] load_topk_jsonl | rows= 20
[00:32:09] load_topk_jsonl | first: rank= 0 paper_id= astro-ph/0103458 title_snip='Near-infrared coronagraphic imaging of the circumstellar disk around Tâ€¦' abs_len= 1107
[00:32:09] main | running function= Uses
[00:32:09] select | function= Uses | candidates_in= 20
[00:32:09] select | core_terms= ['classical T Tauri stars', 'circumstellar disks', 'previous studies']
[00:32:09] select | no cosine prune; kept=20/20
[00:32:09] select | pool_size= 10 | ranks= [0, 1, 2, 3, 4, 5, 6, 7, 8, 9] | pids= ['astro-ph/0103458', 'astro-ph/0103174', 'astro-ph/0103461', 'astro-ph/0104158', 'astro-ph/0104318', 'astro-ph/0101309', 'astro-ph/0104066', 'astro-ph/0103311', 'astro-ph/0103098', 'astro-ph/0104274']
[00:32:09] select | verify relaxed 1/10
[00:32:09] verify | func= Uses | rank= 0 | pid= astro-ph/0103458 | title_snip='Near-infrared coronagraphic imaging of the circumstellar disk around Tâ€¦' | abs_len= 1107
[00:32:12] verify | result supports= True fit= 0.80 top= 0.90 invalid= â€” cue_hint= False
[00:32:12] select | verify relaxed 2/10
[00:32:12] verify | func= Uses | rank= 1 | pid= astro-ph/0103174 | title_snip='Atomic T Tauri disk winds heated by ambipolar diffusion' | abs_len= 1124
[00:32:15] verify | result supports= False fit= 0.00 top= 0.90 invalid= off_topic_no_core_in_abstract cue_hint= False
[00:32:15] select | verify relaxed 3/10
[00:32:15] verify | func= Uses | rank= 2 | pid= astro-ph/0103461 | title_snip='Observations of Circumstellar Disks' | abs_len= 1289
[00:32:17] verify | result supports= False fit= 0.00 top= 0.80 invalid= no_quote cue_hint= False
[00:32:17] select | verify relaxed 4/10
[00:32:17] verify | func= Uses | rank= 3 | pid= astro-ph/0104158 | title_snip='Dust to Dust: Evidence for Planet Formation?' | abs_len= 1120
[00:32:20] verify | result supports= False fit= 0.00 top= 0.90 invalid= off_topic_no_core_in_abstract cue_hint= False
[00:32:20] select | verify relaxed 5/10
[00:32:20] verify | func= Uses | rank= 4 | pid= astro-ph/0104318 | title_snip='Coronal structure geometries on pre-main sequence stars' | abs_len= 1473
[00:32:24] verify | result supports= False fit= 0.00 top= 0.50 invalid= â€” cue_hint= False
[00:32:24] select | verify relaxed 6/10
[00:32:24] verify | func= Uses | rank= 5 | pid= astro-ph/0101309 | title_snip='A Three Micron Survey of the Chamaeleon I Dark Cloud' | abs_len= 739
[00:32:27] verify | result supports= False fit= 0.00 top= 0.50 invalid= â€” cue_hint= False
[00:32:27] select | verify relaxed 7/10
[00:32:27] verify | func= Uses | rank= 6 | pid= astro-ph/0104066 | title_snip='High-resolution Near-Infrared Images and Models of the Circumstellar
 â€¦' | abs_len= 1144
[00:32:30] verify | result supports= False fit= 0.00 top= 0.90 invalid= off_topic_no_core_in_abstract cue_hint= False
[00:32:30] select | verify relaxed 8/10
[00:32:30] verify | func= Uses | rank= 7 | pid= astro-ph/0103311 | title_snip='Circumstellar structure of RU Lupi down to au scales' | abs_len= 1189
[00:32:33] verify | result supports= False fit= 0.00 top= 0.50 invalid= â€” cue_hint= False
[00:32:33] select | verify relaxed 9/10
[00:32:33] verify | func= Uses | rank= 8 | pid= astro-ph/0103098 | title_snip='Observational Constraints on the Formation and Evolution of Binary Staâ€¦' | abs_len= 1734
[00:32:36] verify | result supports= False fit= 0.00 top= 0.90 invalid= off_topic_no_core_in_abstract cue_hint= False
[00:32:36] select | verify relaxed 10/10
[00:32:36] verify | func= Uses | rank= 9 | pid= astro-ph/0104274 | title_snip='HST/NICMOS detection of a partially embedded, intermediate-mass
  pre-â€¦' | abs_len= 1113
[00:32:39] verify | result supports= False fit= 0.00 top= 0.20 invalid= â€” cue_hint= False

================================================================================
FUNCTION: Uses
QUERY   : How does the current work use and compare with previous studies of circumstellar disks around classical T Tauri stars?
- WINNER: astro-ph/0103458 | Near-infrared coronagraphic imaging of the circumstellar disk around TW
  Hydrae
- QUOTE : disks around classical T Tauri stars
- WHY   : sufficient
- ANSWER: The current work uses near-infrared coronagraphic imaging to study the circumstellar disk around TW Hydrae, a classical T Tauri star. This method is applied to derive disk properties, such as mass and inner radius, and compare them with those of disks around classical T Tauri stars in more distant molecular clouds (astro-ph/0103458).
[00:32:44] main | running function= Compares
[00:32:44] select | function= Compares | candidates_in= 20
[00:32:44] select | core_terms= ['classical T Tauri stars', 'circumstellar disks', 'previous studies']
[00:32:44] select | no cosine prune; kept=20/20
[00:32:44] select | pool_size= 10 | ranks= [0, 1, 2, 3, 4, 5, 6, 7, 8, 9] | pids= ['astro-ph/0103458', 'astro-ph/0103174', 'astro-ph/0103461', 'astro-ph/0104158', 'astro-ph/0104318', 'astro-ph/0101309', 'astro-ph/0104066', 'astro-ph/0103311', 'astro-ph/0103098', 'astro-ph/0104274']
[00:32:44] select | verify relaxed 1/10
[00:32:44] verify | func= Compares | rank= 0 | pid= astro-ph/0103458 | title_snip='Near-infrared coronagraphic imaging of the circumstellar disk around Tâ€¦' | abs_len= 1107
[00:32:47] verify | result supports= True fit= 0.80 top= 0.90 invalid= â€” cue_hint= False
[00:32:47] select | verify relaxed 2/10
[00:32:47] verify | func= Compares | rank= 1 | pid= astro-ph/0103174 | title_snip='Atomic T Tauri disk winds heated by ambipolar diffusion' | abs_len= 1124
[00:32:50] verify | result supports= False fit= 0.00 top= 0.90 invalid= off_topic_no_core_in_abstract cue_hint= False
[00:32:50] select | verify relaxed 3/10
[00:32:50] verify | func= Compares | rank= 2 | pid= astro-ph/0103461 | title_snip='Observations of Circumstellar Disks' | abs_len= 1289
[00:32:53] verify | result supports= False fit= 0.00 top= 0.80 invalid= no_quote cue_hint= False
[00:32:53] select | verify relaxed 4/10
[00:32:53] verify | func= Compares | rank= 3 | pid= astro-ph/0104158 | title_snip='Dust to Dust: Evidence for Planet Formation?' | abs_len= 1120
[00:32:56] verify | result supports= False fit= 0.00 top= 0.90 invalid= off_topic_no_core_in_abstract cue_hint= False
[00:32:56] select | verify relaxed 5/10
[00:32:56] verify | func= Compares | rank= 4 | pid= astro-ph/0104318 | title_snip='Coronal structure geometries on pre-main sequence stars' | abs_len= 1473
[00:32:59] verify | result supports= False fit= 0.00 top= 0.20 invalid= â€” cue_hint= False
[00:32:59] select | verify relaxed 6/10
[00:32:59] verify | func= Compares | rank= 5 | pid= astro-ph/0101309 | title_snip='A Three Micron Survey of the Chamaeleon I Dark Cloud' | abs_len= 739
[00:33:02] verify | result supports= True fit= 0.80 top= 0.90 invalid= â€” cue_hint= False
[00:33:02] select | verify relaxed 7/10
[00:33:02] verify | func= Compares | rank= 6 | pid= astro-ph/0104066 | title_snip='High-resolution Near-Infrared Images and Models of the Circumstellar
 â€¦' | abs_len= 1144
[00:33:06] verify | result supports= False fit= 0.00 top= 0.90 invalid= off_topic_no_core_in_abstract cue_hint= False
[00:33:06] select | verify relaxed 8/10
[00:33:06] verify | func= Compares | rank= 7 | pid= astro-ph/0103311 | title_snip='Circumstellar structure of RU Lupi down to au scales' | abs_len= 1189
[00:33:09] verify | result supports= False fit= 0.00 top= 0.50 invalid= â€” cue_hint= False
[00:33:09] select | verify relaxed 9/10
[00:33:09] verify | func= Compares | rank= 8 | pid= astro-ph/0103098 | title_snip='Observational Constraints on the Formation and Evolution of Binary Staâ€¦' | abs_len= 1734
[00:33:12] verify | result supports= False fit= 0.00 top= 0.90 invalid= off_topic_no_core_in_abstract cue_hint= False
[00:33:12] select | verify relaxed 10/10
[00:33:12] verify | func= Compares | rank= 9 | pid= astro-ph/0104274 | title_snip='HST/NICMOS detection of a partially embedded, intermediate-mass
  pre-â€¦' | abs_len= 1113
[00:33:15] verify | result supports= False fit= 0.00 top= 0.20 invalid= â€” cue_hint= False

================================================================================
FUNCTION: Compares
QUERY   : How does the current work use and compare with previous studies of circumstellar disks around classical T Tauri stars?
- WINNER: astro-ph/0103458 | Near-infrared coronagraphic imaging of the circumstellar disk around TW
  Hydrae
- QUOTE : similar to those of disks around classical T Tauri stars
- WHY   : sufficient
- ANSWER: The current work compares its near-infrared imaging results of the circumstellar disk around TW Hydrae to previous images from the Hubble Space Telescope and the Very Large Array, finding agreement in disk morphology. The derived disk properties are also compared to those of disks around classical T Tauri stars in more distant molecular clouds, showing similar characteristics (astro-ph/0103458).

ðŸ“„ Saved: outputs/function_selection_results.json
ðŸ“„ Saved: outputs/function_selection_results.jsonl
ðŸ“ Answers-only: outputs/function_answers.txt
-> /home/anpa439f/anaconda3/envs/myenv/bin/python3 /data/horse/ws/anpa439f-Function_Retrieval_Citation/Research_Project/RetrievalAugmentedGeneration/classifying_question.py  (cwd=/data/horse/ws/anpa439f-Function_Retrieval_Citation/Research_Project/RetrievalAugmentedGeneration)
âœ… Saved to classified_outputs.jsonl
ðŸ”§ Ready for retrieval module (.py).
-> /home/anpa439f/anaconda3/envs/myenv/bin/python3 /data/horse/ws/anpa439f-Function_Retrieval_Citation/Research_Project/RetrievalAugmentedGeneration/Retreival_query_based.py --skip-reindex --index /data/horse/ws/anpa439f-Function_Retrieval_Citation/Research_Project/e5_index_subset_1/index.faiss --meta /data/horse/ws/anpa439f-Function_Retrieval_Citation/Research_Project/e5_index_subset_1/meta.parquet --topk 20  (cwd=/data/horse/ws/anpa439f-Function_Retrieval_Citation/Research_Project/RetrievalAugmentedGeneration)
âœ… Top-k candidates: /data/horse/ws/anpa439f-Function_Retrieval_Citation/Research_Project/RetrievalAugmentedGeneration/outputs/topk_candidates_query.jsonl
ðŸ”— Symlinked: /data/horse/ws/anpa439f-Function_Retrieval_Citation/Research_Project/outputs/topk_candidates_query.jsonl -> /data/horse/ws/anpa439f-Function_Retrieval_Citation/Research_Project/RetrievalAugmentedGeneration/outputs/topk_candidates_query.jsonl
-> /home/anpa439f/anaconda3/envs/myenv/bin/python3 /data/horse/ws/anpa439f-Function_Retrieval_Citation/Research_Project/RetrievalAugmentedGeneration/function_based_answer-2.py --debug --max-check 10  (cwd=/data/horse/ws/anpa439f-Function_Retrieval_Citation/Research_Project/RetrievalAugmentedGeneration)

ðŸŽ‰ Pipeline complete.
  â€¢ Classified file : /data/horse/ws/anpa439f-Function_Retrieval_Citation/Research_Project/RetrievalAugmentedGeneration/classified_outputs.jsonl
  â€¢ TopK (canonical): /data/horse/ws/anpa439f-Function_Retrieval_Citation/Research_Project/RetrievalAugmentedGeneration/outputs/topk_candidates_query.jsonl
  â€¢ Final outputs   : /data/horse/ws/anpa439f-Function_Retrieval_Citation/Research_Project/RetrievalAugmentedGeneration/outputs
