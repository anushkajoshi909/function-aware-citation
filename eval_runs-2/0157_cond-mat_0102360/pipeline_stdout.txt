âœ… Available Models:
1. alias-code
2. alias-reasoning
3. alias-image-generation
4. alias-vision
5. alias-ha
6. meta-llama/Llama-3.3-70B-Instruct
7. meta-llama/Llama-3.1-8B-Instruct
8. Qwen/Qwen2-VL-7B-Instruct
9. openGPT-X/Teuken-7B-instruct-research-v0.4
10. deepseek-ai/DeepSeek-Coder-V2-Lite-Instruct
11. Qwen/Qwen3-Coder-30B-A3B-Instruct
12. Qwen/Qwen3-Embedding-4B
13. stabilityai/stable-diffusion-3.5-large-turbo
14. black-forest-labs/FLUX.1-dev
15. openai/whisper-large-v3
16. Kokoro-82M
17. tts-1-hd
18. deepseek-ai/DeepSeek-R1
19. openai/gpt-oss-120b
20. meta-llama/Llama-4-Scout-17B-16E-Instruct

ðŸ‘‰ Select a model number (default = 1): 
âœ… Using model: openai/gpt-oss-120b

ðŸ” Enter a scientific query or topic: 
ðŸ”Ž Citation Function Classification:
{
  "citation_functions": [
    "Background"
  ],
  "justification": "Fallback: classifier did not return a valid object."
}

âœ… Saved to classified_outputs.jsonl
ðŸ”§ Ready for retrieval module (handled in a separate file).
âš¡ SKIP_REINDEX=1 â€” using existing FAISS index + meta; not scanning raw JSONL shards.
âœ… Top-k candidates (FAISS): /data/horse/ws/anpa439f-Function_Retrieval_Citation/Research_Project/RetrievalAugmentedGeneration/outputs/topk_candidates_query.jsonl
[00:35:03] main | args: Namespace(max_check=10, debug=True)
[00:35:03] read_last_jsonl | path= classified_outputs.jsonl
[00:35:03] read_last_jsonl | total_lines= 1
[00:35:03] main | query='What problem or limitation in previous work motivated the extension of the semiclassical model of the collective atomic recoil laser, and what methods or results from previous work are used in this extension?' | funcs=['Background']
[00:35:05] main | core_terms= ['collective atomic recoil laser', 'semiclassical model']
[00:35:05] load_topk_jsonl | path= /data/horse/ws/anpa439f-Function_Retrieval_Citation/Research_Project/outputs/topk_candidates_query.jsonl
[00:35:05] load_topk_jsonl | rows= 20
[00:35:05] load_topk_jsonl | first: rank= 0 paper_id= cond-mat/0102360 title_snip='Quantum effects in the collective light scattering by coherent atomic
â€¦' abs_len= 1269
[00:35:05] main | running function= Background
[00:35:05] select | function= Background | candidates_in= 20
[00:35:05] select | core_terms= ['collective atomic recoil laser', 'semiclassical model']
[00:35:05] select | no cosine prune; kept=20/20
[00:35:05] select | pool_size= 10 | ranks= [0, 1, 2, 3, 4, 5, 6, 7, 8, 9] | pids= ['cond-mat/0102360', 'nlin/0104041', 'hep-ph/0101297', 'hep-th/0103228', 'hep-ph/0102144', 'hep-ph/0103129', 'nlin/0101055', 'astro-ph/0101222', 'hep-ph/0101318', 'nlin/0101007']
[00:35:05] select | verify relaxed 1/10
[00:35:05] verify | func= Background | rank= 0 | pid= cond-mat/0102360 | title_snip='Quantum effects in the collective light scattering by coherent atomic
â€¦' | abs_len= 1269
[00:35:08] verify | result supports= True fit= 0.80 top= 0.90 invalid= â€” cue_hint= False
[00:35:08] select | verify relaxed 2/10
[00:35:08] verify | func= Background | rank= 1 | pid= nlin/0104041 | title_snip='Semiclassical description of shell effects in finite fermion systems' | abs_len= 745
[00:35:11] verify | result supports= False fit= 0.00 top= 0.00 invalid= no_quote cue_hint= False
[00:35:11] select | verify relaxed 3/10
[00:35:11] verify | func= Background | rank= 2 | pid= hep-ph/0101297 | title_snip='Bilocal expansion of the Borel amplitude and the hadronic tau decay
  â€¦' | abs_len= 1398
[00:35:13] verify | result supports= False fit= 0.00 top= 0.00 invalid= no_quote cue_hint= False
[00:35:13] select | verify relaxed 4/10
[00:35:13] verify | func= Background | rank= 3 | pid= hep-th/0103228 | title_snip='New Approach to Quantum Field Theory for Arbitrary Observers in
  Elecâ€¦' | abs_len= 1692
[00:35:16] verify | result supports= False fit= 0.00 top= 0.00 invalid= no_quote cue_hint= False
[00:35:16] select | verify relaxed 5/10
[00:35:16] verify | func= Background | rank= 4 | pid= hep-ph/0102144 | title_snip='Extra Families, Higgs Spectrum and Oblique Corrections' | abs_len= 1305
[00:35:18] verify | result supports= False fit= 0.00 top= 0.00 invalid= no_quote cue_hint= False
[00:35:18] select | verify relaxed 6/10
[00:35:18] verify | func= Background | rank= 5 | pid= hep-ph/0103129 | title_snip='The Meson Mass Spectrum from a Systematically Renormalized Light-Frontâ€¦' | abs_len= 1448
[00:35:21] verify | result supports= False fit= 0.00 top= 0.00 invalid= no_quote cue_hint= False
[00:35:21] select | verify relaxed 7/10
[00:35:21] verify | func= Background | rank= 6 | pid= nlin/0101055 | title_snip='A new class of semiclassical wave function uniformizations' | abs_len= 425
[00:35:23] verify | result supports= False fit= 0.00 top= 0.00 invalid= no_quote cue_hint= False
[00:35:23] select | verify relaxed 8/10
[00:35:23] verify | func= Background | rank= 7 | pid= astro-ph/0101222 | title_snip='Damping time and stability of density fermion perturbations in the
  eâ€¦' | abs_len= 1202
[00:35:26] verify | result supports= False fit= 0.00 top= 0.00 invalid= no_quote cue_hint= False
[00:35:26] select | verify relaxed 9/10
[00:35:26] verify | func= Background | rank= 8 | pid= hep-ph/0101318 | title_snip='Mesons on a transverse lattice' | abs_len= 1033
[00:35:28] verify | result supports= False fit= 0.00 top= 0.00 invalid= no_quote cue_hint= False
[00:35:28] select | verify relaxed 10/10
[00:35:28] verify | func= Background | rank= 9 | pid= nlin/0101007 | title_snip='Periodic Orbit Quantization: How to Make Semiclassical Trace Formulae
â€¦' | abs_len= 1057
[00:35:31] verify | result supports= False fit= 0.00 top= 0.00 invalid= no_quote cue_hint= False

================================================================================
FUNCTION: Background
QUERY   : What problem or limitation in previous work motivated the extension of the semiclassical model of the collective atomic recoil laser, and what methods or results from previous work are used in this extension?
- WINNER: cond-mat/0102360 | Quantum effects in the collective light scattering by coherent atomic
  recoil in a Bose-Einstein condensate
- QUOTE : We extend the semiclassical model of the collective atomic recoil laser
- WHY   : sufficient
- ANSWER: The extension of the semiclassical model of the collective atomic recoil laser was motivated by the need to include quantum mechanical effects, particularly for cases where the average atomic momentum is less than the recoil momentum (cond-mat/0102360).

ðŸ“„ Saved: outputs/function_selection_results.json
ðŸ“„ Saved: outputs/function_selection_results.jsonl
ðŸ“ Answers-only: outputs/function_answers.txt
-> /home/anpa439f/anaconda3/envs/myenv/bin/python3 /data/horse/ws/anpa439f-Function_Retrieval_Citation/Research_Project/RetrievalAugmentedGeneration/classifying_question.py  (cwd=/data/horse/ws/anpa439f-Function_Retrieval_Citation/Research_Project/RetrievalAugmentedGeneration)
âœ… Saved to classified_outputs.jsonl
ðŸ”§ Ready for retrieval module (.py).
-> /home/anpa439f/anaconda3/envs/myenv/bin/python3 /data/horse/ws/anpa439f-Function_Retrieval_Citation/Research_Project/RetrievalAugmentedGeneration/Retreival_query_based.py --skip-reindex --index /data/horse/ws/anpa439f-Function_Retrieval_Citation/Research_Project/e5_index_subset_1/index.faiss --meta /data/horse/ws/anpa439f-Function_Retrieval_Citation/Research_Project/e5_index_subset_1/meta.parquet --topk 20  (cwd=/data/horse/ws/anpa439f-Function_Retrieval_Citation/Research_Project/RetrievalAugmentedGeneration)
âœ… Top-k candidates: /data/horse/ws/anpa439f-Function_Retrieval_Citation/Research_Project/RetrievalAugmentedGeneration/outputs/topk_candidates_query.jsonl
ðŸ”— Symlinked: /data/horse/ws/anpa439f-Function_Retrieval_Citation/Research_Project/outputs/topk_candidates_query.jsonl -> /data/horse/ws/anpa439f-Function_Retrieval_Citation/Research_Project/RetrievalAugmentedGeneration/outputs/topk_candidates_query.jsonl
-> /home/anpa439f/anaconda3/envs/myenv/bin/python3 /data/horse/ws/anpa439f-Function_Retrieval_Citation/Research_Project/RetrievalAugmentedGeneration/function_based_answer-2.py --debug --max-check 10  (cwd=/data/horse/ws/anpa439f-Function_Retrieval_Citation/Research_Project/RetrievalAugmentedGeneration)

ðŸŽ‰ Pipeline complete.
  â€¢ Classified file : /data/horse/ws/anpa439f-Function_Retrieval_Citation/Research_Project/RetrievalAugmentedGeneration/classified_outputs.jsonl
  â€¢ TopK (canonical): /data/horse/ws/anpa439f-Function_Retrieval_Citation/Research_Project/RetrievalAugmentedGeneration/outputs/topk_candidates_query.jsonl
  â€¢ Final outputs   : /data/horse/ws/anpa439f-Function_Retrieval_Citation/Research_Project/RetrievalAugmentedGeneration/outputs
