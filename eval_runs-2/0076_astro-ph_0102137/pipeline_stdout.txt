âœ… Available Models:
1. alias-code
2. alias-reasoning
3. alias-image-generation
4. alias-vision
5. alias-ha
6. meta-llama/Llama-3.3-70B-Instruct
7. meta-llama/Llama-3.1-8B-Instruct
8. Qwen/Qwen2-VL-7B-Instruct
9. openGPT-X/Teuken-7B-instruct-research-v0.4
10. deepseek-ai/DeepSeek-Coder-V2-Lite-Instruct
11. Qwen/Qwen3-Coder-30B-A3B-Instruct
12. Qwen/Qwen3-Embedding-4B
13. stabilityai/stable-diffusion-3.5-large-turbo
14. black-forest-labs/FLUX.1-dev
15. openai/whisper-large-v3
16. Kokoro-82M
17. tts-1-hd
18. deepseek-ai/DeepSeek-R1
19. openai/gpt-oss-120b
20. meta-llama/Llama-4-Scout-17B-16E-Instruct

ðŸ‘‰ Select a model number (default = 1): 
âœ… Using model: openai/gpt-oss-120b

ðŸ” Enter a scientific query or topic: 
ðŸ”Ž Citation Function Classification:
{
  "citation_functions": [
    "Extends",
    "Uses"
  ],
  "justification": "The query asks how the current study builds upon (extends) prior work and applies (uses) that research to interpret observations."
}

âœ… Saved to classified_outputs.jsonl
ðŸ”§ Ready for retrieval module (handled in a separate file).
âš¡ SKIP_REINDEX=1 â€” using existing FAISS index + meta; not scanning raw JSONL shards.
âœ… Top-k candidates (FAISS): /data/horse/ws/anpa439f-Function_Retrieval_Citation/Research_Project/RetrievalAugmentedGeneration/outputs/topk_candidates_query.jsonl
[22:51:04] main | args: Namespace(max_check=10, debug=True)
[22:51:04] read_last_jsonl | path= classified_outputs.jsonl
[22:51:04] read_last_jsonl | total_lines= 1
[22:51:04] main | query='How does the current work extend and use previous research on magnetospheric accretion to interpret the observed features of RW Aur A?' | funcs=['Extends', 'Uses']
[22:51:06] main | core_terms= ['RW Aur A', 'magnetosphere', 'magnetospheric accretion', 'RW']
[22:51:06] load_topk_jsonl | path= /data/horse/ws/anpa439f-Function_Retrieval_Citation/Research_Project/outputs/topk_candidates_query.jsonl
[22:51:06] load_topk_jsonl | rows= 20
[22:51:06] load_topk_jsonl | first: rank= 0 paper_id= astro-ph/0102137 title_snip='Non-axisymmetric accretion on the classical TTS RW Aur A' abs_len= 1645
[22:51:06] main | running function= Extends
[22:51:06] select | function= Extends | candidates_in= 20
[22:51:06] select | core_terms= ['RW Aur A', 'magnetosphere', 'magnetospheric accretion', 'RW']
[22:51:06] select | no cosine prune; kept=20/20
[22:51:06] select | pool_size= 10 | ranks= [0, 1, 2, 3, 4, 5, 6, 7, 8, 9] | pids= ['astro-ph/0102137', 'astro-ph/0102488', 'astro-ph/0101203', 'astro-ph/0104366', 'astro-ph/0102276', 'astro-ph/0103286', 'hep-ex/0101042', 'hep-ph/0102124', 'gr-qc/0104064', 'astro-ph/0102423']
[22:51:06] select | verify relaxed 1/10
[22:51:06] verify | func= Extends | rank= 0 | pid= astro-ph/0102137 | title_snip='Non-axisymmetric accretion on the classical TTS RW Aur A' | abs_len= 1645
[22:51:09] verify | result supports= True fit= 0.80 top= 0.90 invalid= â€” cue_hint= False
[22:51:09] select | verify relaxed 2/10
[22:51:09] verify | func= Extends | rank= 1 | pid= astro-ph/0102488 | title_snip='Galactic Center: Implications of Recent Chandra Observations for
  Sphâ€¦' | abs_len= 549
[22:51:12] verify | result supports= False fit= 0.00 top= 0.00 invalid= no_quote cue_hint= False
[22:51:12] select | verify relaxed 3/10
[22:51:12] verify | func= Extends | rank= 2 | pid= astro-ph/0101203 | title_snip='Accretion and emission processes in AGN' | abs_len= 1307
[22:51:14] verify | result supports= False fit= 0.00 top= 0.00 invalid= no_quote cue_hint= False
[22:51:14] select | verify relaxed 4/10
[22:51:14] verify | func= Extends | rank= 3 | pid= astro-ph/0104366 | title_snip='Concerning Parameter Estimation Using the Cosmic Microwave Background' | abs_len= 1521
[22:51:17] verify | result supports= False fit= 0.00 top= 0.00 invalid= no_quote cue_hint= False
[22:51:17] select | verify relaxed 5/10
[22:51:17] verify | func= Extends | rank= 4 | pid= astro-ph/0102276 | title_snip='The Pearson-Readhead Survey of Compact Extragalactic Radio Sources Froâ€¦' | abs_len= 1783
[22:51:19] verify | result supports= False fit= 0.00 top= 0.00 invalid= no_quote cue_hint= False
[22:51:19] select | verify relaxed 6/10
[22:51:19] verify | func= Extends | rank= 5 | pid= astro-ph/0103286 | title_snip='Magnetic Field Diagnostics Based on Far-Infrared Polarimetry: Tests
  â€¦' | abs_len= 1733
[22:51:22] verify | result supports= False fit= 0.00 top= 0.00 invalid= no_quote cue_hint= False
[22:51:22] select | verify relaxed 7/10
[22:51:22] verify | func= Extends | rank= 6 | pid= hep-ex/0101042 | title_snip='Status of the BNL Muon g-2 Experiment' | abs_len= 580
[22:51:24] verify | result supports= False fit= 0.00 top= 0.00 invalid= no_quote cue_hint= False
[22:51:24] select | verify relaxed 8/10
[22:51:24] verify | func= Extends | rank= 7 | pid= hep-ph/0102124 | title_snip='New analytic running coupling in spacelike and timelike regions' | abs_len= 1044
[22:51:27] verify | result supports= False fit= 0.00 top= 0.00 invalid= no_quote cue_hint= False
[22:51:27] select | verify relaxed 9/10
[22:51:27] verify | func= Extends | rank= 8 | pid= gr-qc/0104064 | title_snip='Study of the anomalous acceleration of Pioneer 10 and 11' | abs_len= 1281
[22:51:29] verify | result supports= False fit= 0.00 top= 0.00 invalid= no_quote cue_hint= False
[22:51:29] select | verify relaxed 10/10
[22:51:29] verify | func= Extends | rank= 9 | pid= astro-ph/0102423 | title_snip='f(R) gravity theory and CMBR constraints' | abs_len= 881
[22:51:32] verify | result supports= False fit= 0.00 top= 0.00 invalid= no_quote cue_hint= False

================================================================================
FUNCTION: Extends
QUERY   : How does the current work extend and use previous research on magnetospheric accretion to interpret the observed features of RW Aur A?
- WINNER: astro-ph/0102137 | Non-axisymmetric accretion on the classical TTS RW Aur A
- QUOTE : Most of the observed features can be interpreted in the framework of non-axisymmetric magnetospheric accretion
- WHY   : sufficient
- ANSWER: The current work extends previous research on magnetospheric accretion by applying it to the specific case of RW Aur A, interpreting observed features such as periodic modulations in spectral lines and accretion components. This extension provides a framework for understanding the non-axisymmetric accretion processes in this classical T Tauri star (astro-ph/0102137).
[22:51:36] main | running function= Uses
[22:51:36] select | function= Uses | candidates_in= 20
[22:51:36] select | core_terms= ['RW Aur A', 'magnetosphere', 'magnetospheric accretion', 'RW']
[22:51:36] select | no cosine prune; kept=20/20
[22:51:36] select | pool_size= 10 | ranks= [0, 1, 2, 3, 4, 5, 6, 7, 8, 9] | pids= ['astro-ph/0102137', 'astro-ph/0102488', 'astro-ph/0101203', 'astro-ph/0104366', 'astro-ph/0102276', 'astro-ph/0103286', 'hep-ex/0101042', 'hep-ph/0102124', 'gr-qc/0104064', 'astro-ph/0102423']
[22:51:36] select | verify relaxed 1/10
[22:51:36] verify | func= Uses | rank= 0 | pid= astro-ph/0102137 | title_snip='Non-axisymmetric accretion on the classical TTS RW Aur A' | abs_len= 1645
[22:51:40] verify | result supports= True fit= 0.80 top= 0.90 invalid= â€” cue_hint= False
[22:51:40] select | verify relaxed 2/10
[22:51:40] verify | func= Uses | rank= 1 | pid= astro-ph/0102488 | title_snip='Galactic Center: Implications of Recent Chandra Observations for
  Sphâ€¦' | abs_len= 549
[22:51:42] verify | result supports= False fit= 0.00 top= 0.00 invalid= no_quote cue_hint= False
[22:51:42] select | verify relaxed 3/10
[22:51:42] verify | func= Uses | rank= 2 | pid= astro-ph/0101203 | title_snip='Accretion and emission processes in AGN' | abs_len= 1307
[22:51:45] verify | result supports= False fit= 0.00 top= 0.00 invalid= no_quote cue_hint= False
[22:51:45] select | verify relaxed 4/10
[22:51:45] verify | func= Uses | rank= 3 | pid= astro-ph/0104366 | title_snip='Concerning Parameter Estimation Using the Cosmic Microwave Background' | abs_len= 1521
[22:51:47] verify | result supports= False fit= 0.00 top= 0.00 invalid= no_quote cue_hint= False
[22:51:47] select | verify relaxed 5/10
[22:51:47] verify | func= Uses | rank= 4 | pid= astro-ph/0102276 | title_snip='The Pearson-Readhead Survey of Compact Extragalactic Radio Sources Froâ€¦' | abs_len= 1783
[22:51:49] verify | result supports= False fit= 0.00 top= 0.00 invalid= no_quote cue_hint= False
[22:51:49] select | verify relaxed 6/10
[22:51:49] verify | func= Uses | rank= 5 | pid= astro-ph/0103286 | title_snip='Magnetic Field Diagnostics Based on Far-Infrared Polarimetry: Tests
  â€¦' | abs_len= 1733
[22:51:52] verify | result supports= False fit= 0.00 top= 0.00 invalid= no_quote cue_hint= False
[22:51:52] select | verify relaxed 7/10
[22:51:52] verify | func= Uses | rank= 6 | pid= hep-ex/0101042 | title_snip='Status of the BNL Muon g-2 Experiment' | abs_len= 580
[22:51:54] verify | result supports= False fit= 0.00 top= 0.00 invalid= no_quote cue_hint= False
[22:51:54] select | verify relaxed 8/10
[22:51:54] verify | func= Uses | rank= 7 | pid= hep-ph/0102124 | title_snip='New analytic running coupling in spacelike and timelike regions' | abs_len= 1044
[22:51:57] verify | result supports= False fit= 0.00 top= 0.00 invalid= no_quote cue_hint= False
[22:51:57] select | verify relaxed 9/10
[22:51:57] verify | func= Uses | rank= 8 | pid= gr-qc/0104064 | title_snip='Study of the anomalous acceleration of Pioneer 10 and 11' | abs_len= 1281
[22:51:59] verify | result supports= False fit= 0.00 top= 0.00 invalid= no_quote cue_hint= False
[22:51:59] select | verify relaxed 10/10
[22:51:59] verify | func= Uses | rank= 9 | pid= astro-ph/0102423 | title_snip='f(R) gravity theory and CMBR constraints' | abs_len= 881
[22:52:02] verify | result supports= False fit= 0.00 top= 0.00 invalid= no_quote cue_hint= False

================================================================================
FUNCTION: Uses
QUERY   : How does the current work extend and use previous research on magnetospheric accretion to interpret the observed features of RW Aur A?
- WINNER: astro-ph/0102137 | Non-axisymmetric accretion on the classical TTS RW Aur A
- QUOTE : Most of the observed features can be interpreted in the framework of non-axisymmetric magnetospheric accretion
- WHY   : sufficient
- ANSWER: The current work uses the framework of non-axisymmetric magnetospheric accretion to interpret the observed features of RW Aur A. Researchers apply this method to understand the periodic modulations in spectral features and the variations in radial velocities and emission line strengths (astro-ph/0102137).

ðŸ“„ Saved: outputs/function_selection_results.json
ðŸ“„ Saved: outputs/function_selection_results.jsonl
ðŸ“ Answers-only: outputs/function_answers.txt
-> /home/anpa439f/anaconda3/envs/myenv/bin/python3 /data/horse/ws/anpa439f-Function_Retrieval_Citation/Research_Project/RetrievalAugmentedGeneration/classifying_question.py  (cwd=/data/horse/ws/anpa439f-Function_Retrieval_Citation/Research_Project/RetrievalAugmentedGeneration)
âœ… Saved to classified_outputs.jsonl
ðŸ”§ Ready for retrieval module (.py).
-> /home/anpa439f/anaconda3/envs/myenv/bin/python3 /data/horse/ws/anpa439f-Function_Retrieval_Citation/Research_Project/RetrievalAugmentedGeneration/Retreival_query_based.py --skip-reindex --index /data/horse/ws/anpa439f-Function_Retrieval_Citation/Research_Project/e5_index_subset_1/index.faiss --meta /data/horse/ws/anpa439f-Function_Retrieval_Citation/Research_Project/e5_index_subset_1/meta.parquet --topk 20  (cwd=/data/horse/ws/anpa439f-Function_Retrieval_Citation/Research_Project/RetrievalAugmentedGeneration)
âœ… Top-k candidates: /data/horse/ws/anpa439f-Function_Retrieval_Citation/Research_Project/RetrievalAugmentedGeneration/outputs/topk_candidates_query.jsonl
ðŸ”— Symlinked: /data/horse/ws/anpa439f-Function_Retrieval_Citation/Research_Project/outputs/topk_candidates_query.jsonl -> /data/horse/ws/anpa439f-Function_Retrieval_Citation/Research_Project/RetrievalAugmentedGeneration/outputs/topk_candidates_query.jsonl
-> /home/anpa439f/anaconda3/envs/myenv/bin/python3 /data/horse/ws/anpa439f-Function_Retrieval_Citation/Research_Project/RetrievalAugmentedGeneration/function_based_answer-2.py --debug --max-check 10  (cwd=/data/horse/ws/anpa439f-Function_Retrieval_Citation/Research_Project/RetrievalAugmentedGeneration)

ðŸŽ‰ Pipeline complete.
  â€¢ Classified file : /data/horse/ws/anpa439f-Function_Retrieval_Citation/Research_Project/RetrievalAugmentedGeneration/classified_outputs.jsonl
  â€¢ TopK (canonical): /data/horse/ws/anpa439f-Function_Retrieval_Citation/Research_Project/RetrievalAugmentedGeneration/outputs/topk_candidates_query.jsonl
  â€¢ Final outputs   : /data/horse/ws/anpa439f-Function_Retrieval_Citation/Research_Project/RetrievalAugmentedGeneration/outputs
