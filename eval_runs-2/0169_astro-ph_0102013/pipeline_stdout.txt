âœ… Available Models:
1. alias-code
2. alias-reasoning
3. alias-image-generation
4. alias-vision
5. alias-ha
6. meta-llama/Llama-3.3-70B-Instruct
7. meta-llama/Llama-3.1-8B-Instruct
8. Qwen/Qwen2-VL-7B-Instruct
9. openGPT-X/Teuken-7B-instruct-research-v0.4
10. deepseek-ai/DeepSeek-Coder-V2-Lite-Instruct
11. Qwen/Qwen3-Coder-30B-A3B-Instruct
12. Qwen/Qwen3-Embedding-4B
13. stabilityai/stable-diffusion-3.5-large-turbo
14. black-forest-labs/FLUX.1-dev
15. openai/whisper-large-v3
16. Kokoro-82M
17. tts-1-hd
18. deepseek-ai/DeepSeek-R1
19. openai/gpt-oss-120b
20. meta-llama/Llama-4-Scout-17B-16E-Instruct

ðŸ‘‰ Select a model number (default = 1): 
âœ… Using model: openai/gpt-oss-120b

ðŸ” Enter a scientific query or topic: 
ðŸ”Ž Citation Function Classification:
{
  "citation_functions": [
    "Extends",
    "FutureWork"
  ],
  "justification": "The query asks how upcoming research can build upon (extend) existing knowledge of optical depth and time\u2011scale distributions, explicitly focusing on future studies."
}

âœ… Saved to classified_outputs.jsonl
ðŸ”§ Ready for retrieval module (handled in a separate file).
âš¡ SKIP_REINDEX=1 â€” using existing FAISS index + meta; not scanning raw JSONL shards.
âœ… Top-k candidates (FAISS): /data/horse/ws/anpa439f-Function_Retrieval_Citation/Research_Project/RetrievalAugmentedGeneration/outputs/topk_candidates_query.jsonl
[01:08:20] main | args: Namespace(max_check=10, debug=True)
[01:08:20] read_last_jsonl | path= classified_outputs.jsonl
[01:08:20] read_last_jsonl | total_lines= 1
[01:08:20] main | query='How might future studies of microlensing events build on our current understanding of the optical depth and time-scale distribution of these events in the context of the Sagittarius dwarf galaxy?' | funcs=['Extends', 'FutureWork']
[01:08:22] main | core_terms= ['Sagittarius dwarf galaxy', 'microlensing events', 'optical depth', 'time-scale distribution', 'time-scale']
[01:08:22] load_topk_jsonl | path= /data/horse/ws/anpa439f-Function_Retrieval_Citation/Research_Project/outputs/topk_candidates_query.jsonl
[01:08:22] load_topk_jsonl | rows= 20
[01:08:22] load_topk_jsonl | first: rank= 0 paper_id= astro-ph/0102013 title_snip='The Sagittarius dwarf galaxy as a microlensing target' abs_len= 1133
[01:08:22] main | running function= Extends
[01:08:22] select | function= Extends | candidates_in= 20
[01:08:22] select | core_terms= ['Sagittarius dwarf galaxy', 'microlensing events', 'optical depth', 'time-scale distribution', 'time-scale']
[01:08:22] select | no cosine prune; kept=20/20
[01:08:22] select | pool_size= 10 | ranks= [0, 1, 2, 3, 4, 5, 6, 7, 8, 9] | pids= ['astro-ph/0102013', 'astro-ph/0103516', 'astro-ph/0104314', 'gr-qc/0104076', 'astro-ph/0102481', 'astro-ph/0102242', 'astro-ph/0102181', 'astro-ph/0102080', 'astro-ph/0101092', 'astro-ph/0104176']
[01:08:22] select | verify relaxed 1/10
[01:08:22] verify | func= Extends | rank= 0 | pid= astro-ph/0102013 | title_snip='The Sagittarius dwarf galaxy as a microlensing target' | abs_len= 1133
[01:08:25] verify | result supports= True fit= 0.80 top= 0.90 invalid= â€” cue_hint= False
[01:08:25] select | verify relaxed 2/10
[01:08:25] verify | func= Extends | rank= 1 | pid= astro-ph/0103516 | title_snip='Applications of Microlensing to Stellar Astrophysics' | abs_len= 1616
[01:08:28] verify | result supports= False fit= 0.00 top= 0.00 invalid= no_quote cue_hint= False
[01:08:28] select | verify relaxed 3/10
[01:08:28] verify | func= Extends | rank= 2 | pid= astro-ph/0104314 | title_snip='An inner ring and the micro lensing toward the Bulge' | abs_len= 1183
[01:08:30] verify | result supports= False fit= 0.00 top= 0.00 invalid= no_quote cue_hint= False
[01:08:30] select | verify relaxed 4/10
[01:08:30] verify | func= Extends | rank= 3 | pid= gr-qc/0104076 | title_snip='Chromaticity effects in microlensing by wormholes' | abs_len= 368
[01:08:33] verify | result supports= False fit= 0.00 top= 0.20 invalid= â€” cue_hint= False
[01:08:33] select | verify relaxed 5/10
[01:08:33] verify | func= Extends | rank= 4 | pid= astro-ph/0102481 | title_snip='Microlensing by Stellar Black Holes Around Sgr A*' | abs_len= 1136
[01:08:36] verify | result supports= False fit= 0.00 top= 0.00 invalid= no_quote cue_hint= False
[01:08:36] select | verify relaxed 6/10
[01:08:36] verify | func= Extends | rank= 5 | pid= astro-ph/0102242 | title_snip='Detecting Galactic MACHOs with VERA through Astrometric Microlensing oâ€¦' | abs_len= 1755
[01:08:38] verify | result supports= False fit= 0.00 top= 0.20 invalid= no_quote cue_hint= False
[01:08:38] select | verify relaxed 7/10
[01:08:38] verify | func= Extends | rank= 6 | pid= astro-ph/0102181 | title_snip='Real-Time Difference Imaging Analysis of MOA Galactic Bulge Observatioâ€¦' | abs_len= 979
[01:08:41] verify | result supports= False fit= 0.00 top= 0.20 invalid= â€” cue_hint= False
[01:08:41] select | verify relaxed 8/10
[01:08:41] verify | func= Extends | rank= 7 | pid= astro-ph/0102080 | title_snip='A Short Timescale Candidate Microlensing Event in the POINT-AGAPE Pixeâ€¦' | abs_len= 1017
[01:08:44] verify | result supports= False fit= 0.00 top= 0.00 invalid= no_quote cue_hint= False
[01:08:44] select | verify relaxed 9/10
[01:08:44] verify | func= Extends | rank= 8 | pid= astro-ph/0101092 | title_snip='Studying the Galactic Bulge Through Spectroscopy of Microlensed Sourceâ€¦' | abs_len= 1127
[01:08:46] verify | result supports= False fit= 0.00 top= 0.20 invalid= â€” cue_hint= False
[01:08:46] select | verify relaxed 10/10
[01:08:46] verify | func= Extends | rank= 9 | pid= astro-ph/0104176 | title_snip='Predicting the Second Caustic Crossing in Binary Microlensing Events' | abs_len= 746
[01:08:49] verify | result supports= False fit= 0.00 top= 0.20 invalid= â€” cue_hint= False

================================================================================
FUNCTION: Extends
QUERY   : How might future studies of microlensing events build on our current understanding of the optical depth and time-scale distribution of these events in the context of the Sagittarius dwarf galaxy?
- WINNER: astro-ph/0102013 | The Sagittarius dwarf galaxy as a microlensing target
- QUOTE : Systematic spectroscopic measurements on the sources of all the microlensing events
- WHY   : sufficient
- ANSWER: Future studies of microlensing events could build on current understanding by exploring the optical depth and time-scale distribution in the context of the Sagittarius dwarf galaxy, extending the scope of previous work to account for the galaxy's contribution to microlensing events at higher latitudes. This extension could improve the accuracy of optical depth maps by considering the significant contribution of Milky Way/Sagittarius dwarf galaxy events (astro-ph/0102013).
[01:08:54] main | running function= FutureWork
[01:08:54] select | function= FutureWork | candidates_in= 20
[01:08:54] select | core_terms= ['Sagittarius dwarf galaxy', 'microlensing events', 'optical depth', 'time-scale distribution', 'time-scale']
[01:08:54] select | no cosine prune; kept=20/20
[01:08:54] select | pool_size= 10 | ranks= [0, 1, 2, 3, 4, 5, 6, 7, 8, 9] | pids= ['astro-ph/0102013', 'astro-ph/0103516', 'astro-ph/0104314', 'gr-qc/0104076', 'astro-ph/0102481', 'astro-ph/0102242', 'astro-ph/0102181', 'astro-ph/0102080', 'astro-ph/0101092', 'astro-ph/0104176']
[01:08:54] select | verify relaxed 1/10
[01:08:54] verify | func= FutureWork | rank= 0 | pid= astro-ph/0102013 | title_snip='The Sagittarius dwarf galaxy as a microlensing target' | abs_len= 1133
[01:08:57] verify | result supports= False fit= 0.00 top= 0.80 invalid= no_quote cue_hint= False
[01:08:57] select | verify relaxed 2/10
[01:08:57] verify | func= FutureWork | rank= 1 | pid= astro-ph/0103516 | title_snip='Applications of Microlensing to Stellar Astrophysics' | abs_len= 1616
[01:08:59] verify | result supports= False fit= 0.00 top= 0.00 invalid= no_quote cue_hint= False
[01:08:59] select | verify relaxed 3/10
[01:08:59] verify | func= FutureWork | rank= 2 | pid= astro-ph/0104314 | title_snip='An inner ring and the micro lensing toward the Bulge' | abs_len= 1183
[01:09:02] verify | result supports= False fit= 0.00 top= 0.20 invalid= â€” cue_hint= False
[01:09:02] select | verify relaxed 4/10
[01:09:02] verify | func= FutureWork | rank= 3 | pid= gr-qc/0104076 | title_snip='Chromaticity effects in microlensing by wormholes' | abs_len= 368
[01:09:05] verify | result supports= False fit= 0.00 top= 0.20 invalid= â€” cue_hint= False
[01:09:05] select | verify relaxed 5/10
[01:09:05] verify | func= FutureWork | rank= 4 | pid= astro-ph/0102481 | title_snip='Microlensing by Stellar Black Holes Around Sgr A*' | abs_len= 1136
[01:09:08] verify | result supports= False fit= 0.00 top= 0.00 invalid= no_quote cue_hint= False
[01:09:08] select | verify relaxed 6/10
[01:09:08] verify | func= FutureWork | rank= 5 | pid= astro-ph/0102242 | title_snip='Detecting Galactic MACHOs with VERA through Astrometric Microlensing oâ€¦' | abs_len= 1755
[01:09:10] verify | result supports= False fit= 0.00 top= 0.20 invalid= no_quote cue_hint= False
[01:09:10] select | verify relaxed 7/10
[01:09:10] verify | func= FutureWork | rank= 6 | pid= astro-ph/0102181 | title_snip='Real-Time Difference Imaging Analysis of MOA Galactic Bulge Observatioâ€¦' | abs_len= 979
[01:09:13] verify | result supports= False fit= 0.00 top= 0.20 invalid= â€” cue_hint= False
[01:09:13] select | verify relaxed 8/10
[01:09:13] verify | func= FutureWork | rank= 7 | pid= astro-ph/0102080 | title_snip='A Short Timescale Candidate Microlensing Event in the POINT-AGAPE Pixeâ€¦' | abs_len= 1017
[01:09:16] verify | result supports= False fit= 0.00 top= 0.00 invalid= no_quote cue_hint= False
[01:09:16] select | verify relaxed 9/10
[01:09:16] verify | func= FutureWork | rank= 8 | pid= astro-ph/0101092 | title_snip='Studying the Galactic Bulge Through Spectroscopy of Microlensed Sourceâ€¦' | abs_len= 1127
[01:09:18] verify | result supports= False fit= 0.00 top= 0.20 invalid= â€” cue_hint= False
[01:09:18] select | verify relaxed 10/10
[01:09:18] verify | func= FutureWork | rank= 9 | pid= astro-ph/0104176 | title_snip='Predicting the Second Caustic Crossing in Binary Microlensing Events' | abs_len= 746
[01:09:21] verify | result supports= False fit= 0.00 top= 0.20 invalid= â€” cue_hint= False

================================================================================
FUNCTION: FutureWork
QUERY   : How might future studies of microlensing events build on our current understanding of the optical depth and time-scale distribution of these events in the context of the Sagittarius dwarf galaxy?
- No supporting candidate with sufficient evidence.
- ANSWER: The abstract does not provide information relevant to FutureWork.

ðŸ“„ Saved: outputs/function_selection_results.json
ðŸ“„ Saved: outputs/function_selection_results.jsonl
ðŸ“ Answers-only: outputs/function_answers.txt
-> /home/anpa439f/anaconda3/envs/myenv/bin/python3 /data/horse/ws/anpa439f-Function_Retrieval_Citation/Research_Project/RetrievalAugmentedGeneration/classifying_question.py  (cwd=/data/horse/ws/anpa439f-Function_Retrieval_Citation/Research_Project/RetrievalAugmentedGeneration)
âœ… Saved to classified_outputs.jsonl
ðŸ”§ Ready for retrieval module (.py).
-> /home/anpa439f/anaconda3/envs/myenv/bin/python3 /data/horse/ws/anpa439f-Function_Retrieval_Citation/Research_Project/RetrievalAugmentedGeneration/Retreival_query_based.py --skip-reindex --index /data/horse/ws/anpa439f-Function_Retrieval_Citation/Research_Project/e5_index_subset_1/index.faiss --meta /data/horse/ws/anpa439f-Function_Retrieval_Citation/Research_Project/e5_index_subset_1/meta.parquet --topk 20  (cwd=/data/horse/ws/anpa439f-Function_Retrieval_Citation/Research_Project/RetrievalAugmentedGeneration)
âœ… Top-k candidates: /data/horse/ws/anpa439f-Function_Retrieval_Citation/Research_Project/RetrievalAugmentedGeneration/outputs/topk_candidates_query.jsonl
ðŸ”— Symlinked: /data/horse/ws/anpa439f-Function_Retrieval_Citation/Research_Project/outputs/topk_candidates_query.jsonl -> /data/horse/ws/anpa439f-Function_Retrieval_Citation/Research_Project/RetrievalAugmentedGeneration/outputs/topk_candidates_query.jsonl
-> /home/anpa439f/anaconda3/envs/myenv/bin/python3 /data/horse/ws/anpa439f-Function_Retrieval_Citation/Research_Project/RetrievalAugmentedGeneration/function_based_answer-2.py --debug --max-check 10  (cwd=/data/horse/ws/anpa439f-Function_Retrieval_Citation/Research_Project/RetrievalAugmentedGeneration)

ðŸŽ‰ Pipeline complete.
  â€¢ Classified file : /data/horse/ws/anpa439f-Function_Retrieval_Citation/Research_Project/RetrievalAugmentedGeneration/classified_outputs.jsonl
  â€¢ TopK (canonical): /data/horse/ws/anpa439f-Function_Retrieval_Citation/Research_Project/RetrievalAugmentedGeneration/outputs/topk_candidates_query.jsonl
  â€¢ Final outputs   : /data/horse/ws/anpa439f-Function_Retrieval_Citation/Research_Project/RetrievalAugmentedGeneration/outputs
