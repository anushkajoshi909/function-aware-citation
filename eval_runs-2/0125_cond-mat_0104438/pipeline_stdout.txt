âœ… Available Models:
1. alias-code
2. alias-reasoning
3. alias-image-generation
4. alias-vision
5. alias-ha
6. meta-llama/Llama-3.3-70B-Instruct
7. meta-llama/Llama-3.1-8B-Instruct
8. Qwen/Qwen2-VL-7B-Instruct
9. openGPT-X/Teuken-7B-instruct-research-v0.4
10. deepseek-ai/DeepSeek-Coder-V2-Lite-Instruct
11. Qwen/Qwen3-Coder-30B-A3B-Instruct
12. Qwen/Qwen3-Embedding-4B
13. stabilityai/stable-diffusion-3.5-large-turbo
14. black-forest-labs/FLUX.1-dev
15. openai/whisper-large-v3
16. Kokoro-82M
17. tts-1-hd
18. deepseek-ai/DeepSeek-R1
19. openai/gpt-oss-120b
20. meta-llama/Llama-4-Scout-17B-16E-Instruct

ðŸ‘‰ Select a model number (default = 1): 
âœ… Using model: openai/gpt-oss-120b

ðŸ” Enter a scientific query or topic: 
ðŸ”Ž Citation Function Classification:
{
  "citation_functions": [
    "Extends",
    "Uses"
  ],
  "justification": "The query asks how the current work builds upon (extends) and applies (uses) existing methods for calculating Wigner crystal energies."
}

âœ… Saved to classified_outputs.jsonl
ðŸ”§ Ready for retrieval module (handled in a separate file).
âš¡ SKIP_REINDEX=1 â€” using existing FAISS index + meta; not scanning raw JSONL shards.
âœ… Top-k candidates (FAISS): /data/horse/ws/anpa439f-Function_Retrieval_Citation/Research_Project/RetrievalAugmentedGeneration/outputs/topk_candidates_query.jsonl
[23:54:23] main | args: Namespace(max_check=10, debug=True)
[23:54:23] read_last_jsonl | path= classified_outputs.jsonl
[23:54:23] read_last_jsonl | total_lines= 1
[23:54:23] main | query='How does the current work use and extend existing methods for calculating the energy of Wigner crystals?' | funcs=['Extends', 'Uses']
[23:54:25] main | core_terms= ['Wigner crystals', 'energy calculation']
[23:54:25] load_topk_jsonl | path= /data/horse/ws/anpa439f-Function_Retrieval_Citation/Research_Project/outputs/topk_candidates_query.jsonl
[23:54:25] load_topk_jsonl | rows= 20
[23:54:25] load_topk_jsonl | first: rank= 0 paper_id= cond-mat/0104438 title_snip='Piezoelectric mechanism of orientation of a bilayer Wigner crystal in â€¦' abs_len= 1081
[23:54:25] main | running function= Extends
[23:54:25] select | function= Extends | candidates_in= 20
[23:54:25] select | core_terms= ['Wigner crystals', 'energy calculation']
[23:54:25] select | no cosine prune; kept=20/20
[23:54:25] select | pool_size= 10 | ranks= [0, 1, 2, 3, 4, 5, 6, 7, 8, 9] | pids= ['cond-mat/0104438', 'quant-ph/0104099', 'cond-mat/0103610', 'cond-mat/0104579', 'gr-qc/0103017', 'cond-mat/0103392', 'cond-mat/0103094', 'hep-ph/0102149', 'quant-ph/0102095', 'cond-mat/0101045']
[23:54:25] select | verify relaxed 1/10
[23:54:25] verify | func= Extends | rank= 0 | pid= cond-mat/0104438 | title_snip='Piezoelectric mechanism of orientation of a bilayer Wigner crystal in â€¦' | abs_len= 1081
[23:54:28] verify | result supports= True fit= 0.90 top= 0.90 invalid= â€” cue_hint= False
[23:54:28] select | verify relaxed 2/10
[23:54:28] verify | func= Extends | rank= 1 | pid= quant-ph/0104099 | title_snip='Engineering arbitrary motional ionic state through realistic
  intensiâ€¦' | abs_len= 1037
[23:54:31] verify | result supports= False fit= 0.00 top= 0.50 invalid= â€” cue_hint= False
[23:54:31] select | verify relaxed 3/10
[23:54:31] verify | func= Extends | rank= 2 | pid= cond-mat/0103610 | title_snip='The 2-site Hubbard and t-J models' | abs_len= 1472
[23:54:33] verify | result supports= False fit= 0.00 top= 0.00 invalid= no_quote cue_hint= False
[23:54:33] select | verify relaxed 4/10
[23:54:33] verify | func= Extends | rank= 3 | pid= cond-mat/0104579 | title_snip='Hamiltonian Theory of the Composite Fermion Wigner Crystal' | abs_len= 894
[23:54:36] verify | result supports= False fit= 0.00 top= 0.90 invalid= off_topic_no_core_in_abstract cue_hint= True
[23:54:36] select | verify relaxed 5/10
[23:54:36] verify | func= Extends | rank= 4 | pid= gr-qc/0103017 | title_snip='Conserved currents for general teleparallel models' | abs_len= 1393
[23:54:39] verify | result supports= False fit= 0.00 top= 0.00 invalid= no_quote cue_hint= False
[23:54:39] select | verify relaxed 6/10
[23:54:39] verify | func= Extends | rank= 5 | pid= cond-mat/0103392 | title_snip='Pinned Wigner Crystals' | abs_len= 1534
[23:54:42] verify | result supports= False fit= 0.00 top= 0.90 invalid= off_topic_no_core_in_abstract cue_hint= False
[23:54:42] select | verify relaxed 7/10
[23:54:42] verify | func= Extends | rank= 6 | pid= cond-mat/0103094 | title_snip='A Rigorous Extension of the Kohn-Sham Equation for Strongly Correlatedâ€¦' | abs_len= 949
[23:54:45] verify | result supports= False fit= 0.00 top= 0.90 invalid= off_topic_no_core_in_abstract cue_hint= False
[23:54:45] select | verify relaxed 8/10
[23:54:45] verify | func= Extends | rank= 7 | pid= hep-ph/0102149 | title_snip='Breit-Wigner formalism for non-Abelian theories' | abs_len= 747
[23:54:47] verify | result supports= False fit= 0.00 top= 0.00 invalid= no_quote cue_hint= False
[23:54:47] select | verify relaxed 9/10
[23:54:47] verify | func= Extends | rank= 8 | pid= quant-ph/0102095 | title_snip='Peculiarities of the Weyl - Wigner - Moyal formalism for scalar chargeâ€¦' | abs_len= 833
[23:54:50] verify | result supports= False fit= 0.00 top= 0.50 invalid= â€” cue_hint= False
[23:54:50] select | verify relaxed 10/10
[23:54:50] verify | func= Extends | rank= 9 | pid= cond-mat/0101045 | title_snip='Thermal Transport through a Mesoscopic Weak Link' | abs_len= 849
[23:54:52] verify | result supports= False fit= 0.00 top= 0.00 invalid= no_quote cue_hint= False

================================================================================
FUNCTION: Extends
QUERY   : How does the current work use and extend existing methods for calculating the energy of Wigner crystals?
- WINNER: cond-mat/0104438 | Piezoelectric mechanism of orientation of a bilayer Wigner crystal in a
  GaAs matrix
- QUOTE : A generalization of Ewald's method is obtained
- WHY   : sufficient
- ANSWER: The current work extends Ewald's method by generalizing it to calculate the anisotropic interaction between electrons in a Wigner crystal, allowing for more accurate energy calculations that take into account the crystal's orientation. This extension enables the consideration of piezoelectric effects and their impact on the total energy of the electron crystal (cond-mat/0104438).
[23:54:57] main | running function= Uses
[23:54:57] select | function= Uses | candidates_in= 20
[23:54:57] select | core_terms= ['Wigner crystals', 'energy calculation']
[23:54:57] select | no cosine prune; kept=20/20
[23:54:57] select | pool_size= 10 | ranks= [0, 1, 2, 3, 4, 5, 6, 7, 8, 9] | pids= ['cond-mat/0104438', 'quant-ph/0104099', 'cond-mat/0103610', 'cond-mat/0104579', 'gr-qc/0103017', 'cond-mat/0103392', 'cond-mat/0103094', 'hep-ph/0102149', 'quant-ph/0102095', 'cond-mat/0101045']
[23:54:57] select | verify relaxed 1/10
[23:54:57] verify | func= Uses | rank= 0 | pid= cond-mat/0104438 | title_snip='Piezoelectric mechanism of orientation of a bilayer Wigner crystal in â€¦' | abs_len= 1081
[23:55:00] verify | result supports= True fit= 0.80 top= 0.90 invalid= â€” cue_hint= False
[23:55:00] select | verify relaxed 2/10
[23:55:00] verify | func= Uses | rank= 1 | pid= quant-ph/0104099 | title_snip='Engineering arbitrary motional ionic state through realistic
  intensiâ€¦' | abs_len= 1037
[23:55:03] verify | result supports= False fit= 0.00 top= 0.50 invalid= â€” cue_hint= False
[23:55:03] select | verify relaxed 3/10
[23:55:03] verify | func= Uses | rank= 2 | pid= cond-mat/0103610 | title_snip='The 2-site Hubbard and t-J models' | abs_len= 1472
[23:55:05] verify | result supports= False fit= 0.00 top= 0.00 invalid= no_quote cue_hint= False
[23:55:05] select | verify relaxed 4/10
[23:55:05] verify | func= Uses | rank= 3 | pid= cond-mat/0104579 | title_snip='Hamiltonian Theory of the Composite Fermion Wigner Crystal' | abs_len= 894
[23:55:09] verify | result supports= False fit= 0.00 top= 0.90 invalid= off_topic_no_core_in_abstract cue_hint= False
[23:55:09] select | verify relaxed 5/10
[23:55:09] verify | func= Uses | rank= 4 | pid= gr-qc/0103017 | title_snip='Conserved currents for general teleparallel models' | abs_len= 1393
[23:55:11] verify | result supports= False fit= 0.00 top= 0.00 invalid= no_quote cue_hint= False
[23:55:11] select | verify relaxed 6/10
[23:55:11] verify | func= Uses | rank= 5 | pid= cond-mat/0103392 | title_snip='Pinned Wigner Crystals' | abs_len= 1534
[23:55:14] verify | result supports= False fit= 0.00 top= 0.90 invalid= off_topic_no_core_in_abstract cue_hint= True
[23:55:14] select | verify relaxed 7/10
[23:55:14] verify | func= Uses | rank= 6 | pid= cond-mat/0103094 | title_snip='A Rigorous Extension of the Kohn-Sham Equation for Strongly Correlatedâ€¦' | abs_len= 949
[23:55:17] verify | result supports= False fit= 0.00 top= 0.50 invalid= â€” cue_hint= False
[23:55:17] select | verify relaxed 8/10
[23:55:17] verify | func= Uses | rank= 7 | pid= hep-ph/0102149 | title_snip='Breit-Wigner formalism for non-Abelian theories' | abs_len= 747
[23:55:20] verify | result supports= False fit= 0.00 top= 0.00 invalid= no_quote cue_hint= False
[23:55:20] select | verify relaxed 9/10
[23:55:20] verify | func= Uses | rank= 8 | pid= quant-ph/0102095 | title_snip='Peculiarities of the Weyl - Wigner - Moyal formalism for scalar chargeâ€¦' | abs_len= 833
[23:55:22] verify | result supports= False fit= 0.00 top= 0.50 invalid= â€” cue_hint= False
[23:55:22] select | verify relaxed 10/10
[23:55:22] verify | func= Uses | rank= 9 | pid= cond-mat/0101045 | title_snip='Thermal Transport through a Mesoscopic Weak Link' | abs_len= 849
[23:55:25] verify | result supports= False fit= 0.00 top= 0.00 invalid= no_quote cue_hint= False

================================================================================
FUNCTION: Uses
QUERY   : How does the current work use and extend existing methods for calculating the energy of Wigner crystals?
- WINNER: cond-mat/0104438 | Piezoelectric mechanism of orientation of a bilayer Wigner crystal in a
  GaAs matrix
- QUOTE : A generalization of Ewald's method is obtained
- WHY   : sufficient
- ANSWER: The current work uses a generalization of Ewald's method to calculate the anisotropic interaction between electrons in a Wigner crystal, taking into account the piezoelectric correction to the electrostatic interaction. This method is applied to calculate the energy of bilayer Wigner crystals in various orientations and layer distances (cond-mat/0104438).

ðŸ“„ Saved: outputs/function_selection_results.json
ðŸ“„ Saved: outputs/function_selection_results.jsonl
ðŸ“ Answers-only: outputs/function_answers.txt
-> /home/anpa439f/anaconda3/envs/myenv/bin/python3 /data/horse/ws/anpa439f-Function_Retrieval_Citation/Research_Project/RetrievalAugmentedGeneration/classifying_question.py  (cwd=/data/horse/ws/anpa439f-Function_Retrieval_Citation/Research_Project/RetrievalAugmentedGeneration)
âœ… Saved to classified_outputs.jsonl
ðŸ”§ Ready for retrieval module (.py).
-> /home/anpa439f/anaconda3/envs/myenv/bin/python3 /data/horse/ws/anpa439f-Function_Retrieval_Citation/Research_Project/RetrievalAugmentedGeneration/Retreival_query_based.py --skip-reindex --index /data/horse/ws/anpa439f-Function_Retrieval_Citation/Research_Project/e5_index_subset_1/index.faiss --meta /data/horse/ws/anpa439f-Function_Retrieval_Citation/Research_Project/e5_index_subset_1/meta.parquet --topk 20  (cwd=/data/horse/ws/anpa439f-Function_Retrieval_Citation/Research_Project/RetrievalAugmentedGeneration)
âœ… Top-k candidates: /data/horse/ws/anpa439f-Function_Retrieval_Citation/Research_Project/RetrievalAugmentedGeneration/outputs/topk_candidates_query.jsonl
ðŸ”— Symlinked: /data/horse/ws/anpa439f-Function_Retrieval_Citation/Research_Project/outputs/topk_candidates_query.jsonl -> /data/horse/ws/anpa439f-Function_Retrieval_Citation/Research_Project/RetrievalAugmentedGeneration/outputs/topk_candidates_query.jsonl
-> /home/anpa439f/anaconda3/envs/myenv/bin/python3 /data/horse/ws/anpa439f-Function_Retrieval_Citation/Research_Project/RetrievalAugmentedGeneration/function_based_answer-2.py --debug --max-check 10  (cwd=/data/horse/ws/anpa439f-Function_Retrieval_Citation/Research_Project/RetrievalAugmentedGeneration)

ðŸŽ‰ Pipeline complete.
  â€¢ Classified file : /data/horse/ws/anpa439f-Function_Retrieval_Citation/Research_Project/RetrievalAugmentedGeneration/classified_outputs.jsonl
  â€¢ TopK (canonical): /data/horse/ws/anpa439f-Function_Retrieval_Citation/Research_Project/RetrievalAugmentedGeneration/outputs/topk_candidates_query.jsonl
  â€¢ Final outputs   : /data/horse/ws/anpa439f-Function_Retrieval_Citation/Research_Project/RetrievalAugmentedGeneration/outputs
