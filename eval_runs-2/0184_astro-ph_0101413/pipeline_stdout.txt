âœ… Available Models:
1. alias-code
2. alias-reasoning
3. alias-image-generation
4. alias-vision
5. alias-ha
6. meta-llama/Llama-3.3-70B-Instruct
7. meta-llama/Llama-3.1-8B-Instruct
8. Qwen/Qwen2-VL-7B-Instruct
9. openGPT-X/Teuken-7B-instruct-research-v0.4
10. deepseek-ai/DeepSeek-Coder-V2-Lite-Instruct
11. Qwen/Qwen3-Coder-30B-A3B-Instruct
12. Qwen/Qwen3-Embedding-4B
13. stabilityai/stable-diffusion-3.5-large-turbo
14. black-forest-labs/FLUX.1-dev
15. openai/whisper-large-v3
16. Kokoro-82M
17. tts-1-hd
18. deepseek-ai/DeepSeek-R1
19. openai/gpt-oss-120b
20. meta-llama/Llama-4-Scout-17B-16E-Instruct

ðŸ‘‰ Select a model number (default = 1): 
âœ… Using model: openai/gpt-oss-120b

ðŸ” Enter a scientific query or topic: 
ðŸ”Ž Citation Function Classification:
{
  "citation_functions": [
    "Extends",
    "Uses"
  ],
  "justification": "The query inquires if the current study builds upon (extends) prior CMB anisotropy research and whether it employs (uses) datasets or methods from earlier work."
}

âœ… Saved to classified_outputs.jsonl
ðŸ”§ Ready for retrieval module (handled in a separate file).
âš¡ SKIP_REINDEX=1 â€” using existing FAISS index + meta; not scanning raw JSONL shards.
âœ… Top-k candidates (FAISS): /data/horse/ws/anpa439f-Function_Retrieval_Citation/Research_Project/RetrievalAugmentedGeneration/outputs/topk_candidates_query.jsonl
[01:27:57] main | args: Namespace(max_check=10, debug=True)
[01:27:57] read_last_jsonl | path= classified_outputs.jsonl
[01:27:57] read_last_jsonl | total_lines= 1
[01:27:57] main | query='Does the current work extend previous research on cosmic microwave background anisotropies by using specific datasets or methods from earlier studies?' | funcs=['Extends', 'Uses']
[01:27:59] main | core_terms= ['cosmic microwave background', 'anisotropies']
[01:27:59] load_topk_jsonl | path= /data/horse/ws/anpa439f-Function_Retrieval_Citation/Research_Project/outputs/topk_candidates_query.jsonl
[01:27:59] load_topk_jsonl | rows= 20
[01:27:59] load_topk_jsonl | first: rank= 0 paper_id= astro-ph/0104366 title_snip='Concerning Parameter Estimation Using the Cosmic Microwave Background' abs_len= 1521
[01:27:59] main | running function= Extends
[01:27:59] select | function= Extends | candidates_in= 20
[01:27:59] select | core_terms= ['cosmic microwave background', 'anisotropies']
[01:27:59] select | no cosine prune; kept=20/20
[01:27:59] select | pool_size= 10 | ranks= [0, 1, 2, 3, 4, 5, 6, 7, 8, 9] | pids= ['astro-ph/0104366', 'astro-ph/0104017', 'astro-ph/0103134', 'astro-ph/0104459', 'astro-ph/0103505', 'astro-ph/0102378', 'astro-ph/0102264', 'astro-ph/0101086', 'astro-ph/0101449', 'astro-ph/0101112']
[01:27:59] select | verify relaxed 1/10
[01:27:59] verify | func= Extends | rank= 0 | pid= astro-ph/0104366 | title_snip='Concerning Parameter Estimation Using the Cosmic Microwave Background' | abs_len= 1521
[01:28:02] verify | result supports= True fit= 0.80 top= 0.90 invalid= â€” cue_hint= False
[01:28:02] select | verify relaxed 2/10
[01:28:02] verify | func= Extends | rank= 1 | pid= astro-ph/0104017 | title_snip='Reproducing Cosmic Microwave Background anisotropies with mixed
  isocâ€¦' | abs_len= 421
[01:28:05] verify | result supports= True fit= 0.80 top= 0.90 invalid= â€” cue_hint= False
[01:28:05] select | verify relaxed 3/10
[01:28:05] verify | func= Extends | rank= 2 | pid= astro-ph/0103134 | title_snip='II: Bayesian Methods for Cosmological Parameter Estimation from Cosmicâ€¦' | abs_len= 476
[01:28:08] verify | result supports= True fit= 0.80 top= 0.90 invalid= â€” cue_hint= False
[01:28:08] select | verify relaxed 4/10
[01:28:08] verify | func= Extends | rank= 3 | pid= astro-ph/0104459 | title_snip='A High Spatial Resolution Analysis of the MAXIMA-1 Cosmic Microwave
  â€¦' | abs_len= 918
[01:28:12] verify | result supports= True fit= 0.90 top= 0.90 invalid= â€” cue_hint= True
[01:28:12] select | verify relaxed 5/10
[01:28:12] verify | func= Extends | rank= 4 | pid= astro-ph/0103505 | title_snip='Probing the Universe After Cosmological Recombination Through the Effeâ€¦' | abs_len= 942
[01:28:15] verify | result supports= True fit= 0.80 top= 0.90 invalid= â€” cue_hint= False
[01:28:15] select | verify relaxed 6/10
[01:28:15] verify | func= Extends | rank= 5 | pid= astro-ph/0102378 | title_snip='Cosmic Microwave Background polarization and the ionization history ofâ€¦' | abs_len= 728
[01:28:19] verify | result supports= False fit= 0.00 top= 0.90 invalid= off_topic_no_core_in_abstract cue_hint= False
[01:28:19] select | verify relaxed 7/10
[01:28:19] verify | func= Extends | rank= 6 | pid= astro-ph/0102264 | title_snip='Binned Cosmic Microwave Background Anisotropy Power Spectra: Peak
  Loâ€¦' | abs_len= 1197
[01:28:22] verify | result supports= True fit= 0.80 top= 0.90 invalid= â€” cue_hint= False
[01:28:22] select | verify relaxed 8/10
[01:28:22] verify | func= Extends | rank= 7 | pid= astro-ph/0101086 | title_snip='Constraints from the damping tail' | abs_len= 827
[01:28:25] verify | result supports= True fit= 0.80 top= 0.90 invalid= â€” cue_hint= False
[01:28:25] select | verify relaxed 9/10
[01:28:25] verify | func= Extends | rank= 8 | pid= astro-ph/0101449 | title_snip='Lensing-induced Non-Gaussian Signatures in the Cosmic Microwave
  Backâ€¦' | abs_len= 1719
[01:28:28] verify | result supports= False fit= 0.20 top= 0.80 invalid= â€” cue_hint= False
[01:28:28] select | verify relaxed 10/10
[01:28:28] verify | func= Extends | rank= 9 | pid= astro-ph/0101112 | title_snip='MAPCUMBA : a fast iterative multi-grid map-making algorithm for CMB
  â€¦' | abs_len= 941
[01:28:31] verify | result supports= True fit= 0.80 top= 0.90 invalid= â€” cue_hint= True

================================================================================
FUNCTION: Extends
QUERY   : Does the current work extend previous research on cosmic microwave background anisotropies by using specific datasets or methods from earlier studies?
- WINNER: astro-ph/0104459 | A High Spatial Resolution Analysis of the MAXIMA-1 Cosmic Microwave
  Background Anisotropy Data
- QUOTE : We extend the analysis of the MAXIMA-1 cosmic microwave background (CMB) data
- WHY   : sufficient
- ANSWER: The current work extends previous research on cosmic microwave background anisotropies by analyzing the MAXIMA-1 data to smaller angular scales, building on the original analysis that covered a limited multipole range. The extension is achieved by utilizing data from three 150 GHz photometers and improving the pixel size to 3\arcmin squares, allowing for analysis up to $\ell = 1235$ (astro-ph/0104459).
[01:28:37] main | running function= Uses
[01:28:37] select | function= Uses | candidates_in= 20
[01:28:37] select | core_terms= ['cosmic microwave background', 'anisotropies']
[01:28:37] select | no cosine prune; kept=20/20
[01:28:37] select | pool_size= 10 | ranks= [0, 1, 2, 3, 4, 5, 6, 7, 8, 9] | pids= ['astro-ph/0104366', 'astro-ph/0104017', 'astro-ph/0103134', 'astro-ph/0104459', 'astro-ph/0103505', 'astro-ph/0102378', 'astro-ph/0102264', 'astro-ph/0101086', 'astro-ph/0101449', 'astro-ph/0101112']
[01:28:37] select | verify relaxed 1/10
[01:28:37] verify | func= Uses | rank= 0 | pid= astro-ph/0104366 | title_snip='Concerning Parameter Estimation Using the Cosmic Microwave Background' | abs_len= 1521
[01:28:40] verify | result supports= True fit= 0.80 top= 0.90 invalid= â€” cue_hint= False
[01:28:40] select | verify relaxed 2/10
[01:28:40] verify | func= Uses | rank= 1 | pid= astro-ph/0104017 | title_snip='Reproducing Cosmic Microwave Background anisotropies with mixed
  isocâ€¦' | abs_len= 421
[01:28:43] verify | result supports= True fit= 0.80 top= 0.90 invalid= â€” cue_hint= True
[01:28:43] select | verify relaxed 3/10
[01:28:43] verify | func= Uses | rank= 2 | pid= astro-ph/0103134 | title_snip='II: Bayesian Methods for Cosmological Parameter Estimation from Cosmicâ€¦' | abs_len= 476
[01:28:46] verify | result supports= True fit= 0.80 top= 0.90 invalid= â€” cue_hint= False
[01:28:46] select | verify relaxed 4/10
[01:28:46] verify | func= Uses | rank= 3 | pid= astro-ph/0104459 | title_snip='A High Spatial Resolution Analysis of the MAXIMA-1 Cosmic Microwave
  â€¦' | abs_len= 918
[01:28:50] verify | result supports= True fit= 0.80 top= 0.90 invalid= â€” cue_hint= False
[01:28:50] select | verify relaxed 5/10
[01:28:50] verify | func= Uses | rank= 4 | pid= astro-ph/0103505 | title_snip='Probing the Universe After Cosmological Recombination Through the Effeâ€¦' | abs_len= 942
[01:28:53] verify | result supports= False fit= 0.20 top= 0.80 invalid= â€” cue_hint= False
[01:28:53] select | verify relaxed 6/10
[01:28:53] verify | func= Uses | rank= 5 | pid= astro-ph/0102378 | title_snip='Cosmic Microwave Background polarization and the ionization history ofâ€¦' | abs_len= 728
[01:28:56] verify | result supports= False fit= 0.00 top= 0.90 invalid= off_topic_no_core_in_abstract cue_hint= False
[01:28:56] select | verify relaxed 7/10
[01:28:56] verify | func= Uses | rank= 6 | pid= astro-ph/0102264 | title_snip='Binned Cosmic Microwave Background Anisotropy Power Spectra: Peak
  Loâ€¦' | abs_len= 1197
[01:28:59] verify | result supports= True fit= 0.80 top= 0.90 invalid= â€” cue_hint= True
[01:28:59] select | verify relaxed 8/10
[01:28:59] verify | func= Uses | rank= 7 | pid= astro-ph/0101086 | title_snip='Constraints from the damping tail' | abs_len= 827
[01:29:02] verify | result supports= True fit= 0.80 top= 0.90 invalid= â€” cue_hint= False
[01:29:02] select | verify relaxed 9/10
[01:29:02] verify | func= Uses | rank= 8 | pid= astro-ph/0101449 | title_snip='Lensing-induced Non-Gaussian Signatures in the Cosmic Microwave
  Backâ€¦' | abs_len= 1719
[01:29:06] verify | result supports= False fit= 0.20 top= 0.80 invalid= â€” cue_hint= False
[01:29:06] select | verify relaxed 10/10
[01:29:06] verify | func= Uses | rank= 9 | pid= astro-ph/0101112 | title_snip='MAPCUMBA : a fast iterative multi-grid map-making algorithm for CMB
  â€¦' | abs_len= 941
[01:29:09] verify | result supports= True fit= 0.80 top= 0.90 invalid= â€” cue_hint= False

================================================================================
FUNCTION: Uses
QUERY   : Does the current work extend previous research on cosmic microwave background anisotropies by using specific datasets or methods from earlier studies?
- WINNER: astro-ph/0104017 | Reproducing Cosmic Microwave Background anisotropies with mixed
  isocurvature perturbations
- QUOTE : using this data
- WHY   : sufficient
- ANSWER: The current work uses recently published high-quality data of cosmic microwave background anisotropies to study the dependence of cosmological parameters on initial conditions. This data is utilized to determine the best fit values and allowed parameter range for generic initial conditions (astro-ph/0104017).

ðŸ“„ Saved: outputs/function_selection_results.json
ðŸ“„ Saved: outputs/function_selection_results.jsonl
ðŸ“ Answers-only: outputs/function_answers.txt
-> /home/anpa439f/anaconda3/envs/myenv/bin/python3 /data/horse/ws/anpa439f-Function_Retrieval_Citation/Research_Project/RetrievalAugmentedGeneration/classifying_question.py  (cwd=/data/horse/ws/anpa439f-Function_Retrieval_Citation/Research_Project/RetrievalAugmentedGeneration)
âœ… Saved to classified_outputs.jsonl
ðŸ”§ Ready for retrieval module (.py).
-> /home/anpa439f/anaconda3/envs/myenv/bin/python3 /data/horse/ws/anpa439f-Function_Retrieval_Citation/Research_Project/RetrievalAugmentedGeneration/Retreival_query_based.py --skip-reindex --index /data/horse/ws/anpa439f-Function_Retrieval_Citation/Research_Project/e5_index_subset_1/index.faiss --meta /data/horse/ws/anpa439f-Function_Retrieval_Citation/Research_Project/e5_index_subset_1/meta.parquet --topk 20  (cwd=/data/horse/ws/anpa439f-Function_Retrieval_Citation/Research_Project/RetrievalAugmentedGeneration)
âœ… Top-k candidates: /data/horse/ws/anpa439f-Function_Retrieval_Citation/Research_Project/RetrievalAugmentedGeneration/outputs/topk_candidates_query.jsonl
ðŸ”— Symlinked: /data/horse/ws/anpa439f-Function_Retrieval_Citation/Research_Project/outputs/topk_candidates_query.jsonl -> /data/horse/ws/anpa439f-Function_Retrieval_Citation/Research_Project/RetrievalAugmentedGeneration/outputs/topk_candidates_query.jsonl
-> /home/anpa439f/anaconda3/envs/myenv/bin/python3 /data/horse/ws/anpa439f-Function_Retrieval_Citation/Research_Project/RetrievalAugmentedGeneration/function_based_answer-2.py --debug --max-check 10  (cwd=/data/horse/ws/anpa439f-Function_Retrieval_Citation/Research_Project/RetrievalAugmentedGeneration)

ðŸŽ‰ Pipeline complete.
  â€¢ Classified file : /data/horse/ws/anpa439f-Function_Retrieval_Citation/Research_Project/RetrievalAugmentedGeneration/classified_outputs.jsonl
  â€¢ TopK (canonical): /data/horse/ws/anpa439f-Function_Retrieval_Citation/Research_Project/RetrievalAugmentedGeneration/outputs/topk_candidates_query.jsonl
  â€¢ Final outputs   : /data/horse/ws/anpa439f-Function_Retrieval_Citation/Research_Project/RetrievalAugmentedGeneration/outputs
