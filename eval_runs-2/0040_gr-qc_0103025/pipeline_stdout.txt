âœ… Available Models:
1. alias-code
2. alias-reasoning
3. alias-image-generation
4. alias-vision
5. alias-ha
6. meta-llama/Llama-3.3-70B-Instruct
7. meta-llama/Llama-3.1-8B-Instruct
8. Qwen/Qwen2-VL-7B-Instruct
9. openGPT-X/Teuken-7B-instruct-research-v0.4
10. deepseek-ai/DeepSeek-Coder-V2-Lite-Instruct
11. Qwen/Qwen3-Coder-30B-A3B-Instruct
12. Qwen/Qwen3-Embedding-4B
13. stabilityai/stable-diffusion-3.5-large-turbo
14. black-forest-labs/FLUX.1-dev
15. openai/whisper-large-v3
16. Kokoro-82M
17. tts-1-hd
18. deepseek-ai/DeepSeek-R1
19. openai/gpt-oss-120b
20. meta-llama/Llama-4-Scout-17B-16E-Instruct

ðŸ‘‰ Select a model number (default = 1): 
âœ… Using model: openai/gpt-oss-120b

ðŸ” Enter a scientific query or topic: 
ðŸ”Ž Citation Function Classification:
{
  "citation_functions": [
    "Background",
    "Motivation"
  ],
  "justification": "The query seeks foundational information on gravity and motion (Background) and asks why this motivates the creation of preferred\u2011frame theory (Motivation)."
}

âœ… Saved to classified_outputs.jsonl
ðŸ”§ Ready for retrieval module (handled in a separate file).
âš¡ SKIP_REINDEX=1 â€” using existing FAISS index + meta; not scanning raw JSONL shards.
âœ… Top-k candidates (FAISS): /data/horse/ws/anpa439f-Function_Retrieval_Citation/Research_Project/RetrievalAugmentedGeneration/outputs/topk_candidates_query.jsonl
[22:07:14] main | args: Namespace(max_check=10, debug=True)
[22:07:14] read_last_jsonl | path= classified_outputs.jsonl
[22:07:14] read_last_jsonl | total_lines= 1
[22:07:14] main | query='What background information about gravity and motion motivates the development of preferred-frame theory?' | funcs=['Background', 'Motivation']
[22:07:15] main | core_terms= ['gravity', 'motion', 'Lorentz symmetry', 'preferred-frame theory', 'preferred-frame']
[22:07:15] load_topk_jsonl | path= /data/horse/ws/anpa439f-Function_Retrieval_Citation/Research_Project/outputs/topk_candidates_query.jsonl
[22:07:15] load_topk_jsonl | rows= 20
[22:07:15] load_topk_jsonl | first: rank= 0 paper_id= gr-qc/0103025 title_snip='On a scalar theory of gravitation' abs_len= 1001
[22:07:15] main | running function= Background
[22:07:15] select | function= Background | candidates_in= 20
[22:07:15] select | core_terms= ['gravity', 'motion', 'Lorentz symmetry', 'preferred-frame theory', 'preferred-frame']
[22:07:15] select | no cosine prune; kept=20/20
[22:07:15] select | pool_size= 10 | ranks= [0, 1, 2, 3, 4, 5, 6, 7, 8, 9] | pids= ['gr-qc/0103025', 'gr-qc/0101099', 'gr-qc/0103076', 'hep-th/0103180', 'gr-qc/0102009', 'astro-ph/0102423', 'astro-ph/0102109', 'hep-th/0102186', 'hep-th/0103156', 'gr-qc/0101093']
[22:07:15] select | verify relaxed 1/10
[22:07:15] verify | func= Background | rank= 0 | pid= gr-qc/0103025 | title_snip='On a scalar theory of gravitation' | abs_len= 1001
[22:07:18] verify | result supports= True fit= 0.80 top= 0.90 invalid= â€” cue_hint= False
[22:07:18] select | verify relaxed 2/10
[22:07:18] verify | func= Background | rank= 1 | pid= gr-qc/0101099 | title_snip='Flat Spacetime Gravitation with a Preferred Foliation' | abs_len= 712
[22:07:22] verify | result supports= False fit= 0.00 top= 0.90 invalid= off_topic_no_core_in_abstract cue_hint= False
[22:07:22] select | verify relaxed 3/10
[22:07:22] verify | func= Background | rank= 2 | pid= gr-qc/0103076 | title_snip='New Perspectives on the Relativistically Rotating Disk and
  Non-time-â€¦' | abs_len= 1715
[22:07:24] verify | result supports= False fit= 0.00 top= 0.20 invalid= no_quote cue_hint= False
[22:07:24] select | verify relaxed 4/10
[22:07:24] verify | func= Background | rank= 3 | pid= hep-th/0103180 | title_snip='Scalar gravitational waves and Einstein frame' | abs_len= 444
[22:07:27] verify | result supports= False fit= 0.00 top= 0.20 invalid= â€” cue_hint= False
[22:07:27] select | verify relaxed 5/10
[22:07:27] verify | func= Background | rank= 4 | pid= gr-qc/0102009 | title_snip='Subtle is the Gravity' | abs_len= 382
[22:07:30] verify | result supports= False fit= 0.00 top= 0.90 invalid= off_topic_no_core_in_abstract cue_hint= False
[22:07:30] select | verify relaxed 6/10
[22:07:30] verify | func= Background | rank= 5 | pid= astro-ph/0102423 | title_snip='f(R) gravity theory and CMBR constraints' | abs_len= 881
[22:07:33] verify | result supports= False fit= 0.00 top= 0.00 invalid= no_quote cue_hint= False
[22:07:33] select | verify relaxed 7/10
[22:07:33] verify | func= Background | rank= 6 | pid= astro-ph/0102109 | title_snip='Induced Gravity Model Based on External Impinging Neutrinos: Calculatiâ€¦' | abs_len= 1817
[22:07:35] verify | result supports= False fit= 0.00 top= 0.20 invalid= no_quote cue_hint= False
[22:07:35] select | verify relaxed 8/10
[22:07:35] verify | func= Background | rank= 7 | pid= hep-th/0102186 | title_snip='Perturbative Quantization of Gravity Theories' | abs_len= 562
[22:07:38] verify | result supports= False fit= 0.00 top= 0.20 invalid= â€” cue_hint= False
[22:07:38] select | verify relaxed 9/10
[22:07:38] verify | func= Background | rank= 8 | pid= hep-th/0103156 | title_snip='The Promise of String Cosmology' | abs_len= 475
[22:07:41] verify | result supports= False fit= 0.00 top= 0.00 invalid= no_quote cue_hint= False
[22:07:41] select | verify relaxed 10/10
[22:07:41] verify | func= Background | rank= 9 | pid= gr-qc/0101093 | title_snip='Field Theories from the Relativistic Law of Motion' | abs_len= 637
[22:07:44] verify | result supports= True fit= 0.80 top= 0.90 invalid= â€” cue_hint= False

================================================================================
FUNCTION: Background
QUERY   : What background information about gravity and motion motivates the development of preferred-frame theory?
- WINNER: gr-qc/0103025 | On a scalar theory of gravitation
- QUOTE : an interpretation of gravity as a pressure force
- WHY   : sufficient
- ANSWER: The development of preferred-frame theory is motivated by the idea that gravity can be interpreted as a pressure force and that there is an equivalence between the effects of motion and gravitation (gr-qc/0103025).
[22:07:47] main | running function= Motivation
[22:07:47] select | function= Motivation | candidates_in= 20
[22:07:47] select | core_terms= ['gravity', 'motion', 'Lorentz symmetry', 'preferred-frame theory', 'preferred-frame']
[22:07:47] select | no cosine prune; kept=20/20
[22:07:47] select | pool_size= 10 | ranks= [0, 1, 2, 3, 4, 5, 6, 7, 8, 9] | pids= ['gr-qc/0103025', 'gr-qc/0101099', 'gr-qc/0103076', 'hep-th/0103180', 'gr-qc/0102009', 'astro-ph/0102423', 'astro-ph/0102109', 'hep-th/0102186', 'hep-th/0103156', 'gr-qc/0101093']
[22:07:47] select | verify relaxed 1/10
[22:07:47] verify | func= Motivation | rank= 0 | pid= gr-qc/0103025 | title_snip='On a scalar theory of gravitation' | abs_len= 1001
[22:07:50] verify | result supports= True fit= 0.80 top= 0.90 invalid= â€” cue_hint= False
[22:07:50] select | verify relaxed 2/10
[22:07:50] verify | func= Motivation | rank= 1 | pid= gr-qc/0101099 | title_snip='Flat Spacetime Gravitation with a Preferred Foliation' | abs_len= 712
[22:07:53] verify | result supports= False fit= 0.00 top= 0.90 invalid= off_topic_no_core_in_abstract cue_hint= False
[22:07:53] select | verify relaxed 3/10
[22:07:53] verify | func= Motivation | rank= 2 | pid= gr-qc/0103076 | title_snip='New Perspectives on the Relativistically Rotating Disk and
  Non-time-â€¦' | abs_len= 1715
[22:07:57] verify | result supports= True fit= 0.80 top= 0.90 invalid= â€” cue_hint= False
[22:07:57] select | verify relaxed 4/10
[22:07:57] verify | func= Motivation | rank= 3 | pid= hep-th/0103180 | title_snip='Scalar gravitational waves and Einstein frame' | abs_len= 444
[22:08:00] verify | result supports= False fit= 0.00 top= 0.20 invalid= â€” cue_hint= False
[22:08:00] select | verify relaxed 5/10
[22:08:00] verify | func= Motivation | rank= 4 | pid= gr-qc/0102009 | title_snip='Subtle is the Gravity' | abs_len= 382
[22:08:03] verify | result supports= False fit= 0.00 top= 0.90 invalid= off_topic_no_core_in_abstract cue_hint= True
[22:08:03] select | verify relaxed 6/10
[22:08:03] verify | func= Motivation | rank= 5 | pid= astro-ph/0102423 | title_snip='f(R) gravity theory and CMBR constraints' | abs_len= 881
[22:08:05] verify | result supports= False fit= 0.00 top= 0.00 invalid= no_quote cue_hint= False
[22:08:05] select | verify relaxed 7/10
[22:08:05] verify | func= Motivation | rank= 6 | pid= astro-ph/0102109 | title_snip='Induced Gravity Model Based on External Impinging Neutrinos: Calculatiâ€¦' | abs_len= 1817
[22:08:08] verify | result supports= False fit= 0.00 top= 0.20 invalid= â€” cue_hint= False
[22:08:08] select | verify relaxed 8/10
[22:08:08] verify | func= Motivation | rank= 7 | pid= hep-th/0102186 | title_snip='Perturbative Quantization of Gravity Theories' | abs_len= 562
[22:08:11] verify | result supports= False fit= 0.00 top= 0.20 invalid= â€” cue_hint= False
[22:08:11] select | verify relaxed 9/10
[22:08:11] verify | func= Motivation | rank= 8 | pid= hep-th/0103156 | title_snip='The Promise of String Cosmology' | abs_len= 475
[22:08:13] verify | result supports= False fit= 0.00 top= 0.00 invalid= no_quote cue_hint= False
[22:08:13] select | verify relaxed 10/10
[22:08:13] verify | func= Motivation | rank= 9 | pid= gr-qc/0101093 | title_snip='Field Theories from the Relativistic Law of Motion' | abs_len= 637
[22:08:16] verify | result supports= True fit= 0.80 top= 0.90 invalid= â€” cue_hint= False

================================================================================
FUNCTION: Motivation
QUERY   : What background information about gravity and motion motivates the development of preferred-frame theory?
- WINNER: gr-qc/0103025 | On a scalar theory of gravitation
- QUOTE : an interpretation of gravity as a pressure force
- WHY   : sufficient
- ANSWER: The development of preferred-frame theory is motivated by the need to reconcile special relativity with gravity, as the current understanding of gravity and motion is incomplete. This theory aims to address the gap by providing a new framework that accounts for the effects of gravity on motion (gr-qc/0103025).

ðŸ“„ Saved: outputs/function_selection_results.json
ðŸ“„ Saved: outputs/function_selection_results.jsonl
ðŸ“ Answers-only: outputs/function_answers.txt
-> /home/anpa439f/anaconda3/envs/myenv/bin/python3 /data/horse/ws/anpa439f-Function_Retrieval_Citation/Research_Project/RetrievalAugmentedGeneration/classifying_question.py  (cwd=/data/horse/ws/anpa439f-Function_Retrieval_Citation/Research_Project/RetrievalAugmentedGeneration)
âœ… Saved to classified_outputs.jsonl
ðŸ”§ Ready for retrieval module (.py).
-> /home/anpa439f/anaconda3/envs/myenv/bin/python3 /data/horse/ws/anpa439f-Function_Retrieval_Citation/Research_Project/RetrievalAugmentedGeneration/Retreival_query_based.py --skip-reindex --index /data/horse/ws/anpa439f-Function_Retrieval_Citation/Research_Project/e5_index_subset_1/index.faiss --meta /data/horse/ws/anpa439f-Function_Retrieval_Citation/Research_Project/e5_index_subset_1/meta.parquet --topk 20  (cwd=/data/horse/ws/anpa439f-Function_Retrieval_Citation/Research_Project/RetrievalAugmentedGeneration)
âœ… Top-k candidates: /data/horse/ws/anpa439f-Function_Retrieval_Citation/Research_Project/RetrievalAugmentedGeneration/outputs/topk_candidates_query.jsonl
ðŸ”— Symlinked: /data/horse/ws/anpa439f-Function_Retrieval_Citation/Research_Project/outputs/topk_candidates_query.jsonl -> /data/horse/ws/anpa439f-Function_Retrieval_Citation/Research_Project/RetrievalAugmentedGeneration/outputs/topk_candidates_query.jsonl
-> /home/anpa439f/anaconda3/envs/myenv/bin/python3 /data/horse/ws/anpa439f-Function_Retrieval_Citation/Research_Project/RetrievalAugmentedGeneration/function_based_answer-2.py --debug --max-check 10  (cwd=/data/horse/ws/anpa439f-Function_Retrieval_Citation/Research_Project/RetrievalAugmentedGeneration)

ðŸŽ‰ Pipeline complete.
  â€¢ Classified file : /data/horse/ws/anpa439f-Function_Retrieval_Citation/Research_Project/RetrievalAugmentedGeneration/classified_outputs.jsonl
  â€¢ TopK (canonical): /data/horse/ws/anpa439f-Function_Retrieval_Citation/Research_Project/RetrievalAugmentedGeneration/outputs/topk_candidates_query.jsonl
  â€¢ Final outputs   : /data/horse/ws/anpa439f-Function_Retrieval_Citation/Research_Project/RetrievalAugmentedGeneration/outputs
